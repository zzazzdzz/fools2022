# fools2022 - autogenerated map file, please do not change!
# created from: pokeemerald/data/maps/x043A_TooMuchWater/map.json

.thumb
.include "include/constants.inc"
.org MAP_LOAD_BASE

.include "include/macros.inc"
.include "include/symbols.inc"
.include "include/map.inc"
.include "include/event.inc"
.include "include/save.inc"

TooMuchWater_MapHeader:
    .word TooMuchWater_MapLayout
    .word TooMuchWater_MapEvts
    .word NULL
    .word NULL
    .hword MUS_RG_ROUTE3
    .hword 0
    .byte 0
    .byte 0
    .byte WEATHER_NONE
    .byte 0
    .hword 0
    map_header_flags allow_cycling=1, allow_escaping=1, allow_running=1, show_map_name=1
    .byte 0
    # additional data specific to fools2022 maps
    .word TooMuchWater_MapInitCode+1
    .word TooMuchWater_MapConnections
    .word TooMuchWater_MapInitScript
    .word TooMuchWater_MapName
    .word 0x1000

TooMuchWater_MapLayout:
    .word 30
    .word 18
    .word TooMuchWater_MapBorder
    .word TooMuchWater_MapData
    .word gTileset_General
    .word gTileset_Rustboro

.align 4
TooMuchWater_MapObjectEvents:
    object_event 1, OBJ_EVENT_GFX_GIRL_2, 0, 18, 6, 3, MOVEMENT_TYPE_WANDER_DOWN_AND_UP, 0, 2, TRAINER_TYPE_NONE, 0, TooMuchWater_Script1, 0
    object_event 2, OBJ_EVENT_GFX_MANIAC, 0, 7, 8, 3, MOVEMENT_TYPE_FACE_UP, 0, 0, TRAINER_TYPE_NONE, 0, TooMuchWater_Script2, 0

.align 4
TooMuchWater_MapCoordEvents:
TooMuchWater_WarpCoordEvents:
    coord_event 22, 12, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 22, 13, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 22, 14, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 22, 15, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT

.align 4
TooMuchWater_MapBGEvents:
    bg_event 3, 12, 0, BG_EVENT_PLAYER_FACING_ANY, TooMuchWater_NuclearThing1
    bg_event 7, 3, 0, BG_EVENT_PLAYER_FACING_ANY, TooMuchWater_NuclearThing2
    bg_event 8, 11, 0, BG_EVENT_PLAYER_FACING_ANY, TooMuchWater_NuclearThing3
    bg_event 13, 8, 0, BG_EVENT_PLAYER_FACING_ANY, TooMuchWater_NuclearThing4

.align 4
TooMuchWater_MapEvts:
    map_events 2, TooMuchWater_MapObjectEvents, 0, 0, 4, TooMuchWater_MapCoordEvents, 4, TooMuchWater_MapBGEvents

.align 4
TooMuchWater_MapBorder:
    .byte 0xd4, 0x01, 0xd5, 0x01, 0xdc, 0x01, 0xdd, 0x01

.align 4
TooMuchWater_MapData:
    .hword 0xa5d4, 0xa5d5, 0xc5d4, 0xb5d5, 0xb5d4, 0xc5d5, 0xb5d4, 0xc5d5, 0xc5d4, 0xa5d5, 0xa5d4, 0xa5d5, 0xa5d4, 0xc5d5, 0xb5d4, 0xb5d5, 0xa5d4, 0xb5d5, 0xb5d4, 0xa5d5, 0xc5d4, 0xb5d5, 0xc5d4, 0xc5d5, 0xc5d4, 0xb5d5, 0xa5d4, 0xc5d5, 0xa5d4, 0xa5d5
    .hword 0xb5dc, 0xb5dd, 0xc5e6, 0xa5e7, 0xc5e6, 0xa5e7, 0xc5e6, 0xc5e7, 0xa5e6, 0xc5e7, 0xa5e6, 0xc5e7, 0xa5e6, 0xc5e7, 0xa5e6, 0xc5e7, 0xc5e6, 0xc5e7, 0xb5dc, 0xb5dd, 0xc5dc, 0xc5dd, 0xb5dc, 0xa5dd, 0xa5dc, 0xb5dd, 0xc5dc, 0xc5dd, 0xa5dc, 0xa5dd
    .hword 0xb5d4, 0xb5d5, 0x1188, 0x1189, 0x1189, 0x1189, 0x1189, 0x1189, 0x1189, 0x118a, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x31d0, 0x31d2, 0xb5d4, 0xb5d5, 0xa5d4, 0xb5d5, 0xb5d4, 0xa5d5, 0xc5d4, 0xa5d5, 0xc5d4, 0xc5d5, 0xb5d4, 0xb5d5
    .hword 0xa5dc, 0xa5dd, 0x1190, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x31d0, 0x31d9, 0x31da, 0xb5e6, 0xb5e7, 0xa5dc, 0xa5dd, 0xc5dc, 0xb5dd, 0xc5dc, 0xc5dd, 0xb5dc, 0xb5dd, 0xa5dc, 0xc5dd
    .hword 0xa5d4, 0xa5d5, 0x1190, 0x1170, 0x3346, 0x3347, 0x1170, 0x1170, 0x1170, 0x119a, 0x1189, 0x118a, 0x300d, 0x300d, 0x31d0, 0x31d9, 0x31d9, 0x31d9, 0x31d1, 0x31d2, 0xa5d4, 0xb5d5, 0xa5d4, 0xa5d5, 0xa5d4, 0xa5d5, 0xb5d4, 0xa5d5, 0xc5d4, 0xb5d5
    .hword 0xc5dc, 0xa5dd, 0x1190, 0x1170, 0x3346, 0x3347, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0x300d, 0x300d, 0x31e0, 0x31e1, 0x31e1, 0x31d9, 0x31d9, 0x31da, 0xc5dc, 0xc5dd, 0xb5dc, 0xa5dd, 0xa5dc, 0xa5dd, 0xb5dc, 0xb5dd, 0xb5dc, 0xb5dd
    .hword 0xa5d4, 0xc5d5, 0x1190, 0x1170, 0x3346, 0x3347, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x119a, 0x1189, 0x118a, 0xb40e, 0xb40f, 0x3004, 0x31e0, 0x31d9, 0x31da, 0xc5d4, 0xa5d5, 0xb5d4, 0xa5d5, 0xc5d4, 0xb5d5, 0xc5d4, 0xa5d5, 0xc5d4, 0xb5d5
    .hword 0xc5dc, 0xa5dd, 0x1190, 0x1170, 0x3346, 0x3347, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0xb4c7, 0xa4c7, 0x3001, 0x3004, 0x31d8, 0x31da, 0xb5dc, 0xb5dd, 0xc5dc, 0xc5dd, 0xc5dc, 0xa5dd, 0xb5dc, 0xb5dd, 0xb5dc, 0xa5dd
    .hword 0xa5d4, 0xb5d5, 0x1190, 0x1170, 0x326e, 0x326e, 0x326e, 0x326e, 0x326e, 0x326e, 0x326e, 0x326e, 0x1170, 0x1192, 0xb4c7, 0xa4c7, 0x3001, 0x3001, 0x31d8, 0x31da, 0xb5d4, 0xc5d5, 0xc5d4, 0xa5d5, 0xa5d4, 0xc5d5, 0xc5d4, 0xc5d5, 0xa5d4, 0xa5d5
    .hword 0xa5dc, 0xa5dd, 0x1190, 0x1170, 0x326d, 0x326d, 0x326d, 0x326d, 0x326d, 0x326d, 0x326d, 0x326d, 0x1170, 0x1192, 0xa416, 0xb417, 0x3001, 0x3001, 0x31e0, 0x31e2, 0xa5e6, 0xc5e7, 0xb5dc, 0xb5dd, 0xa5dc, 0xa5dd, 0xa5dc, 0xc5dd, 0xb5dc, 0xa5dd
    .hword 0xa5d4, 0xc5d5, 0x1190, 0x1170, 0x1276, 0x1276, 0x1276, 0x1276, 0x1276, 0x1276, 0x3346, 0x3347, 0x1170, 0x1192, 0x300d, 0x300d, 0x3001, 0x3001, 0x3004, 0x3001, 0x3001, 0x3001, 0xa5d4, 0xb5d5, 0xb5d4, 0xa5d5, 0xa5d4, 0xc5d5, 0xc5d4, 0xc5d5
    .hword 0xa5dc, 0xc5dd, 0x1190, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x3346, 0x3347, 0x1170, 0x1192, 0x300d, 0x300d, 0x3001, 0x3001, 0x3001, 0x3004, 0x3001, 0x3001, 0xc5e6, 0xb5e7, 0xc5e6, 0xb5e7, 0xb5e6, 0xb5e7, 0xa5e6, 0xa5e7
    .hword 0xb5d4, 0xc5d5, 0x1190, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0x3002, 0x3002, 0x3002, 0x3002, 0x3001, 0x3001, 0x3118, 0x3119, 0x3119, 0x3119, 0x3119, 0x311a, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001
    .hword 0xb5dc, 0xa5dd, 0x1190, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0x3001, 0x3001, 0x3001, 0x3004, 0x3001, 0x3001, 0x3128, 0x3129, 0x3129, 0x3129, 0x3121, 0x3121, 0x3119, 0x3119, 0x3119, 0x3119, 0x3119, 0x3119, 0x3119, 0x3119
    .hword 0xb5d4, 0xb5d5, 0x1190, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0x300d, 0x300d, 0x300d, 0x300d, 0x3001, 0x3001, 0x3004, 0x3001, 0x3001, 0x3001, 0x3128, 0x3129, 0x3129, 0x3129, 0x3129, 0x3129, 0x3129, 0x3129, 0x3129, 0x3129
    .hword 0xa5dc, 0xa5dd, 0x31e8, 0x31e9, 0x31e8, 0x31e9, 0x31e8, 0x31e9, 0x31e8, 0x31e9, 0x31c6, 0x31c7, 0x31c6, 0x31c7, 0x31c6, 0x31c7, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0x31ce, 0x31cf
    .hword 0xc5d4, 0xc5d5, 0xb5d4, 0xa5d5, 0xb5d4, 0xa5d5, 0xa5d4, 0xa5d5, 0xa5d4, 0xa5d5, 0xb5d4, 0xb5d5, 0xb5d4, 0xb5d5, 0xa5d4, 0xa5d5, 0xc5d4, 0xb5d5, 0xc5d4, 0xa5d5, 0xa5d4, 0xc5d5, 0xb5d4, 0xb5d5, 0xc5d4, 0xb5d5, 0xc5d4, 0xb5d5, 0xc5d4, 0xa5d5
    .hword 0xa5dc, 0xc5dd, 0xc5dc, 0xa5dd, 0xb5dc, 0xb5dd, 0xb5dc, 0xa5dd, 0xb5dc, 0xa5dd, 0xa5dc, 0xb5dd, 0xa5dc, 0xa5dd, 0xc5dc, 0xb5dd, 0xa5dc, 0xb5dd, 0xa5dc, 0xa5dd, 0xb5dc, 0xa5dd, 0xa5dc, 0xa5dd, 0xc5dc, 0xc5dd, 0xa5dc, 0xa5dd, 0xb5dc, 0xb5dd

.align 4
TooMuchWater_MapConnections:
    .hword 807
    .byte 135, 138
    .hword 807
    .byte 135, 138
    .hword 807
    .byte 135, 138
    .hword 1082
    .byte 135, 138

.align 4
TooMuchWater_MapName:
    .string "TOO MUCH WATER$"

# scripts/043A_TooMuchWater.s

.align 4

TooMuchWater_MapInitCode:
    ldr r0, =zSkipMapExitMovement
    mov r1, #2
    strb r1, [r0]
    bx lr

.align 4
.ltorg

TooMuchWater_MapInitScript:
    end

TooMuchWater_Script1:
    lock
    faceplayer
    msgbox TooMuchWater_Script1_Text
    release
    end

TooMuchWater_Script1_Text:
    .string "I once tried to get through the\n"
    .string "Lost Woods, but I kept losing my way.\p"
    .string "Looks like I'll never reach the Eastern\n"
    .string "Edge, unless I come up with something...$"

TooMuchWater_Script2:
    lock
    faceplayer
    checkflag FLAG_DELIVERED_MICROSCOPIC_THINGS
    goto_if TRUE, TooMuchWater_Script2_Finished
    checkflag 0x0011
    goto_if FALSE, TooMuchWater_Script2_Incomplete
    checkflag 0x0012
    goto_if FALSE, TooMuchWater_Script2_Incomplete
    checkflag 0x0013
    goto_if FALSE, TooMuchWater_Script2_Incomplete
    checkflag 0x0014
    goto_if FALSE, TooMuchWater_Script2_Incomplete
    setflag FLAG_DELIVERED_MICROSCOPIC_THINGS
    message TooMuchWater_Script2_Success_Text
    waitmessage
    playfanfare MUS_RG_OBTAIN_KEY_ITEM
    waitfanfare
    call SyncProgressScript
    release
    end
TooMuchWater_Script2_Incomplete:
    msgbox TooMuchWater_Script2_Text
    release
    end
TooMuchWater_Script2_Finished:
    msgbox TooMuchWater_Script2_Finish_Text
    release
    end

TooMuchWater_Script2_Text:
    .string "Oh hey, could you perhaps help me out\n"
    .string "a little bit?\p"
    .string "I had some microscopic nuclear things\n"
    .string "in my back pocket, and I dropped 'em...\p"
    .string "Could you help me find them? I lost\n"
    .string "four of them in the waters.$"

TooMuchWater_Script2_Success_Text:
    .string "Yes! You found all of my microscopic\n"
    .string "nuclear things! Thank you!$"

TooMuchWater_NuclearThingFound_Text:
    .string "You found a microscopic nuclear thing!\n"
    .string "You put it in your back pocket.$"

TooMuchWater_NuclearThingPostFound_Text:
    .string "You feel warmth. That's probably due\n"
    .string "to all the fusion... or fission.$"

TooMuchWater_NuclearThingGone_Text:
    .string "The water here is quite warm, but\n"
    .string "there's nothing to be found.$"

TooMuchWater_Script2_Finish_Text:
    .string "It's good to have all of my\n"
    .string "microscopic nuclear things back.\l"
    .string "I needed them for my tnetennba.$"

TooMuchWater_NuclearThing1:
    lock
    checkflag 0x0011
    setflag 0x0011
    goto TooMuchWater_NuclearThingCommon

TooMuchWater_NuclearThing2:
    lock
    checkflag 0x0012
    setflag 0x0012
    goto TooMuchWater_NuclearThingCommon

TooMuchWater_NuclearThing3:
    lock
    checkflag 0x0013
    setflag 0x0013
    goto TooMuchWater_NuclearThingCommon

TooMuchWater_NuclearThing4:
    lock
    checkflag 0x0014
    setflag 0x0014
    goto TooMuchWater_NuclearThingCommon

TooMuchWater_NuclearThingCommon:
    goto_if TRUE, TooMuchWater_NuclearThingGone
    checkflag FLAG_DELIVERED_MICROSCOPIC_THINGS
    goto_if TRUE, TooMuchWater_NuclearThingGone
    playfanfare MUS_OBTAIN_ITEM
    message TooMuchWater_NuclearThingFound_Text
    waitmessage
    waitfanfare
    msgbox TooMuchWater_NuclearThingPostFound_Text
    release
    end
TooMuchWater_NuclearThingGone:
    msgbox TooMuchWater_NuclearThingGone_Text
    release
    end


