# fools2022 - autogenerated map file, please do not change!
# created from: pokeemerald/data/maps/x1E92_TinyCavern/map.json

.thumb
.include "include/constants.inc"
.org MAP_LOAD_BASE

.include "include/macros.inc"
.include "include/symbols.inc"
.include "include/map.inc"
.include "include/event.inc"
.include "include/save.inc"

TinyCavern_MapHeader:
    .word TinyCavern_MapLayout
    .word TinyCavern_MapEvts
    .word NULL
    .word NULL
    .hword MUS_FALLARBOR
    .hword 0
    .byte 0
    .byte 0
    .byte WEATHER_NONE
    .byte 0
    .hword 0
    map_header_flags allow_cycling=1, allow_escaping=1, allow_running=1, show_map_name=1
    .byte 0
    # additional data specific to fools2022 maps
    .word TinyCavern_MapInitCode+1
    .word TinyCavern_MapConnections
    .word TinyCavern_MapInitScript
    .word TinyCavern_MapName
    .word 0x2819

TinyCavern_MapLayout:
    .word 28
    .word 20
    .word TinyCavern_MapBorder
    .word TinyCavern_MapData
    .word gTileset_Building
    .word gTileset_Cave

.align 4
TinyCavern_MapObjectEvents:
    object_event 1, OBJ_EVENT_GFX_SCIENTIST_1, 0, 20, 3, 3, MOVEMENT_TYPE_FACE_LEFT, 0, 0, TRAINER_TYPE_NONE, 0, TinyCavern_Script2, 0

.align 4
TinyCavern_MapCoordEvents:
TinyCavern_WarpCoordEvents:
    coord_event 5, 17, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT

.align 4
TinyCavern_MapBGEvents:
    bg_event 20, 11, 0, BG_EVENT_PLAYER_FACING_ANY, TinyCavern_Script1

.align 4
TinyCavern_MapEvts:
    map_events 1, TinyCavern_MapObjectEvents, 0, 0, 1, TinyCavern_MapCoordEvents, 1, TinyCavern_MapBGEvents

.align 4
TinyCavern_MapBorder:
    .byte 0x11, 0x02, 0x11, 0x02, 0x11, 0x02, 0x11, 0x02

.align 4
TinyCavern_MapData:
    .hword 0xb611, 0xa611, 0xa611, 0xa611, 0xc611, 0xa611, 0xa611, 0xb611, 0xa611, 0xa611, 0xc611, 0xc611, 0xc611, 0xa611, 0xc611, 0xb611, 0xc611, 0xb611, 0xc611, 0xa61b, 0xc619, 0xb619, 0xa619, 0xb61c, 0xa611, 0xc611, 0xb611, 0xa611
    .hword 0xa611, 0xc611, 0xc611, 0xc611, 0xa611, 0xc611, 0xa611, 0xa611, 0xc611, 0xa611, 0xa611, 0xc611, 0xc611, 0xa611, 0xc611, 0xa611, 0xa611, 0xb611, 0xc611, 0xb612, 0xb602, 0xc603, 0xa61f, 0xb610, 0xb611, 0xc611, 0xc611, 0xa611
    .hword 0xa611, 0xc611, 0xc611, 0xc611, 0xb611, 0xc611, 0xb611, 0xa611, 0xc611, 0xa611, 0xc611, 0xc611, 0xb611, 0xb611, 0xc611, 0xa611, 0xb611, 0xc611, 0xb611, 0xb612, 0x3201, 0x3201, 0xc627, 0xa610, 0xb611, 0xc611, 0xa611, 0xb611
    .hword 0xb611, 0xb611, 0xa611, 0xa611, 0xa611, 0xa611, 0xa611, 0xb611, 0xa611, 0xa611, 0xb611, 0xb611, 0xc611, 0xa611, 0xa611, 0xa611, 0xa611, 0xc611, 0xb611, 0xa612, 0x3201, 0x3201, 0x3201, 0xc618, 0xa619, 0xb61c, 0xa611, 0xb611
    .hword 0xb611, 0xc611, 0xc611, 0xb611, 0xa611, 0xc611, 0xb611, 0xc611, 0xb611, 0xb611, 0xb611, 0xb611, 0xc611, 0xb611, 0xc611, 0xa611, 0xc611, 0xc611, 0xc611, 0xb612, 0xb61f, 0x3201, 0x3201, 0x3201, 0xa602, 0xb610, 0xa611, 0xa611
    .hword 0xb611, 0xc611, 0xa611, 0xc611, 0xc611, 0xa611, 0xc611, 0xb611, 0xc611, 0xb611, 0xc611, 0xa611, 0xb611, 0xb611, 0xa611, 0xc611, 0xc611, 0xb611, 0xc61b, 0xc61a, 0xa627, 0x3201, 0x3201, 0x3201, 0xa61f, 0xb610, 0xa611, 0xc611
    .hword 0xa611, 0xa611, 0xc611, 0xb611, 0xb611, 0xa611, 0xb611, 0xb611, 0xc611, 0xa611, 0xa611, 0xa611, 0xc611, 0xc611, 0xb611, 0xc611, 0xb611, 0xa611, 0xc612, 0xc61f, 0x3201, 0x3201, 0x3201, 0x3201, 0xb627, 0xa618, 0xc61c, 0xb611
    .hword 0xa611, 0xc611, 0xa611, 0xb611, 0xb611, 0xb611, 0xa611, 0xb611, 0xb611, 0xc61b, 0xc619, 0xc619, 0xa619, 0xb61c, 0xa611, 0xa61b, 0xa619, 0xa619, 0xc61a, 0xb627, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xa603, 0xb610, 0xa611
    .hword 0xa611, 0xb611, 0xb611, 0xc611, 0xb611, 0xc611, 0xc61b, 0xa619, 0xb619, 0xb61a, 0xc61f, 0xc602, 0xb603, 0xb610, 0xa611, 0xc612, 0xa61f, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xa610, 0xb611
    .hword 0xc611, 0xa611, 0xc611, 0xc611, 0xb611, 0xb61b, 0xa61a, 0xc602, 0x3201, 0xc603, 0xc627, 0x3201, 0x3201, 0xa610, 0xb611, 0xa612, 0xc627, 0x3201, 0x3201, 0xc608, 0xc609, 0xc60a, 0x3201, 0x3201, 0x3201, 0x3201, 0xb610, 0xc611
    .hword 0xa611, 0xa611, 0xa611, 0xc61b, 0xa619, 0xb61a, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xb618, 0xb619, 0xc61a, 0x3201, 0x3201, 0x3201, 0xc610, 0xb611, 0xb612, 0x3201, 0x3201, 0x3201, 0xb61f, 0xc610, 0xb611
    .hword 0xa611, 0xc611, 0xb61b, 0xb61a, 0xa603, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xc618, 0xb635, 0xb61a, 0x3201, 0x3201, 0xb602, 0xa627, 0xb610, 0xb611
    .hword 0xb611, 0xc611, 0xb612, 0xc61f, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xc61f, 0xc608, 0xa609, 0xa611
    .hword 0xb611, 0xa611, 0xb612, 0xb627, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xb602, 0x3201, 0xa602, 0xb603, 0x3201, 0x3201, 0xb603, 0xa61f, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xb603, 0xc627, 0xa610, 0xa611, 0xb611
    .hword 0xa611, 0xa611, 0xc612, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xc603, 0xc602, 0xb608, 0xa609, 0xc609, 0xb609, 0xb609, 0xc609, 0xa60a, 0xa627, 0xc602, 0xa603, 0x3201, 0x3201, 0x3201, 0xa608, 0xb609, 0xa609, 0xb611, 0xc611
    .hword 0xb611, 0xc611, 0xb612, 0x3201, 0x3201, 0x3201, 0x3201, 0x3201, 0xc608, 0xa609, 0xa609, 0xb611, 0xa611, 0xa611, 0xb611, 0xb611, 0xb609, 0xa609, 0xa609, 0xa609, 0xb609, 0xc609, 0xc609, 0xa609, 0xa611, 0xc611, 0xc611, 0xb611
    .hword 0xa611, 0xa611, 0xa612, 0xa602, 0x3201, 0x3201, 0x3201, 0xc603, 0xb610, 0xa611, 0xa611, 0xc611, 0xc611, 0xb611, 0xa611, 0xa611, 0xb611, 0xb611, 0xc611, 0xc611, 0xa611, 0xa611, 0xa611, 0xa611, 0xb611, 0xc611, 0xc611, 0xb611
    .hword 0xa611, 0xa611, 0xb609, 0xc60a, 0x3201, 0x3201, 0x3201, 0xc608, 0xc609, 0xc611, 0xb611, 0xa611, 0xb611, 0xb611, 0xc611, 0xa611, 0xc611, 0xa611, 0xb611, 0xc611, 0xa611, 0xa611, 0xc611, 0xb611, 0xb611, 0xb611, 0xc611, 0xa611
    .hword 0xc611, 0xb611, 0xc611, 0xc609, 0xa658, 0xa659, 0xc65a, 0xb609, 0xa611, 0xb611, 0xa611, 0xc611, 0xa611, 0xb611, 0xb611, 0xb611, 0xa611, 0xb611, 0xb611, 0xb611, 0xc611, 0xa611, 0xc611, 0xb611, 0xa611, 0xa611, 0xa611, 0xc611
    .hword 0xb611, 0xb611, 0xa611, 0xc611, 0xa611, 0xa611, 0xa611, 0xb611, 0xb611, 0xb611, 0xa611, 0xa611, 0xc611, 0xb611, 0xb611, 0xa611, 0xb611, 0xb611, 0xa611, 0xb611, 0xa611, 0xc611, 0xb611, 0xc611, 0xa611, 0xa611, 0xc611, 0xa611

.align 4
TinyCavern_MapConnections:
    .hword 7731
    .byte 17, 19

.align 4
TinyCavern_MapName:
    .string "TINY CAVERN$"

# scripts/1E92_TinyCavern.s

.align 4

TinyCavern_MapInitCode:
    ldr r0, =zSkipMapExitMovement
    mov r1, #2
    strb r1, [r0]
    bx lr

.align 4
.ltorg

TinyCavern_MapInitScript:
    end

TinyCavern_Script2:
    lock
    faceplayer
    checkflag FLAG_TINY_CAVERN_AMBER
    goto_if TRUE, TinyCavern_Script2_Done
    msgbox TinyCavern_Script2_Text
    setflag FLAG_ALTERING_CAVE_DOME
    message TinyCavern_Fossil_Text
    waitmessage
    playfanfare MUS_RG_OBTAIN_KEY_ITEM
    waitfanfare
    setflag FLAG_TINY_CAVERN_AMBER
    call SyncProgressScript
    release
    end
TinyCavern_Script2_Done:
    msgbox TinyCavern_Script2_Text2
    release
    end

TinyCavern_Script2_Text:
    .string "Hi! I found this strange fossil\n"
    .string "deep inside this cave.\p"
    .string "However, fossils are really not in\n"
    .string "my area of expertise.\p"
    .string "Perhaps you'll find someone more suited\n"
    .string "for the job. Take this fossil from me!$"

TinyCavern_Script2_Text2:
    .string "I'm sure the fossil I found will be\n"
    .string "of huge value to some researcher!$"

TinyCavern_Fossil_Text:
    .string "You obtained the OLD AMBER!$"

TinyCavern_Script1:
    lock
    braillemessage TinyCavern_Script1_Braille
	waitbuttonpress
	closebraillemessage
    releaseall
    end

TinyCavern_Script1_Braille:
    .byte 13, 37, 69, 4, 2, 0
    .braille "DISA$"

TinyCavern_Script1_Text:
    .string "redacted$"
