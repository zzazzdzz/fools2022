# fools2022 - autogenerated map file, please do not change!
# created from: pokeemerald/data/maps/x482B_TrollHeadquarters/map.json

.thumb
.include "include/constants.inc"
.org MAP_LOAD_BASE

.include "include/macros.inc"
.include "include/symbols.inc"
.include "include/map.inc"
.include "include/event.inc"
.include "include/save.inc"

TrollHeadquarters_MapHeader:
    .word TrollHeadquarters_MapLayout
    .word TrollHeadquarters_MapEvts
    .word NULL
    .word NULL
    .hword MUS_RG_SEVII_CAVE
    .hword 0
    .byte 0
    .byte 0
    .byte WEATHER_NONE
    .byte 0
    .hword 0
    map_header_flags allow_cycling=1, allow_escaping=1, allow_running=1, show_map_name=1
    .byte 0
    # additional data specific to fools2022 maps
    .word TrollHeadquarters_MapInitCode+1
    .word TrollHeadquarters_MapConnections
    .word TrollHeadquarters_MapInitScript
    .word TrollHeadquarters_MapName
    .word 0x0400

TrollHeadquarters_MapLayout:
    .word 18
    .word 18
    .word TrollHeadquarters_MapBorder
    .word TrollHeadquarters_MapData
    .word gTileset_General
    .word gTileset_Petalburg

.align 4
TrollHeadquarters_MapObjectEvents:

.align 4
TrollHeadquarters_MapCoordEvents:
TrollHeadquarters_WarpCoordEvents:
    coord_event 8, 10, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 6, 11, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 7, 11, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT

.align 4
TrollHeadquarters_MapBGEvents:
    bg_event 12, 13, 0, BG_EVENT_PLAYER_FACING_ANY, TrollHeadquarters_Script1
    bg_event 11, 11, 0, BG_EVENT_PLAYER_FACING_ANY, TrollHeadquarters_Script2

.align 4
TrollHeadquarters_MapEvts:
    map_events 0, TrollHeadquarters_MapObjectEvents, 0, 0, 3, TrollHeadquarters_MapCoordEvents, 2, TrollHeadquarters_MapBGEvents

.align 4
TrollHeadquarters_MapBorder:
    .byte 0xd4, 0x01, 0xd5, 0x01, 0xdc, 0x01, 0xdd, 0x01

.align 4
TrollHeadquarters_MapData:
    .hword 0xc5d4, 0xa5d5, 0xb5d4, 0xc5d5, 0xc5d4, 0xa5d5, 0x31d8, 0x31da, 0xb5d4, 0xb5d5, 0xb5d4, 0xb5d5, 0xc5d4, 0xa5d5, 0xc5d4, 0xc5d5, 0xc5d4, 0xb5d5
    .hword 0xc5dc, 0xb5dd, 0xc5dc, 0xa5dd, 0xb5dc, 0xb5dd, 0x31d8, 0x31da, 0xc5dc, 0xc5dd, 0xa5dc, 0xb5dd, 0xc5dc, 0xa5dd, 0xb5dc, 0xa5dd, 0xc5dc, 0xc5dd
    .hword 0xa5d4, 0xa5d5, 0xc5d4, 0xc5d5, 0xb5d4, 0xc5d5, 0x31d8, 0x31da, 0xb5d4, 0xc5d5, 0xb5d4, 0xb5d5, 0xc5d4, 0xb5d5, 0xb5d4, 0xa5d5, 0xa5d4, 0xa5d5
    .hword 0xc5dc, 0xc5dd, 0xa5dc, 0xb5dd, 0xb5dc, 0xb5dd, 0x31d8, 0x31da, 0xc5dc, 0xb5dd, 0xb5dc, 0xb5dd, 0xc5dc, 0xb5dd, 0xa5dc, 0xb5dd, 0xa5dc, 0xa5dd
    .hword 0xc5d4, 0xc5d5, 0xa5d4, 0xa5d5, 0xc5d4, 0xb5d5, 0x31d8, 0x31da, 0xc5d4, 0xc5d5, 0xa5d4, 0xb5d5, 0xc5d4, 0xa5d5, 0xb5d4, 0xc5d5, 0xb5d4, 0xa5d5
    .hword 0xb5dc, 0xb5dd, 0xb5dc, 0xa5dd, 0xb5dc, 0xc5dd, 0x31d8, 0x31da, 0xa5dc, 0xc5dd, 0xb5dc, 0xb5dd, 0xa5dc, 0xc5dd, 0xc5dc, 0xb5dd, 0xa5dc, 0xa5dd
    .hword 0xa5d4, 0xb5d5, 0xb5d4, 0xb5d5, 0xc5d4, 0xa5d5, 0x31d8, 0x31da, 0xa5d4, 0xc5d5, 0xa5d4, 0xa5d5, 0xa5d4, 0xc5d5, 0xc5d4, 0xc5d5, 0xb5d4, 0xa5d5
    .hword 0xc5dc, 0xa5dd, 0xc5dc, 0xc5dd, 0xa5dc, 0xc5dd, 0x31d8, 0x31da, 0xa5dc, 0xc5dd, 0xa5e4, 0xc5e5, 0xb5e4, 0xc5e5, 0xa5e4, 0xc5e5, 0xc5dc, 0xa5dd
    .hword 0xb5d4, 0xb5d5, 0xa5d4, 0xb5d5, 0xb5d4, 0xb5d5, 0x31d8, 0x31da, 0xc5d4, 0xc5d5, 0xa60c, 0xb642, 0xb643, 0xb60d, 0xa60d, 0xa60e, 0xc5d4, 0xb5d5
    .hword 0xc5dc, 0xa5dd, 0xc5dc, 0xa5dd, 0xb5dc, 0xb5dd, 0x31d8, 0x31da, 0xa5dc, 0xb5dd, 0xb614, 0xa64a, 0xb64b, 0xa615, 0xa615, 0xb616, 0xb5dc, 0xc5dd
    .hword 0xc5d4, 0xa5d5, 0xb5d4, 0xc5d5, 0xc5d4, 0xc5d5, 0x31d8, 0x31da, 0xb5d4, 0xb5d5, 0xb61c, 0xa641, 0xc62e, 0xc60f, 0xb62e, 0xc61f, 0xc5d4, 0xb5d5
    .hword 0xb5dc, 0xb5dd, 0xb5dc, 0xa5dd, 0xb5dc, 0xc5dd, 0x31d8, 0x31da, 0xc5e4, 0xb5e5, 0xb624, 0xb649, 0xa636, 0xc617, 0xb636, 0xa627, 0xb5dc, 0xc5dd
    .hword 0xc5d4, 0xa5d5, 0xa5d4, 0xb5d5, 0xa5d4, 0xb5d5, 0x31d8, 0x31da, 0x3001, 0x3001, 0x31d0, 0x31d2, 0x3001, 0x3001, 0x3001, 0x3001, 0xb5d4, 0xa5d5
    .hword 0xb5dc, 0xa5dd, 0xb5dc, 0xc5dd, 0xc5dc, 0xc5dd, 0x31d8, 0x31d9, 0x31d1, 0x31d1, 0x31d9, 0x31da, 0xb403, 0x3001, 0x31ce, 0x31cf, 0xb5dc, 0xb5dd
    .hword 0xb5d4, 0xb5d5, 0xc5d4, 0xa5d5, 0xa5d4, 0xc5d5, 0x31e0, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e2, 0x3001, 0x3001, 0xc5d4, 0xc5d5, 0xb5d4, 0xc5d5
    .hword 0xc5dc, 0xc5dd, 0xc5dc, 0xb5dd, 0xb5dc, 0xb5dd, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0x31ce, 0x31cf, 0xc5dc, 0xc5dd, 0xa5dc, 0xc5dd
    .hword 0xa5d4, 0xc5d5, 0xb5d4, 0xb5d5, 0xc5d4, 0xc5d5, 0xa5d4, 0xa5d5, 0xc5d4, 0xb5d5, 0xb5d4, 0xc5d5, 0xa5d4, 0xc5d5, 0xb5d4, 0xc5d5, 0xc5d4, 0xb5d5
    .hword 0xc5dc, 0xa5dd, 0xc5dc, 0xb5dd, 0xa5dc, 0xb5dd, 0xa5dc, 0xc5dd, 0xc5dc, 0xb5dd, 0xb5dc, 0xb5dd, 0xb5dc, 0xc5dd, 0xa5dc, 0xa5dd, 0xa5dc, 0xc5dd

.align 4
TrollHeadquarters_MapConnections:
    .hword 0x472b
    .byte 7, 154
    .hword 0x472b
    .byte 7, 154
    .hword 0x472b
    .byte 7, 154

.align 4
TrollHeadquarters_MapName:
    .string "TEAM MAGMA HQ$"

# scripts/482B_TrollHeadquarters.s

.align 4

TrollHeadquarters_MapInitCode:
    bx lr

TrollHeadquarters_SetTargetMap:
    ldr r0, =zWarpTargetData
    ldr r1, =0x13154889
    str r1, [r0]
    ldr r0, =zWarpTargetDirection
    mov r1, #1
    strb r1, [r0]
    bx lr

.align 4
.ltorg

TrollHeadquarters_MapInitScript:
    end

TrollHeadquarters_Script1:
    lock
    msgbox TrollHeadquarters_Script1_Text
    release
    end

TrollHeadquarters_Script1_Text:
    .string "PRIVATE PROPERTY\n"
    .string "KEEP OUT\l"
    .string "DEFINITELY NOT SUSPICIOUS$"

TrollHeadquarters_Script2:
    lock
    checkflag FLAG_POT_OF_GREED
    goto_if TRUE, TrollHeadquarters_Script2_UsePotOfGreedAndDrawTwoAdditionalCardsFromYourDeckAndAddThemToYourHand
    msgbox TrollHeadquarters_Script2_Text
    release
    end

TrollHeadquarters_Script2_UsePotOfGreedAndDrawTwoAdditionalCardsFromYourDeckAndAddThemToYourHand:
    msgbox TrollHeadquarters_Script2_Text2
    callnative TrollHeadquarters_SetTargetMap
    goto WARP_SCRIPT

TrollHeadquarters_Script2_Text:
    .string "Looks like a special card is\n"
    .string "required to enter.$"

TrollHeadquarters_Script2_Text2:
    .string "Looks like a special card is\n"
    .string "required to enter.\p"
    .string "You use the Pot of Greed magic card,\n"
    .string "which lets you draw two additional\l"
    .string "cards from your deck and add them to\l"
    .string "your hand.\p"
    .string "One of the drawn cards conveniently\n"
    .string "worked for opening the door!$"

