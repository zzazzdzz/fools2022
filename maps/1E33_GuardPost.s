# fools2022 - autogenerated map file, please do not change!
# created from: pokeemerald/data/maps/x1E33_GuardPost/map.json

.thumb
.include "include/constants.inc"
.org MAP_LOAD_BASE

.include "include/macros.inc"
.include "include/symbols.inc"
.include "include/map.inc"
.include "include/event.inc"
.include "include/save.inc"

GuardPost_MapHeader:
    .word GuardPost_MapLayout
    .word GuardPost_MapEvts
    .word NULL
    .word NULL
    .hword MUS_RG_ROUTE1
    .hword 0
    .byte 0
    .byte 0
    .byte WEATHER_NONE
    .byte 0
    .hword 0
    map_header_flags allow_cycling=1, allow_escaping=1, allow_running=1, show_map_name=1
    .byte 0
    # additional data specific to fools2022 maps
    .word GuardPost_MapInitCode+1
    .word GuardPost_MapConnections
    .word GuardPost_MapInitScript
    .word GuardPost_MapName
    .word 0x0003

GuardPost_MapLayout:
    .word 27
    .word 32
    .word GuardPost_MapBorder
    .word GuardPost_MapData
    .word gTileset_General
    .word gTileset_Mauville

.align 4
GuardPost_MapObjectEvents:
    object_event 1, OBJ_EVENT_GFX_MAN_3, 0, 2, 9, 3, MOVEMENT_TYPE_NONE, 0, 0, TRAINER_TYPE_NONE, 0, GuardPost_Script2, 0
    object_event 2, OBJ_EVENT_GFX_CONTEST_JUDGE, 0, 13, 10, 3, MOVEMENT_TYPE_NONE, 0, 0, TRAINER_TYPE_NONE, 0, GuardPost_Script1, 0

.align 4
GuardPost_MapCoordEvents:
    coord_event 13, 11, 0, SCRIPT_NO_TRIGGER, 0, GuardPost_CheckPermit
    coord_event 13, 12, 0, SCRIPT_NO_TRIGGER, 0, GuardPost_CheckPermit
    coord_event 13, 13, 0, SCRIPT_NO_TRIGGER, 0, GuardPost_CheckPermit
GuardPost_WarpCoordEvents:
    coord_event 19, 10, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 19, 11, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 19, 12, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 19, 13, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 19, 14, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 19, 15, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 17, 19, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 9, 7, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 8, 7, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 7, 7, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT
    coord_event 6, 7, 0, SCRIPT_WARP_TRIGGER, 0, WARP_SCRIPT

.align 4
GuardPost_MapBGEvents:

.align 4
GuardPost_MapEvts:
    map_events 2, GuardPost_MapObjectEvents, 0, 0, 14, GuardPost_MapCoordEvents, 0, GuardPost_MapBGEvents

.align 4
GuardPost_MapBorder:
    .byte 0xd4, 0x01, 0xd5, 0x01, 0xdc, 0x01, 0xdd, 0x01

.align 4
GuardPost_MapData:
    .hword 0xc5d4, 0xc5d5, 0xc5d4, 0xb5d5, 0xc5d4, 0xa5d5, 0x3001, 0x31d8, 0x31da, 0x3001, 0xa688, 0xb5d4, 0xb5d5, 0xa5d4, 0xc5d5, 0xa5d4, 0xb5d5, 0xa5d4, 0xc5d5, 0xb5d4, 0xa5d5, 0xc5d4, 0xb5d5, 0xb5d4, 0xb5d5, 0xa5d4, 0xb5d5
    .hword 0xc5dc, 0xc5dd, 0xa5dc, 0xc5dd, 0xb5dc, 0xb5dd, 0x3001, 0x31d8, 0x31da, 0x3001, 0xb688, 0xc5dc, 0xb5dd, 0xa5dc, 0xc5dd, 0xc5dc, 0xb5dd, 0xa5dc, 0xb5dd, 0xa5dc, 0xb5dd, 0xb5dc, 0xa5dd, 0xa5dc, 0xb5dd, 0xc5dc, 0xb5dd
    .hword 0xc5d4, 0xb5d5, 0xb5d4, 0xc5d5, 0xc5d4, 0xc5d5, 0x3001, 0x31d8, 0x31da, 0x3001, 0xa688, 0xb5d4, 0xc5d5, 0xc5d4, 0xb5d5, 0xa5d4, 0xa5d5, 0xc5d4, 0xa5d5, 0xc5d4, 0xa5d5, 0xc5d4, 0xa5d5, 0xb5d4, 0xc5d5, 0xa5d4, 0xb5d5
    .hword 0xa5dc, 0xb5dd, 0xb5dc, 0xb5dd, 0xc5dc, 0xa5dd, 0x3001, 0x31d8, 0x31da, 0x3001, 0xa688, 0xb5dc, 0xb5dd, 0xa5dc, 0xc5dd, 0xc5dc, 0xa5dd, 0xa5dc, 0xa5dd, 0xc5dc, 0xa5dd, 0xa5dc, 0xc5dd, 0xc5dc, 0xc5dd, 0xc5dc, 0xa5dd
    .hword 0xb5d4, 0xb5d5, 0xb5d4, 0xc5d5, 0xa5d4, 0xa5d5, 0x3001, 0x31d8, 0x31da, 0x3001, 0xb688, 0xa5d4, 0xc5d5, 0xc5d4, 0xc5d5, 0xa5d4, 0xb5d5, 0xb5d4, 0xc5d5, 0xb5d4, 0xa5d5, 0xb5d4, 0xb5d5, 0xc5d4, 0xb5d5, 0xb5d4, 0xa5d5
    .hword 0xc5e4, 0xc5dd, 0xb5e4, 0xb5e5, 0xc5e4, 0xc5e5, 0x3001, 0x31d8, 0x31da, 0x3001, 0xa688, 0xa5e4, 0xb5e5, 0xc5e4, 0xc5e5, 0xb5e4, 0xc5e5, 0xa5e4, 0xb5e5, 0xa5e4, 0xc5e5, 0xc5e4, 0xc5e5, 0xa5e4, 0xa5e5, 0xc5e4, 0xb5e5
    .hword 0xc680, 0xa691, 0xb691, 0xb691, 0xc691, 0xc682, 0x3001, 0x31d8, 0x31da, 0x3001, 0xb688, 0xc408, 0xb409, 0xb409, 0xc409, 0xa40a, 0xc691, 0xa691, 0xb691, 0xc691, 0xa691, 0xa691, 0xa691, 0xb691, 0xc691, 0xc691, 0xb691
    .hword 0xa688, 0x3004, 0x3001, 0x3001, 0x3001, 0xc68a, 0x3001, 0x31d8, 0x31da, 0x3001, 0xc688, 0xc410, 0xa411, 0xa411, 0xb411, 0xc412, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001
    .hword 0xc688, 0x3001, 0x3001, 0x3004, 0x3001, 0xb68a, 0x3001, 0x31d8, 0x31da, 0x3001, 0xc688, 0xa418, 0xb40c, 0xb40c, 0xc40c, 0xc41a, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001
    .hword 0xa688, 0x3001, 0x3001, 0x3001, 0x3001, 0xb6b1, 0x3001, 0x31d8, 0x31da, 0x3001, 0xb6b2, 0xc420, 0xa414, 0xa414, 0xb414, 0xc422, 0xa691, 0xc691, 0xa691, 0xa691, 0xa691, 0xc691, 0xc691, 0xc691, 0xb691, 0xb691, 0xa691
    .hword 0xb688, 0x3001, 0x3004, 0x3001, 0x3001, 0x3001, 0x3001, 0x31d8, 0x31da, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d
    .hword 0xa688, 0x3001, 0x3001, 0x3001, 0x3004, 0x3001, 0x3001, 0x31d8, 0x31da, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d
    .hword 0xb688, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x3001, 0x31d8, 0x31d9, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1, 0x31d1
    .hword 0xc690, 0xc691, 0xc691, 0xb691, 0xb691, 0xc691, 0xb691, 0x31e0, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1, 0x31e1
    .hword 0xb468, 0xc469, 0xb469, 0xc469, 0xa469, 0xa469, 0xa469, 0xb469, 0xb46a, 0x1188, 0x1189, 0x1189, 0x118a, 0xa6ba, 0x3001, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d
    .hword 0xc470, 0xc471, 0xc471, 0xc471, 0xb471, 0xb471, 0xc471, 0xb471, 0xa472, 0x1190, 0x1170, 0x1170, 0x1192, 0xa6b2, 0x3001, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d, 0x300d
    .hword 0xb470, 0xb471, 0xc471, 0xa471, 0xc471, 0xb471, 0xc471, 0xa471, 0xb472, 0x1190, 0x1170, 0x1170, 0x1192, 0xb468, 0xa469, 0xb469, 0xb469, 0xc469, 0xa469, 0xa469, 0xa469, 0xb469, 0xa469, 0xc469, 0xc46a, 0xc691, 0xa691
    .hword 0xb470, 0xc471, 0xc471, 0xa471, 0xb471, 0xa471, 0xc471, 0xc471, 0xb472, 0x1190, 0x1170, 0x1170, 0x1192, 0xa470, 0xc471, 0xa46b, 0xc46c, 0xa46c, 0xa46c, 0xc46c, 0xc46c, 0xc46c, 0xb46c, 0xc46d, 0xa472, 0xc5ce, 0xb5cf
    .hword 0xb470, 0xa471, 0xa471, 0xa471, 0xa471, 0xb471, 0xa471, 0xb471, 0xc472, 0x1190, 0x1170, 0x1170, 0x1192, 0xb470, 0xc471, 0xb47b, 0xb47c, 0xc49f, 0xa47c, 0xb47c, 0xb489, 0xc471, 0xa471, 0xa475, 0xb472, 0xc5d4, 0xb5d5
    .hword 0xc470, 0xa471, 0xa471, 0xc471, 0xb471, 0xb471, 0xb471, 0xa471, 0xb472, 0x1190, 0x1170, 0x1170, 0x1192, 0xc478, 0xb479, 0xb479, 0xc479, 0x30a7, 0xc479, 0xb489, 0xc473, 0xb471, 0xc471, 0xc475, 0xa472, 0xb5dc, 0xa5dd
    .hword 0xc470, 0xc471, 0xa471, 0xc471, 0xa471, 0xb471, 0xb471, 0xb471, 0xc472, 0x1190, 0x1170, 0x1170, 0x119a, 0x1189, 0x118a, 0x3001, 0x3001, 0x3001, 0x3001, 0xc470, 0xc473, 0xc471, 0xb471, 0xc475, 0xa472, 0xa5d4, 0xa5d5
    .hword 0xb470, 0xa471, 0xb471, 0xa471, 0xc471, 0xc471, 0xa471, 0xc471, 0xb472, 0x1190, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0x3001, 0x3004, 0x3001, 0x3001, 0xb470, 0xb473, 0xa471, 0xc471, 0xb475, 0xa472, 0xa5dc, 0xa5dd
    .hword 0xa470, 0xb471, 0xc471, 0xa471, 0xb471, 0xc471, 0xc471, 0xa471, 0xb472, 0x1190, 0x1170, 0x1170, 0x1170, 0x1170, 0x1192, 0x3001, 0x3001, 0x3004, 0x3001, 0xa470, 0xb473, 0xa471, 0xb471, 0xa475, 0xa472, 0xa5d4, 0xb5d5
    .hword 0xc470, 0xa471, 0xb471, 0xb471, 0xc471, 0xc471, 0xb471, 0xa471, 0xa472, 0xc534, 0xb534, 0xb534, 0xb534, 0xc534, 0xc534, 0xa549, 0xb549, 0xa549, 0xa549, 0xc470, 0xa473, 0xa471, 0xa471, 0xa475, 0xb472, 0xa5dc, 0xc5dd
    .hword 0xc470, 0xb471, 0xb471, 0xb471, 0xa471, 0xb471, 0xc471, 0xb471, 0xa471, 0xc469, 0xa469, 0xa469, 0xc469, 0xa469, 0xc469, 0xc469, 0xa469, 0xb469, 0xc469, 0xa471, 0xa473, 0xa471, 0xc471, 0xc475, 0xb472, 0xa5d4, 0xb5d5
    .hword 0xc470, 0xc471, 0xb471, 0xc46b, 0xb46c, 0xb46c, 0xc46c, 0xa46c, 0xc46c, 0xb46c, 0xc46c, 0xc46c, 0xa46c, 0xa46c, 0xb46c, 0xa46c, 0xb46c, 0xc46c, 0xc46c, 0xb46c, 0xc471, 0xb471, 0xa471, 0xb475, 0xc472, 0xc5dc, 0xa5dd
    .hword 0xc470, 0xb471, 0xb471, 0xb473, 0xc471, 0xc471, 0xc471, 0xc471, 0xa471, 0xc471, 0xa471, 0xb471, 0xb471, 0xb471, 0xa471, 0xb471, 0xc471, 0xc471, 0xc471, 0xa471, 0xb471, 0xb471, 0xb471, 0xa475, 0xa472, 0xb5d4, 0xb5d5
    .hword 0xb470, 0xa471, 0xc471, 0xc473, 0xa471, 0xb471, 0xb471, 0xa471, 0xa471, 0xb471, 0xc471, 0xb471, 0xb471, 0xb471, 0xc471, 0xa471, 0xa471, 0xb471, 0xb471, 0xb471, 0xc471, 0xa471, 0xc471, 0xa475, 0xc472, 0xc5dc, 0xb5dd
    .hword 0xb470, 0xa471, 0xb471, 0xb473, 0xb471, 0xa471, 0xc471, 0xb471, 0xc471, 0xb471, 0xa471, 0xb471, 0xc471, 0xb471, 0xa471, 0xc471, 0xa471, 0xb471, 0xc471, 0xc471, 0xb471, 0xb471, 0xa471, 0xc475, 0xc472, 0xa5d4, 0xb5d5
    .hword 0xc470, 0xa471, 0xc471, 0xc473, 0xa471, 0xa471, 0xa471, 0xc471, 0xa471, 0xa471, 0xb471, 0xa471, 0xc471, 0xa471, 0xc471, 0xb471, 0xc471, 0xa471, 0xb471, 0xc471, 0xa471, 0xb471, 0xa471, 0xc475, 0xa472, 0xa5dc, 0xb5dd
    .hword 0xa470, 0xb471, 0xb471, 0xc473, 0xa471, 0xb471, 0xb471, 0xb471, 0xc471, 0xa471, 0xa471, 0xc471, 0xa471, 0xb471, 0xa471, 0xc471, 0xc471, 0xc471, 0xc471, 0xa471, 0xa471, 0xc471, 0xa471, 0xc475, 0xb472, 0xa5d4, 0xc5d5
    .hword 0xa470, 0xa471, 0xc471, 0xc473, 0xa471, 0xa471, 0xa471, 0xb471, 0xa471, 0xb471, 0xb471, 0xc471, 0xa471, 0xc471, 0xc471, 0xb471, 0xa471, 0xa471, 0xc471, 0xb471, 0xb471, 0xc471, 0xb471, 0xc475, 0xc472, 0xa5dc, 0xb5dd

.align 4
GuardPost_MapConnections:
    .hword 0x1f3a
    .byte 135, 136
    .hword 0x1f3a
    .byte 135, 136
    .hword 0x1f3a
    .byte 135, 136
    .hword 0x1f3a
    .byte 135, 136
    .hword 0x1f3a
    .byte 135, 136
    .hword 0x1f3a
    .byte 135, 136
    .hword 7826
    .byte 5, 145
    .hword 0x1d3b
    .byte 15, 161
    .hword 0x1d3b
    .byte 15, 161
    .hword 0x1d3b
    .byte 15, 161
    .hword 0x1d3b
    .byte 15, 161

.align 4
GuardPost_MapName:
    .string "GUARD POST$"

# scripts/1E33_GuardPost.s

.align 4

GuardPost_MapInitCode:
    # fix the Deliria music hook
    ldr r0, =0xe3a03301
    ldr r1, =IntrMain_Buffer
    str r0, [r1]
    bx lr

GuardPost_MapInitScript:
    end

GuardPost_Script1:
    lock
    faceplayer
    msgbox GuardPost_Script1_Text
    release
    end

GuardPost_Script1_Text:
    .string "I'm sorry, Deliria is only accessible\n"
    .string "with a special permit.$"

GuardPost_Script2:
    lock
    faceplayer
    msgbox GuardPost_Script2_Text
    release
    end

GuardPost_Script2_Text:
    .string "I wanted to visit my friends in Deliria,\n"
    .string "but I don't have a permit.\p"
    .string "I heard some shady guy in Northern\n"
    .string "Glitchland gives out forged permits.\p"
    .string "This might be the only chance to see\n"
    .string "my friends again...$"

GuardPost_CheckPermit:
    checkflag FLAG_PERMIT_CHECKED
    goto_if TRUE, GuardPost_CheckPermit_End
    lock
    checkflag FLAG_DELIRIA_PERMIT
    goto_if FALSE, GuardPost_CheckPermit_NoPermit
    message GuardPost_CheckPermit_Text1
    waitmessage
    playfanfare MUS_RG_OBTAIN_KEY_ITEM
    waitfanfare
    setflag FLAG_PERMIT_CHECKED
GuardPost_CheckPermit_End:
    release
    end
GuardPost_CheckPermit_NoPermit:
    msgbox GuardPost_CheckPermit_Text2
    closemessage
    delay 16
    applymovement 0xff, GuardPost_CheckPermit_Back
    waitmovement 0xff
    release
    end
GuardPost_CheckPermit_Back:
    walk_left
    step_end

GuardPost_CheckPermit_Text1:
    .string "Excuse me - Deliria is only\n"
    .string "available with a special permit.\p"
    .string "Oh, you have a permit?\n"
    .string "Let me see...\p"
    .string "Alright, everything's good.\n"
    .string "You can enter. Glory to Arstotzka!$"

GuardPost_CheckPermit_Text2:
    .string "Excuse me - Deliria is only\n"
    .string "available with a special permit.$"

