function getInt8Array(e){try{return new Int8Array(e)}catch(t){return getArray(e)}}function getUint8Array(e){try{return new Uint8Array(e)}catch(t){return getArray(e)}}function getUint8View(e){try{return new Uint8Array(e.buffer)}catch(e){return null}}function getSharedUint8Array(e){try{return new SharedUint8Array(e)}catch(t){return new Uint8Array(new SharedArrayBuffer(e))}}function getInt16Array(e){try{return new Int16Array(e)}catch(t){return getArray(e)}}function getUint16Array(e){try{return new Uint16Array(e)}catch(t){return getArray(e)}}function getUint16View(e){try{return new Uint16Array(e.buffer)}catch(e){return null}}function getInt32Array(e){try{return new Int32Array(e)}catch(t){return getArray(e)}}function getInt32View(e){try{return new Int32Array(e.buffer)}catch(e){return null}}function getInt32ViewCustom(e,t,i){try{return(e=getInt32View(e)).subarray(t,i)}catch(r){try{return e.slice(t,i)}catch(e){return null}}}function getSharedInt32Array(e){try{return new SharedInt32Array(e)}catch(t){return new Int32Array(new SharedArrayBuffer(e<<2))}}function getUint8ViewCustom(e,t,i){try{return(e=getUint8View(e)).subarray(t,i)}catch(r){try{return e.slice(t,i)}catch(e){return null}}}function getUint32Array(e){try{return new Uint32Array(e)}catch(t){return getArray(e)}}function getSharedUint32Array(e){try{return new SharedUint32Array(e)}catch(t){return new Uint32Array(new SharedArrayBuffer(e<<2))}}function getFloat32Array(e){try{return new Float32Array(e)}catch(t){return getArray(e)}}function getSharedFloat32Array(e){try{return new SharedFloat32Array(e)}catch(t){return new Float32Array(new SharedArrayBuffer(e<<2))}}function getArray(e){for(var t=[],i=0;i<e;++i)t[i]=0;return t}var __VIEWS_SUPPORTED__=null!==getUint16View(getInt32Array(1)),__LITTLE_ENDIAN__=function(){if(__VIEWS_SUPPORTED__){var e=getInt32Array(1);if(e[0]=1,1==getUint16View(e)[0])return!0}return!1}();function GameBoyAdvanceCartridge(e){this.IOCore=e}function GameBoyAdvanceDMA(e){this.IOCore=e}function GameBoyAdvanceEmulator(){this.settings={SKIPBoot:!1,audioBufferUnderrunLimit:100,audioBufferDynamicLimit:32,audioBufferSize:300,emulatorSpeed:1,metricCollectionMinimum:500,dynamicSpeed:!1,overclockBlockLimit:200,offthreadGfxEnabled:!0},this.audioFound=0,this.emulatorStatus=16,this.BIOS=[],this.ROM=[],this.audioUpdateState=1,this.saveExportHandler=null,this.saveImportHandler=null,this.speedCallback=null,this.playStatusCallback=null,this.startCallbacks=[],this.endCallbacks=[],this.terminationCallbacks=[],this.timerIntervalRate=16,this.lastTimestamp=0,this.dynamicSpeedRefresh=!1,this.calculateTimings(),this.generateCoreExposed()}function GameBoyAdvanceGraphics(e){this.IOCore=e}function GameBoyAdvanceIO(e,t,i,r){this.systemStatus=0,this.cyclesToIterate=0,this.cyclesOveriteratedPreviously=0,this.accumulatedClocks=0,this.graphicsClocks=0,this.timerClocks=0,this.serialClocks=0,this.nextEventClocks=0,this.SKIPBoot=!!e,this.coreExposed=t,this.BIOS=i,this.ROM=r,this.memory=new GameBoyAdvanceMemory(this),this.dma=new GameBoyAdvanceDMA(this),this.dmaChannel0=new GameBoyAdvanceDMA0(this),this.dmaChannel1=new GameBoyAdvanceDMA1(this),this.dmaChannel2=new GameBoyAdvanceDMA2(this),this.dmaChannel3=new GameBoyAdvanceDMA3(this),this.gfxState=new GameBoyAdvanceGraphics(this),this.gfxRenderer=new GameBoyAdvanceRendererProxy(this),this.sound=new GameBoyAdvanceSound(this),this.timer=new GameBoyAdvanceTimer(this),this.irq=new GameBoyAdvanceIRQ(this),this.serial=new GameBoyAdvanceSerial(this),this.joypad=new GameBoyAdvanceJoyPad(this),this.cartridge=new GameBoyAdvanceCartridge(this),this.saves=new GameBoyAdvanceSaves(this),this.wait=new GameBoyAdvanceWait(this),this.cpu=new GameBoyAdvanceCPU(this)}function GameBoyAdvanceMemory(e){this.IOCore=e}function generateMemoryTopLevelDispatch(){function e(e,t,i,r,a,s,o,n,h){var c="address = address | 0;var data = 0;switch (address >> 24) {";return c+="case 0:{data = this."+h+"(address | 0) | 0;break};","readUnused"!=t.slice(0,10)&&(c+="case 0x2:","readInternal"!=t.slice(0,12)&&(c+="{data = this."+t+"(address | 0) | 0;break};")),"readUnused"!=i.slice(0,10)&&(c+="case 0x3:{data = this."+i+"(address | 0) | 0;break};"),c+="case 0x4:{data = this."+r+"(address | 0) | 0;break};",c+="case 0x5:",c+="case 0x6:",c+="case 0x7:{data = this."+a+"(address | 0) | 0;break};",c+="case 0x8:",c+="case 0x9:",c+="case 0xA:",c+="case 0xB:{data = this."+s+"(address | 0) | 0;break};",c+="case 0xC:",c+="case 0xD:{data = this."+o+"(address | 0) | 0;break};",c+="case 0xE:",c+="case 0xF:{data = this."+n+"(address | 0) | 0;break};",c+="default:{data = this."+e+"("+("readUnused32"==e.slice(0,12)?"":"address | 0")+") | 0};",c+="}return data | 0;",Function("address",c)}function t(e,t,i,r,a,s){var o="address = address | 0;var data = 0;switch (address >> 24) {";return o+="case 0:{data = this."+s+"(address | 0) | 0;break};","readUnused"!=t.slice(0,10)&&(o+="case 0x2:","readInternal"!=t.slice(0,12)&&(o+="{data = this."+t+"(address | 0) | 0;break};")),"readUnused"!=i.slice(0,10)&&(o+="case 0x3:{data = this."+i+"(address | 0) | 0;break};"),o+="case 0x4:{data = this."+r+"(address | 0) | 0;break};",o+="case 0x5:",o+="case 0x6:",o+="case 0x7:{data = this."+a+"(address | 0) | 0;break};",o+="default:{data = this."+e+"("+("readUnused32"==e.slice(0,12)?"":"address | 0")+") | 0};",o+="}return data | 0;",Function("address",o)}function i(e,t,i,r,a,s,o,n){var h="address = address | 0;var data = 0;switch (address >> 24) {";return h+="case 0:{data = this."+n+"(address | 0) | 0;break};","readUnused"!=t.slice(0,10)&&(h+="case 0x2:","readInternal"!=t.slice(0,12)&&(h+="{data = this."+t+"(address | 0) | 0;break};")),"readUnused"!=i.slice(0,10)&&(h+="case 0x3:{data = this."+i+"(address | 0) | 0;break};"),h+="case 0x4:{data = this."+r+"(address | 0) | 0;break};",h+="case 0x5:",h+="case 0x6:",h+="case 0x7:{data = this."+a+"(address | 0) | 0;break};",h+="case 0x8:",h+="case 0x9:",h+="case 0xA:",h+="case 0xB:{data = this."+s+"(address | 0) | 0;break};",h+="case 0xC:",h+="case 0xD:{data = this."+o+"(address | 0) | 0;break};",h+="default:{data = this."+e+"("+("readUnused32"==e.slice(0,12)?"":"address | 0")+") | 0};",h+="}return data | 0;",Function("address",h)}function r(e,t,i,r,a,s,o){var n="address = address | 0;data = data | 0;switch (address >> 24) {";return"writeUnused"!=t&&(n+="case 0x2:","writeInternal"!=t.slice(0,13)&&(n+="{this."+t+"(address | 0, data | 0);break};")),"writeUnused"!=i&&(n+="case 0x3:{this."+i+"(address | 0, data | 0);break};"),n+="case 0x4:{this."+r+"(address | 0, data | 0);break};",n+="case 0x5:",n+="case 0x6:",n+="case 0x7:{this."+a+"(address | 0, data | 0);break};",n+="case 0x8:",n+="case 0x9:",n+="case 0xA:",n+="case 0xB:",n+="case 0xC:",n+="case 0xD:{this."+s+"(address | 0, data | 0);break};",n+="case 0xE:",n+="case 0xF:{this."+o+"(address | 0, data | 0);break};",n+="default:{this."+e+"()}",n+="}",Function("address","data",n)}function a(e,t,i,r,a,s,o,n,h){var c="address = address | 0;data = data | 0;switch (address >> 24) {";return"writeUnused"!=t&&(c+="case 0x2:","writeInternal"!=t.slice(0,13)&&(c+="{this."+t+"(address | 0, data | 0);break};")),"writeUnused"!=i&&(c+="case 0x3:{this."+i+"(address | 0, data | 0);break};"),c+="case 0x4:{this."+r+"(address | 0, data | 0);break};",c+="case 0x5:{this."+a+"(address | 0, data | 0);break};",c+="case 0x6:{this."+s+"(address | 0, data | 0);break};",c+="case 0x7:{this."+o+"(address | 0, data | 0);break};",c+="case 0x8:",c+="case 0x9:",c+="case 0xA:",c+="case 0xB:",c+="case 0xC:",c+="case 0xD:{this."+n+"(address | 0, data | 0);break};",c+="case 0xE:",c+="case 0xF:{this."+h+"(address | 0, data | 0);break};",c+="default:{this."+e+"()}",c+="}",Function("address","data",c)}function s(e,t,i,r,a,s,o){var n="address = address | 0;data = data | 0;switch (address >> 24) {";return"writeUnused"!=t&&(n+="case 0x2:","writeInternal"!=t.slice(0,13)&&(n+="{this."+t+"(address | 0, data | 0);break};")),"writeUnused"!=i&&(n+="case 0x3:{this."+i+"(address | 0, data | 0);break};"),n+="case 0x4:{this."+r+"(address | 0, data | 0);break};",n+="case 0x5:{this."+a+"(address | 0, data | 0);break};",n+="case 0x6:{this."+s+"(address | 0, data | 0);break};",n+="case 0x7:{this."+o+"(address | 0, data | 0);break};",n+="default:{this."+e+"()}",n+="}",Function("address","data",n)}function o(e,t,i,r,a,s,o,n){var h="address = address | 0;data = data | 0;switch (address >> 24) {";return"writeUnused"!=t&&(h+="case 0x2:","writeInternal"!=t.slice(0,13)&&(h+="{this."+t+"(address | 0, data | 0);break};")),"writeUnused"!=i&&(h+="case 0x3:{this."+i+"(address | 0, data | 0);break};"),h+="case 0x4:{this."+r+"(address | 0, data | 0);break};",h+="case 0x5:{this."+a+"(address | 0, data | 0);break};",h+="case 0x6:{this."+s+"(address | 0, data | 0);break};",h+="case 0x7:{this."+o+"(address | 0, data | 0);break};",h+="case 0x8:",h+="case 0x9:",h+="case 0xA:",h+="case 0xB:",h+="case 0xC:",h+="case 0xD:{this."+n+"(address | 0, data | 0);break};",h+="default:{this."+e+"()}",h+="}",Function("address","data",h)}GameBoyAdvanceMemory.prototype.memoryRead8Generated=[e("readUnused8","readInternalWRAM8","readInternalWRAM8","readIODispatch8","readVRAM8Preliminary","readROM8","readROM28","readSRAM8","readBIOS8"),e("readUnused8","readExternalWRAM8","readInternalWRAM8","readIODispatch8","readVRAM8Preliminary","readROM8","readROM28","readSRAM8","readBIOS8"),e("readUnused8","readUnused8","readUnused8","readIODispatch8","readVRAM8Preliminary","readROM8","readROM28","readSRAM8","readBIOS8")],GameBoyAdvanceMemory.prototype.memoryWrite8Generated=[r("writeUnused","writeInternalWRAM8","writeInternalWRAM8","writeIODispatch8","writeVRAM8Preliminary","writeROM8","writeSRAM8"),r("writeUnused","writeExternalWRAM8","writeInternalWRAM8","writeIODispatch8","writeVRAM8Preliminary","writeROM8","writeSRAM8"),r("writeUnused","writeUnused","writeUnused","writeIODispatch8","writeVRAM8Preliminary","writeROM8","writeSRAM8")],GameBoyAdvanceMemory.prototype.memoryRead16Generated=[e("readUnused16","readInternalWRAM16","readInternalWRAM16","readIODispatch16","readVRAM16Preliminary","readROM16","readROM216","readSRAM16","readBIOS16"),e("readUnused16","readExternalWRAM16","readInternalWRAM16","readIODispatch16","readVRAM16Preliminary","readROM16","readROM216","readSRAM16","readBIOS16"),e("readUnused16","readUnused16","readUnused16","readIODispatch16","readVRAM16Preliminary","readROM16","readROM216","readSRAM16","readBIOS16")],GameBoyAdvanceMemory.prototype.memoryReadDMA16Generated=[t("readUnused16DMA","readInternalWRAM16","readInternalWRAM16","readIODispatch16","readVRAM16Preliminary","readBIOS16DMA"),t("readUnused16DMA","readExternalWRAM16","readInternalWRAM16","readIODispatch16","readVRAM16Preliminary","readBIOS16DMA"),t("readUnused16DMA","readUnused16DMA","readUnused16DMA","readIODispatch16","readVRAM16Preliminary","readBIOS16DMA")],GameBoyAdvanceMemory.prototype.memoryReadDMA16FullGenerated=[i("readUnused16DMA","readInternalWRAM16","readInternalWRAM16","readIODispatch16","readVRAM16Preliminary","readROM16","readROM216","readBIOS16DMA"),i("readUnused16DMA","readExternalWRAM16","readInternalWRAM16","readIODispatch16","readVRAM16Preliminary","readROM16","readROM216","readBIOS16DMA"),i("readUnused16DMA","readUnused16DMA","readUnused16DMA","readIODispatch16","readVRAM16Preliminary","readROM16","readROM216","readBIOS16DMA")],GameBoyAdvanceMemory.prototype.memoryReadCPU16Generated=[e("readUnused16CPU","readInternalWRAM16CPU","readInternalWRAM16CPU","readIODispatch16CPU","readVRAM16CPUPreliminary","readROM16CPU","readROM216CPU","readSRAM16CPU","readBIOS16CPU"),e("readUnused16CPU","readExternalWRAM16CPU","readInternalWRAM16CPU","readIODispatch16CPU","readVRAM16CPUPreliminary","readROM16CPU","readROM216CPU","readSRAM16CPU","readBIOS16CPU"),e("readUnused16CPU","readUnused16CPU","readUnused16CPU","readIODispatch16CPU","readVRAM16CPUPreliminary","readROM16CPU","readROM216CPU","readSRAM16CPU","readBIOS16CPU")],GameBoyAdvanceMemory.prototype.memoryWrite16Generated=[a("writeUnused","writeInternalWRAM16","writeInternalWRAM16","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16","writeROM16","writeSRAM16"),a("writeUnused","writeExternalWRAM16","writeInternalWRAM16","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16","writeROM16","writeSRAM16"),a("writeUnused","writeUnused","writeUnused","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16","writeROM16","writeSRAM16")],GameBoyAdvanceMemory.prototype.memoryWriteDMA16Generated=[s("writeUnused","writeInternalWRAM16","writeInternalWRAM16","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16"),s("writeUnused","writeExternalWRAM16","writeInternalWRAM16","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16"),s("writeUnused","writeUnused","writeUnused","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16")],GameBoyAdvanceMemory.prototype.memoryWriteDMA16FullGenerated=[o("writeUnused","writeInternalWRAM16","writeInternalWRAM16","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16","writeROM16DMA"),o("writeUnused","writeExternalWRAM16","writeInternalWRAM16","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16","writeROM16DMA"),o("writeUnused","writeUnused","writeUnused","writeIODispatch16","writePalette16","writeVRAM16","writeOBJ16","writeROM16DMA")],GameBoyAdvanceMemory.prototype.memoryRead32Generated=[e("readUnused32","readInternalWRAM32","readInternalWRAM32","readIODispatch32","readVRAM32Preliminary","readROM32","readROM232","readSRAM32","readBIOS32"),e("readUnused32","readExternalWRAM32","readInternalWRAM32","readIODispatch32","readVRAM32Preliminary","readROM32","readROM232","readSRAM32","readBIOS32"),e("readUnused32","readUnused32","readUnused32","readIODispatch32","readVRAM32Preliminary","readROM32","readROM232","readSRAM32","readBIOS32")],GameBoyAdvanceMemory.prototype.memoryReadDMA32Generated=[t("readUnused32DMA","readInternalWRAM32","readInternalWRAM32","readIODispatch32","readVRAM32Preliminary","readBIOS32DMA"),t("readUnused32DMA","readExternalWRAM32","readInternalWRAM32","readIODispatch32","readVRAM32Preliminary","readBIOS32DMA"),t("readUnused32DMA","readUnused32DMA","readUnused32DMA","readIODispatch32","readVRAM32Preliminary","readBIOS32DMA")],GameBoyAdvanceMemory.prototype.memoryReadDMA32FullGenerated=[i("readUnused32DMA","readInternalWRAM32","readInternalWRAM32","readIODispatch32","readVRAM32Preliminary","readROM32","readROM232","readBIOS32DMA"),i("readUnused32DMA","readExternalWRAM32","readInternalWRAM32","readIODispatch32","readVRAM32Preliminary","readROM32","readROM232","readBIOS32DMA"),i("readUnused32DMA","readUnused32DMA","readUnused32DMA","readIODispatch32","readVRAM32Preliminary","readROM32","readROM232","readBIOS32DMA")],GameBoyAdvanceMemory.prototype.memoryReadCPU32Generated=[e("readUnused32CPU","readInternalWRAM32CPU","readInternalWRAM32CPU","readIODispatch32CPU","readVRAM32CPUPreliminary","readROM32CPU","readROM232CPU","readSRAM32CPU","readBIOS32CPU"),e("readUnused32CPU","readExternalWRAM32CPU","readInternalWRAM32CPU","readIODispatch32CPU","readVRAM32CPUPreliminary","readROM32CPU","readROM232CPU","readSRAM32CPU","readBIOS32CPU"),e("readUnused32CPU","readUnused32CPU","readUnused32CPU","readIODispatch32CPU","readVRAM32CPUPreliminary","readROM32CPU","readROM232CPU","readSRAM32CPU","readBIOS32CPU")],GameBoyAdvanceMemory.prototype.memoryWrite32Generated=[a("writeUnused","writeInternalWRAM32","writeInternalWRAM32","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32","writeROM32","writeSRAM32"),a("writeUnused","writeExternalWRAM32","writeInternalWRAM32","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32","writeROM32","writeSRAM32"),a("writeUnused","writeUnused","writeUnused","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32","writeROM32","writeSRAM32")],GameBoyAdvanceMemory.prototype.memoryWriteDMA32Generated=[s("writeUnused","writeInternalWRAM32","writeInternalWRAM32","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32"),s("writeUnused","writeExternalWRAM32","writeInternalWRAM32","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32"),s("writeUnused","writeUnused","writeUnused","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32")],GameBoyAdvanceMemory.prototype.memoryWriteDMA32FullGenerated=[o("writeUnused","writeInternalWRAM32","writeInternalWRAM32","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32","writeROM32"),o("writeUnused","writeExternalWRAM32","writeInternalWRAM32","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32","writeROM32"),o("writeUnused","writeUnused","writeUnused","writeIODispatch32","writePalette32","writeVRAM32","writeOBJ32","writeROM32")],GameBoyAdvanceMemory.prototype.memoryRead8=GameBoyAdvanceMemory.prototype.memoryRead8Generated[1],GameBoyAdvanceMemory.prototype.memoryWrite8=GameBoyAdvanceMemory.prototype.memoryWrite8Generated[1],GameBoyAdvanceMemory.prototype.memoryRead16=GameBoyAdvanceMemory.prototype.memoryRead16Generated[1],GameBoyAdvanceMemory.prototype.memoryReadDMA16=GameBoyAdvanceMemory.prototype.memoryReadDMA16Generated[1],GameBoyAdvanceMemory.prototype.memoryReadDMAFull16=GameBoyAdvanceMemory.prototype.memoryReadDMA16FullGenerated[1],GameBoyAdvanceMemory.prototype.memoryReadCPU16=GameBoyAdvanceMemory.prototype.memoryReadCPU16Generated[1],GameBoyAdvanceMemory.prototype.memoryWrite16=GameBoyAdvanceMemory.prototype.memoryWrite16Generated[1],GameBoyAdvanceMemory.prototype.memoryWriteDMA16=GameBoyAdvanceMemory.prototype.memoryWriteDMA16Generated[1],GameBoyAdvanceMemory.prototype.memoryWriteDMAFull16=GameBoyAdvanceMemory.prototype.memoryWriteDMA16FullGenerated[1],GameBoyAdvanceMemory.prototype.memoryRead32=GameBoyAdvanceMemory.prototype.memoryRead32Generated[1],GameBoyAdvanceMemory.prototype.memoryReadDMA32=GameBoyAdvanceMemory.prototype.memoryReadDMA32Generated[1],GameBoyAdvanceMemory.prototype.memoryReadDMAFull32=GameBoyAdvanceMemory.prototype.memoryReadDMA32FullGenerated[1],GameBoyAdvanceMemory.prototype.memoryReadCPU32=GameBoyAdvanceMemory.prototype.memoryReadCPU32Generated[1],GameBoyAdvanceMemory.prototype.memoryWrite32=GameBoyAdvanceMemory.prototype.memoryWrite32Generated[1],GameBoyAdvanceMemory.prototype.memoryWriteDMA32=GameBoyAdvanceMemory.prototype.memoryWriteDMA32Generated[1],GameBoyAdvanceMemory.prototype.memoryWriteDMAFull32=GameBoyAdvanceMemory.prototype.memoryWriteDMA32FullGenerated[1]}function GameBoyAdvanceIRQ(e){this.IOCore=e}function GameBoyAdvanceJoyPad(e){this.IOCore=e}function GameBoyAdvanceSerial(e){this.IOCore=e}function GameBoyAdvanceSound(e){this.IOCore=e}function GameBoyAdvanceTimer(e){this.IOCore=e}function GameBoyAdvanceWait(e){this.IOCore=e}function GameBoyAdvanceCPU(e){this.IOCore=e}function GameBoyAdvanceSaves(e){this.cartridge=e.cartridge}function GameBoyAdvanceFIFO(){this.count=0,this.position=0,this.buffer=getInt8Array(32)}function GameBoyAdvanceChannel1Synth(e){this.sound=e,this.currentSampleLeft=0,this.currentSampleRight=0,this.SweepFault=!1,this.lastTimeSweep=0,this.timeSweep=0,this.frequencySweepDivider=0,this.decreaseSweep=!1,this.nr11=0,this.CachedDuty=4026531840,this.totalLength=64,this.nr12=0,this.envelopeVolume=0,this.frequency=0,this.FrequencyTracker=32768,this.nr14=0,this.consecutive=!0,this.ShadowFrequency=32768,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0,this.Swept=!1,this.leftEnable=0,this.rightEnable=0}function GameBoyAdvanceChannel2Synth(e){this.sound=e,this.currentSampleLeft=0,this.currentSampleRight=0,this.CachedDuty=4026531840,this.totalLength=64,this.envelopeVolume=0,this.frequency=0,this.FrequencyTracker=32768,this.consecutive=!0,this.ShadowFrequency=32768,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0,this.leftEnable=0,this.rightEnable=0,this.nr21=0,this.nr22=0,this.nr23=0,this.nr24=0}function GameBoyAdvanceChannel3Synth(e){this.sound=e,this.currentSampleLeft=0,this.currentSampleRight=0,this.lastSampleLookup=0,this.canPlay=!1,this.WAVERAMBankSpecified=0,this.WAVERAMBankAccessed=32,this.WaveRAMBankSize=31,this.totalLength=256,this.patternType=4,this.frequency=0,this.FrequencyPeriod=16384,this.consecutive=!0,this.Enabled=0,this.leftEnable=0,this.rightEnable=0,this.nr30=0,this.nr31=0,this.nr32=0,this.nr33=0,this.nr34=0,this.cachedSample=0,this.PCM=getInt8Array(64),this.PCM16=getUint16View(this.PCM),this.PCM32=getInt32View(this.PCM),this.WAVERAM8=getUint8Array(32),this.WAVERAM16=getUint16View(this.WAVERAM8),this.WAVERAM32=getInt32View(this.WAVERAM8)}function GameBoyAdvanceChannel4Synth(e){this.sound=e,this.currentSampleLeft=0,this.currentSampleRight=0,this.totalLength=64,this.envelopeVolume=0,this.FrequencyPeriod=32,this.lastSampleLookup=0,this.BitRange=32767,this.VolumeShifter=15,this.currentVolume=0,this.consecutive=!0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.canPlay=!1,this.Enabled=0,this.counter=0,this.leftEnable=0,this.rightEnable=0,this.nr42=0,this.nr43=0,this.nr44=0,this.cachedSample=0,this.intializeWhiteNoise(),this.noiseSampleTable=this.LSFR15Table}function ARMInstructionSet(e){this.CPUCore=e,this.initialize()}function compileARMInstructionDecodeMap(){var e=["LDRH","MOVS2","MUL","MSR","LDRSH","MVN2","SMLAL","RSCS","CMPS","MRS","RSBS2","ADDS","SUBS","RSB","SUBS2","MULS","SMLALS","STRB","CMNS2","UMLALS","ORR2","BX","RSBS","LDRSB","LoadStoreMultiple","ANDS2","BIC","ADD2","SBC2","AND","TSTS2","MOV2","MOVS","EOR","ORRS2","RSC","LDR2","SMULLS","LDRSB2","LDRB4","BL","LDRB3","SBCS2","MVNS2","MLAS","MVN","BICS2","UMLAL","CMPS2","LDRB","RSC2","ADC2","LDRSH2","ORR","ADDS2","EOR2","STR3","UMULL","ADD","LDRH2","STRB4","LDR4","EORS","ORRS","BICS","SMULL","EORS2","B","STR","STRH","TEQS","STR2","STRH2","AND2","SUB","MVNS","ADC","ADCS","MOV","CMNS","ADCS2","TSTS","RSCS2","ANDS","STRB3","SBC","STR4","LDR","LDR3","SUB2","STRB2","SWP","TEQS2","UMULLS","BIC2","MLA","SWI","LDRB2","SBCS","RSB2","SWPB","STRT","LDRT","STRBT","LDRBT","STRT2","LDRT2","STRBT2","LDRBT2"];!function(e){var t=0,i=getUint8Array(4096);function r(r){for(var a=0;a<16;++a)i[t++]=e[r[a]]}function a(r){for(var a=e[r],s=0;s<16;++s)i[t++]=a}function s(r){for(var a=e[r],s=0;s<256;++s)i[t++]=a}r(["AND","AND2","AND","AND2","AND","AND2","AND","AND2","AND","MUL","AND","STRH","AND","UNDEFINED","AND","UNDEFINED"]),r(["ANDS","ANDS2","ANDS","ANDS2","ANDS","ANDS2","ANDS","ANDS2","ANDS","MULS","ANDS","LDRH","ANDS","LDRSB","ANDS","LDRSH"]),r(["EOR","EOR2","EOR","EOR2","EOR","EOR2","EOR","EOR2","EOR","MLA","EOR","STRH","EOR","UNDEFINED","EOR","UNDEFINED"]),r(["EORS","EORS2","EORS","EORS2","EORS","EORS2","EORS","EORS2","EORS","MLAS","EORS","LDRH","EORS","LDRSB","EORS","LDRSH"]),r(["SUB","SUB2","SUB","SUB2","SUB","SUB2","SUB","SUB2","SUB","UNDEFINED","SUB","STRH","SUB","UNDEFINED","SUB","UNDEFINED"]),r(["SUBS","SUBS2","SUBS","SUBS2","SUBS","SUBS2","SUBS","SUBS2","SUBS","UNDEFINED","SUBS","LDRH","SUBS","LDRSB","SUBS","LDRSH"]),r(["RSB","RSB2","RSB","RSB2","RSB","RSB2","RSB","RSB2","RSB","UNDEFINED","RSB","STRH","RSB","UNDEFINED","RSB","UNDEFINED"]),r(["RSBS","RSBS2","RSBS","RSBS2","RSBS","RSBS2","RSBS","RSBS2","RSBS","UNDEFINED","RSBS","LDRH","RSBS","LDRSB","RSBS","LDRSH"]),r(["ADD","ADD2","ADD","ADD2","ADD","ADD2","ADD","ADD2","ADD","UMULL","ADD","STRH","ADD","UNDEFINED","ADD","UNDEFINED"]),r(["ADDS","ADDS2","ADDS","ADDS2","ADDS","ADDS2","ADDS","ADDS2","ADDS","UMULLS","ADDS","LDRH","ADDS","LDRSB","ADDS","LDRSH"]),r(["ADC","ADC2","ADC","ADC2","ADC","ADC2","ADC","ADC2","ADC","UMLAL","ADC","STRH","ADC","UNDEFINED","ADC","UNDEFINED"]),r(["ADCS","ADCS2","ADCS","ADCS2","ADCS","ADCS2","ADCS","ADCS2","ADCS","UMLALS","ADCS","LDRH","ADCS","LDRSB","ADCS","LDRSH"]),r(["SBC","SBC2","SBC","SBC2","SBC","SBC2","SBC","SBC2","SBC","SMULL","SBC","STRH","SBC","UNDEFINED","SBC","UNDEFINED"]),r(["SBCS","SBCS2","SBCS","SBCS2","SBCS","SBCS2","SBCS","SBCS2","SBCS","SMULLS","SBCS","LDRH","SBCS","LDRSB","SBCS","LDRSH"]),r(["RSC","RSC2","RSC","RSC2","RSC","RSC2","RSC","RSC2","RSC","SMLAL","RSC","STRH","RSC","UNDEFINED","RSC","UNDEFINED"]),r(["RSCS","RSCS2","RSCS","RSCS2","RSCS","RSCS2","RSCS","RSCS2","RSCS","SMLALS","RSCS","LDRH","RSCS","LDRSB","RSCS","LDRSH"]),r(["MRS","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","SWP","UNDEFINED","STRH2","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED"]),r(["TSTS","TSTS2","TSTS","TSTS2","TSTS","TSTS2","TSTS","TSTS2","TSTS","UNDEFINED","TSTS","LDRH2","TSTS","LDRSB2","TSTS","LDRSH2"]),r(["MSR","BX","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","STRH2","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED"]),r(["TEQS","TEQS2","TEQS","TEQS2","TEQS","TEQS2","TEQS","TEQS2","TEQS","UNDEFINED","TEQS","LDRH2","TEQS","LDRSB2","TEQS","LDRSH2"]),r(["MRS","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","SWPB","UNDEFINED","STRH2","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED"]),r(["CMPS","CMPS2","CMPS","CMPS2","CMPS","CMPS2","CMPS","CMPS2","CMPS","UNDEFINED","CMPS","LDRH2","CMPS","LDRSB2","CMPS","LDRSH2"]),r(["MSR","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED","STRH2","UNDEFINED","UNDEFINED","UNDEFINED","UNDEFINED"]),r(["CMNS","CMNS2","CMNS","CMNS2","CMNS","CMNS2","CMNS","CMNS2","CMNS","UNDEFINED","CMNS","LDRH2","CMNS","LDRSB2","CMNS","LDRSH2"]),r(["ORR","ORR2","ORR","ORR2","ORR","ORR2","ORR","ORR2","ORR","UNDEFINED","ORR","STRH2","ORR","UNDEFINED","ORR","UNDEFINED"]),r(["ORRS","ORRS2","ORRS","ORRS2","ORRS","ORRS2","ORRS","ORRS2","ORRS","UNDEFINED","ORRS","LDRH2","ORRS","LDRSB2","ORRS","LDRSH2"]),r(["MOV","MOV2","MOV","MOV2","MOV","MOV2","MOV","MOV2","MOV","UNDEFINED","MOV","STRH2","MOV","UNDEFINED","MOV","UNDEFINED"]),r(["MOVS","MOVS2","MOVS","MOVS2","MOVS","MOVS2","MOVS","MOVS2","MOVS","UNDEFINED","MOVS","LDRH2","MOVS","LDRSB2","MOVS","LDRSH2"]),r(["BIC","BIC2","BIC","BIC2","BIC","BIC2","BIC","BIC2","BIC","UNDEFINED","BIC","STRH2","BIC","UNDEFINED","BIC","UNDEFINED"]),r(["BICS","BICS2","BICS","BICS2","BICS","BICS2","BICS","BICS2","BICS","UNDEFINED","BICS","LDRH2","BICS","LDRSB2","BICS","LDRSH2"]),r(["MVN","MVN2","MVN","MVN2","MVN","MVN2","MVN","MVN2","MVN","UNDEFINED","MVN","STRH2","MVN","UNDEFINED","MVN","UNDEFINED"]),r(["MVNS","MVNS2","MVNS","MVNS2","MVNS","MVNS2","MVNS","MVNS2","MVNS","UNDEFINED","MVNS","LDRH2","MVNS","LDRSB2","MVNS","LDRSH2"]),a("AND"),a("ANDS"),a("EOR"),a("EORS"),a("SUB"),a("SUBS"),a("RSB"),a("RSBS"),a("ADD"),a("ADDS"),a("ADC"),a("ADCS"),a("SBC"),a("SBCS"),a("RSC"),a("RSCS"),a("UNDEFINED"),a("TSTS"),a("MSR"),a("TEQS"),a("UNDEFINED"),a("CMPS"),a("MSR"),a("CMNS"),a("ORR"),a("ORRS"),a("MOV"),a("MOVS"),a("BIC"),a("BICS"),a("MVN"),a("MVNS"),a("STR"),a("LDR"),a("STRT"),a("LDRT"),a("STRB"),a("LDRB"),a("STRBT"),a("LDRBT"),a("STR"),a("LDR"),a("STRT"),a("LDRT"),a("STRB"),a("LDRB"),a("STRBT"),a("LDRBT"),a("STR4"),a("LDR4"),a("STR4"),a("LDR4"),a("STRB4"),a("LDRB4"),a("STRB4"),a("LDRB4"),a("STR4"),a("LDR4"),a("STR4"),a("LDR4"),a("STRB4"),a("LDRB4"),a("STRB4"),a("LDRB4"),function(){for(var r=["STR2","LDR2","STRT2","LDRT2","STRB2","LDRB2","STRBT2","LDRBT2"],a=0;a<16;++a)for(var s=0;s<16;++s)i[t++]=0==(1&s)?e[r[7&a]]:e.UNDEFINED}(),function(){for(var r=["STR3","LDR3","STRB3","LDRB3"],a=0;a<16;++a)for(var s=0;s<16;++s)i[t++]=0==(1&s)?e[r[a>>1&2|1&a]]:e.UNDEFINED}(),function(r){for(var a=e[r],s=0;s<512;++s)i[t++]=a}("LoadStoreMultiple"),s("B"),s("BL"),function(r){for(var a=e[r],s=0;s<768;++s)i[t++]=a}("UNDEFINED"),s("SWI"),ARMInstructionSet.prototype.instructionMap=i}(function(){for(var t={},i=0|e.length,r="switch (this.instructionMap[((this.execute >> 16) & 0xFF0) | ((this.execute >> 4) & 0xF)] & 0xFF) {",a=0;(0|a)<(0|i);a=1+(0|a)|0){var s=e[0|a];t[s]=0|a,r+="case "+(0|a)+":{this."+s+"();break};"}return r+="default:{this.UNDEFINED()}}",t.UNDEFINED=0|a,ARMInstructionSet.prototype.executeDecoded=Function(r),t}())}function THUMBInstructionSet(e){this.CPUCore=e,this.initialize()}function compileTHUMBInstructionDecodeMap(){var e=0,t=getUint8Array(1024);function i(i){for(var r=0;r<32;++r)t[e++]=i}function r(i){for(var r=0;r<8;++r)t[e++]=i}function a(i){for(var r=0;r<4;++r)t[e++]=i}function s(i,r,a,s){t[e++]=i,t[e++]=r,t[e++]=a,t[e++]=s}i(6),i(7),i(30),r(12),r(18),r(11),r(60),i(8),i(0),i(17),i(42),s(4,59,55,57),s(69,71,72,43),s(48,46,9,75),s(21,31,66,68),s(82,61,27,77),s(82,58,63,78),s(82,2,16,54),s(37,49,82,82),i(15),r(74),r(35),r(79),r(65),r(70),r(36),r(76),r(44),i(20),i(3),i(45),i(5),i(28),i(22),i(13),i(10),i(64),i(67),a(39),a(82),a(82),a(82),a(41),a(40),a(82),a(82),a(82),a(82),a(82),a(82),a(26),a(56),a(82),a(82),i(50),i(53),a(1),a(24),a(23),a(19),a(73),a(62),a(80),a(81),a(47),a(51),a(25),a(38),a(34),a(29),a(82),a(52),i(14),i(82),i(32),i(33),THUMBInstructionSet.prototype.instructionMap=t}function ARMCPSRAttributeTable(){var e=0,t=1,i=0,r=0;return{setNegative:function(t){e=0|(t|=0)},setNegativeFalse:function(){e=0},getNegative:function(){return 0|e},setZero:function(e){t=0|(e|=0)},setZeroTrue:function(){t=0},setZeroFalse:function(){t=1},getZero:function(){return 0|t},setOverflowTrue:function(){r=-1},setOverflowFalse:function(){r=0},getOverflow:function(){return 0|r},setCarry:function(e){i=0|(e|=0)},setCarryFalse:function(){i=0},getCarry:function(){return 0|i},getCarryReverse:function(){return 0|~i},checkConditionalCode:function(a){switch((a|=0)>>>29|0){case 4:if(0==(0|t)){a=-1;break}case 1:a=~i;break;case 2:a=~e;break;case 3:a=~r;break;case 6:if(0==(0|t)){a=-1;break}case 5:a=e^r;break;case 0:if(0!=(0|t)){a=-1;break}default:a=0}return 0|a},setNZInt:function(i){e=0|(i|=0),t=0|i},setNZCV:function(a){e=0|(a|=0),t=1073741824&~a,i=a<<2,r=a<<3},getNZCV:function(){var a=0;return a=2147483648&e,0==(0|t)&&(a|=1073741824),a|=i>>>31<<29,0|(a|=r>>>31<<28)},setADDFlags:function(a,s){return t=0|(e=(0|(a|=0))+(0|(s|=0))|0),i=e>>>0<a>>>0?-1:0,r=~(a^s)&(a^e),0|e},setADCFlags:function(a,s){return t=0|(e=(0|(e=(0|(a|=0))+(0|(s|=0))|0))+(i>>>31)|0),e>>>0<a>>>0?i=-1:e>>>0>a>>>0&&(i=0),r=~(a^s)&(a^e),0|e},setSUBFlags:function(a,s){return t=0|(e=(0|(a|=0))-(0|(s|=0))|0),i=a>>>0>=s>>>0?-1:0,r=(a^s)&(a^e),0|e},setSBCFlags:function(a,s){return t=0|(e=(0|(e=(0|(a|=0))-(0|(s|=0))|0))-(~i>>>31)|0),e>>>0<a>>>0?i=-1:e>>>0>a>>>0&&(i=0),r=(a^s)&(a^e),0|e},setCMPFlags:function(a,s){t=0|(e=(0|(a|=0))-(0|(s|=0))|0),i=a>>>0>=s>>>0?-1:0,r=(a^s)&(a^e)},setCMNFlags:function(a,s){t=0|(e=(0|(a|=0))+(0|(s|=0))|0),i=e>>>0<a>>>0?-1:0,r=~(a^s)&(a^e)},BGE:function(){return e^r|0}}}function GameBoyAdvanceGraphicsRenderer(e,t){this.coreExposed=e,this.initializeIO(!!t),this.initializePaletteStorage(),this.generateRenderers(),this.initializeRenderers()}function GameBoyAdvanceGraphicsRendererOffthread(e){this.initializeIO(!!e),this.initializePaletteStorage(),this.generateRenderers(),this.initializeRenderers()}function getGameBoyAdvanceGraphicsRenderer(e,t){if(!e.offthreadGfxEnabled()||"function"!=typeof SharedArrayBuffer||"object"!=typeof Atomics)return new GameBoyAdvanceGraphicsRenderer(e,t);try{return new GameBoyAdvanceGraphicsRendererShim(e,t)}catch(i){return new GameBoyAdvanceGraphicsRenderer(e,t)}}function GameBoyAdvanceGraphicsRendererShim(e,t){this.coreExposed=e,this.initializeWorker(t),this.appendAtomicSync(),this.initializeBuffers(),this.shareStaticBuffers(),this.shareDynamicBuffers()}function GameBoyAdvanceRendererProxy(e){this.IOCore=e}function GameBoyAdvanceBGTEXTRenderer(e,t){t|=0,this.gfx=e,this.BGLayer=0|t}function GameBoyAdvanceBG2FrameBufferRenderer(e){this.gfx=e}function GameBoyAdvanceBGMatrixRenderer(e){this.gfx=e}function GameBoyAdvanceAffineBGRenderer(e,t){t|=0,this.gfx=e,this.BGLayer=0|t,this.offset=256+(this.BGLayer<<8)|0}function GameBoyAdvanceColorEffectsRenderer(e){this.effectsTarget1=0,this.colorEffectsType=0,this.effectsTarget2=0,this.initialize(e)}function GameBoyAdvanceMosaicRenderer(e){this.BGMosaicHSize=0,this.BGMosaicVSize=0,this.OBJMosaicHSize=0,this.OBJMosaicVSize=0,this.buffer=e}function GameBoyAdvanceOBJRenderer(e){this.gfx=e}"object"==typeof Atomics&&("function"==typeof Atomics.futexWait&&void 0===Atomics.wait?(Atomics.wait=Atomics.futexWait,Atomics.notify=Atomics.futexWake):"function"==typeof Atomics.wake&&void 0===Atomics.notify&&(Atomics.notify=Atomics.wake)),GameBoyAdvanceCartridge.prototype.initialize=function(){this.flash_is128=!1,this.flash_isAtmel=!1,this.ROM=this.getROMArray(this.IOCore.ROM),this.ROM16=getUint16View(this.ROM),this.ROM32=getInt32View(this.ROM),this.decodeName(),this.decodeFlashType()},GameBoyAdvanceCartridge.prototype.getROMArray=function(e){this.ROMLength=Math.min(e.length>>2<<2,33554432),this.EEPROMStart=(0|this.ROMLength)>16777216?Math.max(0|this.ROMLength,33554176):16777216;for(var t=getUint8Array(0|this.ROMLength),i=0;(0|i)<(0|this.ROMLength);i=1+(0|i)|0)t[0|i]=0|e[0|i];return t},GameBoyAdvanceCartridge.prototype.decodeName=function(){if(this.name="GUID_",(0|this.ROMLength)>=192)for(var e=172;(0|e)<179;e=1+(0|e)|0)(0|this.ROM[0|e])>0?this.name+=String.fromCharCode(0|this.ROM[0|e]):this.name+="_"},GameBoyAdvanceCartridge.prototype.decodeFlashType=function(){this.flash_is128=!1,this.flash_isAtmel=!1;for(var e=0,t=255&"F".charCodeAt(0),i=255&"L".charCodeAt(0),r=255&"A".charCodeAt(0),a=255&"S".charCodeAt(0),s=255&"H".charCodeAt(0),o=255&"_".charCodeAt(0),n=255&"5".charCodeAt(0),h=255&"1".charCodeAt(0),c=255&"2".charCodeAt(0),d=255&"M".charCodeAt(0),u=255&"V".charCodeAt(0),p=(0|this.ROM.length)-12|0,l=0;(0|l)<(0|p);l=4+(0|l)|0)if((0|this.ROM[0|l])==(0|t)&&(0|this.ROM[1|l])==(0|i)&&(0|this.ROM[2|l])==(0|r)&&(0|this.ROM[3|l])==(0|a)){var f=4+(0|l)|0;if((0|this.ROM[0|f])==(0|s))if((0|this.ROM[1|f])==(0|o))(0|this.ROM[2|f])==(0|u)&&(e|=1);else if((0|this.ROM[1|f])==(0|n))(0|this.ROM[2|f])==(0|h)&&(0|this.ROM[3|f])==(0|c)&&(f=4+(0|f)|0,(0|this.ROM[0|f])==(0|o)&&(0|this.ROM[1|f])==(0|u)&&(e|=2));else if((0|this.ROM[1|f])==(0|h)&&(0|this.ROM[2|f])==(0|d)&&(0|this.ROM[3|f])==(0|o)&&(f=4+(0|f)|0,(0|this.ROM[0|f])==(0|u))){e|=4;break}}this.flash_is128=(0|e)>=4,this.flash_isAtmel=(0|e)<=1},GameBoyAdvanceCartridge.prototype.readROMOnly8=function(e){var t=0;return(0|(e|=0))<(0|this.ROMLength)&&(t=0|this.ROM[33554431&e]),0|t},__LITTLE_ENDIAN__?(GameBoyAdvanceCartridge.prototype.readROMOnly16=function(e){var t=0;return(0|(e|=0))<(0|this.ROMLength)&&(t=0|this.ROM16[e>>1&16777215]),0|t},GameBoyAdvanceCartridge.prototype.readROMOnly32=function(e){var t=0;return(0|(e|=0))<(0|this.ROMLength)&&(t=0|this.ROM32[e>>2&8388607]),0|t}):(GameBoyAdvanceCartridge.prototype.readROMOnly16=function(e){var t=0;return(0|(e|=0))<(0|this.ROMLength)&&(t=this.ROM[e]|this.ROM[1|e]<<8),0|t},GameBoyAdvanceCartridge.prototype.readROMOnly32=function(e){var t=0;return(0|(e|=0))<(0|this.ROMLength)&&(t=this.ROM[e]|this.ROM[1|e]<<8|this.ROM[2|e]<<16|this.ROM[3|e]<<24),0|t}),GameBoyAdvanceCartridge.prototype.readROM8=function(e){return 0|((0|(e|=0))>201?0|this.readROMOnly8(0|e):0|this.IOCore.saves.readGPIO8(0|e))},GameBoyAdvanceCartridge.prototype.readROM16=function(e){return 0|((0|(e|=0))>201?0|this.readROMOnly16(0|e):0|this.IOCore.saves.readGPIO16(0|e))},GameBoyAdvanceCartridge.prototype.readROM32=function(e){return 0|((0|(e|=0))>201?0|this.readROMOnly32(0|e):0|this.IOCore.saves.readGPIO32(0|e))},GameBoyAdvanceCartridge.prototype.readROM8Space2=function(e){return 0|((0|(e|=0))>=196&&(0|e)<202?0|this.IOCore.saves.readGPIO8(0|e):(0|e)>=(0|this.EEPROMStart)?0|this.IOCore.saves.readEEPROM8(0|e):0|this.readROMOnly8(0|e))},GameBoyAdvanceCartridge.prototype.readROM16Space2=function(e){return 0|((0|(e|=0))>=196&&(0|e)<202?0|this.IOCore.saves.readGPIO16(0|e):(0|e)>=(0|this.EEPROMStart)?0|this.IOCore.saves.readEEPROM16(0|e):0|this.readROMOnly16(0|e))},GameBoyAdvanceCartridge.prototype.readROM32Space2=function(e){return 0|((0|(e|=0))>=196&&(0|e)<202?0|this.IOCore.saves.readGPIO32(0|e):(0|e)>=(0|this.EEPROMStart)?0|this.IOCore.saves.readEEPROM32(0|e):0|this.readROMOnly32(0|e))},GameBoyAdvanceCartridge.prototype.writeROM8=function(e,t){t|=0,(0|(e|=0))>=196&&(0|e)<202&&this.IOCore.saves.writeGPIO8(0|e,0|t)},GameBoyAdvanceCartridge.prototype.writeROM16=function(e,t){t|=0,(0|(e|=0))>=196&&(0|e)<202&&this.IOCore.saves.writeGPIO16(0|e,0|t)},GameBoyAdvanceCartridge.prototype.writeROM16DMA=function(e,t){t|=0,(0|(e|=0))>=196&&(0|e)<202?this.IOCore.saves.writeGPIO16(0|e,0|t):(0|e)>=(0|this.EEPROMStart)&&this.IOCore.saves.writeEEPROM16(0|e,0|t)},GameBoyAdvanceCartridge.prototype.writeROM32=function(e,t){t|=0,(0|(e|=0))>=196&&(0|e)<202&&this.IOCore.saves.writeGPIO32(0|e,0|t)},GameBoyAdvanceCartridge.prototype.nextIRQEventTime=function(){return 2147483647},GameBoyAdvanceDMA.prototype.initialize=function(){this.dmaChannel0=this.IOCore.dmaChannel0,this.dmaChannel1=this.IOCore.dmaChannel1,this.dmaChannel2=this.IOCore.dmaChannel2,this.dmaChannel3=this.IOCore.dmaChannel3,this.currentMatch=-1,this.fetch=0},GameBoyAdvanceDMA.prototype.getCurrentFetchValue=function(){return 0|this.fetch},GameBoyAdvanceDMA.prototype.gfxHBlankRequest=function(){this.requestDMA(4)},GameBoyAdvanceDMA.prototype.gfxVBlankRequest=function(){this.requestDMA(2)},GameBoyAdvanceDMA.prototype.requestDMA=function(e){e|=0,this.dmaChannel0.requestDMA(0|e),this.dmaChannel1.requestDMA(0|e),this.dmaChannel2.requestDMA(0|e),this.dmaChannel3.requestDMA(0|e)},GameBoyAdvanceDMA.prototype.findLowestDMA=function(){return 0!=(0|this.dmaChannel0.getMatchStatus())?0:0!=(0|this.dmaChannel1.getMatchStatus())?1:0!=(0|this.dmaChannel2.getMatchStatus())?2:0!=(0|this.dmaChannel3.getMatchStatus())?3:4},GameBoyAdvanceDMA.prototype.update=function(){var e=this.findLowestDMA();(0|e)<4?(-1==(0|this.currentMatch)&&this.IOCore.flagDMA(),(0|this.currentMatch)!=(0|e)&&(this.IOCore.wait.NonSequentialBroadcast(),this.currentMatch=0|e)):-1!=(0|this.currentMatch)&&(this.currentMatch=-1,this.IOCore.deflagDMA(),this.IOCore.updateCoreSpill())},GameBoyAdvanceDMA.prototype.perform=function(){switch(0|this.currentMatch){case 0:this.dmaChannel0.handleDMACopy();break;case 1:this.dmaChannel1.handleDMACopy();break;case 2:this.dmaChannel2.handleDMACopy();break;default:this.dmaChannel3.handleDMACopy()}},GameBoyAdvanceDMA.prototype.updateFetch=function(e){e|=0,this.fetch=0|e},GameBoyAdvanceDMA.prototype.nextEventTime=function(){return 0|(0|Math.min(0|this.dmaChannel0.nextEventTime(),0|this.dmaChannel1.nextEventTime(),0|this.dmaChannel2.nextEventTime(),0|this.dmaChannel3.nextEventTime()))},GameBoyAdvanceEmulator.prototype.generateCoreExposed=function(){var e=this;this.coreExposed={outputAudio:function(t,i){e.outputAudio(t,i)},graphicsHandle:null,appendStartIterationSync:function(t){e.startCallbacks.push(t)},appendEndIterationSync:function(t){e.endCallbacks.push(t)},appendTerminationSync:function(t){e.terminationCallbacks.push(t)},offthreadGfxEnabled:function(){return!!e.settings.offthreadGfxEnabled}}},GameBoyAdvanceEmulator.prototype.play=function(){if((0|this.emulatorStatus)>=16){if(this.emulatorStatus=15&this.emulatorStatus,0==(1&this.emulatorStatus)&&this.BIOS&&this.ROM){if(0==(0|this.initializeCore()))return void this.pause();this.importSave()}this.invalidateMetrics(),this.setBufferSpace(),this.playStatusCallback(1)}},GameBoyAdvanceEmulator.prototype.pause=function(){(0|this.emulatorStatus)<16&&(this.exportSave(),this.emulatorStatus=16|this.emulatorStatus,this.playStatusCallback(0))},GameBoyAdvanceEmulator.prototype.stop=function(){this.emulatorStatus=28&this.emulatorStatus,this.audioUpdateState=1,this.pause()},GameBoyAdvanceEmulator.prototype.restart=function(){if(1==(1&this.emulatorStatus)){if(this.emulatorStatus=29&this.emulatorStatus,this.exportSave(),0==(0|this.initializeCore()))return void this.pause();this.importSave(),this.audioUpdateState=1,this.processNewSpeed(1),this.setBufferSpace()}},GameBoyAdvanceEmulator.prototype.timerCallback=function(e){switch(this.lastTimestamp=e>>>0,0|this.emulatorStatus){case 5:this.iterationStartSequence(),this.IOCore.enter(0|this.CPUCyclesTotal),this.iterationEndSequence();break;case 1:break;default:this.pause()}},GameBoyAdvanceEmulator.prototype.iterationStartSequence=function(){this.calculateSpeedPercentage(),this.emulatorStatus=2|this.emulatorStatus,this.audioUnderrunAdjustment(),this.audioPushNewState(),this.runStartJobs()},GameBoyAdvanceEmulator.prototype.iterationEndSequence=function(){this.emulatorStatus=29&this.emulatorStatus,this.clockCyclesSinceStart=(0|this.clockCyclesSinceStart)+(0|this.CPUCyclesTotal)|0,this.submitAudioBuffer(),this.runEndJobs()},GameBoyAdvanceEmulator.prototype.runStartJobs=function(){for(var e=0|this.startCallbacks.length,t=0;(0|t)<(0|e);t=1+(0|t)|0)this.startCallbacks[0|t]()},GameBoyAdvanceEmulator.prototype.runEndJobs=function(){for(var e=0|this.endCallbacks.length,t=0;(0|t)<(0|e);t=1+(0|t)|0)this.endCallbacks[0|t]()},GameBoyAdvanceEmulator.prototype.runTerminationJobs=function(){for(var e=0|this.terminationCallbacks.length,t=0;(0|t)<(0|e);t=1+(0|t)|0)this.terminationCallbacks[0|t]();this.startCallbacks=[],this.endCallbacks=[],this.terminationCallbacks=[]},GameBoyAdvanceEmulator.prototype.attachROM=function(e){this.stop(),this.ROM=e},GameBoyAdvanceEmulator.prototype.attachBIOS=function(e){this.stop(),this.BIOS=e},GameBoyAdvanceEmulator.prototype.getGameName=function(){return 1==(3&this.emulatorStatus)?this.IOCore.cartridge.name:""},GameBoyAdvanceEmulator.prototype.attachSaveExportHandler=function(e){"function"==typeof e&&(this.saveExportHandler=e)},GameBoyAdvanceEmulator.prototype.attachSaveImportHandler=function(e){"function"==typeof e&&(this.saveImportHandler=e)},GameBoyAdvanceEmulator.prototype.attachSpeedHandler=function(e){"function"==typeof e&&(this.speedCallback=e)},GameBoyAdvanceEmulator.prototype.attachPlayStatusHandler=function(e){"function"==typeof e&&(this.playStatusCallback=e)},GameBoyAdvanceEmulator.prototype.importSave=function(){if(this.saveImportHandler){var e=this.getGameName();if(""!=e){var t=this;return this.emulatorStatus=27&this.emulatorStatus,void this.saveImportHandler(e,(function(i){t.emulatorStatus=27&t.emulatorStatus,t.saveImportHandler("TYPE_"+e,(function(e){if(i&&e&&1==(3&t.emulatorStatus)){var r=0|i.length,a=getUint8Array(0|r);if((0|r)>0){for(var s=0;(0|s)<(0|r);s=1+(0|s)|0)a[0|s]=255&i[0|s];1!=(0|e.length)?t.IOCore.saves.importSave(a,0):t.IOCore.saves.importSave(a,255&e[0]),t.emulatorStatus=4|t.emulatorStatus}}}),(function(){t.emulatorStatus=4|t.emulatorStatus}))}),(function(){t.emulatorStatus=4|t.emulatorStatus}))}}this.emulatorStatus=4|this.emulatorStatus},GameBoyAdvanceEmulator.prototype.exportSave=function(){if(this.saveExportHandler&&1==(3&this.emulatorStatus)){var e=this.IOCore.saves.exportSave(),t=0|this.IOCore.saves.exportSaveType();null!=e&&(this.saveExportHandler(this.IOCore.cartridge.name,e),this.saveExportHandler("TYPE_"+this.IOCore.cartridge.name,[0|t]))}},GameBoyAdvanceEmulator.prototype.setSpeed=function(e){e=+e,this.settings.dynamicSpeed||this.processNewSpeed(+e)},GameBoyAdvanceEmulator.prototype.processNewSpeed=function(e){e=+e,+(e=+Math.min(Math.max(+e,.003),63))!=+this.settings.emulatorSpeed&&(this.settings.emulatorSpeed=+e,this.calculateTimings())},GameBoyAdvanceEmulator.prototype.incrementSpeed=function(e){e=+e,this.setSpeed(+e+ +this.settings.emulatorSpeed)},GameBoyAdvanceEmulator.prototype.getSpeed=function(){return+this.settings.emulatorSpeed},GameBoyAdvanceEmulator.prototype.invalidateMetrics=function(){this.clockCyclesSinceStart=0,this.metricStart=0},GameBoyAdvanceEmulator.prototype.resetMetrics=function(){this.clockCyclesSinceStart=0,this.metricStart=this.lastTimestamp>>>0},GameBoyAdvanceEmulator.prototype.calculateTimings=function(){this.clocksPerSecond=0|Math.min(16777216*+this.settings.emulatorSpeed,1056964608),this.clocksPerMilliSecond=+(0|this.clocksPerSecond)/1e3,this.CPUCyclesPerIteration=+this.clocksPerMilliSecond*+this.timerIntervalRate|0,this.CPUCyclesTotal=0|this.CPUCyclesPerIteration,this.initializeAudioLogic(),this.reinitializeAudio(),this.invalidateMetrics()},GameBoyAdvanceEmulator.prototype.setIntervalRate=function(e){+(e=+e)>0&&+e<1e3&&+e!=+this.timerIntervalRate&&(this.timerIntervalRate=+e,this.calculateTimings())},GameBoyAdvanceEmulator.prototype.calculateSpeedPercentage=function(){if(this.metricStart>>>0!=0){var e=Math.max((this.lastTimestamp>>>0)-(this.metricStart>>>0)|0,1)>>>0;if(e>>>0>=(0|this.settings.metricCollectionMinimum)){if(this.speedCallback){var t=1e5*(0|this.clockCyclesSinceStart)/(16777216*(e>>>0));this.speedCallback(+t)}this.resetMetrics(),this.dynamicSpeedRefresh=!0}else this.dynamicSpeedRefresh=!1}else this.resetMetrics(),this.dynamicSpeedRefresh=!1},GameBoyAdvanceEmulator.prototype.initializeCore=function(){this.runTerminationJobs(),this.IOCore=new GameBoyAdvanceIO(this.settings.SKIPBoot,this.coreExposed,this.BIOS,this.ROM);var e=0|this.IOCore.initialize();return this.emulatorStatus=this.emulatorStatus|e,0|e},GameBoyAdvanceEmulator.prototype.keyDown=function(e){e|=0,(0|this.emulatorStatus)<16&&(0|e)>=0&&(0|e)<=9&&this.IOCore.joypad.keyPress(0|e)},GameBoyAdvanceEmulator.prototype.keyUp=function(e){e|=0,(0|this.emulatorStatus)<16&&(0|e)>=0&&(0|e)<=9&&this.IOCore.joypad.keyRelease(0|e)},GameBoyAdvanceEmulator.prototype.attachGraphicsFrameHandler=function(e){"object"==typeof e&&(this.coreExposed.graphicsHandle=e)},GameBoyAdvanceEmulator.prototype.attachAudioHandler=function(e){e&&(this.audio=e)},GameBoyAdvanceEmulator.prototype.enableAudio=function(){if(0==(0|this.audioFound)&&this.audio){this.audioFound=1;var e=this;this.audio.initialize(2,(0|this.clocksPerSecond)/(0|this.audioResamplerFirstPassFactor),0|Math.max(+this.clocksPerMilliSecond*(0|this.settings.audioBufferSize)/(0|this.audioResamplerFirstPassFactor),4),(function(){}),(function(){}),(function(){e.disableAudio()})),this.audio.register()}},GameBoyAdvanceEmulator.prototype.disableAudio=function(){0!=(0|this.audioFound)&&(this.audio.unregister(),this.audioFound=0)},GameBoyAdvanceEmulator.prototype.reinitializeAudio=function(){0!=(0|this.audioFound)&&(this.disableAudio(),this.enableAudio())},GameBoyAdvanceEmulator.prototype.initializeAudioLogic=function(){this.audioResamplerFirstPassFactor=0|Math.min(Math.floor((0|this.clocksPerSecond)/44100),Math.floor(2147483647/1023)),this.audioDownSampleInputDivider=2/1023/(0|this.audioResamplerFirstPassFactor),this.initializeAudioBuffering(),this.audioUpdateState=1},GameBoyAdvanceEmulator.prototype.initializeAudioBuffering=function(){this.audioDestinationPosition=0,this.audioBufferContainAmount=Math.max(+this.clocksPerMilliSecond*(0|this.settings.audioBufferUnderrunLimit)/(0|this.audioResamplerFirstPassFactor),3)<<1,this.audioBufferOverclockBlockAmount=Math.max(+this.clocksPerMilliSecond*(0|this.settings.overclockBlockLimit)/(0|this.audioResamplerFirstPassFactor),3)<<1,this.audioBufferDynamicContainAmount=Math.max(+this.clocksPerMilliSecond*(0|this.settings.audioBufferDynamicLimit)/(0|this.audioResamplerFirstPassFactor),2)<<1;var e=Math.max(+this.clocksPerMilliSecond/(0|this.audioResamplerFirstPassFactor)<<6,4)<<1;(!this.audioBuffer||(0|e)>(0|this.audioBuffer.length))&&(this.audioBuffer=getFloat32Array(0|e))},GameBoyAdvanceEmulator.prototype.outputAudio=function(e,t){e|=0,t|=0,this.audioBuffer[0|this.audioDestinationPosition]=(0|e)*+this.audioDownSampleInputDivider-1,this.audioDestinationPosition=1+(0|this.audioDestinationPosition)|0,this.audioBuffer[0|this.audioDestinationPosition]=(0|t)*+this.audioDownSampleInputDivider-1,this.audioDestinationPosition=1+(0|this.audioDestinationPosition)|0},GameBoyAdvanceEmulator.prototype.submitAudioBuffer=function(){0!=(0|this.audioFound)&&this.audio.push(this.audioBuffer,0,0|this.audioDestinationPosition),this.audioDestinationPosition=0},GameBoyAdvanceEmulator.prototype.audioUnderrunAdjustment=function(){if(this.CPUCyclesTotal=0|this.CPUCyclesPerIteration,0!=(0|this.audioFound)){var e=this.audio.remainingBuffer();if("number"==typeof e){e=0|Math.max(0|e,0);var t=(0|this.audioBufferContainAmount)-(0|e)|0;if((0|t)>0){if(this.dynamicSpeedRefresh&&this.settings.dynamicSpeed&&(0|this.audioBufferDynamicContainAmount)-(0|e)>0){var i=+this.getSpeed();i=Math.max(+i-.1,.003),this.processNewSpeed(+i)}this.CPUCyclesTotal=0|Math.min((0|this.CPUCyclesTotal)+(t>>1)*(0|this.audioResamplerFirstPassFactor)|0,+this.clocksPerMilliSecond<<5)}else{if(this.dynamicSpeedRefresh&&this.settings.dynamicSpeed)+(i=+this.getSpeed())<1&&(i=+Math.min(+i+.01,1),this.processNewSpeed(+i));var r=(0|e)-(0|this.audioBufferOverclockBlockAmount)|0;(0|r)>0&&(this.CPUCyclesTotal=0|Math.max((0|this.CPUCyclesTotal)-(r>>1)*(0|this.audioResamplerFirstPassFactor)|0,0))}}}},GameBoyAdvanceEmulator.prototype.audioPushNewState=function(){0!=(0|this.audioUpdateState)&&(this.IOCore.sound.initializeOutput(0|this.audioResamplerFirstPassFactor),this.audioUpdateState=0)},GameBoyAdvanceEmulator.prototype.setBufferSpace=function(){0!=(0|this.audioFound)&&this.audio.setBufferSpace(0|this.audioBufferContainAmount)},GameBoyAdvanceEmulator.prototype.toggleSkipBootROM=function(e){this.settings.SKIPBoot=!!e},GameBoyAdvanceEmulator.prototype.toggleDynamicSpeed=function(e){this.settings.dynamicSpeed=!!e,this.processNewSpeed(1)},GameBoyAdvanceEmulator.prototype.toggleOffthreadGraphics=function(e){this.settings.offthreadGfxEnabled=!!e},GameBoyAdvanceGraphics.prototype.initialize=function(){this.gfxRenderer=this.IOCore.gfxRenderer,this.dma=this.IOCore.dma,this.dmaChannel3=this.IOCore.dmaChannel3,this.irq=this.IOCore.irq,this.wait=this.IOCore.wait,this.initializeState()},GameBoyAdvanceGraphics.prototype.initializeState=function(){this.renderedScanLine=!1,this.statusFlags=0,this.IRQFlags=0,this.VCounter=0,this.currentScanLine=0,this.LCDTicks=0,this.IOCore.SKIPBoot&&(this.currentScanLine=124)},GameBoyAdvanceGraphics.prototype.addClocks=function(e){e|=0,this.LCDTicks=(0|this.LCDTicks)+(0|e)|0,this.clockLCDState()},GameBoyAdvanceGraphics.prototype.clockLCDState=function(){(0|this.LCDTicks)>=960&&(this.clockScanLine(),this.clockLCDStatePostRender())},GameBoyAdvanceGraphics.prototype.clockScanLine=function(){this.renderedScanLine||(this.renderedScanLine=!0,(0|this.currentScanLine)<160&&this.gfxRenderer.incrementScanLineQueue())},GameBoyAdvanceGraphics.prototype.clockLCDStatePostRender=function(){(0|this.LCDTicks)>=1006&&(this.updateHBlank(),(0|this.LCDTicks)>=1232&&this.clockLCDNextLine())},GameBoyAdvanceGraphics.prototype.clockLCDNextLine=function(){if(this.renderedScanLine=!1,this.statusFlags=5&this.statusFlags,this.LCDTicks=(0|this.LCDTicks)-1232|0,this.currentScanLine=1+(0|this.currentScanLine)|0,(0|this.currentScanLine)>=160)switch(0|this.currentScanLine){case 160:this.updateVBlankStart();case 161:this.dmaChannel3.gfxDisplaySyncRequest();break;case 162:this.dmaChannel3.gfxDisplaySyncEnableCheck();break;case 227:this.statusFlags=6&this.statusFlags;break;case 228:this.currentScanLine=0}else(0|this.currentScanLine)>1&&this.dmaChannel3.gfxDisplaySyncRequest();this.checkVCounter(),this.isRenderingCheckPreprocess(),this.clockLCDState()},GameBoyAdvanceGraphics.prototype.updateHBlank=function(){0==(2&this.statusFlags)&&(this.statusFlags=2|this.statusFlags,0!=(16&this.IRQFlags)&&this.irq.requestIRQ(2),(0|this.currentScanLine)<160&&this.dma.gfxHBlankRequest(),this.isRenderingCheckPreprocess())},GameBoyAdvanceGraphics.prototype.checkVCounter=function(){(0|this.currentScanLine)==(0|this.VCounter)?(this.statusFlags=4|this.statusFlags,0!=(32&this.IRQFlags)&&this.irq.requestIRQ(4)):this.statusFlags=3&this.statusFlags},GameBoyAdvanceGraphics.prototype.nextVBlankIRQEventTime=function(){var e=2147483647;return 0!=(8&this.IRQFlags)&&(e=0|this.nextVBlankEventTime()),0|e},GameBoyAdvanceGraphics.prototype.nextHBlankEventTime=function(){var e=0|this.LCDTicks;return 0|(e=(0|e)<1006?1006-(0|e)|0:2238-(0|e)|0)},GameBoyAdvanceGraphics.prototype.nextHBlankIRQEventTime=function(){var e=2147483647;return 0!=(16&this.IRQFlags)&&(e=0|this.nextHBlankEventTime()),0|e},GameBoyAdvanceGraphics.prototype.nextVCounterIRQEventTime=function(){var e=2147483647;return 0!=(32&this.IRQFlags)&&(e=0|this.nextVCounterEventTime()),0|e},GameBoyAdvanceGraphics.prototype.nextVBlankEventTime=function(){var e=0|this.currentScanLine;return e=(0|e)<160?160-(0|e)|0:388-(0|e)|0,0|(e=(0|(e=0|this.convertScanlineToClocks(0|e)))-(0|this.LCDTicks)|0)},GameBoyAdvanceGraphics.prototype.nextHBlankDMAEventTime=function(){var e=0|this.nextHBlankEventTime();if((0|this.currentScanLine)>159||159==(0|this.currentScanLine)&&(0|this.LCDTicks)>=1006){var t=227-(0|this.currentScanLine)|0;e=(0|e)+(0|(t=0|this.convertScanlineToClocks(0|t)))|0}return 0|e},GameBoyAdvanceGraphics.prototype.nextVCounterEventTime=function(){var e=2147483647;return(0|this.VCounter)<=227&&((0|(e=(0|this.VCounter)-(0|this.currentScanLine)|0))<=0&&(e=228+(0|e)|0),e=(0|(e=0|this.convertScanlineToClocks(0|e)))-(0|this.LCDTicks)|0),0|e},GameBoyAdvanceGraphics.prototype.nextDisplaySyncEventTime=function(e){e|=0;var t=2147483647;return(0|this.currentScanLine)>=161||0!=(0|e)?(t=230-(0|this.currentScanLine)|0,t=(0|(t=0|this.convertScanlineToClocks(0|t)))-(0|this.LCDTicks)|0):t=0==(0|this.currentScanLine)?2464-(0|this.LCDTicks)|0:1232-(0|this.LCDTicks)|0,0|t},"function"==typeof Math.imul?GameBoyAdvanceGraphics.prototype.convertScanlineToClocks=function(e){return e|=0,0|(e=0|Math.imul(0|e,1232))}:GameBoyAdvanceGraphics.prototype.convertScanlineToClocks=function(e){return 0|(e=1232*(0|(e|=0))|0)},GameBoyAdvanceGraphics.prototype.updateVBlankStart=function(){this.statusFlags=1|this.statusFlags,0!=(8&this.IRQFlags)&&this.irq.requestIRQ(1),this.gfxRenderer.ensureFraming(),this.dma.gfxVBlankRequest()},GameBoyAdvanceGraphics.prototype.isRenderingCheckPreprocess=function(){var e=0==(128&this.gfxRenderer.IOData8[0])&&0==(1&this.statusFlags),t=e&&0==(2&this.statusFlags)?2:1,i=!e||0!=(2&this.statusFlags)&&0!=(32&this.gfxRenderer.IOData8[0])?1:2;this.wait.updateRenderStatus(0|t,0|i)},GameBoyAdvanceGraphics.prototype.writeDISPSTAT8_0=function(e){e|=0,this.IOCore.updateCoreClocking(),this.IRQFlags=56&e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceGraphics.prototype.writeDISPSTAT8_1=function(e){e|=0,(0|(e&=255))!=(0|this.VCounter)&&(this.IOCore.updateCoreClocking(),this.VCounter=0|e,this.checkVCounter(),this.IOCore.updateCoreEventTime())},GameBoyAdvanceGraphics.prototype.writeDISPSTAT16=function(e){e|=0,this.IOCore.updateCoreClocking(),this.IRQFlags=56&e,(0|(e=e>>8&255))!=(0|this.VCounter)&&(this.VCounter=0|e,this.checkVCounter()),this.IOCore.updateCoreEventTime()},GameBoyAdvanceGraphics.prototype.readDISPSTAT8_0=function(){return this.IOCore.updateGraphicsClocking(),this.statusFlags|this.IRQFlags},GameBoyAdvanceGraphics.prototype.readDISPSTAT8_1=function(){return 0|this.VCounter},GameBoyAdvanceGraphics.prototype.readDISPSTAT8_2=function(){return this.IOCore.updateGraphicsClocking(),0|this.currentScanLine},GameBoyAdvanceGraphics.prototype.readDISPSTAT16_0=function(){return this.IOCore.updateGraphicsClocking(),this.VCounter<<8|this.statusFlags|this.IRQFlags},GameBoyAdvanceGraphics.prototype.readDISPSTAT32=function(){return this.IOCore.updateGraphicsClocking(),this.currentScanLine<<16|this.VCounter<<8|this.statusFlags|this.IRQFlags},GameBoyAdvanceIO.prototype.initialize=function(){var e=1;return 1==(0|this.memory.initialize())?(this.dma.initialize(),this.dmaChannel0.initialize(),this.dmaChannel1.initialize(),this.dmaChannel2.initialize(),this.dmaChannel3.initialize(),this.gfxState.initialize(),this.gfxRenderer.initialize(),this.sound.initialize(),this.timer.initialize(),this.irq.initialize(),this.serial.initialize(),this.joypad.initialize(),this.cartridge.initialize(),this.saves.initialize(),this.wait.initialize(),this.cpu.initialize()):e=0,0|e},GameBoyAdvanceIO.prototype.assignInstructionCoreReferences=function(e,t){this.ARM=e,this.THUMB=t},GameBoyAdvanceIO.prototype.enter=function(e){this.cyclesToIterate=(0|e)+(0|this.cyclesOveriteratedPreviously)|0,(0|this.cyclesToIterate)>0&&(this.updateCoreEventTime(),this.run(),this.updateCoreClocking(),this.sound.audioJIT()),this.cyclesOveriteratedPreviously=0|this.cyclesToIterate},GameBoyAdvanceIO.prototype.run=function(){for(;;)switch(132&this.systemStatus){case 0:this.runARM();break;case 4:this.runTHUMB();break;default:return void this.deflagIterationEnd()}},GameBoyAdvanceIO.prototype.runARM=function(){for(;;)switch(0|this.systemStatus){case 0:this.ARM.executeIteration();break;case 1:case 2:this.ARM.executeBubble(),this.tickBubble();break;default:switch(this.systemStatus>>2){case 2:this.handleIRQARM();break;case 4:case 6:case 12:case 14:this.handleDMA();break;case 8:case 10:this.handleHalt();break;default:if(0!=(132&this.systemStatus))return;this.handleStop()}}},GameBoyAdvanceIO.prototype.runTHUMB=function(){for(;;)switch(0|this.systemStatus){case 4:this.THUMB.executeIteration();break;case 5:case 6:this.THUMB.executeBubble(),this.tickBubble();break;default:switch(this.systemStatus>>2){case 3:this.handleIRQThumb();break;case 5:case 7:case 13:case 15:this.handleDMA();break;case 9:case 17:this.handleHalt();break;default:if(4!=(132&this.systemStatus))return;this.handleStop()}}},GameBoyAdvanceIO.prototype.updateCore=function(e){e|=0,this.accumulatedClocks=(0|this.accumulatedClocks)+(0|e)|0,(0|this.accumulatedClocks)>=(0|this.nextEventClocks)&&this.updateCoreSpill()},GameBoyAdvanceIO.prototype.updateCoreForce=function(e){e|=0,this.accumulatedClocks=(0|this.accumulatedClocks)+(0|e)|0,this.updateCoreSpill()},GameBoyAdvanceIO.prototype.updateCoreNegative=function(e){e|=0,this.accumulatedClocks=(0|this.accumulatedClocks)-(0|e)|0,(0|this.accumulatedClocks)>=(0|this.nextEventClocks)&&this.updateCoreSpill()},GameBoyAdvanceIO.prototype.updateCoreSingle=function(){this.accumulatedClocks=1+(0|this.accumulatedClocks)|0,(0|this.accumulatedClocks)>=(0|this.nextEventClocks)&&this.updateCoreSpill()},GameBoyAdvanceIO.prototype.updateCoreSpill=function(){this.updateCoreClocking(),this.updateCoreEventTime()},GameBoyAdvanceIO.prototype.updateCoreSpillRetain=function(){this.nextEventClocks=(0|this.nextEventClocks)-(0|this.accumulatedClocks)|0,this.updateCoreClocking()},GameBoyAdvanceIO.prototype.updateCoreClocking=function(){var e=0|this.accumulatedClocks;this.cyclesToIterate=(0|this.cyclesToIterate)-(0|e)|0,this.gfxState.addClocks((0|e)-(0|this.graphicsClocks)|0),this.timer.addClocks((0|e)-(0|this.timerClocks)|0),this.serial.addClocks((0|e)-(0|this.serialClocks)|0),this.accumulatedClocks=0,this.graphicsClocks=0,this.timerClocks=0,this.serialClocks=0},GameBoyAdvanceIO.prototype.updateGraphicsClocking=function(){this.gfxState.addClocks((0|this.accumulatedClocks)-(0|this.graphicsClocks)|0),this.graphicsClocks=0|this.accumulatedClocks},GameBoyAdvanceIO.prototype.updateTimerClocking=function(){this.timer.addClocks((0|this.accumulatedClocks)-(0|this.timerClocks)|0),this.timerClocks=0|this.accumulatedClocks},GameBoyAdvanceIO.prototype.updateSerialClocking=function(){this.serial.addClocks((0|this.accumulatedClocks)-(0|this.serialClocks)|0),this.serialClocks=0|this.accumulatedClocks},GameBoyAdvanceIO.prototype.updateCoreEventTime=function(){this.nextEventClocks=0|this.cyclesUntilNextEvent()},GameBoyAdvanceIO.prototype.getRemainingCycles=function(){return(0|this.cyclesToIterate)<1?(this.flagIterationEnd(),0):0|this.cyclesToIterate},GameBoyAdvanceIO.prototype.handleIRQARM=function(){(0|this.systemStatus)>8?(this.ARM.executeBubble(),this.tickBubble()):this.cpu.IRQinARM()},GameBoyAdvanceIO.prototype.handleIRQThumb=function(){(0|this.systemStatus)>12?(this.THUMB.executeBubble(),this.tickBubble()):this.cpu.IRQinTHUMB()},GameBoyAdvanceIO.prototype.handleDMA=function(){do{this.dma.perform()}while(16==(144&this.systemStatus))},GameBoyAdvanceIO.prototype.handleHalt=function(){0==(0|this.irq.IRQMatch())?this.updateCoreForce(0|this.cyclesUntilNextHALTEvent()):this.deflagHalt()},GameBoyAdvanceIO.prototype.handleStop=function(){this.sound.addClocks(0|this.getRemainingCycles()),this.cyclesToIterate=0},GameBoyAdvanceIO.prototype.cyclesUntilNextHALTEvent=function(){var e=0|this.irq.nextEventTime(),t=0|this.dma.nextEventTime();return 0|this.solveClosestTime(0|e,0|t)},GameBoyAdvanceIO.prototype.cyclesUntilNextEvent=function(){var e=0|this.irq.nextIRQEventTime(),t=0|this.dma.nextEventTime();return 0|this.solveClosestTime(0|e,0|t)},GameBoyAdvanceIO.prototype.solveClosestTime=function(e,t){e|=0,t|=0;var i=0|this.getRemainingCycles();return 0|(i=Math.min(0|i,0|e,0|t))},GameBoyAdvanceIO.prototype.flagBubble=function(){this.systemStatus=2|this.systemStatus},GameBoyAdvanceIO.prototype.tickBubble=function(){this.systemStatus=(0|this.systemStatus)-1|0},GameBoyAdvanceIO.prototype.flagTHUMB=function(){this.systemStatus=4|this.systemStatus},GameBoyAdvanceIO.prototype.deflagTHUMB=function(){this.systemStatus=251&this.systemStatus},GameBoyAdvanceIO.prototype.flagIRQ=function(){this.systemStatus=8|this.systemStatus},GameBoyAdvanceIO.prototype.deflagIRQ=function(){this.systemStatus=247&this.systemStatus},GameBoyAdvanceIO.prototype.flagDMA=function(){this.systemStatus=16|this.systemStatus},GameBoyAdvanceIO.prototype.deflagDMA=function(){this.systemStatus=239&this.systemStatus},GameBoyAdvanceIO.prototype.flagHalt=function(){this.systemStatus=32|this.systemStatus},GameBoyAdvanceIO.prototype.deflagHalt=function(){this.systemStatus=223&this.systemStatus},GameBoyAdvanceIO.prototype.flagStop=function(){this.systemStatus=64|this.systemStatus},GameBoyAdvanceIO.prototype.deflagStop=function(){this.systemStatus=191&this.systemStatus},GameBoyAdvanceIO.prototype.flagIterationEnd=function(){this.systemStatus=128|this.systemStatus},GameBoyAdvanceIO.prototype.deflagIterationEnd=function(){this.systemStatus=127&this.systemStatus},GameBoyAdvanceIO.prototype.isStopped=function(){return 0!=(64&this.systemStatus)},GameBoyAdvanceIO.prototype.inDMA=function(){return 0!=(16&this.systemStatus)},GameBoyAdvanceIO.prototype.getCurrentFetchValue=function(){return 0|(0==(16&this.systemStatus)?0|this.cpu.getCurrentFetchValue():0|this.dma.getCurrentFetchValue())},GameBoyAdvanceMemory.prototype.initialize=function(){var e=1;return this.BIOS=getUint8Array(16384),this.BIOS16=getUint16View(this.BIOS),this.BIOS32=getInt32View(this.BIOS),1==(0|this.loadBIOS())?this.initializeRAM():e=0,0|e},GameBoyAdvanceMemory.prototype.initializeRAM=function(){this.WRAMControlFlags=32,this.externalRAM=getUint8Array(262144),this.externalRAM16=getUint16View(this.externalRAM),this.externalRAM32=getInt32View(this.externalRAM),this.internalRAM=getUint8Array(32768),this.internalRAM16=getUint16View(this.internalRAM),this.internalRAM32=getInt32View(this.internalRAM),this.lastBIOSREAD=0,this.dma=this.IOCore.dma,this.dmaChannel0=this.IOCore.dmaChannel0,this.dmaChannel1=this.IOCore.dmaChannel1,this.dmaChannel2=this.IOCore.dmaChannel2,this.dmaChannel3=this.IOCore.dmaChannel3,this.gfxState=this.IOCore.gfxState,this.gfxRenderer=this.IOCore.gfxRenderer,this.sound=this.IOCore.sound,this.timer=this.IOCore.timer,this.irq=this.IOCore.irq,this.serial=this.IOCore.serial,this.joypad=this.IOCore.joypad,this.cartridge=this.IOCore.cartridge,this.wait=this.IOCore.wait,this.cpu=this.IOCore.cpu,this.saves=this.IOCore.saves},GameBoyAdvanceMemory.prototype.writeExternalWRAM8=function(e,t){e|=0,t|=0,this.wait.WRAMAccess(),this.externalRAM[262143&e]=255&t},__LITTLE_ENDIAN__?(GameBoyAdvanceMemory.prototype.writeExternalWRAM16=function(e,t){e|=0,t|=0,this.wait.WRAMAccess(),this.externalRAM16[e>>1&131071]=65535&t},GameBoyAdvanceMemory.prototype.writeExternalWRAM32=function(e,t){e|=0,t|=0,this.wait.WRAMAccess32(),this.externalRAM32[e>>2&65535]=0|t}):(GameBoyAdvanceMemory.prototype.writeExternalWRAM16=function(e,t){this.wait.WRAMAccess(),e&=262142,this.externalRAM[e++]=255&t,this.externalRAM[e]=t>>8&255},GameBoyAdvanceMemory.prototype.writeExternalWRAM32=function(e,t){this.wait.WRAMAccess32(),e&=262140,this.externalRAM[e++]=255&t,this.externalRAM[e++]=t>>8&255,this.externalRAM[e++]=t>>16&255,this.externalRAM[e]=t>>>24}),GameBoyAdvanceMemory.prototype.writeInternalWRAM8=function(e,t){e|=0,t|=0,this.wait.singleClock(),this.internalRAM[32767&e]=255&t},__LITTLE_ENDIAN__?(GameBoyAdvanceMemory.prototype.writeInternalWRAM16=function(e,t){e|=0,t|=0,this.wait.singleClock(),this.internalRAM16[e>>1&16383]=65535&t},GameBoyAdvanceMemory.prototype.writeInternalWRAM32=function(e,t){e|=0,t|=0,this.wait.singleClock(),this.internalRAM32[e>>2&8191]=0|t}):(GameBoyAdvanceMemory.prototype.writeInternalWRAM16=function(e,t){this.wait.singleClock(),e&=32766,this.internalRAM[e++]=255&t,this.internalRAM[e]=t>>8&255},GameBoyAdvanceMemory.prototype.writeInternalWRAM32=function(e,t){this.wait.singleClock(),e&=32764,this.internalRAM[e++]=255&t,this.internalRAM[e++]=t>>8&255,this.internalRAM[e++]=t>>16&255,this.internalRAM[e]=t>>>24}),GameBoyAdvanceMemory.prototype.writeIODispatch8=function(e,t){switch(e|=0,t|=0,this.wait.singleClock(),0|e){case 67108864:this.gfxRenderer.writeDISPCNT8_0(0|t);break;case 67108865:this.gfxRenderer.writeDISPCNT8_1(0|t);break;case 67108866:this.gfxRenderer.writeDISPCNT8_2(0|t);break;case 67108868:this.gfxState.writeDISPSTAT8_0(0|t);break;case 67108869:this.gfxState.writeDISPSTAT8_1(0|t);break;case 67108872:this.gfxRenderer.writeBG0CNT8_0(0|t);break;case 67108873:this.gfxRenderer.writeBG0CNT8_1(0|t);break;case 67108874:this.gfxRenderer.writeBG1CNT8_0(0|t);break;case 67108875:this.gfxRenderer.writeBG1CNT8_1(0|t);break;case 67108876:this.gfxRenderer.writeBG2CNT8_0(0|t);break;case 67108877:this.gfxRenderer.writeBG2CNT8_1(0|t);break;case 67108878:this.gfxRenderer.writeBG3CNT8_0(0|t);break;case 67108879:this.gfxRenderer.writeBG3CNT8_1(0|t);break;case 67108880:this.gfxRenderer.writeBG0HOFS8_0(0|t);break;case 67108881:this.gfxRenderer.writeBG0HOFS8_1(0|t);break;case 67108882:this.gfxRenderer.writeBG0VOFS8_0(0|t);break;case 67108883:this.gfxRenderer.writeBG0VOFS8_1(0|t);break;case 67108884:this.gfxRenderer.writeBG1HOFS8_0(0|t);break;case 67108885:this.gfxRenderer.writeBG1HOFS8_1(0|t);break;case 67108886:this.gfxRenderer.writeBG1VOFS8_0(0|t);break;case 67108887:this.gfxRenderer.writeBG1VOFS8_1(0|t);break;case 67108888:this.gfxRenderer.writeBG2HOFS8_0(0|t);break;case 67108889:this.gfxRenderer.writeBG2HOFS8_1(0|t);break;case 67108890:this.gfxRenderer.writeBG2VOFS8_0(0|t);break;case 67108891:this.gfxRenderer.writeBG2VOFS8_1(0|t);break;case 67108892:this.gfxRenderer.writeBG3HOFS8_0(0|t);break;case 67108893:this.gfxRenderer.writeBG3HOFS8_1(0|t);break;case 67108894:this.gfxRenderer.writeBG3VOFS8_0(0|t);break;case 67108895:this.gfxRenderer.writeBG3VOFS8_1(0|t);break;case 67108896:this.gfxRenderer.writeBG2PA8_0(0|t);break;case 67108897:this.gfxRenderer.writeBG2PA8_1(0|t);break;case 67108898:this.gfxRenderer.writeBG2PB8_0(0|t);break;case 67108899:this.gfxRenderer.writeBG2PB8_1(0|t);break;case 67108900:this.gfxRenderer.writeBG2PC8_0(0|t);break;case 67108901:this.gfxRenderer.writeBG2PC8_1(0|t);break;case 67108902:this.gfxRenderer.writeBG2PD8_0(0|t);break;case 67108903:this.gfxRenderer.writeBG2PD8_1(0|t);break;case 67108904:this.gfxRenderer.writeBG2X8_0(0|t);break;case 67108905:this.gfxRenderer.writeBG2X8_1(0|t);break;case 67108906:this.gfxRenderer.writeBG2X8_2(0|t);break;case 67108907:this.gfxRenderer.writeBG2X8_3(0|t);break;case 67108908:this.gfxRenderer.writeBG2Y8_0(0|t);break;case 67108909:this.gfxRenderer.writeBG2Y8_1(0|t);break;case 67108910:this.gfxRenderer.writeBG2Y8_2(0|t);break;case 67108911:this.gfxRenderer.writeBG2Y8_3(0|t);break;case 67108912:this.gfxRenderer.writeBG3PA8_0(0|t);break;case 67108913:this.gfxRenderer.writeBG3PA8_1(0|t);break;case 67108914:this.gfxRenderer.writeBG3PB8_0(0|t);break;case 67108915:this.gfxRenderer.writeBG3PB8_1(0|t);break;case 67108916:this.gfxRenderer.writeBG3PC8_0(0|t);break;case 67108917:this.gfxRenderer.writeBG3PC8_1(0|t);break;case 67108918:this.gfxRenderer.writeBG3PD8_0(0|t);break;case 67108919:this.gfxRenderer.writeBG3PD8_1(0|t);break;case 67108920:this.gfxRenderer.writeBG3X8_0(0|t);break;case 67108921:this.gfxRenderer.writeBG3X8_1(0|t);break;case 67108922:this.gfxRenderer.writeBG3X8_2(0|t);break;case 67108923:this.gfxRenderer.writeBG3X8_3(0|t);break;case 67108924:this.gfxRenderer.writeBG3Y8_0(0|t);break;case 67108925:this.gfxRenderer.writeBG3Y8_1(0|t);break;case 67108926:this.gfxRenderer.writeBG3Y8_2(0|t);break;case 67108927:this.gfxRenderer.writeBG3Y8_3(0|t);break;case 67108928:this.gfxRenderer.writeWIN0XCOORDRight8(0|t);break;case 67108929:this.gfxRenderer.writeWIN0XCOORDLeft8(0|t);break;case 67108930:this.gfxRenderer.writeWIN1XCOORDRight8(0|t);break;case 67108931:this.gfxRenderer.writeWIN1XCOORDLeft8(0|t);break;case 67108932:this.gfxRenderer.writeWIN0YCOORDBottom8(0|t);break;case 67108933:this.gfxRenderer.writeWIN0YCOORDTop8(0|t);break;case 67108934:this.gfxRenderer.writeWIN1YCOORDBottom8(0|t);break;case 67108935:this.gfxRenderer.writeWIN1YCOORDTop8(0|t);break;case 67108936:this.gfxRenderer.writeWIN0IN8(0|t);break;case 67108937:this.gfxRenderer.writeWIN1IN8(0|t);break;case 67108938:this.gfxRenderer.writeWINOUT8(0|t);break;case 67108939:this.gfxRenderer.writeWINOBJIN8(0|t);break;case 67108940:this.gfxRenderer.writeMOSAIC8_0(0|t);break;case 67108941:this.gfxRenderer.writeMOSAIC8_1(0|t);break;case 67108944:this.gfxRenderer.writeBLDCNT8_0(0|t);break;case 67108945:this.gfxRenderer.writeBLDCNT8_1(0|t);break;case 67108946:this.gfxRenderer.writeBLDALPHA8_0(0|t);break;case 67108947:this.gfxRenderer.writeBLDALPHA8_1(0|t);break;case 67108948:this.gfxRenderer.writeBLDY8(0|t);break;case 67108960:this.sound.writeSOUND1CNT8_0(0|t);break;case 67108962:this.sound.writeSOUND1CNT8_2(0|t);break;case 67108963:this.sound.writeSOUND1CNT8_3(0|t);break;case 67108964:this.sound.writeSOUND1CNTX8_0(0|t);break;case 67108965:this.sound.writeSOUND1CNTX8_1(0|t);break;case 67108968:this.sound.writeSOUND2CNTL8_0(0|t);break;case 67108969:this.sound.writeSOUND2CNTL8_1(0|t);break;case 67108972:this.sound.writeSOUND2CNTH8_0(0|t);break;case 67108973:this.sound.writeSOUND2CNTH8_1(0|t);break;case 67108976:this.sound.writeSOUND3CNT8_0(0|t);break;case 67108978:this.sound.writeSOUND3CNT8_2(0|t);break;case 67108979:this.sound.writeSOUND3CNT8_3(0|t);break;case 67108980:this.sound.writeSOUND3CNTX8_0(0|t);break;case 67108981:this.sound.writeSOUND3CNTX8_1(0|t);break;case 67108984:this.sound.writeSOUND4CNTL8_0(0|t);break;case 67108985:this.sound.writeSOUND4CNTL8_1(0|t);break;case 67108988:this.sound.writeSOUND4CNTH8_0(0|t);break;case 67108989:this.sound.writeSOUND4CNTH8_1(0|t);break;case 67108992:this.sound.writeSOUNDCNTL8_0(0|t);break;case 67108993:this.sound.writeSOUNDCNTL8_1(0|t);break;case 67108994:this.sound.writeSOUNDCNTH8_0(0|t);break;case 67108995:this.sound.writeSOUNDCNTH8_1(0|t);break;case 67108996:this.sound.writeSOUNDCNTX8(0|t);break;case 67109e3:this.sound.writeSOUNDBIAS8_0(0|t);break;case 67109001:this.sound.writeSOUNDBIAS8_1(0|t);break;case 67109008:case 67109009:case 67109010:case 67109011:case 67109012:case 67109013:case 67109014:case 67109015:case 67109016:case 67109017:case 67109018:case 67109019:case 67109020:case 67109021:case 67109022:case 67109023:this.sound.writeWAVE8(15&e,0|t);break;case 67109024:case 67109025:case 67109026:case 67109027:this.sound.writeFIFOA8(0|t);break;case 67109028:case 67109029:case 67109030:case 67109031:this.sound.writeFIFOB8(0|t);break;case 67109040:this.dmaChannel0.writeDMASource8_0(0|t);break;case 67109041:this.dmaChannel0.writeDMASource8_1(0|t);break;case 67109042:this.dmaChannel0.writeDMASource8_2(0|t);break;case 67109043:this.dmaChannel0.writeDMASource8_3(0|t);break;case 67109044:this.dmaChannel0.writeDMADestination8_0(0|t);break;case 67109045:this.dmaChannel0.writeDMADestination8_1(0|t);break;case 67109046:this.dmaChannel0.writeDMADestination8_2(0|t);break;case 67109047:this.dmaChannel0.writeDMADestination8_3(0|t);break;case 67109048:this.dmaChannel0.writeDMAWordCount8_0(0|t);break;case 67109049:this.dmaChannel0.writeDMAWordCount8_1(0|t);break;case 67109050:this.dmaChannel0.writeDMAControl8_0(0|t);break;case 67109051:this.dmaChannel0.writeDMAControl8_1(0|t);break;case 67109052:this.dmaChannel1.writeDMASource8_0(0|t);break;case 67109053:this.dmaChannel1.writeDMASource8_1(0|t);break;case 67109054:this.dmaChannel1.writeDMASource8_2(0|t);break;case 67109055:this.dmaChannel1.writeDMASource8_3(0|t);break;case 67109056:this.dmaChannel1.writeDMADestination8_0(0|t);break;case 67109057:this.dmaChannel1.writeDMADestination8_1(0|t);break;case 67109058:this.dmaChannel1.writeDMADestination8_2(0|t);break;case 67109059:this.dmaChannel1.writeDMADestination8_3(0|t);break;case 67109060:this.dmaChannel1.writeDMAWordCount8_0(0|t);break;case 67109061:this.dmaChannel1.writeDMAWordCount8_1(0|t);break;case 67109062:this.dmaChannel1.writeDMAControl8_0(0|t);break;case 67109063:this.dmaChannel1.writeDMAControl8_1(0|t);break;case 67109064:this.dmaChannel2.writeDMASource8_0(0|t);break;case 67109065:this.dmaChannel2.writeDMASource8_1(0|t);break;case 67109066:this.dmaChannel2.writeDMASource8_2(0|t);break;case 67109067:this.dmaChannel2.writeDMASource8_3(0|t);break;case 67109068:this.dmaChannel2.writeDMADestination8_0(0|t);break;case 67109069:this.dmaChannel2.writeDMADestination8_1(0|t);break;case 67109070:this.dmaChannel2.writeDMADestination8_2(0|t);break;case 67109071:this.dmaChannel2.writeDMADestination8_3(0|t);break;case 67109072:this.dmaChannel2.writeDMAWordCount8_0(0|t);break;case 67109073:this.dmaChannel2.writeDMAWordCount8_1(0|t);break;case 67109074:this.dmaChannel2.writeDMAControl8_0(0|t);break;case 67109075:this.dmaChannel2.writeDMAControl8_1(0|t);break;case 67109076:this.dmaChannel3.writeDMASource8_0(0|t);break;case 67109077:this.dmaChannel3.writeDMASource8_1(0|t);break;case 67109078:this.dmaChannel3.writeDMASource8_2(0|t);break;case 67109079:this.dmaChannel3.writeDMASource8_3(0|t);break;case 67109080:this.dmaChannel3.writeDMADestination8_0(0|t);break;case 67109081:this.dmaChannel3.writeDMADestination8_1(0|t);break;case 67109082:this.dmaChannel3.writeDMADestination8_2(0|t);break;case 67109083:this.dmaChannel3.writeDMADestination8_3(0|t);break;case 67109084:this.dmaChannel3.writeDMAWordCount8_0(0|t);break;case 67109085:this.dmaChannel3.writeDMAWordCount8_1(0|t);break;case 67109086:this.dmaChannel3.writeDMAControl8_0(0|t);break;case 67109087:this.dmaChannel3.writeDMAControl8_1(0|t);break;case 67109120:this.timer.writeTM0CNT8_0(0|t);break;case 67109121:this.timer.writeTM0CNT8_1(0|t);break;case 67109122:this.timer.writeTM0CNT8_2(0|t);break;case 67109124:this.timer.writeTM1CNT8_0(0|t);break;case 67109125:this.timer.writeTM1CNT8_1(0|t);break;case 67109126:this.timer.writeTM1CNT8_2(0|t);break;case 67109128:this.timer.writeTM2CNT8_0(0|t);break;case 67109129:this.timer.writeTM2CNT8_1(0|t);break;case 67109130:this.timer.writeTM2CNT8_2(0|t);break;case 67109132:this.timer.writeTM3CNT8_0(0|t);break;case 67109133:this.timer.writeTM3CNT8_1(0|t);break;case 67109134:this.timer.writeTM3CNT8_2(0|t);break;case 67109152:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_A0(255&t),this.IOCore.updateCoreEventTime();break;case 67109153:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_A1(255&t),this.IOCore.updateCoreEventTime();break;case 67109154:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_B0(255&t),this.IOCore.updateCoreEventTime();break;case 67109155:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_B1(255&t),this.IOCore.updateCoreEventTime();break;case 67109156:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_C0(255&t),this.IOCore.updateCoreEventTime();break;case 67109157:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_C1(255&t),this.IOCore.updateCoreEventTime();break;case 67109158:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_D0(255&t),this.IOCore.updateCoreEventTime();break;case 67109159:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_D1(255&t),this.IOCore.updateCoreEventTime();break;case 67109160:this.IOCore.updateSerialClocking(),this.serial.writeSIOCNT0(255&t),this.IOCore.updateCoreEventTime();break;case 67109161:this.IOCore.updateSerialClocking(),this.serial.writeSIOCNT1(255&t),this.IOCore.updateCoreEventTime();break;case 67109162:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA8_0(255&t),this.IOCore.updateCoreEventTime();break;case 67109163:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA8_1(255&t),this.IOCore.updateCoreEventTime();break;case 67109170:this.joypad.writeKeyControl8_0(0|t);break;case 67109171:this.joypad.writeKeyControl8_1(0|t);break;case 67109172:this.IOCore.updateSerialClocking(),this.serial.writeRCNT0(255&t),this.IOCore.updateCoreEventTime();break;case 67109173:this.IOCore.updateSerialClocking(),this.serial.writeRCNT1(255&t),this.IOCore.updateCoreEventTime();break;case 67109376:this.irq.writeIE8_0(0|t);break;case 67109377:this.irq.writeIE8_1(0|t);break;case 67109378:this.irq.writeIF8_0(0|t);break;case 67109379:this.irq.writeIF8_1(0|t);break;case 67109380:this.wait.writeWAITCNT8_0(0|t);break;case 67109381:this.wait.writeWAITCNT8_1(0|t);break;case 67109384:this.irq.writeIME(0|t);break;case 67109632:this.wait.writePOSTBOOT(0|t);break;case 67109633:this.wait.writeHALTCNT(0|t);break;default:2048==(65532&e)&&this.wait.writeConfigureWRAM8(0|e,0|t)}},GameBoyAdvanceMemory.prototype.writeIODispatch16=function(e,t){switch(e|=0,t|=0,this.wait.singleClock(),-2&e){case 67108864:this.gfxRenderer.writeDISPCNT16(0|t);break;case 67108866:this.gfxRenderer.writeDISPCNT8_2(0|t);break;case 67108868:this.gfxState.writeDISPSTAT16(0|t);break;case 67108872:this.gfxRenderer.writeBG0CNT16(0|t);break;case 67108874:this.gfxRenderer.writeBG1CNT16(0|t);break;case 67108876:this.gfxRenderer.writeBG2CNT16(0|t);break;case 67108878:this.gfxRenderer.writeBG3CNT16(0|t);break;case 67108880:this.gfxRenderer.writeBG0HOFS16(0|t);break;case 67108882:this.gfxRenderer.writeBG0VOFS16(0|t);break;case 67108884:this.gfxRenderer.writeBG1HOFS16(0|t);break;case 67108886:this.gfxRenderer.writeBG1VOFS16(0|t);break;case 67108888:this.gfxRenderer.writeBG2HOFS16(0|t);break;case 67108890:this.gfxRenderer.writeBG2VOFS16(0|t);break;case 67108892:this.gfxRenderer.writeBG3HOFS16(0|t);break;case 67108894:this.gfxRenderer.writeBG3VOFS16(0|t);break;case 67108896:this.gfxRenderer.writeBG2PA16(0|t);break;case 67108898:this.gfxRenderer.writeBG2PB16(0|t);break;case 67108900:this.gfxRenderer.writeBG2PC16(0|t);break;case 67108902:this.gfxRenderer.writeBG2PD16(0|t);break;case 67108904:this.gfxRenderer.writeBG2X16_0(0|t);break;case 67108906:this.gfxRenderer.writeBG2X16_1(0|t);break;case 67108908:this.gfxRenderer.writeBG2Y16_0(0|t);break;case 67108910:this.gfxRenderer.writeBG2Y16_1(0|t);break;case 67108912:this.gfxRenderer.writeBG3PA16(0|t);break;case 67108914:this.gfxRenderer.writeBG3PB16(0|t);break;case 67108916:this.gfxRenderer.writeBG3PC16(0|t);break;case 67108918:this.gfxRenderer.writeBG3PD16(0|t);break;case 67108920:this.gfxRenderer.writeBG3X16_0(0|t);break;case 67108922:this.gfxRenderer.writeBG3X16_1(0|t);break;case 67108924:this.gfxRenderer.writeBG3Y16_0(0|t);break;case 67108926:this.gfxRenderer.writeBG3Y16_1(0|t);break;case 67108928:this.gfxRenderer.writeWIN0XCOORD16(0|t);break;case 67108930:this.gfxRenderer.writeWIN1XCOORD16(0|t);break;case 67108932:this.gfxRenderer.writeWIN0YCOORD16(0|t);break;case 67108934:this.gfxRenderer.writeWIN1YCOORD16(0|t);break;case 67108936:this.gfxRenderer.writeWININ16(0|t);break;case 67108938:this.gfxRenderer.writeWINOUT16(0|t);break;case 67108940:this.gfxRenderer.writeMOSAIC16(0|t);break;case 67108944:this.gfxRenderer.writeBLDCNT16(0|t);break;case 67108946:this.gfxRenderer.writeBLDALPHA16(0|t);break;case 67108948:this.gfxRenderer.writeBLDY8(0|t);break;case 67108960:this.sound.writeSOUND1CNT8_0(0|t);break;case 67108962:this.sound.writeSOUND1CNT16(0|t);break;case 67108964:this.sound.writeSOUND1CNTX16(0|t);break;case 67108968:this.sound.writeSOUND2CNTL16(0|t);break;case 67108972:this.sound.writeSOUND2CNTH16(0|t);break;case 67108976:this.sound.writeSOUND3CNT8_0(0|t);break;case 67108978:this.sound.writeSOUND3CNT16(0|t);break;case 67108980:this.sound.writeSOUND3CNTX16(0|t);break;case 67108984:this.sound.writeSOUND4CNTL16(0|t);break;case 67108988:this.sound.writeSOUND4CNTH16(0|t);break;case 67108992:this.sound.writeSOUNDCNTL16(0|t);break;case 67108994:this.sound.writeSOUNDCNTH16(0|t);break;case 67108996:this.sound.writeSOUNDCNTX8(0|t);break;case 67109e3:this.sound.writeSOUNDBIAS16(0|t);break;case 67109008:case 67109010:case 67109012:case 67109014:case 67109016:case 67109018:case 67109020:case 67109022:this.sound.writeWAVE16(14&e,0|t);break;case 67109024:case 67109026:this.sound.writeFIFOA16(0|t);break;case 67109028:case 67109030:this.sound.writeFIFOB16(0|t);break;case 67109040:this.dmaChannel0.writeDMASource16_0(0|t);break;case 67109042:this.dmaChannel0.writeDMASource16_1(0|t);break;case 67109044:this.dmaChannel0.writeDMADestination16_0(0|t);break;case 67109046:this.dmaChannel0.writeDMADestination16_1(0|t);break;case 67109048:this.dmaChannel0.writeDMAWordCount16(0|t);break;case 67109050:this.dmaChannel0.writeDMAControl16(0|t);break;case 67109052:this.dmaChannel1.writeDMASource16_0(0|t);break;case 67109054:this.dmaChannel1.writeDMASource16_1(0|t);break;case 67109056:this.dmaChannel1.writeDMADestination16_0(0|t);break;case 67109058:this.dmaChannel1.writeDMADestination16_1(0|t);break;case 67109060:this.dmaChannel1.writeDMAWordCount16(0|t);break;case 67109062:this.dmaChannel1.writeDMAControl16(0|t);break;case 67109064:this.dmaChannel2.writeDMASource16_0(0|t);break;case 67109066:this.dmaChannel2.writeDMASource16_1(0|t);break;case 67109068:this.dmaChannel2.writeDMADestination16_0(0|t);break;case 67109070:this.dmaChannel2.writeDMADestination16_1(0|t);break;case 67109072:this.dmaChannel2.writeDMAWordCount16(0|t);break;case 67109074:this.dmaChannel2.writeDMAControl16(0|t);break;case 67109076:this.dmaChannel3.writeDMASource16_0(0|t);break;case 67109078:this.dmaChannel3.writeDMASource16_1(0|t);break;case 67109080:this.dmaChannel3.writeDMADestination16_0(0|t);break;case 67109082:this.dmaChannel3.writeDMADestination16_1(0|t);break;case 67109084:this.dmaChannel3.writeDMAWordCount16(0|t);break;case 67109086:this.dmaChannel3.writeDMAControl16(0|t);break;case 67109120:this.timer.writeTM0CNT16(0|t);break;case 67109122:this.timer.writeTM0CNT8_2(0|t);break;case 67109124:this.timer.writeTM1CNT16(0|t);break;case 67109126:this.timer.writeTM1CNT8_2(0|t);break;case 67109128:this.timer.writeTM2CNT16(0|t);break;case 67109130:this.timer.writeTM2CNT8_2(0|t);break;case 67109132:this.timer.writeTM3CNT16(0|t);break;case 67109134:this.timer.writeTM3CNT8_2(0|t);break;case 67109152:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_A0(255&t),this.serial.writeSIODATA_A1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109154:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_B0(255&t),this.serial.writeSIODATA_B1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109156:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_C0(255&t),this.serial.writeSIODATA_C1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109158:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_D0(255&t),this.serial.writeSIODATA_D1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109160:this.IOCore.updateSerialClocking(),this.serial.writeSIOCNT0(255&t),this.serial.writeSIOCNT1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109162:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA8_0(255&t),this.serial.writeSIODATA8_1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109170:this.joypad.writeKeyControl16(0|t);break;case 67109172:this.IOCore.updateSerialClocking(),this.serial.writeRCNT0(255&t),this.serial.writeRCNT1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109376:this.irq.writeIE16(0|t);break;case 67109378:this.irq.writeIF16(0|t);break;case 67109380:this.wait.writeWAITCNT16(0|t);break;case 67109384:this.irq.writeIME(0|t);break;case 67109632:this.wait.writeHALT16(0|t);break;default:2048==(65532&e)&&this.wait.writeConfigureWRAM16(0|e,0|t)}},GameBoyAdvanceMemory.prototype.writeIODispatch32=function(e,t){switch(e|=0,t|=0,this.wait.singleClock(),-4&e){case 67108864:this.gfxRenderer.writeDISPCNT32(0|t);break;case 67108868:this.gfxState.writeDISPSTAT16(0|t);break;case 67108872:this.gfxRenderer.writeBG0BG1CNT32(0|t);break;case 67108876:this.gfxRenderer.writeBG2BG3CNT32(0|t);break;case 67108880:this.gfxRenderer.writeBG0OFS32(0|t);break;case 67108884:this.gfxRenderer.writeBG1OFS32(0|t);break;case 67108888:this.gfxRenderer.writeBG2OFS32(0|t);break;case 67108892:this.gfxRenderer.writeBG3OFS32(0|t);break;case 67108896:this.gfxRenderer.writeBG2PAB32(0|t);break;case 67108900:this.gfxRenderer.writeBG2PCD32(0|t);break;case 67108904:this.gfxRenderer.writeBG2X32(0|t);break;case 67108908:this.gfxRenderer.writeBG2Y32(0|t);break;case 67108912:this.gfxRenderer.writeBG3PAB32(0|t);break;case 67108916:this.gfxRenderer.writeBG3PCD32(0|t);break;case 67108920:this.gfxRenderer.writeBG3X32(0|t);break;case 67108924:this.gfxRenderer.writeBG3Y32(0|t);break;case 67108928:this.gfxRenderer.writeWINXCOORD32(0|t);break;case 67108932:this.gfxRenderer.writeWINYCOORD32(0|t);break;case 67108936:this.gfxRenderer.writeWINCONTROL32(0|t);break;case 67108940:this.gfxRenderer.writeMOSAIC16(0|t);break;case 67108944:this.gfxRenderer.writeBLDCNT32(0|t);break;case 67108948:this.gfxRenderer.writeBLDY8(0|t);break;case 67108960:this.sound.writeSOUND1CNT32(0|t);break;case 67108964:this.sound.writeSOUND1CNTX16(0|t);break;case 67108968:this.sound.writeSOUND2CNTL16(0|t);break;case 67108972:this.sound.writeSOUND2CNTH16(0|t);break;case 67108976:this.sound.writeSOUND3CNT32(0|t);break;case 67108980:this.sound.writeSOUND3CNTX16(0|t);break;case 67108984:this.sound.writeSOUND4CNTL16(0|t);break;case 67108988:this.sound.writeSOUND4CNTH16(0|t);break;case 67108992:this.sound.writeSOUNDCNT32(0|t);break;case 67108996:this.sound.writeSOUNDCNTX8(0|t);break;case 67109e3:this.sound.writeSOUNDBIAS16(0|t);break;case 67109008:case 67109012:case 67109016:case 67109020:this.sound.writeWAVE32(12&e,0|t);break;case 67109024:this.sound.writeFIFOA32(0|t);break;case 67109028:this.sound.writeFIFOB32(0|t);break;case 67109040:this.dmaChannel0.writeDMASource32(0|t);break;case 67109044:this.dmaChannel0.writeDMADestination32(0|t);break;case 67109048:this.dmaChannel0.writeDMAControl32(0|t);break;case 67109052:this.dmaChannel1.writeDMASource32(0|t);break;case 67109056:this.dmaChannel1.writeDMADestination32(0|t);break;case 67109060:this.dmaChannel1.writeDMAControl32(0|t);break;case 67109064:this.dmaChannel2.writeDMASource32(0|t);break;case 67109068:this.dmaChannel2.writeDMADestination32(0|t);break;case 67109072:this.dmaChannel2.writeDMAControl32(0|t);break;case 67109076:this.dmaChannel3.writeDMASource32(0|t);break;case 67109080:this.dmaChannel3.writeDMADestination32(0|t);break;case 67109084:this.dmaChannel3.writeDMAControl32(0|t);break;case 67109120:this.timer.writeTM0CNT32(0|t);break;case 67109124:this.timer.writeTM1CNT32(0|t);break;case 67109128:this.timer.writeTM2CNT32(0|t);break;case 67109132:this.timer.writeTM3CNT32(0|t);break;case 67109152:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_A0(255&t),this.serial.writeSIODATA_A1(t>>8&255),this.serial.writeSIODATA_B0(t>>16&255),this.serial.writeSIODATA_B1(t>>>24),this.IOCore.updateCoreEventTime();break;case 67109156:this.IOCore.updateSerialClocking(),this.serial.writeSIODATA_C0(255&t),this.serial.writeSIODATA_C1(t>>8&255),this.serial.writeSIODATA_D0(t>>16&255),this.serial.writeSIODATA_D1(t>>>24),this.IOCore.updateCoreEventTime();break;case 67109160:this.IOCore.updateSerialClocking(),this.serial.writeSIOCNT0(255&t),this.serial.writeSIOCNT1(t>>8&255),this.serial.writeSIODATA8_0(t>>16&255),this.serial.writeSIODATA8_1(t>>>24),this.IOCore.updateCoreEventTime();break;case 67109168:this.joypad.writeKeyControl16(t>>16);break;case 67109172:this.IOCore.updateSerialClocking(),this.serial.writeRCNT0(255&t),this.serial.writeRCNT1(t>>8&255),this.IOCore.updateCoreEventTime();break;case 67109184:7==t&&(window.joyCommBusy=!1),window.joyExch=t;break;case 67109200:window.joyRecv=t;break;case 67109204:window.joySend=t;break;case 67109208:break;case 67109376:this.irq.writeIRQ32(0|t);break;case 67109380:this.wait.writeWAITCNT16(0|t);break;case 67109384:this.irq.writeIME(0|t);break;case 67109632:this.wait.writeHALT16(0|t);break;default:2048==(65532&e)&&this.wait.writeConfigureWRAM32(0|t)}},"function"==typeof Math.imul?GameBoyAdvanceMemory.prototype.writeVRAM8Preliminary=function(e,t){switch(e|=0,t|=0,this.IOCore.updateGraphicsClocking(),e>>24){case 5:this.wait.VRAMAccess(),this.gfxRenderer.writePalette16(1022&e,0|Math.imul(255&t,257));break;case 6:this.wait.VRAMAccess(),this.gfxRenderer.writeVRAM8(0|e,0|t);break;default:this.wait.OAMAccess()}}:GameBoyAdvanceMemory.prototype.writeVRAM8Preliminary=function(e,t){switch(this.IOCore.updateGraphicsClocking(),e>>24){case 5:this.wait.VRAMAccess(),this.gfxRenderer.writePalette16(1022&e,257*(255&t));break;case 6:this.wait.VRAMAccess(),this.gfxRenderer.writeVRAM8(e,t);break;default:this.wait.OAMAccess()}},GameBoyAdvanceMemory.prototype.writePalette16=function(e,t){e|=0,t|=0,this.IOCore.updateGraphicsClocking(),this.wait.VRAMAccess(),this.gfxRenderer.writePalette16(1022&e,65535&t)},GameBoyAdvanceMemory.prototype.writeVRAM16=function(e,t){e|=0,t|=0,this.IOCore.updateGraphicsClocking(),this.wait.VRAMAccess(),this.gfxRenderer.writeVRAM16(0|e,0|t)},GameBoyAdvanceMemory.prototype.writeOBJ16=function(e,t){e|=0,t|=0,this.IOCore.updateGraphicsClocking(),this.wait.OAMAccess(),this.gfxRenderer.writeOAM16(0|e,0|t)},GameBoyAdvanceMemory.prototype.writePalette32=function(e,t){e|=0,t|=0,this.IOCore.updateGraphicsClocking(),this.wait.VRAMAccess32(),this.gfxRenderer.writePalette32(1020&e,0|t)},GameBoyAdvanceMemory.prototype.writeVRAM32=function(e,t){e|=0,t|=0,this.IOCore.updateGraphicsClocking(),this.wait.VRAMAccess32(),this.gfxRenderer.writeVRAM32(0|e,0|t)},GameBoyAdvanceMemory.prototype.writeOBJ32=function(e,t){e|=0,t|=0,this.IOCore.updateGraphicsClocking(),this.wait.OAMAccess(),this.gfxRenderer.writeOAM32(0|e,0|t)},GameBoyAdvanceMemory.prototype.writeROM8=function(e,t){e|=0,t|=0,this.wait.ROMAccess(0|e),this.cartridge.writeROM8(33554431&e,255&t)},GameBoyAdvanceMemory.prototype.writeROM16=function(e,t){e|=0,t|=0,this.wait.ROMAccess(0|e),this.cartridge.writeROM16(33554430&e,65535&t)},GameBoyAdvanceMemory.prototype.writeROM16DMA=function(e,t){e|=0,t|=0,this.wait.ROMAccess(0|e),this.cartridge.writeROM16DMA(33554430&e,65535&t)},GameBoyAdvanceMemory.prototype.writeROM32=function(e,t){e|=0,t|=0,this.wait.ROMAccess32(0|e),this.cartridge.writeROM32(33554428&e,0|t)},GameBoyAdvanceMemory.prototype.writeSRAM8=function(e,t){e|=0,t|=0,this.wait.SRAMAccess(),this.saves.writeSRAM(65535&e,255&t)},GameBoyAdvanceMemory.prototype.writeSRAM16=function(e,t){e|=0,t|=0,this.wait.SRAMAccess(),this.saves.writeSRAM(65534&e,t>>((2&e)<<3)&255)},GameBoyAdvanceMemory.prototype.writeSRAM32=function(e,t){e|=0,t|=0,this.wait.SRAMAccess(),this.saves.writeSRAM(65532&e,255&t)},GameBoyAdvanceMemory.prototype.writeUnused=function(){this.wait.singleClock()},GameBoyAdvanceMemory.prototype.remapWRAM=function(e){if((0|(e&=33))!=(0|this.WRAMControlFlags)){switch(0|e){case 0:this.memoryRead8=this.memoryRead8Generated[0],this.memoryWrite8=this.memoryWrite8Generated[0],this.memoryRead16=this.memoryRead16Generated[0],this.memoryReadDMA16=this.memoryReadDMA16Generated[0],this.memoryReadDMAFull16=this.memoryReadDMA16FullGenerated[0],this.memoryReadCPU16=this.memoryReadCPU16Generated[0],this.memoryWrite16=this.memoryWrite16Generated[0],this.memoryWriteDMA16=this.memoryWriteDMA16Generated[0],this.memoryWriteDMAFull16=this.memoryWriteDMA16FullGenerated[0],this.memoryRead32=this.memoryRead32Generated[0],this.memoryReadDMA32=this.memoryReadDMA32Generated[0],this.memoryReadDMAFull32=this.memoryReadDMA32FullGenerated[0],this.memoryReadCPU32=this.memoryReadCPU32Generated[0],this.memoryWrite32=this.memoryWrite32Generated[0],this.memoryWriteDMA32=this.memoryWriteDMA32Generated[0],this.memoryWriteDMAFull32=this.memoryWriteDMA32FullGenerated[0];break;case 32:this.memoryRead8=this.memoryRead8Generated[1],this.memoryWrite8=this.memoryWrite8Generated[1],this.memoryRead16=this.memoryRead16Generated[1],this.memoryReadDMA16=this.memoryReadDMA16Generated[1],this.memoryReadDMAFull16=this.memoryReadDMA16FullGenerated[1],this.memoryReadCPU16=this.memoryReadCPU16Generated[1],this.memoryWrite16=this.memoryWrite16Generated[1],this.memoryWriteDMA16=this.memoryWriteDMA16Generated[1],this.memoryWriteDMAFull16=this.memoryWriteDMA16FullGenerated[1],this.memoryRead32=this.memoryRead32Generated[1],this.memoryReadDMA32=this.memoryReadDMA32Generated[1],this.memoryReadDMAFull32=this.memoryReadDMA32FullGenerated[1],this.memoryReadCPU32=this.memoryReadCPU32Generated[1],this.memoryWrite32=this.memoryWrite32Generated[1],this.memoryWriteDMA32=this.memoryWriteDMA32Generated[1],this.memoryWriteDMAFull32=this.memoryWriteDMA32FullGenerated[1];break;default:this.memoryRead8=this.memoryRead8Generated[2],this.memoryWrite8=this.memoryWrite8Generated[2],this.memoryRead16=this.memoryRead16Generated[2],this.memoryReadDMA16=this.memoryReadDMA16Generated[2],this.memoryReadDMAFull16=this.memoryReadDMA16FullGenerated[2],this.memoryReadCPU16=this.memoryReadCPU16Generated[2],this.memoryWrite16=this.memoryWrite16Generated[2],this.memoryWriteDMA16=this.memoryWriteDMA16Generated[2],this.memoryWriteDMAFull16=this.memoryWriteDMA16FullGenerated[2],this.memoryRead32=this.memoryRead32Generated[2],this.memoryReadDMA32=this.memoryReadDMA32Generated[2],this.memoryReadDMAFull32=this.memoryReadDMA32FullGenerated[2],this.memoryReadCPU32=this.memoryReadCPU32Generated[2],this.memoryWrite32=this.memoryWrite32Generated[2],this.memoryWriteDMA32=this.memoryWriteDMA32Generated[2],this.memoryWriteDMAFull32=this.memoryWriteDMA32FullGenerated[2]}this.WRAMControlFlags=0|e}},GameBoyAdvanceMemory.prototype.readBIOS8=function(e){e|=0;return this.wait.singleClock(),0|((0|e)<16384?(0|this.cpu.registers[15])<16384?0|this.BIOS[16383&e]:this.lastBIOSREAD>>((3&e)<<3)&255:0|this.readUnused8CPUBase(0|e))},__LITTLE_ENDIAN__?(GameBoyAdvanceMemory.prototype.readBIOS16=function(e){e|=0;var t=0;return this.wait.singleClock(),(0|e)<16384?(e>>=1,t=(0|this.cpu.registers[15])<16384?0|this.BIOS16[8191&e]:this.lastBIOSREAD>>((1&e)<<4)&65535):t=0|this.readUnused16CPUBase(0|e),0|t},GameBoyAdvanceMemory.prototype.readBIOS16DMA=function(e){e|=0;var t=0;return this.wait.singleClock(),(0|e)<16384?(e>>=1,(0|this.cpu.registers[15])<16384&&(t=0|this.BIOS16[8191&e])):t=0|this.readUnused16DMABase(0|e),0|t},GameBoyAdvanceMemory.prototype.readBIOS16CPU=function(e){e|=0;var t=0;return this.IOCore.updateCoreSingle(),(0|e)<16384?(e>>=1,t=0|this.BIOS16[8191&e],this.lastBIOSREAD=0|t):t=0|this.readUnused16CPUBase(0|e),0|t},GameBoyAdvanceMemory.prototype.readBIOS32=function(e){e|=0;var t=0;return this.wait.singleClock(),(0|e)<16384?(e>>=2,t=(0|this.cpu.registers[15])<16384?0|this.BIOS32[4095&e]:0|this.lastBIOSREAD):t=0|this.cpu.getCurrentFetchValue(),0|t},GameBoyAdvanceMemory.prototype.readBIOS32DMA=function(e){e|=0;var t=0;return this.wait.singleClock(),(0|e)<16384?(e>>=2,(0|this.cpu.registers[15])<16384&&(t=0|this.BIOS32[4095&e])):t=0|this.dma.getCurrentFetchValue(),0|t},GameBoyAdvanceMemory.prototype.readBIOS32CPU=function(e){e|=0;var t=0;return this.IOCore.updateCoreSingle(),(0|e)<16384?(e>>=2,t=0|this.BIOS32[4095&e],this.lastBIOSREAD=0|t):t=0|this.cpu.getCurrentFetchValue(),0|t}):(GameBoyAdvanceMemory.prototype.readBIOS16=function(e){return this.wait.singleClock(),e<16384?this.cpu.registers[15]<16384?this.BIOS[-2&e]|this.BIOS[1|e]<<8:this.lastBIOSREAD>>((2&e)<<3)&65535:this.readUnused16CPUBase(e)},GameBoyAdvanceMemory.prototype.readBIOS16DMA=function(e){return this.wait.singleClock(),e<16384?this.cpu.registers[15]<16384?this.BIOS[-2&e]|this.BIOS[1|e]<<8:0:this.readUnused16DMABase(e)},GameBoyAdvanceMemory.prototype.readBIOS16CPU=function(e){if(this.IOCore.updateCoreSingle(),e<16384){var t=this.BIOS[-2&e]|this.BIOS[1|e]<<8;return this.lastBIOSREAD=t,t}return this.readUnused16CPUBase(e)},GameBoyAdvanceMemory.prototype.readBIOS32=function(e){return this.wait.singleClock(),e<16384?this.cpu.registers[15]<16384?(e&=-4,this.BIOS[e]|this.BIOS[e+1]<<8|this.BIOS[e+2]<<16|this.BIOS[e+3]<<24):this.lastBIOSREAD:this.cpu.getCurrentFetchValue()},GameBoyAdvanceMemory.prototype.readBIOS32DMA=function(e){return this.wait.singleClock(),e<16384?this.cpu.registers[15]<16384?(e&=-4,this.BIOS[e]|this.BIOS[e+1]<<8|this.BIOS[e+2]<<16|this.BIOS[e+3]<<24):0:this.dma.getCurrentFetchValue()},GameBoyAdvanceMemory.prototype.readBIOS32CPU=function(e){if(this.IOCore.updateCoreSingle(),e<16384){e&=-4;var t=this.BIOS[e]|this.BIOS[e+1]<<8|this.BIOS[e+2]<<16|this.BIOS[e+3]<<24;return this.lastBIOSREAD=t,t}return this.cpu.getCurrentFetchValue()}),GameBoyAdvanceMemory.prototype.readExternalWRAM8=function(e){return e|=0,this.wait.WRAMAccess(),0|this.externalRAM[262143&e]},__LITTLE_ENDIAN__?(GameBoyAdvanceMemory.prototype.readExternalWRAM16=function(e){return e|=0,this.wait.WRAMAccess(),0|this.externalRAM16[e>>1&131071]},GameBoyAdvanceMemory.prototype.readExternalWRAM16CPU=function(e){return e|=0,this.wait.WRAMAccess16CPU(),0|this.externalRAM16[e>>1&131071]},GameBoyAdvanceMemory.prototype.readExternalWRAM32=function(e){return e|=0,this.wait.WRAMAccess32(),0|this.externalRAM32[e>>2&65535]},GameBoyAdvanceMemory.prototype.readExternalWRAM32CPU=function(e){return e|=0,this.wait.WRAMAccess32CPU(),0|this.externalRAM32[e>>2&65535]}):(GameBoyAdvanceMemory.prototype.readExternalWRAM16=function(e){return this.wait.WRAMAccess(),e&=262142,this.externalRAM[e]|this.externalRAM[e+1]<<8},GameBoyAdvanceMemory.prototype.readExternalWRAM16CPU=function(e){return this.wait.WRAMAccess16CPU(),e&=262142,this.externalRAM[e]|this.externalRAM[e+1]<<8},GameBoyAdvanceMemory.prototype.readExternalWRAM32=function(e){return this.wait.WRAMAccess32(),e&=262140,this.externalRAM[e]|this.externalRAM[e+1]<<8|this.externalRAM[e+2]<<16|this.externalRAM[e+3]<<24},GameBoyAdvanceMemory.prototype.readExternalWRAM32CPU=function(e){return this.wait.WRAMAccess32CPU(),e&=262140,this.externalRAM[e]|this.externalRAM[e+1]<<8|this.externalRAM[e+2]<<16|this.externalRAM[e+3]<<24}),GameBoyAdvanceMemory.prototype.readInternalWRAM8=function(e){return e|=0,this.wait.singleClock(),0|this.internalRAM[32767&e]},__LITTLE_ENDIAN__?(GameBoyAdvanceMemory.prototype.readInternalWRAM16=function(e){return e|=0,this.wait.singleClock(),0|this.internalRAM16[e>>1&16383]},GameBoyAdvanceMemory.prototype.readInternalWRAM16CPU=function(e){return e|=0,this.IOCore.updateCoreSingle(),0|this.internalRAM16[e>>1&16383]},GameBoyAdvanceMemory.prototype.readInternalWRAM32=function(e){return e|=0,this.wait.singleClock(),0|this.internalRAM32[e>>2&8191]},GameBoyAdvanceMemory.prototype.readInternalWRAM32CPU=function(e){return e|=0,this.IOCore.updateCoreSingle(),0|this.internalRAM32[e>>2&8191]}):(GameBoyAdvanceMemory.prototype.readInternalWRAM16=function(e){return this.wait.singleClock(),e&=32766,this.internalRAM[e]|this.internalRAM[e+1]<<8},GameBoyAdvanceMemory.prototype.readInternalWRAM16CPU=function(e){return this.IOCore.updateCoreSingle(),e&=32766,this.internalRAM[e]|this.internalRAM[e+1]<<8},GameBoyAdvanceMemory.prototype.readInternalWRAM32=function(e){return this.wait.singleClock(),e&=32764,this.internalRAM[e]|this.internalRAM[e+1]<<8|this.internalRAM[e+2]<<16|this.internalRAM[e+3]<<24},GameBoyAdvanceMemory.prototype.readInternalWRAM32CPU=function(e){return this.IOCore.updateCoreSingle(),e&=32764,this.internalRAM[e]|this.internalRAM[e+1]<<8|this.internalRAM[e+2]<<16|this.internalRAM[e+3]<<24}),GameBoyAdvanceMemory.prototype.readIODispatch8=function(e){e|=0,this.wait.singleClock();var t=0;switch(0|e){case 67108864:t=0|this.gfxRenderer.readDISPCNT8_0();break;case 67108865:t=0|this.gfxRenderer.readDISPCNT8_1();break;case 67108866:t=0|this.gfxRenderer.readDISPCNT8_2();break;case 67108868:t=0|this.gfxState.readDISPSTAT8_0();break;case 67108869:t=0|this.gfxState.readDISPSTAT8_1();break;case 67108870:t=0|this.gfxState.readDISPSTAT8_2();break;case 67108872:t=0|this.gfxRenderer.readBG0CNT8_0();break;case 67108873:t=0|this.gfxRenderer.readBG0CNT8_1();break;case 67108874:t=0|this.gfxRenderer.readBG1CNT8_0();break;case 67108875:t=0|this.gfxRenderer.readBG1CNT8_1();break;case 67108876:t=0|this.gfxRenderer.readBG2CNT8_0();break;case 67108877:t=0|this.gfxRenderer.readBG2CNT8_1();break;case 67108878:t=0|this.gfxRenderer.readBG3CNT8_0();break;case 67108879:t=0|this.gfxRenderer.readBG3CNT8_1();break;case 67108936:t=0|this.gfxRenderer.readWIN0IN8();break;case 67108937:t=0|this.gfxRenderer.readWIN1IN8();break;case 67108938:t=0|this.gfxRenderer.readWINOUT8();break;case 67108939:t=0|this.gfxRenderer.readWINOBJIN8();break;case 67108944:t=0|this.gfxRenderer.readBLDCNT8_0();break;case 67108945:t=0|this.gfxRenderer.readBLDCNT8_1();break;case 67108946:t=0|this.gfxRenderer.readBLDALPHA8_0();break;case 67108947:t=0|this.gfxRenderer.readBLDALPHA8_1();break;case 67108960:t=0|this.sound.readSOUND1CNT8_0();break;case 67108962:t=0|this.sound.readSOUND1CNT8_2();break;case 67108963:t=0|this.sound.readSOUND1CNT8_3();break;case 67108965:t=0|this.sound.readSOUND1CNTX8();break;case 67108968:t=0|this.sound.readSOUND2CNTL8_0();break;case 67108969:t=0|this.sound.readSOUND2CNTL8_1();break;case 67108973:t=0|this.sound.readSOUND2CNTH8();break;case 67108976:t=0|this.sound.readSOUND3CNT8_0();break;case 67108979:t=0|this.sound.readSOUND3CNT8_3();break;case 67108981:t=0|this.sound.readSOUND3CNTX8();break;case 67108985:t=0|this.sound.readSOUND4CNTL8();break;case 67108988:t=0|this.sound.readSOUND4CNTH8_0();break;case 67108989:t=0|this.sound.readSOUND4CNTH8_1();break;case 67108992:t=0|this.sound.readSOUNDCNTL8_0();break;case 67108993:t=0|this.sound.readSOUNDCNTL8_1();break;case 67108994:t=0|this.sound.readSOUNDCNTH8_0();break;case 67108995:t=0|this.sound.readSOUNDCNTH8_1();break;case 67108996:t=0|this.sound.readSOUNDCNTX8();break;case 67109e3:t=0|this.sound.readSOUNDBIAS8_0();break;case 67109001:t=0|this.sound.readSOUNDBIAS8_1();break;case 67109008:case 67109009:case 67109010:case 67109011:case 67109012:case 67109013:case 67109014:case 67109015:case 67109016:case 67109017:case 67109018:case 67109019:case 67109020:case 67109021:case 67109022:case 67109023:t=0|this.sound.readWAVE8(15&e);break;case 67109050:t=0|this.dmaChannel0.readDMAControl8_0();break;case 67109051:t=0|this.dmaChannel0.readDMAControl8_1();break;case 67109062:t=0|this.dmaChannel1.readDMAControl8_0();break;case 67109063:t=0|this.dmaChannel1.readDMAControl8_1();break;case 67109074:t=0|this.dmaChannel2.readDMAControl8_0();break;case 67109075:t=0|this.dmaChannel2.readDMAControl8_1();break;case 67109086:t=0|this.dmaChannel3.readDMAControl8_0();break;case 67109087:t=0|this.dmaChannel3.readDMAControl8_1();break;case 67109120:t=0|this.timer.readTM0CNT8_0();break;case 67109121:t=0|this.timer.readTM0CNT8_1();break;case 67109122:t=0|this.timer.readTM0CNT8_2();break;case 67109124:t=0|this.timer.readTM1CNT8_0();break;case 67109125:t=0|this.timer.readTM1CNT8_1();break;case 67109126:t=0|this.timer.readTM1CNT8_2();break;case 67109128:t=0|this.timer.readTM2CNT8_0();break;case 67109129:t=0|this.timer.readTM2CNT8_1();break;case 67109130:t=0|this.timer.readTM2CNT8_2();break;case 67109132:t=0|this.timer.readTM3CNT8_0();break;case 67109133:t=0|this.timer.readTM3CNT8_1();break;case 67109134:t=0|this.timer.readTM3CNT8_2();break;case 67109152:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_A0();break;case 67109153:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_A1();break;case 67109154:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_B0();break;case 67109155:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_B1();break;case 67109156:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_C0();break;case 67109157:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_C1();break;case 67109158:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_D0();break;case 67109159:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA_D1();break;case 67109160:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIOCNT0();break;case 67109161:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIOCNT1();break;case 67109162:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA8_0();break;case 67109163:this.IOCore.updateSerialClocking(),t=0|this.serial.readSIODATA8_1();break;case 67109168:t=0|this.joypad.readKeyStatus8_0();break;case 67109169:t=0|this.joypad.readKeyStatus8_1();break;case 67109170:t=0|this.joypad.readKeyControl8_0();break;case 67109171:t=0|this.joypad.readKeyControl8_1();break;case 67109172:this.IOCore.updateSerialClocking(),t=0|this.serial.readRCNT0();break;case 67109173:this.IOCore.updateSerialClocking(),t=0|this.serial.readRCNT1();break;case 67109376:t=0|this.irq.readIE8_0();break;case 67109377:t=0|this.irq.readIE8_1();break;case 67109378:t=0|this.irq.readIF8_0();break;case 67109379:t=0|this.irq.readIF8_1();break;case 67109380:t=0|this.wait.readWAITCNT8_0();break;case 67109381:t=0|this.wait.readWAITCNT8_1();break;case 67109384:t=0|this.irq.readIME();break;case 67109632:t=0|this.wait.readPOSTBOOT();break;default:t=0|this.readIO8LessCalled(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readIO8LessCalled=function(e){var t=0;switch(0|(e|=0)){case 67108867:case 67108871:case 67108940:case 67108941:case 67108942:case 67108943:case 67108961:case 67108964:case 67108966:case 67108967:case 67108970:case 67108971:case 67108972:case 67108974:case 67108975:case 67108977:case 67108978:case 67108980:case 67108982:case 67108983:case 67108984:case 67108986:case 67108987:case 67108990:case 67108991:case 67108997:case 67108998:case 67108999:case 67109002:case 67109003:case 67109123:case 67109127:case 67109131:case 67109135:case 67109174:case 67109175:case 67109185:case 67109186:case 67109187:case 67109209:case 67109210:case 67109211:case 67109382:case 67109383:case 67109385:case 67109386:case 67109387:case 67109633:case 67109634:case 67109635:break;default:t=2048==(65532&e)?0|this.wait.readConfigureWRAM8(0|e):0|this.readUnused8CPUBase(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readIODispatch16=function(e){e|=0;return this.wait.singleClock(),0|(0|this.readIO16(0|e))},GameBoyAdvanceMemory.prototype.readIODispatch16CPU=function(e){return e|=0,this.IOCore.updateCoreSingle(),0|(0|this.readIO16(0|e))},GameBoyAdvanceMemory.prototype.readIO16=function(e){var t=0;switch(-2&(e|=0)){case 67108864:t=0|this.gfxRenderer.readDISPCNT16();break;case 67108866:t=0|this.gfxRenderer.readDISPCNT8_2();break;case 67108868:t=0|this.gfxState.readDISPSTAT16_0();break;case 67108870:t=0|this.gfxState.readDISPSTAT8_2();break;case 67108872:t=0|this.gfxRenderer.readBG0CNT16();break;case 67108874:t=0|this.gfxRenderer.readBG1CNT16();break;case 67108876:t=0|this.gfxRenderer.readBG2CNT16();break;case 67108878:t=0|this.gfxRenderer.readBG3CNT16();break;case 67108936:t=0|this.gfxRenderer.readWININ16();break;case 67108938:t=0|this.gfxRenderer.readWINOUT16();break;case 67108944:t=0|this.gfxRenderer.readBLDCNT16();break;case 67108946:t=0|this.gfxRenderer.readBLDALPHA16();break;case 67108960:t=0|this.sound.readSOUND1CNT8_0();break;case 67108962:t=this.sound.readSOUND1CNT8_2()|this.sound.readSOUND1CNT8_3()<<8;break;case 67108964:t=0|this.sound.readSOUND1CNTX16();break;case 67108968:t=0|this.sound.readSOUND2CNTL16();break;case 67108972:t=0|this.sound.readSOUND2CNTH16();break;case 67108976:t=0|this.sound.readSOUND3CNT8_0();break;case 67108978:t=0|this.sound.readSOUND3CNT16_1();break;case 67108980:t=0|this.sound.readSOUND3CNTX16();break;case 67108984:t=0|this.sound.readSOUND4CNTL16();break;case 67108988:t=0|this.sound.readSOUND4CNTH16();break;case 67108992:t=0|this.sound.readSOUNDCNTL16();break;case 67108994:t=0|this.sound.readSOUNDCNTH16();break;case 67108996:t=0|this.sound.readSOUNDCNTX8();break;case 67109e3:t=0|this.sound.readSOUNDBIAS16();break;case 67109008:case 67109010:case 67109012:case 67109014:case 67109016:case 67109018:case 67109020:case 67109022:t=0|this.sound.readWAVE16(15&e);break;case 67109050:t=0|this.dmaChannel0.readDMAControl16();break;case 67109062:t=0|this.dmaChannel1.readDMAControl16();break;case 67109074:t=0|this.dmaChannel2.readDMAControl16();break;case 67109086:t=0|this.dmaChannel3.readDMAControl16();break;case 67109120:t=0|this.timer.readTM0CNT16();break;case 67109122:t=0|this.timer.readTM0CNT8_2();break;case 67109124:t=0|this.timer.readTM1CNT16();break;case 67109126:t=0|this.timer.readTM1CNT8_2();break;case 67109128:t=0|this.timer.readTM2CNT16();break;case 67109130:t=0|this.timer.readTM2CNT8_2();break;case 67109132:t=0|this.timer.readTM3CNT16();break;case 67109134:t=0|this.timer.readTM3CNT8_2();break;case 67109152:this.IOCore.updateSerialClocking(),t=this.serial.readSIODATA_A0()|this.serial.readSIODATA_A1()<<8;break;case 67109154:this.IOCore.updateSerialClocking(),t=this.serial.readSIODATA_B0()|this.serial.readSIODATA_B1()<<8;break;case 67109156:this.IOCore.updateSerialClocking(),t=this.serial.readSIODATA_C0()|this.serial.readSIODATA_C1()<<8;break;case 67109158:this.IOCore.updateSerialClocking(),t=this.serial.readSIODATA_D0()|this.serial.readSIODATA_D1()<<8;break;case 67109160:this.IOCore.updateSerialClocking(),t=this.serial.readSIOCNT0()|this.serial.readSIOCNT1()<<8;break;case 67109162:this.IOCore.updateSerialClocking(),t=this.serial.readSIODATA8_0()|this.serial.readSIODATA8_1()<<8;break;case 67109168:t=0|this.joypad.readKeyStatus16();break;case 67109170:t=0|this.joypad.readKeyControl16();break;case 67109172:this.IOCore.updateSerialClocking(),t=this.serial.readRCNT0()|this.serial.readRCNT1()<<8;break;case 67109376:t=0|this.irq.readIE16();break;case 67109378:t=0|this.irq.readIF16();break;case 67109380:t=0|this.wait.readWAITCNT16();break;case 67109384:t=0|this.irq.readIME();break;case 67109632:t=0|this.wait.readPOSTBOOT();break;default:t=0|this.readIO16LessCalled(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readIO16LessCalled=function(e){var t=0;switch(-2&(e|=0)){case 67108940:case 67108942:case 67108966:case 67108970:case 67108974:case 67108982:case 67108986:case 67108990:case 67108998:case 67109002:case 67109174:case 67109186:case 67109210:case 67109382:case 67109386:case 67109634:break;default:t=2048==(65532&e)?0|this.wait.readConfigureWRAM16(0|e):0|this.readUnused16MultiBase(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readIODispatch32=function(e){return e|=0,this.wait.singleClock(),0|(0|this.readIO32(0|e))},GameBoyAdvanceMemory.prototype.readIODispatch32CPU=function(e){return e|=0,this.IOCore.updateCoreSingle(),0|(0|this.readIO32(0|e))},GameBoyAdvanceMemory.prototype.readIO32=function(e){var t=0;switch(-4&(e|=0)){case 67108864:t=0|this.gfxRenderer.readDISPCNT32();break;case 67108868:t=0|this.gfxState.readDISPSTAT32();break;case 67108872:t=0|this.gfxRenderer.readBG0BG1CNT32();break;case 67108876:t=0|this.gfxRenderer.readBG2BG3CNT32();break;case 67108936:t=0|this.gfxRenderer.readWINCONTROL32();break;case 67108944:t=0|this.gfxRenderer.readBLDCNT32();break;case 67108960:t=0|this.sound.readSOUND1CNT32();break;case 67108964:t=0|this.sound.readSOUND1CNTX16();break;case 67108968:t=0|this.sound.readSOUND2CNTL16();break;case 67108972:t=0|this.sound.readSOUND2CNTH16();break;case 67108976:t=0|this.sound.readSOUND3CNT32();break;case 67108980:t=0|this.sound.readSOUND3CNTX16();break;case 67108984:t=0|this.sound.readSOUND4CNTL16();break;case 67108988:t=0|this.sound.readSOUND4CNTH16();break;case 67108992:t=0|this.sound.readSOUNDCNT32();break;case 67108996:t=0|this.sound.readSOUNDCNTX8();break;case 67109e3:t=0|this.sound.readSOUNDBIAS16();break;case 67109008:case 67109012:case 67109016:case 67109020:t=0|this.sound.readWAVE32(15&e);break;case 67109048:t=this.dmaChannel0.readDMAControl16()<<16;break;case 67109060:t=this.dmaChannel1.readDMAControl16()<<16;break;case 67109072:t=this.dmaChannel2.readDMAControl16()<<16;break;case 67109084:t=this.dmaChannel3.readDMAControl16()<<16;break;case 67109120:t=0|this.timer.readTM0CNT32();break;case 67109124:t=0|this.timer.readTM1CNT32();break;case 67109128:t=0|this.timer.readTM2CNT32();break;case 67109132:t=0|this.timer.readTM3CNT32();break;case 67109136:this.IOCore.updateSerialClocking(),t=this.serial.readSIODATA_A0()|this.serial.readSIODATA_A1()<<8|this.serial.readSIODATA_B0()<<16|this.serial.readSIODATA_B1()<<24;break;case 67109156:this.IOCore.updateSerialClocking(),t=this.serial.readSIODATA_C0()|this.serial.readSIODATA_C1()<<8|this.serial.readSIODATA_D0()<<16|this.serial.readSIODATA_D1()<<24;break;case 67109160:this.IOCore.updateSerialClocking(),t=this.serial.readSIOCNT0()|this.serial.readSIOCNT1()<<8|this.serial.readSIODATA8_0()<<16|this.serial.readSIODATA8_1()<<24;break;case 67109168:t=0|this.joypad.readKeyStatusControl32();break;case 67109172:this.IOCore.updateSerialClocking(),t=this.serial.readRCNT0()|this.serial.readRCNT1()<<8;break;case 67109176:this.IOCore.updateSerialClocking(),t=0|this.serial.readJOYCNT();break;case 67109184:t=0|window.joyExch;break;case 67109200:t=0|window.joyRecv;break;case 67109204:t=0|window.joySend;break;case 67109204:this.IOCore.updateSerialClocking(),t=this.serial.readJOYBUS_SEND0()|this.serial.readJOYBUS_SEND1()<<8|this.serial.readJOYBUS_SEND2()<<16|this.serial.readJOYBUS_SEND3()<<24;break;case 67109208:this.IOCore.updateSerialClocking(),t=0|this.serial.readJOYBUS_STAT();break;case 67109376:t=0|this.irq.readIRQ32();break;case 67109380:t=0|this.wait.readWAITCNT16();break;case 67109384:t=0|this.irq.readIME();break;case 67109632:t=0|this.wait.readPOSTBOOT();break;default:t=2048==(65532&e)?0|this.wait.readConfigureWRAM32():0|this.readUnused32MultiBase()}return 0|t},GameBoyAdvanceMemory.prototype.readVRAM8Preliminary=function(e){e|=0,this.IOCore.updateGraphicsClocking();var t=0;switch(e>>24){case 5:this.wait.VRAMAccess(),t=0|this.gfxRenderer.readPalette8(0|e);break;case 6:this.wait.VRAMAccess(),t=0|this.gfxRenderer.readVRAM8(0|e);break;default:this.wait.OAMAccess(),t=0|this.gfxRenderer.readOAM(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readVRAM16Preliminary=function(e){e|=0,this.IOCore.updateGraphicsClocking();var t=0;switch(e>>24){case 5:this.wait.VRAMAccess(),t=0|this.gfxRenderer.readPalette16(0|e);break;case 6:this.wait.VRAMAccess(),t=0|this.gfxRenderer.readVRAM16(0|e);break;default:this.wait.OAMAccess(),t=0|this.gfxRenderer.readOAM16(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readVRAM16CPUPreliminary=function(e){e|=0,this.IOCore.updateGraphicsClocking();var t=0;switch(e>>24){case 5:this.wait.VRAMAccess16CPU(),t=0|this.gfxRenderer.readPalette16(0|e);break;case 6:this.wait.VRAMAccess16CPU(),t=0|this.gfxRenderer.readVRAM16(0|e);break;default:this.wait.OAMAccessCPU(),t=0|this.gfxRenderer.readOAM16(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readVRAM32Preliminary=function(e){e|=0,this.IOCore.updateGraphicsClocking();var t=0;switch(e>>24){case 5:this.wait.VRAMAccess32(),t=0|this.gfxRenderer.readPalette32(0|e);break;case 6:this.wait.VRAMAccess32(),t=0|this.gfxRenderer.readVRAM32(0|e);break;default:this.wait.OAMAccess(),t=0|this.gfxRenderer.readOAM32(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readVRAM32CPUPreliminary=function(e){e|=0,this.IOCore.updateGraphicsClocking();var t=0;switch(e>>24){case 5:this.wait.VRAMAccess32CPU(),t=0|this.gfxRenderer.readPalette32(0|e);break;case 6:this.wait.VRAMAccess32CPU(),t=0|this.gfxRenderer.readVRAM32(0|e);break;default:this.wait.OAMAccessCPU(),t=0|this.gfxRenderer.readOAM32(0|e)}return 0|t},GameBoyAdvanceMemory.prototype.readROM8=function(e){return e|=0,this.wait.ROMAccess(0|e),0|this.cartridge.readROM8(33554431&e)},GameBoyAdvanceMemory.prototype.readROM16=function(e){return e|=0,this.wait.ROMAccess(0|e),0|this.cartridge.readROM16(33554430&e)},GameBoyAdvanceMemory.prototype.readROM16CPU=function(e){return e|=0,this.wait.ROMAccess16CPU(0|e),0|this.cartridge.readROM16(33554430&e)},GameBoyAdvanceMemory.prototype.readROM32=function(e){return e|=0,this.wait.ROMAccess32(0|e),0|this.cartridge.readROM32(33554428&e)},GameBoyAdvanceMemory.prototype.readROM32CPU=function(e){return e|=0,this.wait.ROMAccess32CPU(0|e),0|this.cartridge.readROM32(33554428&e)},GameBoyAdvanceMemory.prototype.readROM28=function(e){return e|=0,this.wait.ROMAccess(0|e),0|this.cartridge.readROM8Space2(33554431&e)},GameBoyAdvanceMemory.prototype.readROM216=function(e){return e|=0,this.wait.ROMAccess(0|e),0|this.cartridge.readROM16Space2(33554430&e)},GameBoyAdvanceMemory.prototype.readROM216CPU=function(e){return e|=0,this.wait.ROMAccess16CPU(0|e),0|this.cartridge.readROM16Space2(33554430&e)},GameBoyAdvanceMemory.prototype.readROM232=function(e){return e|=0,this.wait.ROMAccess32(0|e),0|this.cartridge.readROM32Space2(33554428&e)},GameBoyAdvanceMemory.prototype.readROM232CPU=function(e){return e|=0,this.wait.ROMAccess32CPU(0|e),0|this.cartridge.readROM32Space2(33554428&e)},GameBoyAdvanceMemory.prototype.readSRAM8=function(e){return e|=0,this.wait.SRAMAccess(),0|this.saves.readSRAM(65535&e)},"function"==typeof Math.imul?(GameBoyAdvanceMemory.prototype.readSRAM16=function(e){return e|=0,this.wait.SRAMAccess(),0|Math.imul(0|this.saves.readSRAM(65534&e),257)},GameBoyAdvanceMemory.prototype.readSRAM16CPU=function(e){return e|=0,this.wait.SRAMAccessCPU(),0|Math.imul(0|this.saves.readSRAM(65534&e),257)},GameBoyAdvanceMemory.prototype.readSRAM32=function(e){return e|=0,this.wait.SRAMAccess(),0|Math.imul(0|this.saves.readSRAM(65532&e),16843009)},GameBoyAdvanceMemory.prototype.readSRAM32CPU=function(e){return e|=0,this.wait.SRAMAccessCPU(),0|Math.imul(0|this.saves.readSRAM(65532&e),16843009)}):(GameBoyAdvanceMemory.prototype.readSRAM16=function(e){return e|=0,this.wait.SRAMAccess(),257*(0|this.saves.readSRAM(65534&e))|0},GameBoyAdvanceMemory.prototype.readSRAM16CPU=function(e){return e|=0,this.wait.SRAMAccessCPU(),257*(0|this.saves.readSRAM(65534&e))|0},GameBoyAdvanceMemory.prototype.readSRAM32=function(e){return e|=0,this.wait.SRAMAccess(),16843009*(0|this.saves.readSRAM(65532&e))|0},GameBoyAdvanceMemory.prototype.readSRAM32CPU=function(e){return e|=0,this.wait.SRAMAccessCPU(),16843009*(0|this.saves.readSRAM(65532&e))|0}),GameBoyAdvanceMemory.prototype.readUnused8=function(e){return e|=0,this.wait.singleClock(),0|this.readUnused8CPUBase(0|e)},GameBoyAdvanceMemory.prototype.readUnused8CPUBase=function(e){return e|=0,this.cpu.getCurrentFetchValue()>>((3&e)<<3)&255},GameBoyAdvanceMemory.prototype.readUnused16=function(e){return e|=0,this.wait.singleClock(),0|this.readUnused16CPUBase(0|e)},GameBoyAdvanceMemory.prototype.readUnused16CPU=function(e){return e|=0,this.IOCore.updateCoreSingle(),0|this.readUnused16CPUBase(0|e)},GameBoyAdvanceMemory.prototype.readUnused16CPUBase=function(e){return e|=0,this.cpu.getCurrentFetchValue()>>((2&e)<<3)&65535},GameBoyAdvanceMemory.prototype.readUnused16DMA=function(e){return e|=0,this.wait.singleClock(),0|this.readUnused16DMABase(0|e)},GameBoyAdvanceMemory.prototype.readUnused16DMABase=function(e){return e|=0,this.dma.getCurrentFetchValue()>>((2&e)<<3)&65535},GameBoyAdvanceMemory.prototype.readUnused16MultiBase=function(e){return e|=0,this.readUnused32MultiBase()>>((2&e)<<3)&65535},GameBoyAdvanceMemory.prototype.readUnused32=function(){return this.wait.singleClock(),0|this.cpu.getCurrentFetchValue()},GameBoyAdvanceMemory.prototype.readUnused32CPU=function(){return this.IOCore.updateCoreSingle(),0|this.cpu.getCurrentFetchValue()},GameBoyAdvanceMemory.prototype.readUnused32DMA=function(){return this.wait.singleClock(),0|this.dma.getCurrentFetchValue()},GameBoyAdvanceMemory.prototype.readUnused32MultiBase=function(){return 0|this.IOCore.getCurrentFetchValue()},GameBoyAdvanceMemory.prototype.loadBIOS=function(){var e=1;if(16384==(0|this.IOCore.BIOS.length))for(var t=0;(0|t)<16384;t=1+(0|t)|0)this.BIOS[16383&t]=255&this.IOCore.BIOS[16383&t];else this.IOCore.SKIPBoot=!0,e=0;return 0|e},generateMemoryTopLevelDispatch(),GameBoyAdvanceIRQ.prototype.initialize=function(){this.interruptsEnabled=0,this.interruptsRequested=0,this.IME=0,this.gfxState=this.IOCore.gfxState,this.timer=this.IOCore.timer,this.dmaChannel0=this.IOCore.dmaChannel0,this.dmaChannel1=this.IOCore.dmaChannel1,this.dmaChannel2=this.IOCore.dmaChannel2,this.dmaChannel3=this.IOCore.dmaChannel3},GameBoyAdvanceIRQ.prototype.IRQMatch=function(){return this.interruptsEnabled&this.interruptsRequested},GameBoyAdvanceIRQ.prototype.checkForIRQFire=function(){this.IOCore.cpu.triggerIRQ(this.interruptsEnabled&this.interruptsRequested&this.IME)},GameBoyAdvanceIRQ.prototype.requestIRQ=function(e){e|=0,this.interruptsRequested=this.interruptsRequested|e,this.checkForIRQFire()},GameBoyAdvanceIRQ.prototype.writeIME=function(e){e|=0,this.IOCore.updateCoreClocking(),this.IME=e<<31>>31,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.writeIE8_0=function(e){e|=0,this.IOCore.updateCoreClocking(),e&=255,e|=16128&this.interruptsEnabled,this.interruptsEnabled=0|e,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.writeIE8_1=function(e){e|=0,this.IOCore.updateCoreClocking(),e=(63&e)<<8,e|=255&this.interruptsEnabled,this.interruptsEnabled=0|e,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.writeIE16=function(e){e|=0,this.IOCore.updateCoreClocking(),this.interruptsEnabled=16383&e,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.writeIF8_0=function(e){e|=0,this.IOCore.updateCoreClocking(),e=~(255&e),this.interruptsRequested=this.interruptsRequested&e,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.writeIF8_1=function(e){e|=0,this.IOCore.updateCoreClocking(),e=~((255&e)<<8),this.interruptsRequested=this.interruptsRequested&e,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.writeIF16=function(e){e|=0,this.IOCore.updateCoreClocking(),e=~e,this.interruptsRequested=this.interruptsRequested&e,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.writeIRQ32=function(e){e|=0,this.IOCore.updateCoreClocking(),this.interruptsEnabled=16383&e,e=~(e>>16),this.interruptsRequested=this.interruptsRequested&e,this.checkForIRQFire(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceIRQ.prototype.readIME=function(){return 0|1&this.IME},GameBoyAdvanceIRQ.prototype.readIE8_0=function(){return 0|255&this.interruptsEnabled},GameBoyAdvanceIRQ.prototype.readIE8_1=function(){return 0|this.interruptsEnabled>>8},GameBoyAdvanceIRQ.prototype.readIE16=function(){return 0|(0|this.interruptsEnabled)},GameBoyAdvanceIRQ.prototype.readIF8_0=function(){return this.IOCore.updateCoreSpillRetain(),0|255&this.interruptsRequested},GameBoyAdvanceIRQ.prototype.readIF8_1=function(){return this.IOCore.updateCoreSpillRetain(),0|this.interruptsRequested>>8},GameBoyAdvanceIRQ.prototype.readIF16=function(){return this.IOCore.updateCoreSpillRetain(),0|(0|this.interruptsRequested)},GameBoyAdvanceIRQ.prototype.readIRQ32=function(){return this.IOCore.updateCoreSpillRetain(),0|(this.interruptsRequested<<16|this.interruptsEnabled)},GameBoyAdvanceIRQ.prototype.nextEventTime=function(){var e=2147483647;return 0!=(1&this.interruptsEnabled)&&(e=0|this.gfxState.nextVBlankIRQEventTime()),0!=(2&this.interruptsEnabled)&&(e=0|Math.min(0|e,0|this.gfxState.nextHBlankIRQEventTime())),0!=(4&this.interruptsEnabled)&&(e=0|Math.min(0|e,0|this.gfxState.nextVCounterIRQEventTime())),0!=(8&this.interruptsEnabled)&&(e=0|Math.min(0|e,0|this.timer.nextTimer0IRQEventTime())),0!=(16&this.interruptsEnabled)&&(e=0|Math.min(0|e,0|this.timer.nextTimer1IRQEventTime())),0!=(32&this.interruptsEnabled)&&(e=0|Math.min(0|e,0|this.timer.nextTimer2IRQEventTime())),0!=(64&this.interruptsEnabled)&&(e=0|Math.min(0|e,0|this.timer.nextTimer3IRQEventTime())),0|e},GameBoyAdvanceIRQ.prototype.nextIRQEventTime=function(){var e=2147483647;return 0!=(0|this.IME)&&(e=0|this.nextEventTime()),0|e},GameBoyAdvanceJoyPad.prototype.initialize=function(){this.keyInput=1023,this.keyInterrupt=0},GameBoyAdvanceJoyPad.prototype.keyPress=function(e){e=1<<(0|(e|=0)),this.keyInput=this.keyInput&~e,this.checkForMatch()},GameBoyAdvanceJoyPad.prototype.keyRelease=function(e){e=1<<(0|(e|=0)),this.keyInput=this.keyInput|e,this.checkForMatch()},GameBoyAdvanceJoyPad.prototype.checkForMatch=function(){0!=(32768&this.keyInterrupt)?(~this.keyInput&this.keyInterrupt&1023)==(1023&this.keyInterrupt)&&(this.IOCore.deflagStop(),this.checkForIRQ()):0!=(~this.keyInput&this.keyInterrupt&1023)&&(this.IOCore.deflagStop(),this.checkForIRQ())},GameBoyAdvanceJoyPad.prototype.checkForIRQ=function(){0!=(16384&this.keyInterrupt)&&this.IOCore.irq.requestIRQ(4096)},GameBoyAdvanceJoyPad.prototype.readKeyStatus8_0=function(){return 255&this.keyInput},GameBoyAdvanceJoyPad.prototype.readKeyStatus8_1=function(){return this.keyInput>>8|0},GameBoyAdvanceJoyPad.prototype.readKeyStatus16=function(){return 0|this.keyInput},GameBoyAdvanceJoyPad.prototype.writeKeyControl8_0=function(e){e|=0,this.keyInterrupt=49920&this.keyInterrupt,e&=255,this.keyInterrupt=this.keyInterrupt|e},GameBoyAdvanceJoyPad.prototype.writeKeyControl8_1=function(e){e|=0,this.keyInterrupt=255&this.keyInterrupt,e&=195,this.keyInterrupt=this.keyInterrupt|e<<8},GameBoyAdvanceJoyPad.prototype.writeKeyControl16=function(e){e|=0,this.keyInterrupt=50175&e},GameBoyAdvanceJoyPad.prototype.readKeyControl8_0=function(){return 255&this.keyInterrupt},GameBoyAdvanceJoyPad.prototype.readKeyControl8_1=function(){return this.keyInterrupt>>8|0},GameBoyAdvanceJoyPad.prototype.readKeyControl16=function(){return 0|this.keyInterrupt},GameBoyAdvanceJoyPad.prototype.readKeyStatusControl32=function(){return this.keyInput|this.keyInterrupt<<16},GameBoyAdvanceSerial.prototype.initialize=function(){this.SIODATA_A=65535,this.SIODATA_B=65535,this.SIODATA_C=65535,this.SIODATA_D=65535,this.SIOShiftClockExternal=0,this.SIOShiftClockDivider=64,this.SIOCNT0_DATA=12,this.SIOTransferStarted=!1,this.SIOMULT_PLAYER_NUMBER=0,this.SIOCOMMERROR=!1,this.SIOBaudRate=0,this.SIOCNT_UART_CTS=!1,this.SIOCNT_UART_MISC=0,this.SIOCNT_UART_FIFO=0,this.SIOCNT_IRQ=0,this.SIOCNT_MODE=0,this.SIOCNT_UART_RECV_ENABLE=!1,this.SIOCNT_UART_SEND_ENABLE=!1,this.SIOCNT_UART_PARITY_ENABLE=!1,this.SIOCNT_UART_FIFO_ENABLE=!1,this.SIODATA8=65535,this.RCNTMode=0,this.RCNTIRQ=!1,this.RCNTDataBits=0,this.RCNTDataBitFlow=0,this.JOYBUS_IRQ=0,this.JOYBUS_CNTL_FLAGS=0,this.JOYBUS_RECV0=255,this.JOYBUS_RECV1=255,this.JOYBUS_RECV2=255,this.JOYBUS_RECV3=255,this.JOYBUS_SEND0=255,this.JOYBUS_SEND1=255,this.JOYBUS_SEND2=255,this.JOYBUS_SEND3=255,this.JOYBUS_STAT=0,this.shiftClocks=0,this.serialBitsShifted=0},GameBoyAdvanceSerial.prototype.SIOMultiplayerBaudRate=[9600,38400,57600,115200],GameBoyAdvanceSerial.prototype.addClocks=function(e){if(e|=0,(0|this.RCNTMode)<2)switch(0|this.SIOCNT_MODE){case 0:case 1:if(this.SIOTransferStarted&&0==(0|this.SIOShiftClockExternal))for(this.shiftClocks=(0|this.shiftClocks)+(0|e)|0;(0|this.shiftClocks)>=(0|this.SIOShiftClockDivider);)this.shiftClocks=(0|this.shiftClocks)-(0|this.SIOShiftClockDivider)|0,this.clockSerial();break;case 2:if(this.SIOTransferStarted&&0==(0|this.SIOMULT_PLAYER_NUMBER))for(this.shiftClocks=(0|this.shiftClocks)+(0|e)|0;(0|this.shiftClocks)>=(0|this.SIOShiftClockDivider);)this.shiftClocks=(0|this.shiftClocks)-(0|this.SIOShiftClockDivider)|0,this.clockMultiplayer();break;case 3:if(this.SIOCNT_UART_SEND_ENABLE&&!this.SIOCNT_UART_CTS)for(this.shiftClocks=(0|this.shiftClocks)+(0|e)|0;(0|this.shiftClocks)>=(0|this.SIOShiftClockDivider);)this.shiftClocks=(0|this.shiftClocks)-(0|this.SIOShiftClockDivider)|0,this.clockUART()}},GameBoyAdvanceSerial.prototype.clockSerial=function(){this.serialBitsShifted=1+(0|this.serialBitsShifted)|0,0==(0|this.SIOCNT_MODE)?(this.SIODATA8=65535&(this.SIODATA8<<1|1),8==(0|this.serialBitsShifted)&&(this.SIOTransferStarted=!1,this.serialBitsShifted=0,this.SIOCNT_IRQ)):(this.SIODATA_D=this.SIODATA_D<<1&254|this.SIODATA_C>>7,this.SIODATA_C=this.SIODATA_C<<1&254|this.SIODATA_B>>7,this.SIODATA_B=this.SIODATA_B<<1&254|this.SIODATA_A>>7,this.SIODATA_A=this.SIODATA_A<<1&254|1,32==(0|this.serialBitsShifted)&&(this.SIOTransferStarted=!1,this.serialBitsShifted=0,this.SIOCNT_IRQ))},GameBoyAdvanceSerial.prototype.clockMultiplayer=function(){this.SIODATA_A=0|this.SIODATA8,this.SIODATA_B=65535,this.SIODATA_C=65535,this.SIODATA_D=65535,this.SIOTransferStarted=!1,this.SIOCOMMERROR=!0,this.SIOCNT_IRQ},GameBoyAdvanceSerial.prototype.clockUART=function(){this.serialBitsShifted=1+(0|this.serialBitsShifted)|0,this.SIOCNT_UART_FIFO_ENABLE?8==(0|this.serialBitsShifted)&&(this.serialBitsShifted=0,this.SIOCNT_UART_FIFO=0|Math.max((0|this.SIOCNT_UART_FIFO)-1|0,0),0==(0|this.SIOCNT_UART_FIFO)&&this.SIOCNT_IRQ):8==(0|this.serialBitsShifted)&&(this.serialBitsShifted=0,this.SIOCNT_IRQ)},GameBoyAdvanceSerial.prototype.writeSIODATA_A0=function(e){e|=0,this.SIODATA_A=65280&this.SIODATA_A|e},GameBoyAdvanceSerial.prototype.readSIODATA_A0=function(){return 255&this.SIODATA_A},GameBoyAdvanceSerial.prototype.writeSIODATA_A1=function(e){e|=0,this.SIODATA_A=255&this.SIODATA_A|e<<8},GameBoyAdvanceSerial.prototype.readSIODATA_A1=function(){return this.SIODATA_A>>8},GameBoyAdvanceSerial.prototype.writeSIODATA_B0=function(e){e|=0,this.SIODATA_B=65280&this.SIODATA_B|e},GameBoyAdvanceSerial.prototype.readSIODATA_B0=function(){return 255&this.SIODATA_B},GameBoyAdvanceSerial.prototype.writeSIODATA_B1=function(e){e|=0,this.SIODATA_B=255&this.SIODATA_B|e<<8},GameBoyAdvanceSerial.prototype.readSIODATA_B1=function(){return this.SIODATA_B>>8},GameBoyAdvanceSerial.prototype.writeSIODATA_C0=function(e){e|=0,this.SIODATA_C=65280&this.SIODATA_C|e},GameBoyAdvanceSerial.prototype.readSIODATA_C0=function(){return 255&this.SIODATA_C},GameBoyAdvanceSerial.prototype.writeSIODATA_C1=function(e){e|=0,this.SIODATA_C=255&this.SIODATA_C|e<<8},GameBoyAdvanceSerial.prototype.readSIODATA_C1=function(){return this.SIODATA_C>>8},GameBoyAdvanceSerial.prototype.writeSIODATA_D0=function(e){e|=0,this.SIODATA_D=65280&this.SIODATA_D|e},GameBoyAdvanceSerial.prototype.readSIODATA_D0=function(){return 255&this.SIODATA_D},GameBoyAdvanceSerial.prototype.writeSIODATA_D1=function(e){e|=0,this.SIODATA_D=255&this.SIODATA_D|e<<8},GameBoyAdvanceSerial.prototype.readSIODATA_D1=function(){return this.SIODATA_D>>8},GameBoyAdvanceSerial.prototype.writeSIOCNT0=function(e){if((0|this.RCNTMode)<2)switch(0|this.SIOCNT_MODE){case 0:case 1:this.SIOShiftClockExternal=1&e,this.SIOShiftClockDivider=0!=(2&e)?8:64,this.SIOCNT0_DATA=11&e,0!=(128&e)?this.SIOTransferStarted||(this.SIOTransferStarted=!0,this.serialBitsShifted=0,this.shiftClocks=0):this.SIOTransferStarted=!1;break;case 2:this.SIOBaudRate=3&e,this.SIOShiftClockDivider=0|this.SIOMultiplayerBaudRate[0|this.SIOBaudRate],this.SIOMULT_PLAYER_NUMBER=e>>4&3,this.SIOCOMMERROR=0!=(64&e),0!=(128&e)?this.SIOTransferStarted||(this.SIOTransferStarted=!0,0==(0|this.SIOMULT_PLAYER_NUMBER)&&(this.SIODATA_A=65535,this.SIODATA_B=65535,this.SIODATA_C=65535,this.SIODATA_D=65535),this.serialBitsShifted=0,this.shiftClocks=0):this.SIOTransferStarted=!1;break;case 3:this.SIOBaudRate=3&e,this.SIOShiftClockDivider=0|this.SIOMultiplayerBaudRate[0|this.SIOBaudRate],this.SIOCNT_UART_MISC=(207&e)>>2,this.SIOCNT_UART_CTS=0!=(4&e)}},GameBoyAdvanceSerial.prototype.readSIOCNT0=function(){if(this.RCNTMode<2)switch(this.SIOCNT_MODE){case 0:case 1:return 116|(this.SIOTransferStarted?128:0)|this.SIOCNT0_DATA;case 2:return(this.SIOTransferStarted?128:0)|(this.SIOCOMMERROR?64:0)|this.SIOMULT_PLAYER_NUMBER<<4|this.SIOBaudRate;case 3:return this.SIOCNT_UART_MISC<<2|(4==this.SIOCNT_UART_FIFO?48:32)|this.SIOBaudRate}return 255},GameBoyAdvanceSerial.prototype.writeSIOCNT1=function(e){this.SIOCNT_IRQ=64&e,this.SIOCNT_MODE=e>>4&3,this.SIOCNT_UART_RECV_ENABLE=0!=(8&e),this.SIOCNT_UART_SEND_ENABLE=0!=(4&e),this.SIOCNT_UART_PARITY_ENABLE=0!=(2&e),this.SIOCNT_UART_FIFO_ENABLE=0!=(1&e)},GameBoyAdvanceSerial.prototype.readSIOCNT1=function(){return 128|this.SIOCNT_IRQ|this.SIOCNT_MODE<<4|(this.SIOCNT_UART_RECV_ENABLE?8:0)|(this.SIOCNT_UART_SEND_ENABLE?4:0)|(this.SIOCNT_UART_PARITY_ENABLE?2:0)|(this.SIOCNT_UART_FIFO_ENABLE?2:0)},GameBoyAdvanceSerial.prototype.writeSIODATA8_0=function(e){e|=0,this.SIODATA8=65280&this.SIODATA8|e,(0|this.RCNTMode)<2&&3==(0|this.SIOCNT_MODE)&&this.SIOCNT_UART_FIFO_ENABLE&&(this.SIOCNT_UART_FIFO=0|Math.min(1+(0|this.SIOCNT_UART_FIFO)|0,4))},GameBoyAdvanceSerial.prototype.readSIODATA8_0=function(){return 255&this.SIODATA8},GameBoyAdvanceSerial.prototype.writeSIODATA8_1=function(e){e|=0,this.SIODATA8=255&this.SIODATA8|e<<8},GameBoyAdvanceSerial.prototype.readSIODATA8_1=function(){return this.SIODATA8>>8},GameBoyAdvanceSerial.prototype.writeRCNT0=function(e){if(2==(0|this.RCNTMode)){this.RCNTDataBits;this.RCNTDataBits=15&e,this.RCNTDataBitFlow=e>>4,this.RCNTIRQ&&this.RCNTDataBits}},GameBoyAdvanceSerial.prototype.readRCNT0=function(){return this.RCNTDataBitFlow<<4|this.RCNTDataBits},GameBoyAdvanceSerial.prototype.writeRCNT1=function(e){this.RCNTMode=e>>6,this.RCNTIRQ=0!=(1&e),2!=(0|this.RCNTMode)&&(this.RCNTDataBits=0,this.RCNTDataBitFlow=0)},GameBoyAdvanceSerial.prototype.readRCNT1=function(){return this.RCNTMode<<6|(this.RCNTIRQ?63:62)},GameBoyAdvanceSerial.prototype.writeJOYCNT=function(e){this.JOYBUS_IRQ=e<<25>>31,this.JOYBUS_CNTL_FLAGS&=~(7&e)},GameBoyAdvanceSerial.prototype.readJOYCNT=function(){return 64|this.JOYBUS_CNTL_FLAGS|184&this.JOYBUS_IRQ},GameBoyAdvanceSerial.prototype.writeJOYBUS_RECV0=function(e){this.JOYBUS_RECV0=0|e},GameBoyAdvanceSerial.prototype.readJOYBUS_RECV0=function(){return this.JOYBUS_STAT=247&this.JOYBUS_STAT,0|this.JOYBUS_RECV0},GameBoyAdvanceSerial.prototype.writeJOYBUS_RECV1=function(e){this.JOYBUS_RECV1=0|e},GameBoyAdvanceSerial.prototype.readJOYBUS_RECV1=function(){return this.JOYBUS_STAT=247&this.JOYBUS_STAT,0|this.JOYBUS_RECV1},GameBoyAdvanceSerial.prototype.writeJOYBUS_RECV2=function(e){this.JOYBUS_RECV2=0|e},GameBoyAdvanceSerial.prototype.readJOYBUS_RECV2=function(){return this.JOYBUS_STAT=247&this.JOYBUS_STAT,0|this.JOYBUS_RECV2},GameBoyAdvanceSerial.prototype.writeJOYBUS_RECV3=function(e){this.JOYBUS_RECV3=0|e},GameBoyAdvanceSerial.prototype.readJOYBUS_RECV3=function(){return this.JOYBUS_STAT=247&this.JOYBUS_STAT,0|this.JOYBUS_RECV3},GameBoyAdvanceSerial.prototype.writeJOYBUS_SEND0=function(e){this.JOYBUS_SEND0=0|e,this.JOYBUS_STAT=2|this.JOYBUS_STAT},GameBoyAdvanceSerial.prototype.readJOYBUS_SEND0=function(){return 0|this.JOYBUS_SEND0},GameBoyAdvanceSerial.prototype.writeJOYBUS_SEND1=function(e){this.JOYBUS_SEND1=0|e,this.JOYBUS_STAT=2|this.JOYBUS_STAT},GameBoyAdvanceSerial.prototype.readJOYBUS_SEND1=function(){return 0|this.JOYBUS_SEND1},GameBoyAdvanceSerial.prototype.writeJOYBUS_SEND2=function(e){this.JOYBUS_SEND2=0|e,this.JOYBUS_STAT=2|this.JOYBUS_STAT},GameBoyAdvanceSerial.prototype.readJOYBUS_SEND2=function(){return 0|this.JOYBUS_SEND2},GameBoyAdvanceSerial.prototype.writeJOYBUS_SEND3=function(e){this.JOYBUS_SEND3=0|e,this.JOYBUS_STAT=2|this.JOYBUS_STAT},GameBoyAdvanceSerial.prototype.readJOYBUS_SEND3=function(){return 0|this.JOYBUS_SEND3},GameBoyAdvanceSerial.prototype.writeJOYBUS_STAT=function(e){this.JOYBUS_STAT=0|e},GameBoyAdvanceSerial.prototype.readJOYBUS_STAT=function(){return 197|this.JOYBUS_STAT},GameBoyAdvanceSound.prototype.initialize=function(){this.coreExposed=this.IOCore.coreExposed,this.dmaChannel1=this.IOCore.dmaChannel1,this.dmaChannel2=this.IOCore.dmaChannel2,this.audioTicks=0,this.initializeSampling(380),this.initializeAudioStartState()},GameBoyAdvanceSound.prototype.initializeOutput=function(e){(0|(e|=0))!=(0|this.audioResamplerFirstPassFactor)&&this.initializeSampling(0|e)},GameBoyAdvanceSound.prototype.initializeSampling=function(e){e|=0,this.audioIndex=0,this.downsampleInputLeft=0,this.downsampleInputRight=0,this.audioResamplerFirstPassFactor=0|e},GameBoyAdvanceSound.prototype.initializeAudioStartState=function(){this.nr60=0,this.nr61=0,this.nr62=this.IOCore.SKIPBoot?255:0,this.nr63=this.IOCore.SKIPBoot?2:0,this.soundMasterEnabled=!!this.IOCore.SKIPBoot,this.mixerSoundBIAS=this.IOCore.SKIPBoot?512:0,this.channel1=new GameBoyAdvanceChannel1Synth(this),this.channel2=new GameBoyAdvanceChannel2Synth(this),this.channel3=new GameBoyAdvanceChannel3Synth(this),this.channel4=new GameBoyAdvanceChannel4Synth(this),this.CGBMixerOutputCacheLeft=0,this.CGBMixerOutputCacheLeftFolded=0,this.CGBMixerOutputCacheRight=0,this.CGBMixerOutputCacheRightFolded=0,this.AGBDirectSoundATimer=0,this.AGBDirectSoundBTimer=0,this.AGBDirectSoundA=0,this.AGBDirectSoundAFolded=0,this.AGBDirectSoundB=0,this.AGBDirectSoundBFolded=0,this.AGBDirectSoundAShifter=0,this.AGBDirectSoundBShifter=0,this.AGBDirectSoundALeftCanPlay=!1,this.AGBDirectSoundBLeftCanPlay=!1,this.AGBDirectSoundARightCanPlay=!1,this.AGBDirectSoundBRightCanPlay=!1,this.CGBOutputRatio=2,this.FIFOABuffer=new GameBoyAdvanceFIFO,this.FIFOBBuffer=new GameBoyAdvanceFIFO,this.audioDisabled()},GameBoyAdvanceSound.prototype.audioDisabled=function(){this.channel1.disabled(),this.channel2.disabled(),this.channel3.disabled(),this.channel4.disabled(),this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBFIFOClear(),this.nr50=0,this.VinLeftChannelMasterVolume=1,this.VinRightChannelMasterVolume=1,this.nr51=0,this.nr52=0,this.soundMasterEnabled=!1,this.mixerOutputCacheLeft=0|this.mixerSoundBIAS,this.mixerOutputCacheRight=0|this.mixerSoundBIAS,this.audioClocksUntilNextEventCounter=0,this.audioClocksUntilNextEvent=0,this.sequencePosition=0,this.sequencerClocks=32768,this.PWMWidth=512,this.PWMWidthOld=512,this.PWMWidthShadow=512,this.PWMBitDepthMask=1022,this.PWMBitDepthMaskShadow=1022,this.channel1.outputLevelCache(),this.channel2.outputLevelCache(),this.channel3.updateCache(),this.channel4.updateCache()},GameBoyAdvanceSound.prototype.audioEnabled=function(){this.nr52=128,this.soundMasterEnabled=!0},GameBoyAdvanceSound.prototype.addClocks=function(e){e|=0,this.audioTicks=(0|this.audioTicks)+(0|e)|0},"function"==typeof Math.imul?GameBoyAdvanceSound.prototype.generateAudio=function(e){e|=0;var t=0;if(this.soundMasterEnabled&&!this.IOCore.isStopped())for(var i=0;(0|e)>0;){for(i=0|Math.min(0|this.PWMWidth,0|e),this.PWMWidth=(0|this.PWMWidth)-(0|i)|0,e=(0|e)-(0|i)|0;(0|i)>0;)i=(0|i)-(0|(t=0|Math.min(0|i,(0|this.audioResamplerFirstPassFactor)-(0|this.audioIndex)|0)))|0,this.audioIndex=(0|this.audioIndex)+(0|t)|0,this.downsampleInputLeft=(0|this.downsampleInputLeft)+Math.imul(0|this.mixerOutputCacheLeft,0|t)|0,this.downsampleInputRight=(0|this.downsampleInputRight)+Math.imul(0|this.mixerOutputCacheRight,0|t)|0,(0|this.audioIndex)==(0|this.audioResamplerFirstPassFactor)&&(this.audioIndex=0,this.coreExposed.outputAudio(0|this.downsampleInputLeft,0|this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0);0==(0|this.PWMWidth)&&(this.computeNextPWMInterval(),this.PWMWidthOld=0|this.PWMWidthShadow,this.PWMWidth=0|this.PWMWidthShadow)}else for(;(0|e)>0;)e=(0|e)-(0|(t=0|Math.min(0|e,(0|this.audioResamplerFirstPassFactor)-(0|this.audioIndex)|0)))|0,this.audioIndex=(0|this.audioIndex)+(0|t)|0,(0|this.audioIndex)==(0|this.audioResamplerFirstPassFactor)&&(this.audioIndex=0,this.coreExposed.outputAudio(0|this.downsampleInputLeft,0|this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0)}:GameBoyAdvanceSound.prototype.generateAudio=function(e){var t=0;if(this.soundMasterEnabled&&!this.IOCore.isStopped())for(var i=0;e>0;){for(i=Math.min(this.PWMWidth,e),this.PWMWidth=this.PWMWidth-i,e-=i;i>0;)i-=t=Math.min(i,this.audioResamplerFirstPassFactor-this.audioIndex),this.audioIndex+=t,this.downsampleInputLeft+=this.mixerOutputCacheLeft*t,this.downsampleInputRight+=this.mixerOutputCacheRight*t,this.audioIndex==this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.coreExposed.outputAudio(this.downsampleInputLeft,this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0);0==this.PWMWidth&&(this.computeNextPWMInterval(),this.PWMWidthOld=this.PWMWidthShadow,this.PWMWidth=this.PWMWidthShadow)}else for(;e>0;)e-=t=Math.min(e,this.audioResamplerFirstPassFactor-this.audioIndex),this.audioIndex+=t,this.audioIndex==this.audioResamplerFirstPassFactor&&(this.audioIndex=0,this.coreExposed.outputAudio(this.downsampleInputLeft,this.downsampleInputRight),this.downsampleInputLeft=0,this.downsampleInputRight=0)},GameBoyAdvanceSound.prototype.audioJIT=function(){this.generateAudio(0|this.audioTicks),this.audioTicks=0},GameBoyAdvanceSound.prototype.audioPSGJIT=function(){this.IOCore.updateTimerClocking(),this.audioJIT()},GameBoyAdvanceSound.prototype.computeNextPWMInterval=function(){for(var e=0|this.PWMWidthOld,t=0;(0|e)>0;e=(0|e)-1|0)t=0|Math.min(0|this.audioClocksUntilNextEventCounter,0|this.sequencerClocks,0|e),this.audioClocksUntilNextEventCounter=(0|this.audioClocksUntilNextEventCounter)-(0|t)|0,this.sequencerClocks=(0|this.sequencerClocks)-(0|t)|0,e=(0|e)-(0|t)|0,0==(0|this.sequencerClocks)&&(this.audioComputeSequencer(),this.sequencerClocks=32768),0==(0|this.audioClocksUntilNextEventCounter)&&this.computeAudioChannels();this.PWMBitDepthMask=0|this.PWMBitDepthMaskShadow,this.channel1.outputLevelCache(),this.channel2.outputLevelCache(),this.channel3.updateCache(),this.channel4.updateCache(),this.CGBMixerOutputLevelCache(),this.mixerOutputLevelCache()},GameBoyAdvanceSound.prototype.audioComputeSequencer=function(){switch(this.sequencePosition++){case 0:case 4:this.clockAudioLength();break;case 2:case 6:this.clockAudioLength(),this.channel1.clockAudioSweep();break;case 7:this.clockAudioEnvelope(),this.sequencePosition=0}},GameBoyAdvanceSound.prototype.clockAudioLength=function(){this.channel1.clockAudioLength(),this.channel2.clockAudioLength(),this.channel3.clockAudioLength(),this.channel4.clockAudioLength()},GameBoyAdvanceSound.prototype.clockAudioEnvelope=function(){this.channel1.clockAudioEnvelope(),this.channel2.clockAudioEnvelope(),this.channel4.clockAudioEnvelope()},GameBoyAdvanceSound.prototype.computeAudioChannels=function(){this.channel1.FrequencyCounter=(0|this.channel1.FrequencyCounter)-(0|this.audioClocksUntilNextEvent)|0,this.channel2.FrequencyCounter=(0|this.channel2.FrequencyCounter)-(0|this.audioClocksUntilNextEvent)|0,this.channel3.counter=(0|this.channel3.counter)-(0|this.audioClocksUntilNextEvent)|0,this.channel4.counter=(0|this.channel4.counter)-(0|this.audioClocksUntilNextEvent)|0,this.channel1.computeAudioChannel(),this.channel2.computeAudioChannel(),this.channel3.computeAudioChannel(),this.channel4.computeAudioChannel(),this.audioClocksUntilNextEventCounter=this.audioClocksUntilNextEvent=0|Math.min(0|this.channel1.FrequencyCounter,0|this.channel2.FrequencyCounter,0|this.channel3.counter,0|this.channel4.counter)},"function"==typeof Math.imul?GameBoyAdvanceSound.prototype.CGBMixerOutputLevelCache=function(){this.CGBMixerOutputCacheLeft=0|Math.imul((0|this.channel1.currentSampleLeft)+(0|this.channel2.currentSampleLeft)+(0|this.channel3.currentSampleLeft)+(0|this.channel4.currentSampleLeft)|0,0|this.VinLeftChannelMasterVolume),this.CGBMixerOutputCacheRight=0|Math.imul((0|this.channel1.currentSampleRight)+(0|this.channel2.currentSampleRight)+(0|this.channel3.currentSampleRight)+(0|this.channel4.currentSampleRight)|0,0|this.VinRightChannelMasterVolume),this.CGBFolder()}:GameBoyAdvanceSound.prototype.CGBMixerOutputLevelCache=function(){this.CGBMixerOutputCacheLeft=(this.channel1.currentSampleLeft+this.channel2.currentSampleLeft+this.channel3.currentSampleLeft+this.channel4.currentSampleLeft)*this.VinLeftChannelMasterVolume,this.CGBMixerOutputCacheRight=(this.channel1.currentSampleRight+this.channel2.currentSampleRight+this.channel3.currentSampleRight+this.channel4.currentSampleRight)*this.VinRightChannelMasterVolume,this.CGBFolder()},GameBoyAdvanceSound.prototype.writeWAVE8=function(e,t){e|=0,t|=0,this.audioPSGJIT(),this.channel3.writeWAVE8(0|e,0|t)},GameBoyAdvanceSound.prototype.readWAVE8=function(e){return e|=0,this.audioPSGJIT(),0|this.channel3.readWAVE8(0|e)},GameBoyAdvanceSound.prototype.writeWAVE16=function(e,t){e|=0,t|=0,this.audioPSGJIT(),this.channel3.writeWAVE16(e>>1,0|t)},GameBoyAdvanceSound.prototype.readWAVE16=function(e){return e|=0,this.audioPSGJIT(),0|this.channel3.readWAVE16(e>>1)},GameBoyAdvanceSound.prototype.writeWAVE32=function(e,t){e|=0,t|=0,this.audioPSGJIT(),this.channel3.writeWAVE32(e>>2,0|t)},GameBoyAdvanceSound.prototype.readWAVE32=function(e){return e|=0,this.audioPSGJIT(),0|this.channel3.readWAVE32(e>>2)},GameBoyAdvanceSound.prototype.writeFIFOA8=function(e){e|=0,this.IOCore.updateTimerClocking(),this.FIFOABuffer.push8(0|e),this.checkFIFOAPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOB8=function(e){e|=0,this.IOCore.updateTimerClocking(),this.FIFOBBuffer.push8(0|e),this.checkFIFOBPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOA16=function(e){e|=0,this.IOCore.updateTimerClocking(),this.FIFOABuffer.push16(0|e),this.checkFIFOAPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOB16=function(e){e|=0,this.IOCore.updateTimerClocking(),this.FIFOBBuffer.push16(0|e),this.checkFIFOBPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOA32=function(e){e|=0,this.IOCore.updateTimerClocking(),this.FIFOABuffer.push32(0|e),this.checkFIFOAPendingSignal()},GameBoyAdvanceSound.prototype.writeFIFOB32=function(e){e|=0,this.IOCore.updateTimerClocking(),this.FIFOBBuffer.push32(0|e),this.checkFIFOBPendingSignal()},GameBoyAdvanceSound.prototype.checkFIFOAPendingSignal=function(){this.FIFOABuffer.requestingDMA()&&this.dmaChannel1.soundFIFOARequest()},GameBoyAdvanceSound.prototype.checkFIFOBPendingSignal=function(){this.FIFOBBuffer.requestingDMA()&&this.dmaChannel2.soundFIFOBRequest()},GameBoyAdvanceSound.prototype.AGBDirectSoundAFIFOClear=function(){this.FIFOABuffer.clear(),this.AGBDirectSoundATimerIncrement()},GameBoyAdvanceSound.prototype.AGBDirectSoundBFIFOClear=function(){this.FIFOBBuffer.clear(),this.AGBDirectSoundBTimerIncrement()},GameBoyAdvanceSound.prototype.AGBDirectSoundTimer0ClockTick=function(){this.audioJIT(),this.soundMasterEnabled&&(0==(0|this.AGBDirectSoundATimer)&&this.AGBDirectSoundATimerIncrement(),0==(0|this.AGBDirectSoundBTimer)&&this.AGBDirectSoundBTimerIncrement())},GameBoyAdvanceSound.prototype.AGBDirectSoundTimer1ClockTick=function(){this.audioJIT(),this.soundMasterEnabled&&(1==(0|this.AGBDirectSoundATimer)&&this.AGBDirectSoundATimerIncrement(),1==(0|this.AGBDirectSoundBTimer)&&this.AGBDirectSoundBTimerIncrement())},GameBoyAdvanceSound.prototype.nextFIFOAEventTime=function(){var e=2147483647;if(this.soundMasterEnabled)if(this.FIFOABuffer.requestingDMA())e=0;else{var t=0|this.FIFOABuffer.samplesUntilDMATrigger();e=0==(0|this.AGBDirectSoundATimer)?0|this.IOCore.timer.nextTimer0Overflow(0|t):0|this.IOCore.timer.nextTimer1Overflow(0|t)}return 0|e},GameBoyAdvanceSound.prototype.nextFIFOBEventTime=function(){var e=2147483647;if(this.soundMasterEnabled)if(this.FIFOBBuffer.requestingDMA())e=0;else{var t=0|this.FIFOBBuffer.samplesUntilDMATrigger();e=0==(0|this.AGBDirectSoundBTimer)?0|this.IOCore.timer.nextTimer0Overflow(0|t):0|this.IOCore.timer.nextTimer1Overflow(0|t)}return 0|e},GameBoyAdvanceSound.prototype.AGBDirectSoundATimerIncrement=function(){this.AGBDirectSoundA=0|this.FIFOABuffer.shift(),this.checkFIFOAPendingSignal(),this.AGBFIFOAFolder()},GameBoyAdvanceSound.prototype.AGBDirectSoundBTimerIncrement=function(){this.AGBDirectSoundB=0|this.FIFOBBuffer.shift(),this.checkFIFOBPendingSignal(),this.AGBFIFOBFolder()},GameBoyAdvanceSound.prototype.AGBFIFOAFolder=function(){this.AGBDirectSoundAFolded=this.AGBDirectSoundA>>(0|this.AGBDirectSoundAShifter)},GameBoyAdvanceSound.prototype.AGBFIFOBFolder=function(){this.AGBDirectSoundBFolded=this.AGBDirectSoundB>>(0|this.AGBDirectSoundBShifter)},GameBoyAdvanceSound.prototype.CGBFolder=function(){this.CGBMixerOutputCacheLeftFolded=this.CGBMixerOutputCacheLeft<<(0|this.CGBOutputRatio)>>1,this.CGBMixerOutputCacheRightFolded=this.CGBMixerOutputCacheRight<<(0|this.CGBOutputRatio)>>1},GameBoyAdvanceSound.prototype.mixerOutputLevelCache=function(){this.mixerOutputCacheLeft=Math.min(0|Math.max((this.AGBDirectSoundALeftCanPlay?0|this.AGBDirectSoundAFolded:0)+(this.AGBDirectSoundBLeftCanPlay?0|this.AGBDirectSoundBFolded:0)+(0|this.CGBMixerOutputCacheLeftFolded)+(0|this.mixerSoundBIAS)|0,0),1023)&this.PWMBitDepthMask,this.mixerOutputCacheRight=Math.min(0|Math.max((this.AGBDirectSoundARightCanPlay?0|this.AGBDirectSoundAFolded:0)+(this.AGBDirectSoundBRightCanPlay?0|this.AGBDirectSoundBFolded:0)+(0|this.CGBMixerOutputCacheRightFolded)+(0|this.mixerSoundBIAS)|0,0),1023)&this.PWMBitDepthMask},GameBoyAdvanceSound.prototype.setNR52=function(e){e|=0,this.nr52=e|this.nr52},GameBoyAdvanceSound.prototype.unsetNR52=function(e){e|=0,this.nr52=e&this.nr52},GameBoyAdvanceSound.prototype.readSOUND1CNT8_0=function(){return 0|this.channel1.readSOUND1CNT8_0()},GameBoyAdvanceSound.prototype.writeSOUND1CNT8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_0(0|e))},GameBoyAdvanceSound.prototype.readSOUND1CNT8_2=function(){return 0|this.channel1.readSOUND1CNT8_2()},GameBoyAdvanceSound.prototype.writeSOUND1CNT8_2=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_2(0|e))},GameBoyAdvanceSound.prototype.readSOUND1CNT8_3=function(){return 0|this.channel1.readSOUND1CNT8_3()},GameBoyAdvanceSound.prototype.writeSOUND1CNT8_3=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_3(0|e))},GameBoyAdvanceSound.prototype.writeSOUND1CNT16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_2(0|e),this.channel1.writeSOUND1CNT8_3(e>>8))},GameBoyAdvanceSound.prototype.writeSOUND1CNT32=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT8_0(0|e),this.channel1.writeSOUND1CNT8_2(e>>16),this.channel1.writeSOUND1CNT8_3(e>>24))},GameBoyAdvanceSound.prototype.readSOUND1CNT32=function(){return this.channel1.readSOUND1CNT8_0()|this.channel1.readSOUND1CNT8_2()<<16|this.channel1.readSOUND1CNT8_3()<<24},GameBoyAdvanceSound.prototype.writeSOUND1CNTX8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT_X0(0|e))},GameBoyAdvanceSound.prototype.readSOUND1CNTX8=function(){return 0|this.channel1.readSOUND1CNTX8()},GameBoyAdvanceSound.prototype.readSOUND1CNTX16=function(){return this.channel1.readSOUND1CNTX8()<<8},GameBoyAdvanceSound.prototype.writeSOUND1CNTX8_1=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT_X1(0|e))},GameBoyAdvanceSound.prototype.writeSOUND1CNTX16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel1.writeSOUND1CNT_X0(0|e),this.channel1.writeSOUND1CNT_X1(e>>8))},GameBoyAdvanceSound.prototype.readSOUND2CNTL8_0=function(){return 0|this.channel2.readSOUND2CNT_L0()},GameBoyAdvanceSound.prototype.writeSOUND2CNTL8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_L0(0|e))},GameBoyAdvanceSound.prototype.readSOUND2CNTL8_1=function(){return 0|this.channel2.readSOUND2CNT_L1()},GameBoyAdvanceSound.prototype.writeSOUND2CNTL8_1=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_L1(0|e))},GameBoyAdvanceSound.prototype.writeSOUND2CNTL16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_L0(0|e),this.channel2.writeSOUND2CNT_L1(e>>8))},GameBoyAdvanceSound.prototype.writeSOUND2CNTH8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_H0(0|e))},GameBoyAdvanceSound.prototype.readSOUND2CNTH8=function(){return 0|this.channel2.readSOUND2CNT_H()},GameBoyAdvanceSound.prototype.writeSOUND2CNTH8_1=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_H1(0|e))},GameBoyAdvanceSound.prototype.readSOUND2CNTL16=function(){var e=0|this.channel2.readSOUND2CNT_L0();return 0|(e|=this.channel2.readSOUND2CNT_L1()<<8)},GameBoyAdvanceSound.prototype.readSOUND2CNTH16=function(){return this.channel2.readSOUND2CNT_H()<<8},GameBoyAdvanceSound.prototype.writeSOUND2CNTH16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel2.writeSOUND2CNT_H0(0|e),this.channel2.writeSOUND2CNT_H1(e>>8))},GameBoyAdvanceSound.prototype.readSOUND3CNT8_0=function(){return 0|this.channel3.readSOUND3CNT_L()},GameBoyAdvanceSound.prototype.writeSOUND3CNT8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_L(0|e))},GameBoyAdvanceSound.prototype.writeSOUND3CNT8_2=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_H0(0|e))},GameBoyAdvanceSound.prototype.readSOUND3CNT8_3=function(){return 0|this.channel3.readSOUND3CNT_H()},GameBoyAdvanceSound.prototype.writeSOUND3CNT8_3=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_H1(0|e))},GameBoyAdvanceSound.prototype.readSOUND3CNT16_1=function(){return this.channel3.readSOUND3CNT_H()<<8},GameBoyAdvanceSound.prototype.readSOUND3CNT32=function(){var e=0|this.channel3.readSOUND3CNT_L();return 0|(e|=this.channel3.readSOUND3CNT_H()<<24)},GameBoyAdvanceSound.prototype.writeSOUND3CNT16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_H0(0|e),this.channel3.writeSOUND3CNT_H1(e>>8))},GameBoyAdvanceSound.prototype.writeSOUND3CNT32=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_L(0|e),this.channel3.writeSOUND3CNT_H0(e>>16),this.channel3.writeSOUND3CNT_H1(e>>24))},GameBoyAdvanceSound.prototype.writeSOUND3CNTX8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_X0(0|e))},GameBoyAdvanceSound.prototype.readSOUND3CNTX8=function(){return 0|this.channel3.readSOUND3CNT_X()},GameBoyAdvanceSound.prototype.readSOUND3CNTX16=function(){return this.channel3.readSOUND3CNT_X()<<8},GameBoyAdvanceSound.prototype.writeSOUND3CNTX8_1=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_X1(0|e))},GameBoyAdvanceSound.prototype.writeSOUND3CNTX16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel3.writeSOUND3CNT_X0(0|e),this.channel3.writeSOUND3CNT_X1(e>>8))},GameBoyAdvanceSound.prototype.writeSOUND4CNTL8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_L0(0|e))},GameBoyAdvanceSound.prototype.writeSOUND4CNTL8_1=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_L1(0|e))},GameBoyAdvanceSound.prototype.writeSOUND4CNTL16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_L0(0|e),this.channel4.writeSOUND4CNT_L1(e>>8))},GameBoyAdvanceSound.prototype.readSOUND4CNTL8=function(){return 0|this.channel4.readSOUND4CNT_L()},GameBoyAdvanceSound.prototype.readSOUND4CNTL16=function(){return this.channel4.readSOUND4CNT_L()<<8},GameBoyAdvanceSound.prototype.writeSOUND4CNTH8_0=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_H0(0|e))},GameBoyAdvanceSound.prototype.readSOUND4CNTH8_0=function(){return 0|this.channel4.readSOUND4CNT_H0()},GameBoyAdvanceSound.prototype.writeSOUND4CNTH8_1=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_H1(0|e))},GameBoyAdvanceSound.prototype.writeSOUND4CNTH16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),this.channel4.writeSOUND4CNT_H0(0|e),this.channel4.writeSOUND4CNT_H1(e>>8))},GameBoyAdvanceSound.prototype.readSOUND4CNTH8_1=function(){return 0|this.channel4.readSOUND4CNT_H1()},GameBoyAdvanceSound.prototype.readSOUND4CNTH16=function(){var e=0|this.channel4.readSOUND4CNT_H0();return 0|(e|=this.channel4.readSOUND4CNT_H1()<<8)},GameBoyAdvanceSound.prototype.writeSOUNDCNTL8_0=function(e){e|=0,e&=255,this.soundMasterEnabled&&(0|this.nr50)!=(0|e)&&(this.audioPSGJIT(),this.nr50=0|e,this.VinLeftChannelMasterVolume=1+(e>>4&7)|0,this.VinRightChannelMasterVolume=1+(7&e)|0)},GameBoyAdvanceSound.prototype.readSOUNDCNTL8_0=function(){return 136|this.nr50},GameBoyAdvanceSound.prototype.writeSOUNDCNTL8_1=function(e){e|=0,e&=255,this.soundMasterEnabled&&(0|this.nr51)!=(0|e)&&(this.audioPSGJIT(),this.nr51=0|e,this.channel1.setChannelOutputEnable(0|e),this.channel2.setChannelOutputEnable(0|e),this.channel3.setChannelOutputEnable(0|e),this.channel4.setChannelOutputEnable(0|e))},GameBoyAdvanceSound.prototype.readSOUNDCNTL8_1=function(){return 0|this.nr51},GameBoyAdvanceSound.prototype.writeSOUNDCNTL16=function(e){e|=0,this.soundMasterEnabled&&(this.audioPSGJIT(),(0|this.nr50)!=(255&e)&&(this.nr50=255&e,this.VinLeftChannelMasterVolume=1+(e>>4&7)|0,this.VinRightChannelMasterVolume=1+(7&e)|0),e=e>>8&255,(0|this.nr51)!=(0|e)&&(this.nr51=0|e,this.channel1.setChannelOutputEnable(0|e),this.channel2.setChannelOutputEnable(0|e),this.channel3.setChannelOutputEnable(0|e),this.channel4.setChannelOutputEnable(0|e)))},GameBoyAdvanceSound.prototype.readSOUNDCNTL16=function(){var e=136|this.nr50;return 0|(e|=this.nr51<<8)},GameBoyAdvanceSound.prototype.writeSOUNDCNTH8_0=function(e){e|=0,this.audioPSGJIT(),this.CGBOutputRatio=3&e,this.AGBDirectSoundAShifter=(4&e)>>2,this.AGBDirectSoundBShifter=(8&e)>>3,this.nr60=255&e},GameBoyAdvanceSound.prototype.readSOUNDCNTH8_0=function(){return 0|this.nr60},GameBoyAdvanceSound.prototype.writeSOUNDCNTH8_1=function(e){e|=0,this.audioPSGJIT(),this.AGBDirectSoundARightCanPlay=0!=(1&e),this.AGBDirectSoundALeftCanPlay=0!=(2&e),this.AGBDirectSoundATimer=(4&e)>>2,0!=(8&e)&&this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBRightCanPlay=0!=(16&e),this.AGBDirectSoundBLeftCanPlay=0!=(32&e),this.AGBDirectSoundBTimer=(64&e)>>6,0!=(128&e)&&this.AGBDirectSoundBFIFOClear(),this.nr61=255&e,this.IOCore.updateCoreClocking()},GameBoyAdvanceSound.prototype.readSOUNDCNTH8_1=function(){return 0|this.nr61},GameBoyAdvanceSound.prototype.writeSOUNDCNTH16=function(e){e|=0,this.audioPSGJIT(),this.CGBOutputRatio=3&e,this.AGBDirectSoundAShifter=(4&e)>>2,this.AGBDirectSoundBShifter=(8&e)>>3,this.nr60=255&e,e>>=8,this.AGBDirectSoundARightCanPlay=0!=(1&e),this.AGBDirectSoundALeftCanPlay=0!=(2&e),this.AGBDirectSoundATimer=(4&e)>>2,0!=(8&e)&&this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBRightCanPlay=0!=(16&e),this.AGBDirectSoundBLeftCanPlay=0!=(32&e),this.AGBDirectSoundBTimer=(64&e)>>6,0!=(128&e)&&this.AGBDirectSoundBFIFOClear(),this.nr61=255&e,this.IOCore.updateCoreClocking()},GameBoyAdvanceSound.prototype.readSOUNDCNTH16=function(){var e=0|this.nr60;return 0|(e|=this.nr61<<8)},GameBoyAdvanceSound.prototype.writeSOUNDCNT32=function(e){if(e|=0,this.audioPSGJIT(),this.soundMasterEnabled){(0|this.nr50)!=(255&e)&&(this.nr50=255&e,this.VinLeftChannelMasterVolume=1+(e>>4&7)|0,this.VinRightChannelMasterVolume=1+(7&e)|0);var t=e>>8&255;(0|this.nr51)!=(0|t)&&(this.nr51=0|t,this.channel1.setChannelOutputEnable(0|t),this.channel2.setChannelOutputEnable(0|t),this.channel3.setChannelOutputEnable(0|t),this.channel4.setChannelOutputEnable(0|t))}e>>=16,this.CGBOutputRatio=3&e,this.AGBDirectSoundAShifter=(4&e)>>2,this.AGBDirectSoundBShifter=(8&e)>>3,this.nr60=255&e,e>>=8,this.AGBDirectSoundARightCanPlay=0!=(1&e),this.AGBDirectSoundALeftCanPlay=0!=(2&e),this.AGBDirectSoundATimer=(4&e)>>2,0!=(8&e)&&this.AGBDirectSoundAFIFOClear(),this.AGBDirectSoundBRightCanPlay=0!=(16&e),this.AGBDirectSoundBLeftCanPlay=0!=(32&e),this.AGBDirectSoundBTimer=(64&e)>>6,0!=(128&e)&&this.AGBDirectSoundBFIFOClear(),this.nr61=255&e,this.IOCore.updateCoreClocking()},GameBoyAdvanceSound.prototype.readSOUNDCNT32=function(){var e=136|this.nr50;return e|=this.nr51<<8,e|=this.nr60<<16,0|(e|=this.nr61<<24)},GameBoyAdvanceSound.prototype.writeSOUNDCNTX8=function(e){e|=0,this.soundMasterEnabled||0==(128&e)?this.soundMasterEnabled&&0==(128&e)&&(this.audioPSGJIT(),this.audioDisabled(),this.IOCore.updateCoreClocking()):(this.audioPSGJIT(),this.audioEnabled(),this.IOCore.updateCoreClocking())},GameBoyAdvanceSound.prototype.readSOUNDCNTX8=function(){return this.audioPSGJIT(),0|this.nr52},GameBoyAdvanceSound.prototype.writeSOUNDBIAS8_0=function(e){e|=0,this.audioPSGJIT(),this.mixerSoundBIAS=768&this.mixerSoundBIAS,this.mixerSoundBIAS=this.mixerSoundBIAS|255&e,this.nr62=255&e},GameBoyAdvanceSound.prototype.readSOUNDBIAS8_0=function(){return 0|this.nr62},GameBoyAdvanceSound.prototype.writeSOUNDBIAS8_1=function(e){e|=0,this.audioPSGJIT(),this.mixerSoundBIAS=255&this.mixerSoundBIAS,this.mixerSoundBIAS=this.mixerSoundBIAS|(3&e)<<8,this.PWMWidthShadow=512>>((192&e)>>6),this.PWMBitDepthMaskShadow=(0|this.PWMWidthShadow)-1<<1+((192&e)>>6),this.nr63=255&e},GameBoyAdvanceSound.prototype.writeSOUNDBIAS16=function(e){e|=0,this.audioPSGJIT(),this.mixerSoundBIAS=1023&e,this.nr62=255&e,this.PWMWidthShadow=512>>((49152&e)>>14),this.PWMBitDepthMaskShadow=(0|this.PWMWidthShadow)-1<<1+((49152&e)>>14),this.nr63=e>>8&255},GameBoyAdvanceSound.prototype.readSOUNDBIAS8_1=function(){return 0|this.nr63},GameBoyAdvanceSound.prototype.readSOUNDBIAS16=function(){var e=0|this.nr62;return 0|(e|=this.nr63<<8)},GameBoyAdvanceTimer.prototype.prescalarLookup=[0,6,8,10],GameBoyAdvanceTimer.prototype.initialize=function(){this.timer0Counter=0,this.timer0Reload=0,this.timer0Control=0,this.timer0Enabled=!1,this.timer0IRQ=!1,this.timer0Precounter=0,this.timer0Prescalar=1,this.timer0PrescalarShifted=0,this.timer1Counter=0,this.timer1Reload=0,this.timer1Control=0,this.timer1Enabled=!1,this.timer1IRQ=!1,this.timer1Precounter=0,this.timer1Prescalar=1,this.timer1PrescalarShifted=0,this.timer1CountUp=!1,this.timer2Counter=0,this.timer2Reload=0,this.timer2Control=0,this.timer2Enabled=!1,this.timer2IRQ=!1,this.timer2Precounter=0,this.timer2Prescalar=1,this.timer2PrescalarShifted=0,this.timer2CountUp=!1,this.timer3Counter=0,this.timer3Reload=0,this.timer3Control=0,this.timer3Enabled=!1,this.timer3IRQ=!1,this.timer3Precounter=0,this.timer3Prescalar=1,this.timer3PrescalarShifted=0,this.timer3CountUp=!1,this.timer1UseMainClocks=!1,this.timer1UseChainedClocks=!1,this.timer2UseMainClocks=!1,this.timer2UseChainedClocks=!1,this.timer3UseMainClocks=!1,this.timer3UseChainedClocks=!1},GameBoyAdvanceTimer.prototype.addClocks=function(e){e|=0,this.clockSoundTimers(0|e),this.clockTimer2(0|e),this.clockTimer3(0|e)},GameBoyAdvanceTimer.prototype.clockSoundTimers=function(e){e|=0;for(var t=0,i=0;(0|e)>0;e=(0|e)-(0|t)|0)i=0|this.nextAudioTimerOverflow(),t=0|Math.min(0|e,0|i),this.clockTimer0(0|t),this.clockTimer1(0|t),this.IOCore.sound.addClocks(0|t),(0|i)==(0|t)&&this.IOCore.sound.audioJIT()},GameBoyAdvanceTimer.prototype.clockTimer0=function(e){if(e|=0,this.timer0Enabled)for(this.timer0Precounter=(0|this.timer0Precounter)+(0|e)|0;(0|this.timer0Precounter)>=(0|this.timer0Prescalar);){var t=0|Math.min(this.timer0Precounter>>(0|this.timer0PrescalarShifted),65536-(0|this.timer0Counter)|0);this.timer0Precounter=(0|this.timer0Precounter)-((0|t)<<(0|this.timer0PrescalarShifted))|0,this.timer0Counter=(0|this.timer0Counter)+(0|t)|0,(0|this.timer0Counter)>65535&&(this.timer0Counter=0|this.timer0Reload,this.timer0ExternalTriggerCheck(),this.timer1ClockUpTickCheck())}},GameBoyAdvanceTimer.prototype.clockTimer1=function(e){if(e|=0,this.timer1UseMainClocks)for(this.timer1Precounter=(0|this.timer1Precounter)+(0|e)|0;(0|this.timer1Precounter)>=(0|this.timer1Prescalar);){var t=0|Math.min(this.timer1Precounter>>(0|this.timer1PrescalarShifted),65536-(0|this.timer1Counter)|0);this.timer1Precounter=(0|this.timer1Precounter)-((0|t)<<(0|this.timer1PrescalarShifted))|0,this.timer1Counter=(0|this.timer1Counter)+(0|t)|0,(0|this.timer1Counter)>65535&&(this.timer1Counter=0|this.timer1Reload,this.timer1ExternalTriggerCheck(),this.timer2ClockUpTickCheck())}},GameBoyAdvanceTimer.prototype.clockTimer2=function(e){if(e|=0,this.timer2UseMainClocks)for(this.timer2Precounter=(0|this.timer2Precounter)+(0|e)|0;(0|this.timer2Precounter)>=(0|this.timer2Prescalar);){var t=0|Math.min(this.timer2Precounter>>(0|this.timer2PrescalarShifted),65536-(0|this.timer2Counter)|0);this.timer2Precounter=(0|this.timer2Precounter)-((0|t)<<(0|this.timer2PrescalarShifted))|0,this.timer2Counter=(0|this.timer2Counter)+(0|t)|0,(0|this.timer2Counter)>65535&&(this.timer2Counter=0|this.timer2Reload,this.timer2ExternalTriggerCheck(),this.timer3ClockUpTickCheck())}},GameBoyAdvanceTimer.prototype.clockTimer3=function(e){if(e|=0,this.timer3UseMainClocks)for(this.timer3Precounter=(0|this.timer3Precounter)+(0|e)|0;(0|this.timer3Precounter)>=(0|this.timer3Prescalar);){var t=0|Math.min(this.timer3Precounter>>(0|this.timer3PrescalarShifted),65536-(0|this.timer3Counter)|0);this.timer3Precounter=(0|this.timer3Precounter)-((0|t)<<(0|this.timer3PrescalarShifted))|0,this.timer3Counter=(0|this.timer3Counter)+(0|t)|0,(0|this.timer3Counter)>65535&&(this.timer3Counter=0|this.timer3Reload,this.timer3ExternalTriggerCheck())}},GameBoyAdvanceTimer.prototype.timer1ClockUpTickCheck=function(){this.timer1UseChainedClocks&&(this.timer1Counter=1+(0|this.timer1Counter)|0,(0|this.timer1Counter)>65535&&(this.timer1Counter=0|this.timer1Reload,this.timer1ExternalTriggerCheck(),this.timer2ClockUpTickCheck()))},GameBoyAdvanceTimer.prototype.timer2ClockUpTickCheck=function(){this.timer2UseChainedClocks&&(this.timer2Counter=1+(0|this.timer2Counter)|0,(0|this.timer2Counter)>65535&&(this.timer2Counter=0|this.timer2Reload,this.timer2ExternalTriggerCheck(),this.timer3ClockUpTickCheck()))},GameBoyAdvanceTimer.prototype.timer3ClockUpTickCheck=function(){this.timer3UseChainedClocks&&(this.timer3Counter=1+(0|this.timer3Counter)|0,(0|this.timer3Counter)>65535&&(this.timer3Counter=0|this.timer3Reload,this.timer3ExternalTriggerCheck()))},GameBoyAdvanceTimer.prototype.timer0ExternalTriggerCheck=function(){this.timer0IRQ&&this.IOCore.irq.requestIRQ(8),this.IOCore.sound.AGBDirectSoundTimer0ClockTick()},GameBoyAdvanceTimer.prototype.timer1ExternalTriggerCheck=function(){this.timer1IRQ&&this.IOCore.irq.requestIRQ(16),this.IOCore.sound.AGBDirectSoundTimer1ClockTick()},GameBoyAdvanceTimer.prototype.timer2ExternalTriggerCheck=function(){this.timer2IRQ&&this.IOCore.irq.requestIRQ(32)},GameBoyAdvanceTimer.prototype.timer3ExternalTriggerCheck=function(){this.timer3IRQ&&this.IOCore.irq.requestIRQ(64)},GameBoyAdvanceTimer.prototype.writeTM0CNT8_0=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer0Reload=65280&this.timer0Reload,e&=255,this.timer0Reload=this.timer0Reload|e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM0CNT8_1=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer0Reload=255&this.timer0Reload,e&=255,this.timer0Reload=this.timer0Reload|e<<8,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM0CNT8_2=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer0Control=255&e,0!=(128&e)?this.timer0Enabled||(this.timer0Counter=0|this.timer0Reload,this.timer0Enabled=!0,this.timer0Precounter=0):this.timer0Enabled=!1,this.timer0IRQ=0!=(64&e),this.timer0PrescalarShifted=0|this.prescalarLookup[3&e],this.timer0Prescalar=1<<(0|this.timer0PrescalarShifted),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM0CNT16=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer0Reload=65535&e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM0CNT32=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer0Reload=65535&e,this.timer0Control=e>>16,0!=(8388608&e)?this.timer0Enabled||(this.timer0Counter=0|this.timer0Reload,this.timer0Enabled=!0,this.timer0Precounter=0):this.timer0Enabled=!1,this.timer0IRQ=0!=(4194304&e),this.timer0PrescalarShifted=0|this.prescalarLookup[e>>16&3],this.timer0Prescalar=1<<(0|this.timer0PrescalarShifted),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.readTM0CNT8_0=function(){return this.IOCore.updateTimerClocking(),255&this.timer0Counter},GameBoyAdvanceTimer.prototype.readTM0CNT8_1=function(){return this.IOCore.updateTimerClocking(),(65280&this.timer0Counter)>>8},GameBoyAdvanceTimer.prototype.readTM0CNT8_2=function(){return 255&this.timer0Control},GameBoyAdvanceTimer.prototype.readTM0CNT16=function(){return this.IOCore.updateTimerClocking(),0|this.timer0Counter},GameBoyAdvanceTimer.prototype.readTM0CNT32=function(){this.IOCore.updateTimerClocking();var e=(255&this.timer0Control)<<16;return 0|(e|=this.timer0Counter)},GameBoyAdvanceTimer.prototype.writeTM1CNT8_0=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer1Reload=65280&this.timer1Reload,e&=255,this.timer1Reload=this.timer1Reload|e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM1CNT8_1=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer1Reload=255&this.timer1Reload,e&=255,this.timer1Reload=this.timer1Reload|e<<8,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM1CNT8_2=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer1Control=255&e,0!=(128&e)?this.timer1Enabled||(this.timer1Counter=0|this.timer1Reload,this.timer1Enabled=!0,this.timer1Precounter=0):this.timer1Enabled=!1,this.timer1IRQ=0!=(64&e),this.timer1CountUp=0!=(4&e),this.timer1PrescalarShifted=0|this.prescalarLookup[3&e],this.timer1Prescalar=1<<(0|this.timer1PrescalarShifted),this.preprocessTimer1(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM1CNT16=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer1Reload=65535&e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM1CNT32=function(e){e|=0,this.IOCore.updateTimerClocking(),this.IOCore.sound.audioJIT(),this.timer1Reload=65535&e,this.timer1Control=e>>16,0!=(8388608&e)?this.timer1Enabled||(this.timer1Counter=0|this.timer1Reload,this.timer1Enabled=!0,this.timer1Precounter=0):this.timer1Enabled=!1,this.timer1IRQ=0!=(4194304&e),this.timer1CountUp=0!=(262144&e),this.timer1PrescalarShifted=0|this.prescalarLookup[e>>16&3],this.timer1Prescalar=1<<(0|this.timer1PrescalarShifted),this.preprocessTimer1(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.readTM1CNT8_0=function(){return this.IOCore.updateTimerClocking(),255&this.timer1Counter},GameBoyAdvanceTimer.prototype.readTM1CNT8_1=function(){return this.IOCore.updateTimerClocking(),(65280&this.timer1Counter)>>8},GameBoyAdvanceTimer.prototype.readTM1CNT8_2=function(){return 255&this.timer1Control},GameBoyAdvanceTimer.prototype.readTM1CNT16=function(){return this.IOCore.updateTimerClocking(),0|this.timer1Counter},GameBoyAdvanceTimer.prototype.readTM1CNT32=function(){this.IOCore.updateTimerClocking();var e=(255&this.timer1Control)<<16;return 0|(e|=this.timer1Counter)},GameBoyAdvanceTimer.prototype.writeTM2CNT8_0=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer2Reload=65280&this.timer2Reload,e&=255,this.timer2Reload=this.timer2Reload|e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM2CNT8_1=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer2Reload=255&this.timer2Reload,e&=255,this.timer2Reload=this.timer2Reload|e<<8,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM2CNT8_2=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer2Control=255&e,0!=(128&e)?this.timer2Enabled||(this.timer2Counter=0|this.timer2Reload,this.timer2Enabled=!0,this.timer2Precounter=0):this.timer2Enabled=!1,this.timer2IRQ=0!=(64&e),this.timer2CountUp=0!=(4&e),this.timer2PrescalarShifted=0|this.prescalarLookup[3&e],this.timer2Prescalar=1<<(0|this.timer2PrescalarShifted),this.preprocessTimer2(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM2CNT16=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer2Reload=65535&e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM2CNT32=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer2Reload=65535&e,this.timer2Control=e>>16,0!=(8388608&e)?this.timer2Enabled||(this.timer2Counter=0|this.timer2Reload,this.timer2Enabled=!0,this.timer2Precounter=0):this.timer2Enabled=!1,this.timer2IRQ=0!=(4194304&e),this.timer2CountUp=0!=(262144&e),this.timer2PrescalarShifted=0|this.prescalarLookup[e>>16&3],this.timer2Prescalar=1<<(0|this.timer2PrescalarShifted),this.preprocessTimer2(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.readTM2CNT8_0=function(){return this.IOCore.updateTimerClocking(),255&this.timer2Counter},GameBoyAdvanceTimer.prototype.readTM2CNT8_1=function(){return this.IOCore.updateTimerClocking(),(65280&this.timer2Counter)>>8},GameBoyAdvanceTimer.prototype.readTM2CNT8_2=function(){return 255&this.timer2Control},GameBoyAdvanceTimer.prototype.readTM2CNT16=function(){return this.IOCore.updateTimerClocking(),0|this.timer2Counter},GameBoyAdvanceTimer.prototype.readTM2CNT32=function(){this.IOCore.updateTimerClocking();var e=(255&this.timer2Control)<<16;return 0|(e|=this.timer2Counter)},GameBoyAdvanceTimer.prototype.writeTM3CNT8_0=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer3Reload=65280&this.timer3Reload,e&=255,this.timer3Reload=this.timer3Reload|e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM3CNT8_1=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer3Reload=255&this.timer3Reload,e&=255,this.timer3Reload=this.timer3Reload|e<<8,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM3CNT8_2=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer3Control=255&e,0!=(128&e)?this.timer3Enabled||(this.timer3Counter=0|this.timer3Reload,this.timer3Enabled=!0,this.timer3Precounter=0):this.timer3Enabled=!1,this.timer3IRQ=0!=(64&e),this.timer3CountUp=0!=(4&e),this.timer3PrescalarShifted=0|this.prescalarLookup[3&e],this.timer3Prescalar=1<<(0|this.timer3PrescalarShifted),this.preprocessTimer3(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM3CNT16=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer3Reload=65535&e,this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.writeTM3CNT32=function(e){e|=0,this.IOCore.updateTimerClocking(),this.timer3Reload=65535&e,this.timer3Control=e>>16,0!=(8388608&e)?this.timer3Enabled||(this.timer3Counter=0|this.timer3Reload,this.timer3Enabled=!0,this.timer3Precounter=0):this.timer3Enabled=!1,this.timer3IRQ=0!=(4194304&e),this.timer3CountUp=0!=(262144&e),this.timer3PrescalarShifted=0|this.prescalarLookup[e>>16&3],this.timer3Prescalar=1<<(0|this.timer3PrescalarShifted),this.preprocessTimer3(),this.IOCore.updateCoreEventTime()},GameBoyAdvanceTimer.prototype.readTM3CNT8_0=function(){return this.IOCore.updateTimerClocking(),255&this.timer3Counter},GameBoyAdvanceTimer.prototype.readTM3CNT8_1=function(){return this.IOCore.updateTimerClocking(),(65280&this.timer3Counter)>>8},GameBoyAdvanceTimer.prototype.readTM3CNT8_2=function(){return 255&this.timer3Control},GameBoyAdvanceTimer.prototype.readTM3CNT16=function(){return this.IOCore.updateTimerClocking(),0|this.timer3Counter},GameBoyAdvanceTimer.prototype.readTM3CNT32=function(){this.IOCore.updateTimerClocking();var e=(255&this.timer3Control)<<16;return 0|(e|=this.timer3Counter)},GameBoyAdvanceTimer.prototype.preprocessTimer1=function(){this.timer1UseMainClocks=this.timer1Enabled&&!this.timer1CountUp,this.timer1UseChainedClocks=this.timer1Enabled&&this.timer1CountUp},GameBoyAdvanceTimer.prototype.preprocessTimer2=function(){this.timer2UseMainClocks=this.timer2Enabled&&!this.timer2CountUp,this.timer2UseChainedClocks=this.timer2Enabled&&this.timer2CountUp},GameBoyAdvanceTimer.prototype.preprocessTimer3=function(){this.timer3UseMainClocks=this.timer3Enabled&&!this.timer3CountUp,this.timer3UseChainedClocks=this.timer3Enabled&&this.timer3CountUp},"function"==typeof Math.imul?(GameBoyAdvanceTimer.prototype.nextTimer0OverflowBase=function(){var e=65536-(0|this.timer0Counter)|0;return 0|(e=(0|(e=0|Math.imul(0|e,0|this.timer0Prescalar)))-(0|this.timer0Precounter)|0)},GameBoyAdvanceTimer.prototype.nextTimer0OverflowSingle=function(){var e=2147483647;return this.timer0Enabled&&(e=0|this.nextTimer0OverflowBase()),0|e},GameBoyAdvanceTimer.prototype.nextTimer0Overflow=function(e){e|=0;var t=2147483647;if(this.timer0Enabled){e=(0|e)-1|0;var i=0|this.nextTimer0OverflowBase(),r=65536-(0|this.timer0Reload)|0;r=(0|(r=0|Math.imul(0|r,0|this.timer0Prescalar)))*(0|e),t=0|Math.min((0|i)+r,2147483647)}return 0|t},GameBoyAdvanceTimer.prototype.nextTimer1OverflowBase=function(){var e=65536-(0|this.timer1Counter)|0;return 0|(e=(0|(e=0|Math.imul(0|e,0|this.timer1Prescalar)))-(0|this.timer1Precounter)|0)},GameBoyAdvanceTimer.prototype.nextTimer1Overflow=function(e){e|=0;var t=2147483647;if(this.timer1Enabled){var i=65536-(0|this.timer1Reload)|0;if(this.timer1CountUp){var r=65536-(0|this.timer1Counter)|0;i=(0|i)*(0|e),t=0|Math.min((0|r)+i,2147483647),t=0|this.nextTimer0Overflow(0|t)}else{e=(0|e)-1|0;r=0|this.nextTimer1OverflowBase();i=0|Math.imul(0|i,0|this.timer1Prescalar),i*=e,t=0|Math.min((0|r)+i,2147483647)}}return 0|t},GameBoyAdvanceTimer.prototype.nextTimer1OverflowSingle=function(){var e=2147483647;if(this.timer1Enabled)if(this.timer1CountUp){var t=65536-(0|this.timer1Counter)|0;e=0|this.nextTimer0Overflow(0|t)}else e=0|this.nextTimer1OverflowBase();return 0|e},GameBoyAdvanceTimer.prototype.nextTimer2OverflowBase=function(){var e=65536-(0|this.timer2Counter)|0;return 0|(e=(0|(e=0|Math.imul(0|e,0|this.timer2Prescalar)))-(0|this.timer2Precounter)|0)},GameBoyAdvanceTimer.prototype.nextTimer2Overflow=function(e){e|=0;var t=2147483647;if(this.timer2Enabled){var i=65536-(0|this.timer2Reload)|0;if(this.timer2CountUp){var r=65536-(0|this.timer2Counter)|0;i=(0|i)*(0|e),t=0|Math.min((0|r)+i,2147483647),t=0|this.nextTimer1Overflow(0|t)}else{e=(0|e)-1|0;r=0|this.nextTimer2OverflowBase();i=0|Math.imul(0|i,0|this.timer2Prescalar),i*=e,t=0|Math.min((0|r)+i,2147483647)}}return 0|t},GameBoyAdvanceTimer.prototype.nextTimer2OverflowSingle=function(){var e=2147483647;if(this.timer2Enabled)if(this.timer2CountUp){var t=65536-(0|this.timer2Counter)|0;e=0|this.nextTimer1Overflow(0|t)}else e=0|this.nextTimer2OverflowBase();return 0|e},GameBoyAdvanceTimer.prototype.nextTimer3OverflowSingle=function(){var e=2147483647;if(this.timer3Enabled)if(this.timer3CountUp){var t=65536-(0|this.timer3Counter)|0;e=0|this.nextTimer2Overflow(0|t)}else e=65536-(0|this.timer3Counter)|0,e=(0|(e=0|Math.imul(0|e,0|this.timer3Prescalar)))-(0|this.timer3Precounter)|0;return 0|e}):(GameBoyAdvanceTimer.prototype.nextTimer0OverflowBase=function(){var e=65536-(0|this.timer0Counter)|0;return 0|(e=(0|(e=(0|e)*(0|this.timer0Prescalar)|0))-(0|this.timer0Precounter)|0)},GameBoyAdvanceTimer.prototype.nextTimer0OverflowSingle=function(){var e=2147483647;return this.timer0Enabled&&(e=0|this.nextTimer0OverflowBase()),0|e},GameBoyAdvanceTimer.prototype.nextTimer0Overflow=function(e){e|=0;var t=2147483647;if(this.timer0Enabled){e=(0|e)-1|0;var i=0|this.nextTimer0OverflowBase(),r=65536-(0|this.timer0Reload)|0;r=(0|(r=(0|r)*(0|this.timer0Prescalar)|0))*(0|e),t=0|Math.min((0|i)+r,2147483647)}return 0|t},GameBoyAdvanceTimer.prototype.nextTimer1OverflowBase=function(){var e=65536-(0|this.timer1Counter)|0;return 0|(e=(0|(e=(0|e)*(0|this.timer1Prescalar)|0))-(0|this.timer1Precounter)|0)},GameBoyAdvanceTimer.prototype.nextTimer1Overflow=function(e){e|=0;var t=2147483647;if(this.timer1Enabled){var i=65536-(0|this.timer1Reload)|0;if(this.timer1CountUp){var r=65536-(0|this.timer1Counter)|0;i=(0|i)*(0|e),t=0|Math.min((0|r)+i,2147483647),t=0|this.nextTimer0Overflow(0|t)}else{e=(0|e)-1|0;r=0|this.nextTimer1OverflowBase();i=(0|i)*(0|this.timer1Prescalar)|0,i*=e,t=0|Math.min((0|r)+i,2147483647)}}return 0|t},GameBoyAdvanceTimer.prototype.nextTimer1OverflowSingle=function(){var e=2147483647;if(this.timer1Enabled)if(this.timer1CountUp){var t=65536-(0|this.timer1Counter)|0;e=0|this.nextTimer0Overflow(0|t)}else e=0|this.nextTimer1OverflowBase();return 0|e},GameBoyAdvanceTimer.prototype.nextTimer2OverflowBase=function(){var e=65536-(0|this.timer2Counter)|0;return 0|(e=(0|(e=(0|e)*(0|this.timer2Prescalar)|0))-(0|this.timer2Precounter)|0)},GameBoyAdvanceTimer.prototype.nextTimer2Overflow=function(e){e|=0;var t=2147483647;if(this.timer2Enabled){var i=65536-(0|this.timer2Reload)|0;if(this.timer2CountUp){var r=65536-(0|this.timer2Counter)|0;i=(0|i)*(0|e),t=0|Math.min((0|r)+i,2147483647),t=0|this.nextTimer1Overflow(0|t)}else{e=(0|e)-1|0;r=0|this.nextTimer2OverflowBase();i=(0|i)*(0|this.timer2Prescalar)|0,i*=e,t=0|Math.min((0|r)+i,2147483647)}}return 0|t},GameBoyAdvanceTimer.prototype.nextTimer2OverflowSingle=function(){var e=2147483647;if(this.timer2Enabled)if(this.timer2CountUp){var t=65536-(0|this.timer2Counter)|0;e=0|this.nextTimer1Overflow(0|t)}else e=0|this.nextTimer2OverflowBase();return 0|e},GameBoyAdvanceTimer.prototype.nextTimer3OverflowSingle=function(){var e=2147483647;if(this.timer3Enabled)if(this.timer3CountUp){var t=65536-(0|this.timer3Counter)|0;e=0|this.nextTimer2Overflow(0|t)}else e=(0|(e=(0|(e=65536-(0|this.timer3Counter)|0))*(0|this.timer3Prescalar)|0))-(0|this.timer3Precounter)|0;return 0|e}),GameBoyAdvanceTimer.prototype.nextAudioTimerOverflow=function(){var e=0|this.nextTimer0OverflowSingle(),t=0|this.nextTimer1OverflowSingle();return 0|Math.min(0|e,0|t)},GameBoyAdvanceTimer.prototype.nextTimer0IRQEventTime=function(){var e=2147483647;return this.timer0Enabled&&this.timer0IRQ&&(e=0|this.nextTimer0OverflowSingle()),0|e},GameBoyAdvanceTimer.prototype.nextTimer1IRQEventTime=function(){var e=2147483647;return this.timer1Enabled&&this.timer1IRQ&&(e=0|this.nextTimer1OverflowSingle()),0|e},GameBoyAdvanceTimer.prototype.nextTimer2IRQEventTime=function(){var e=2147483647;return this.timer2Enabled&&this.timer2IRQ&&(e=0|this.nextTimer2OverflowSingle()),0|e},GameBoyAdvanceTimer.prototype.nextTimer3IRQEventTime=function(){var e=2147483647;return this.timer3Enabled&&this.timer3IRQ&&(e=0|this.nextTimer3OverflowSingle()),0|e},GameBoyAdvanceWait.prototype.initialize=function(){this.memory=this.IOCore.memory,this.cpu=this.IOCore.cpu,this.WRAMConfiguration=218103840,this.WRAMWaitState=3,this.SRAMWaitState=5,this.WAITCNT0=0,this.WAITCNT1=0,this.POSTBOOT=0,this.isRendering=1,this.isOAMRendering=1,this.nonSequential=16,this.buffer=0,this.clocks=0,this.waitStateClocks16=getUint8Array(32),this.waitStateClocks32=getUint8Array(32),this.setWaitState(0,0),this.setWaitState(1,0),this.setWaitState(2,0),this.getROMRead16=this.getROMRead16NoPrefetch,this.getROMRead32=this.getROMRead32NoPrefetch,this.CPUInternalCyclePrefetch=this.CPUInternalCycleNoPrefetch,this.CPUInternalSingleCyclePrefetch=this.CPUInternalSingleCycleNoPrefetch},GameBoyAdvanceWait.prototype.getWaitStateFirstAccess=function(e){return e|=0,0|(e=(0|(e&=3))<3?5-(0|e)|0:9)},GameBoyAdvanceWait.prototype.getWaitStateSecondAccess=function(e,t){return e|=0,0|(t=0==(4&(t|=0))?1+(0|(t=2<<(0|e)))|0:2)},GameBoyAdvanceWait.prototype.setWaitState=function(e,t){e|=0,t|=0;var i=0|this.getWaitStateFirstAccess(3&t),r=0|this.getWaitStateSecondAccess(0|e,0|t);e<<=1,this.waitStateClocks16[24|e]=0|i,this.waitStateClocks16[25|e]=0|i;var a=(0|i)+(0|r)|0;this.waitStateClocks32[24|e]=0|a,this.waitStateClocks32[25|e]=0|a,this.waitStateClocks16[8|e]=0|r,this.waitStateClocks16[9|e]=0|r,this.waitStateClocks32[8|e]=r<<1,this.waitStateClocks32[9|e]=r<<1},GameBoyAdvanceWait.prototype.writeWAITCNT8_0=function(e){e|=0,this.SRAMWaitState=(3&e)<3?5-(3&e)|0:9,e&=255,this.setWaitState(0,e>>2),this.setWaitState(1,e>>5),this.WAITCNT0=0|e},GameBoyAdvanceWait.prototype.readWAITCNT8_0=function(){return 0|this.WAITCNT0},GameBoyAdvanceWait.prototype.writeWAITCNT8_1=function(e){e|=0,this.setWaitState(2,255&e),0==(64&e)?(this.resetPrebuffer(),this.getROMRead16=this.getROMRead16NoPrefetch,this.getROMRead32=this.getROMRead32NoPrefetch,this.CPUInternalCyclePrefetch=this.CPUInternalCycleNoPrefetch,this.CPUInternalSingleCyclePrefetch=this.CPUInternalSingleCycleNoPrefetch):(this.getROMRead16=this.getROMRead16Prefetch,this.getROMRead32=this.getROMRead32Prefetch,this.CPUInternalCyclePrefetch=this.multiClock,this.CPUInternalSingleCyclePrefetch=this.singleClock),this.WAITCNT1=95&e},GameBoyAdvanceWait.prototype.readWAITCNT8_1=function(){return 0|this.WAITCNT1},GameBoyAdvanceWait.prototype.writeWAITCNT16=function(e){this.writeWAITCNT8_0(0|e),this.writeWAITCNT8_1(e>>8)},GameBoyAdvanceWait.prototype.readWAITCNT16=function(){var e=0|this.WAITCNT0;return 0|(e|=this.WAITCNT1<<8)},GameBoyAdvanceWait.prototype.writePOSTBOOT=function(e){this.POSTBOOT=255&e},GameBoyAdvanceWait.prototype.readPOSTBOOT=function(){return 0|this.POSTBOOT},GameBoyAdvanceWait.prototype.writeHALTCNT=function(e){e|=0,this.IOCore.updateCoreSpillRetain(),0==(128&e)?this.IOCore.flagHalt():this.IOCore.flagStop()},GameBoyAdvanceWait.prototype.writeHALT16=function(e){e|=0,this.POSTBOOT=255&e,this.IOCore.updateCoreSpillRetain(),0==(32768&e)?this.IOCore.flagHalt():this.IOCore.flagStop()},GameBoyAdvanceWait.prototype.writeConfigureWRAM8=function(e,t){switch(t|=0,3&(e|=0)){case 0:this.memory.remapWRAM(33&t),this.WRAMConfiguration=4294967040&this.WRAMConfiguration|255&t;break;case 1:this.WRAMConfiguration=4294902015&this.WRAMConfiguration|(255&t)<<8;break;case 2:this.WRAMConfiguration=4278255615&this.WRAMConfiguration|(255&t)<<16;break;default:this.WRAMWaitState=16-(15&t)|0,this.WRAMConfiguration=16777215&this.WRAMConfiguration|t<<24}},GameBoyAdvanceWait.prototype.writeConfigureWRAM16=function(e,t){t|=0,0==(2&(e|=0))?(this.WRAMConfiguration=4294901760&this.WRAMConfiguration|65535&t,this.memory.remapWRAM(33&t)):(this.WRAMConfiguration=t<<16|65535&this.WRAMConfiguration,this.WRAMWaitState=16-(t>>8&15)|0)},GameBoyAdvanceWait.prototype.writeConfigureWRAM32=function(e){e|=0,this.WRAMConfiguration=0|e,this.WRAMWaitState=16-(e>>24&15)|0,this.memory.remapWRAM(33&e)},GameBoyAdvanceWait.prototype.readConfigureWRAM8=function(e){var t=0;switch(3&(e|=0)){case 0:t=47&this.WRAMConfiguration;break;case 3:t=this.WRAMConfiguration>>>24}return 0|t},GameBoyAdvanceWait.prototype.readConfigureWRAM16=function(e){return 0|(0==(2&(e|=0))?47&this.WRAMConfiguration:this.WRAMConfiguration>>16&65280)},GameBoyAdvanceWait.prototype.readConfigureWRAM32=function(){return 4278190127&this.WRAMConfiguration},GameBoyAdvanceWait.prototype.CPUInternalCycleNoPrefetch=function(e){e|=0,this.IOCore.updateCore(0|e),this.checkPrebufferBug()},GameBoyAdvanceWait.prototype.CPUInternalSingleCycleNoPrefetch=function(){this.IOCore.updateCoreSingle(),this.checkPrebufferBug()},GameBoyAdvanceWait.prototype.checkPrebufferBug=function(){var e=0|this.cpu.registers[15];(0|e)>=134217728&&(0|e)<234881024&&this.NonSequentialBroadcast()},GameBoyAdvanceWait.prototype.NonSequentialBroadcast=function(){this.nonSequential=16},GameBoyAdvanceWait.prototype.NonSequentialBroadcastClear=function(){this.NonSequentialBroadcast(),this.resetPrebuffer()},GameBoyAdvanceWait.prototype.check128kAlignmentBug=function(e){0==(131071&(e|=0))&&this.NonSequentialBroadcast()},GameBoyAdvanceWait.prototype.multiClock=function(e){e|=0,this.IOCore.updateCore(0|e);var t=0|this.cpu.registers[15];(0|t)>=134217728&&(0|t)<234881024?(0|this.clocks)<255&&(this.clocks=(0|this.clocks)+(0|e)|0):this.resetPrebuffer()},GameBoyAdvanceWait.prototype.singleClock=function(){this.IOCore.updateCoreSingle();var e=0|this.cpu.registers[15];(0|e)>=134217728&&(0|e)<234881024?(0|this.clocks)<255&&(this.clocks=1+(0|this.clocks)|0):this.resetPrebuffer()},GameBoyAdvanceWait.prototype.addPrebufferSingleClock=function(){this.clocks=1+(0|this.clocks)|0},GameBoyAdvanceWait.prototype.decrementBufferSingle=function(){this.buffer=(0|this.buffer)-1|0},GameBoyAdvanceWait.prototype.decrementBufferDouble=function(){this.buffer=(0|this.buffer)-2|0},GameBoyAdvanceWait.prototype.resetPrebuffer=function(){this.clocks=0,this.buffer=0},GameBoyAdvanceWait.prototype.drainOverdueClocks=function(){if((0|this.clocks)>0&&(0|this.buffer)<8){var e=this.cpu.registers[15]>>>24;do{this.clocks=(0|this.clocks)-(0|this.waitStateClocks16[0|e])|0,this.buffer=1+(0|this.buffer)|0}while((0|this.clocks)>0&&(0|this.buffer)<8);(0|this.clocks)<0&&(this.IOCore.updateCoreNegative(0|this.clocks),this.clocks=0)}},GameBoyAdvanceWait.prototype.computeClocks=function(e){for(e|=0;(0|this.buffer)<8&&(0|this.clocks)>=(0|this.waitStateClocks16[0|e]);)this.clocks=(0|this.clocks)-(0|this.waitStateClocks16[0|e])|0,this.buffer=1+(0|this.buffer)|0},GameBoyAdvanceWait.prototype.drainOverdueClocksCPU=function(){(0|this.clocks)<0?(this.IOCore.updateCoreNegative(0|this.clocks),this.clocks=0):this.IOCore.updateCoreSingle()},GameBoyAdvanceWait.prototype.doGamePakFetch16=function(e){e|=0,this.clocks=(0|this.clocks)-(0|this.waitStateClocks16[e|this.nonSequential])|0,this.nonSequential=0},GameBoyAdvanceWait.prototype.doGamePakFetch32=function(e){e|=0,this.clocks=(0|this.clocks)-(0|this.waitStateClocks32[e|this.nonSequential])|0,this.nonSequential=0},GameBoyAdvanceWait.prototype.getROMRead16Prefetch=function(e){if(e|=0,this.computeClocks(0|e),0==(0|this.buffer))this.doGamePakFetch16(0|e);else this.addPrebufferSingleClock(),this.decrementBufferSingle();this.drainOverdueClocksCPU()},GameBoyAdvanceWait.prototype.getROMRead16NoPrefetch=function(e){e|=0,this.IOCore.updateCore(0|this.waitStateClocks16[e|this.nonSequential]),this.nonSequential=0},GameBoyAdvanceWait.prototype.getROMRead32Prefetch=function(e){switch(e|=0,this.computeClocks(0|e),0|this.buffer){case 0:this.doGamePakFetch32(0|e);break;case 1:this.doGamePakFetch16(0|e),this.buffer=0;break;default:this.addPrebufferSingleClock(),this.decrementBufferDouble()}this.drainOverdueClocksCPU()},GameBoyAdvanceWait.prototype.getROMRead32NoPrefetch=function(e){e|=0,this.IOCore.updateCore(0|this.waitStateClocks32[e|this.nonSequential]),this.nonSequential=0},GameBoyAdvanceWait.prototype.WRAMAccess=function(){this.multiClock(0|this.WRAMWaitState)},GameBoyAdvanceWait.prototype.WRAMAccess16CPU=function(){this.IOCore.updateCore(0|this.WRAMWaitState)},GameBoyAdvanceWait.prototype.WRAMAccess32=function(){this.multiClock(this.WRAMWaitState<<1)},GameBoyAdvanceWait.prototype.WRAMAccess32CPU=function(){this.IOCore.updateCore(this.WRAMWaitState<<1)},GameBoyAdvanceWait.prototype.ROMAccess=function(e){e|=0,this.drainOverdueClocks(),this.check128kAlignmentBug(0|e),this.IOCore.updateCore(0|this.waitStateClocks16[e>>24|this.nonSequential]),this.nonSequential=0},GameBoyAdvanceWait.prototype.ROMAccess16CPU=function(e){e|=0,this.check128kAlignmentBug(0|e),this.getROMRead16(e>>24)},GameBoyAdvanceWait.prototype.ROMAccess32=function(e){e|=0,this.drainOverdueClocks(),this.check128kAlignmentBug(0|e),this.IOCore.updateCore(0|this.waitStateClocks32[e>>24|this.nonSequential]),this.nonSequential=0},GameBoyAdvanceWait.prototype.ROMAccess32CPU=function(e){e|=0,this.check128kAlignmentBug(0|e),this.getROMRead32(e>>24)},GameBoyAdvanceWait.prototype.SRAMAccess=function(){this.multiClock(0|this.SRAMWaitState)},GameBoyAdvanceWait.prototype.SRAMAccessCPU=function(){this.resetPrebuffer(),this.IOCore.updateCore(0|this.SRAMWaitState)},GameBoyAdvanceWait.prototype.VRAMAccess=function(){this.multiClock(0|this.isRendering)},GameBoyAdvanceWait.prototype.VRAMAccess16CPU=function(){this.IOCore.updateCore(0|this.isRendering)},GameBoyAdvanceWait.prototype.VRAMAccess32=function(){this.multiClock(this.isRendering<<1)},GameBoyAdvanceWait.prototype.VRAMAccess32CPU=function(){this.IOCore.updateCore(this.isRendering<<1)},GameBoyAdvanceWait.prototype.OAMAccess=function(){this.multiClock(0|this.isOAMRendering)},GameBoyAdvanceWait.prototype.OAMAccessCPU=function(){this.IOCore.updateCore(0|this.isOAMRendering)},GameBoyAdvanceWait.prototype.updateRenderStatus=function(e,t){this.isRendering=0|e,this.isOAMRendering=0|t},GameBoyAdvanceCPU.prototype.initialize=function(){this.memory=this.IOCore.memory,this.wait=this.IOCore.wait,this.mul64ResultHigh=0,this.mul64ResultLow=0,this.initializeRegisters(),this.ARM=new ARMInstructionSet(this),this.THUMB=new THUMBInstructionSet(this),this.IOCore.assignInstructionCoreReferences(this.ARM,this.THUMB)},GameBoyAdvanceCPU.prototype.initializeRegisters=function(){this.registers=getInt32Array(16),this.registersUSR=getInt32Array(7),this.registersFIQ=getInt32Array(7),this.registersSVC=getInt32Array(2),this.registersABT=getInt32Array(2),this.registersIRQ=getInt32Array(2),this.registersUND=getInt32Array(2),this.branchFlags=ARMCPSRAttributeTable(),this.modeFlags=211,this.SPSR=getUint16Array(5),this.SPSR[0]=211,this.SPSR[1]=211,this.SPSR[2]=211,this.SPSR[3]=211,this.SPSR[4]=211,this.triggeredIRQ=0,this.IOCore.SKIPBoot&&this.HLEReset(),this.IOCore.flagBubble()},GameBoyAdvanceCPU.prototype.HLEReset=function(){this.registersSVC[0]=50364384,this.registersIRQ[0]=50364320,this.registers[13]=50364160,this.registers[15]=134217728,this.modeFlags=31|this.modeFlags},GameBoyAdvanceCPU.prototype.branch=function(e){e|=0,this.registers[15]=0|e,this.IOCore.flagBubble(),this.wait.NonSequentialBroadcastClear()},GameBoyAdvanceCPU.prototype.triggerIRQ=function(e){this.triggeredIRQ=0|e,this.assertIRQ()},GameBoyAdvanceCPU.prototype.assertIRQ=function(){0!=(0|this.triggeredIRQ)&&0==(128&this.modeFlags)&&this.IOCore.flagIRQ()},GameBoyAdvanceCPU.prototype.getCurrentFetchValue=function(){return 0!=(32&this.modeFlags)?0|this.THUMB.getCurrentFetchValue():0|this.ARM.getCurrentFetchValue()},GameBoyAdvanceCPU.prototype.enterARM=function(){this.modeFlags=223&this.modeFlags,this.THUMBBitModify(!1)},GameBoyAdvanceCPU.prototype.enterTHUMB=function(){this.modeFlags=32|this.modeFlags,this.THUMBBitModify(!0)},GameBoyAdvanceCPU.prototype.getLR=function(){return 0!=(32&this.modeFlags)?0|this.THUMB.getLR():0|this.ARM.getLR()},GameBoyAdvanceCPU.prototype.THUMBBitModify=function(e){e?this.IOCore.flagTHUMB():this.IOCore.deflagTHUMB()},GameBoyAdvanceCPU.prototype.IRQinARM=function(){this.switchMode(18),this.registers[14]=0|this.ARM.getIRQLR(),this.modeFlags=128|this.modeFlags,this.branch(24),this.IOCore.deflagIRQ()},GameBoyAdvanceCPU.prototype.IRQinTHUMB=function(){this.switchMode(18),this.registers[14]=0|this.THUMB.getIRQLR(),this.modeFlags=128|this.modeFlags,this.enterARM(),this.branch(24),this.IOCore.deflagIRQ()},GameBoyAdvanceCPU.prototype.HLEIRQEnter=function(){var e=0|this.registers[13];this.wait.NonSequentialBroadcast();for(var t=15;(0|t)>-1;t=(0|t)-1|0)0!=(20495&1<<(0|t))&&(e=(0|e)-4|0,this.memory.memoryWrite32(0|e,0|this.registers[0|t]));this.registers[13]=0|e,this.wait.NonSequentialBroadcast(),this.registers[0]=67108864,this.registers[14]=304,this.branch(-4&this.read32(67108860))},GameBoyAdvanceCPU.prototype.HLEIRQExit=function(){var e=0|this.registers[13];this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(20495&1<<(0|t))&&(this.registers[15&t]=0|this.memory.memoryRead32(0|e),e=4+(0|e)|0);this.registers[13]=0|e,this.wait.NonSequentialBroadcast();var i=0|this.branchFlags.setSUBFlags(0|this.registers[14],4);i&=-4>>(this.SPSRtoCPSR()>>5),this.branch(0|i)},GameBoyAdvanceCPU.prototype.SWI=function(){this.switchMode(19),this.registers[14]=0|this.getLR(),this.modeFlags=128|this.modeFlags,this.enterARM(),this.branch(8)},GameBoyAdvanceCPU.prototype.UNDEFINED=function(){this.switchMode(27),this.registers[14]=0|this.getLR(),this.modeFlags=128|this.modeFlags,this.enterARM(),this.branch(4)},GameBoyAdvanceCPU.prototype.SPSRtoCPSR=function(){var e=1;switch(31&this.modeFlags){case 18:break;case 19:e=2;break;case 17:e=0;break;case 23:e=3;break;case 27:e=4;break;default:return 32&this.modeFlags}var t=0|this.SPSR[0|e];return this.branchFlags.setNZCV(t<<20),this.switchRegisterBank(31&t),this.modeFlags=255&t,this.assertIRQ(),this.THUMBBitModify(0!=(32&t)),32&t},GameBoyAdvanceCPU.prototype.switchMode=function(e){e|=0,this.CPSRtoSPSR(0|e),this.switchRegisterBank(0|e),this.modeFlags=224&this.modeFlags|0|e},GameBoyAdvanceCPU.prototype.CPSRtoSPSR=function(e){var t=255&this.modeFlags;switch(t|=this.branchFlags.getNZCV()>>20,0|e){case 18:this.SPSR[1]=0|t;break;case 19:this.SPSR[2]=0|t;break;case 17:this.SPSR[0]=0|t;break;case 23:this.SPSR[3]=0|t;break;case 27:this.SPSR[4]=0|t}},GameBoyAdvanceCPU.prototype.switchRegisterBank=function(e){switch(e|=0,31&this.modeFlags){case 16:case 31:this.registersUSR[0]=0|this.registers[8],this.registersUSR[1]=0|this.registers[9],this.registersUSR[2]=0|this.registers[10],this.registersUSR[3]=0|this.registers[11],this.registersUSR[4]=0|this.registers[12],this.registersUSR[5]=0|this.registers[13],this.registersUSR[6]=0|this.registers[14];break;case 17:this.registersFIQ[0]=0|this.registers[8],this.registersFIQ[1]=0|this.registers[9],this.registersFIQ[2]=0|this.registers[10],this.registersFIQ[3]=0|this.registers[11],this.registersFIQ[4]=0|this.registers[12],this.registersFIQ[5]=0|this.registers[13],this.registersFIQ[6]=0|this.registers[14];break;case 18:this.registersUSR[0]=0|this.registers[8],this.registersUSR[1]=0|this.registers[9],this.registersUSR[2]=0|this.registers[10],this.registersUSR[3]=0|this.registers[11],this.registersUSR[4]=0|this.registers[12],this.registersIRQ[0]=0|this.registers[13],this.registersIRQ[1]=0|this.registers[14];break;case 19:this.registersUSR[0]=0|this.registers[8],this.registersUSR[1]=0|this.registers[9],this.registersUSR[2]=0|this.registers[10],this.registersUSR[3]=0|this.registers[11],this.registersUSR[4]=0|this.registers[12],this.registersSVC[0]=0|this.registers[13],this.registersSVC[1]=0|this.registers[14];break;case 23:this.registersUSR[0]=0|this.registers[8],this.registersUSR[1]=0|this.registers[9],this.registersUSR[2]=0|this.registers[10],this.registersUSR[3]=0|this.registers[11],this.registersUSR[4]=0|this.registers[12],this.registersABT[0]=0|this.registers[13],this.registersABT[1]=0|this.registers[14];break;case 27:this.registersUSR[0]=0|this.registers[8],this.registersUSR[1]=0|this.registers[9],this.registersUSR[2]=0|this.registers[10],this.registersUSR[3]=0|this.registers[11],this.registersUSR[4]=0|this.registers[12],this.registersUND[0]=0|this.registers[13],this.registersUND[1]=0|this.registers[14]}switch(0|e){case 16:case 31:this.registers[8]=0|this.registersUSR[0],this.registers[9]=0|this.registersUSR[1],this.registers[10]=0|this.registersUSR[2],this.registers[11]=0|this.registersUSR[3],this.registers[12]=0|this.registersUSR[4],this.registers[13]=0|this.registersUSR[5],this.registers[14]=0|this.registersUSR[6];break;case 17:this.registers[8]=0|this.registersFIQ[0],this.registers[9]=0|this.registersFIQ[1],this.registers[10]=0|this.registersFIQ[2],this.registers[11]=0|this.registersFIQ[3],this.registers[12]=0|this.registersFIQ[4],this.registers[13]=0|this.registersFIQ[5],this.registers[14]=0|this.registersFIQ[6];break;case 18:this.registers[8]=0|this.registersUSR[0],this.registers[9]=0|this.registersUSR[1],this.registers[10]=0|this.registersUSR[2],this.registers[11]=0|this.registersUSR[3],this.registers[12]=0|this.registersUSR[4],this.registers[13]=0|this.registersIRQ[0],this.registers[14]=0|this.registersIRQ[1];break;case 19:this.registers[8]=0|this.registersUSR[0],this.registers[9]=0|this.registersUSR[1],this.registers[10]=0|this.registersUSR[2],this.registers[11]=0|this.registersUSR[3],this.registers[12]=0|this.registersUSR[4],this.registers[13]=0|this.registersSVC[0],this.registers[14]=0|this.registersSVC[1];break;case 23:this.registers[8]=0|this.registersUSR[0],this.registers[9]=0|this.registersUSR[1],this.registers[10]=0|this.registersUSR[2],this.registers[11]=0|this.registersUSR[3],this.registers[12]=0|this.registersUSR[4],this.registers[13]=0|this.registersABT[0],this.registers[14]=0|this.registersABT[1];break;case 27:this.registers[8]=0|this.registersUSR[0],this.registers[9]=0|this.registersUSR[1],this.registers[10]=0|this.registersUSR[2],this.registers[11]=0|this.registersUSR[3],this.registers[12]=0|this.registersUSR[4],this.registers[13]=0|this.registersUND[0],this.registers[14]=0|this.registersUND[1]}},"function"==typeof Math.imul?GameBoyAdvanceCPU.prototype.calculateMUL32=Math.imul:GameBoyAdvanceCPU.prototype.calculateMUL32=function(e,t){return(((e|=0)>>16)*(t|=0)<<16)+(65535&e)*t|0},GameBoyAdvanceCPU.prototype.performMUL32=function(e,t){return e|=0,(t|=0)>>>8==0||t>>>8==16777215?this.IOCore.wait.CPUInternalSingleCyclePrefetch():t>>>16==0||t>>>16==65535?this.IOCore.wait.CPUInternalCyclePrefetch(2):t>>>24==0||t>>>24==255?this.IOCore.wait.CPUInternalCyclePrefetch(3):this.IOCore.wait.CPUInternalCyclePrefetch(4),0|this.calculateMUL32(0|e,0|t)},GameBoyAdvanceCPU.prototype.performMUL32MLA=function(e,t){return e|=0,(t|=0)>>>8==0||t>>>8==16777215?this.IOCore.wait.CPUInternalCyclePrefetch(2):t>>>16==0||t>>>16==65535?this.IOCore.wait.CPUInternalCyclePrefetch(3):t>>>24==0||t>>>24==255?this.IOCore.wait.CPUInternalCyclePrefetch(4):this.IOCore.wait.CPUInternalCyclePrefetch(5),0|this.calculateMUL32(0|e,0|t)},GameBoyAdvanceCPU.prototype.performMUL64=function(e,t){e|=0,(t|=0)>>>8==0||t>>>8==16777215?this.IOCore.wait.CPUInternalCyclePrefetch(2):t>>>16==0||t>>>16==65535?this.IOCore.wait.CPUInternalCyclePrefetch(3):t>>>24==0||t>>>24==255?this.IOCore.wait.CPUInternalCyclePrefetch(4):this.IOCore.wait.CPUInternalCyclePrefetch(5),this.mul64ResultHigh=0|Math.floor(e*t/4294967296),this.mul64ResultLow=0|this.calculateMUL32(0|e,0|t)},GameBoyAdvanceCPU.prototype.performMLA64=function(e,t,i,r){e|=0,i|=0,r|=0,(t|=0)>>>8==0||t>>>8==16777215?this.IOCore.wait.CPUInternalCyclePrefetch(3):t>>>16==0||t>>>16==65535?this.IOCore.wait.CPUInternalCyclePrefetch(4):t>>>24==0||t>>>24==255?this.IOCore.wait.CPUInternalCyclePrefetch(5):this.IOCore.wait.CPUInternalCyclePrefetch(6);var a=0|Math.floor(e*t/4294967296),s=(this.calculateMUL32(0|e,0|t)>>>0)+(r>>>0);this.mul64ResultHigh=(0|a)+(0|i)+Math.floor(s/4294967296)|0,this.mul64ResultLow=0|s},GameBoyAdvanceCPU.prototype.performUMUL64=function(e,t){e|=0,(t|=0)>>>8==0?this.IOCore.wait.CPUInternalCyclePrefetch(2):t>>>16==0?this.IOCore.wait.CPUInternalCyclePrefetch(3):t>>>24==0?this.IOCore.wait.CPUInternalCyclePrefetch(4):this.IOCore.wait.CPUInternalCyclePrefetch(5),this.mul64ResultHigh=(e>>>0)*(t>>>0)/4294967296|0,this.mul64ResultLow=0|this.calculateMUL32(0|e,0|t)},GameBoyAdvanceCPU.prototype.performUMLA64=function(e,t,i,r){e|=0,i|=0,r|=0,(t|=0)>>>8==0?this.IOCore.wait.CPUInternalCyclePrefetch(3):t>>>16==0?this.IOCore.wait.CPUInternalCyclePrefetch(4):t>>>24==0?this.IOCore.wait.CPUInternalCyclePrefetch(5):this.IOCore.wait.CPUInternalCyclePrefetch(6);var a=0|Math.floor((e>>>0)*(t>>>0)/4294967296),s=(this.calculateMUL32(0|e,0|t)>>>0)+(r>>>0);this.mul64ResultHigh=(0|a)+(0|i)+Math.floor(s/4294967296)|0,this.mul64ResultLow=0|s},GameBoyAdvanceCPU.prototype.write32=function(e,t){e|=0,t|=0,this.IOCore.wait.NonSequentialBroadcast(),this.memory.memoryWrite32(0|e,0|t),this.IOCore.wait.NonSequentialBroadcast()},GameBoyAdvanceCPU.prototype.write16=function(e,t){e|=0,t|=0,this.IOCore.wait.NonSequentialBroadcast(),this.memory.memoryWrite16(0|e,0|t),this.IOCore.wait.NonSequentialBroadcast()},GameBoyAdvanceCPU.prototype.write8=function(e,t){e|=0,t|=0,this.IOCore.wait.NonSequentialBroadcast(),this.memory.memoryWrite8(0|e,0|t),this.IOCore.wait.NonSequentialBroadcast()},GameBoyAdvanceCPU.prototype.read32=function(e){e|=0,this.IOCore.wait.NonSequentialBroadcast();var t=0|this.memory.memoryRead32(0|e);return 0!=(3&e)&&(t=t<<(4-(3&e)<<3)|t>>>((3&e)<<3)),this.IOCore.wait.NonSequentialBroadcast(),0|t},GameBoyAdvanceCPU.prototype.read16=function(e){e|=0,this.IOCore.wait.NonSequentialBroadcast();var t=0|this.memory.memoryRead16(0|e);return 0!=(1&e)&&(t=t<<24|t>>>8),this.IOCore.wait.NonSequentialBroadcast(),0|t},GameBoyAdvanceCPU.prototype.read8=function(e){e|=0,this.IOCore.wait.NonSequentialBroadcast();var t=0|this.memory.memoryRead8(0|e);return this.IOCore.wait.NonSequentialBroadcast(),0|t},GameBoyAdvanceSaves.prototype.initialize=function(){this.saveType=0,this.GPIOChip=new GameBoyAdvanceGPIOChip,this.UNDETERMINED=new GameBoyAdvanceSaveDeterminer(this),this.SRAMChip=new GameBoyAdvanceSRAMChip,this.FLASHChip=new GameBoyAdvanceFLASHChip(this.cartridge.flash_is128,this.cartridge.flash_isAtmel),this.EEPROMChip=new GameBoyAdvanceEEPROMChip(this.cartridge.IOCore),this.currentChip=this.UNDETERMINED,this.referenceSave(this.saveType)},GameBoyAdvanceSaves.prototype.referenceSave=function(e){switch(0|(e|=0)){case 0:this.currentChip=this.UNDETERMINED;break;case 1:this.currentChip=this.SRAMChip;break;case 2:this.currentChip=this.FLASHChip;break;case 3:this.currentChip=this.EEPROMChip}this.currentChip.initialize(),this.saveType=0|e},GameBoyAdvanceSaves.prototype.importSave=function(e,t){t|=0,this.UNDETERMINED.load(e),this.SRAMChip.load(e),this.FLASHChip.load(e),this.EEPROMChip.load(e),this.referenceSave(0|t)},GameBoyAdvanceSaves.prototype.importRTC=function(e){this.GPIOChip.loadRTC(e)},GameBoyAdvanceSaves.prototype.importGPIOType=function(e){e|=0,this.GPIOChip.loadType(0|e)},GameBoyAdvanceSaves.prototype.exportSave=function(){return this.currentChip.saves},GameBoyAdvanceSaves.prototype.exportSaveType=function(){return 0|this.saveType},GameBoyAdvanceSaves.prototype.readGPIO8=function(e){e|=0;return 0|((0|this.GPIOChip.getType())>0?0|this.GPIOChip.read8(0|e):0|this.cartridge.readROMOnly8(0|e))},GameBoyAdvanceSaves.prototype.readEEPROM8=function(e){e|=0;return 0|(3==(0|this.saveType)?0|this.EEPROMChip.read8():0|this.UNDETERMINED.readEEPROM8(0|e))},GameBoyAdvanceSaves.prototype.readGPIO16=function(e){e|=0;return 0|((0|this.GPIOChip.getType())>0?0|this.GPIOChip.read16(0|e):0|this.cartridge.readROMOnly16(0|e))},GameBoyAdvanceSaves.prototype.readEEPROM16=function(e){e|=0;return 0|(3==(0|this.saveType)?0|this.EEPROMChip.read16():0|this.UNDETERMINED.readEEPROM16(0|e))},GameBoyAdvanceSaves.prototype.readGPIO32=function(e){e|=0;return 0|((0|this.GPIOChip.getType())>0?0|this.GPIOChip.read32(0|e):0|this.cartridge.readROMOnly32(0|e))},GameBoyAdvanceSaves.prototype.readEEPROM32=function(e){e|=0;return 0|(3==(0|this.saveType)?0|this.EEPROMChip.read32():0|this.UNDETERMINED.readEEPROM32(0|e))},GameBoyAdvanceSaves.prototype.readSRAM=function(e){e|=0;var t=0;switch(0|this.saveType){case 0:t=0|this.UNDETERMINED.readSRAM(0|e);break;case 1:t=0|this.SRAMChip.read(0|e);break;case 2:t=0|this.FLASHChip.read(0|e)}return 0|t},GameBoyAdvanceSaves.prototype.writeGPIO8=function(e,t){e|=0,t|=0,(0|this.GPIOChip.getType())>0?this.GPIOChip.write8(0|e,0|t):this.UNDETERMINED.writeGPIO8(0|e,0|t)},GameBoyAdvanceSaves.prototype.writeGPIO16=function(e,t){e|=0,t|=0,(0|this.GPIOChip.getType())>0?this.GPIOChip.write16(0|e,0|t):this.UNDETERMINED.writeGPIO16(0|e,0|t)},GameBoyAdvanceSaves.prototype.writeEEPROM16=function(e,t){e|=0,t|=0,3==(0|this.saveType)?this.EEPROMChip.write16(0|t):this.UNDETERMINED.writeEEPROM16(0|e,0|t)},GameBoyAdvanceSaves.prototype.writeGPIO32=function(e,t){e|=0,t|=0,(0|this.GPIOChip.getType())>0?this.GPIOChip.write32(0|e,0|t):this.UNDETERMINED.writeGPIO32(0|e,0|t)},GameBoyAdvanceSaves.prototype.writeSRAM=function(e,t){switch(e|=0,t|=0,0|this.saveType){case 0:this.UNDETERMINED.writeSRAM(0|e,0|t);break;case 1:this.SRAMChip.write(0|e,0|t);break;case 2:this.FLASHChip.write(0|e,0|t)}},GameBoyAdvanceSaves.prototype.writeSRAMIfDefined=function(e,t){switch(e|=0,t|=0,0|this.saveType){case 0:this.SRAMChip.initialize();case 1:this.SRAMChip.write(0|e,0|t);break;case 2:this.FLASHChip.write(0|e,0|t)}},GameBoyAdvanceFIFO.prototype.push=function(e){e|=0;var t=(0|this.position)+(0|this.count)|0;this.buffer[31&t]=e<<24>>24,(0|this.count)<32&&(this.count=1+(0|this.count)|0)},GameBoyAdvanceFIFO.prototype.push8=function(e){e|=0,this.push(0|e),this.push(0|e),this.push(0|e),this.push(0|e)},GameBoyAdvanceFIFO.prototype.push16=function(e){e|=0,this.push(0|e),this.push(e>>8),this.push(0|e),this.push(e>>8)},GameBoyAdvanceFIFO.prototype.push32=function(e){e|=0,this.push(0|e),this.push(e>>8),this.push(e>>16),this.push(e>>24)},GameBoyAdvanceFIFO.prototype.shift=function(){var e=0;return(0|this.count)>0&&(this.count=(0|this.count)-1|0,e=this.buffer[31&this.position]<<3,this.position=1+(0|this.position)&31),0|e},GameBoyAdvanceFIFO.prototype.requestingDMA=function(){return(0|this.count)<=16},GameBoyAdvanceFIFO.prototype.samplesUntilDMATrigger=function(){return(0|this.count)-16|0},GameBoyAdvanceFIFO.prototype.clear=function(){this.count=0},GameBoyAdvanceChannel1Synth.prototype.disabled=function(){this.nr10=0,this.SweepFault=!1,this.lastTimeSweep=0,this.timeSweep=0,this.frequencySweepDivider=0,this.decreaseSweep=!1,this.nr11=0,this.CachedDuty=4026531840,this.totalLength=64,this.nr12=0,this.envelopeVolume=0,this.frequency=0,this.FrequencyTracker=32768,this.nr14=0,this.consecutive=!0,this.ShadowFrequency=32768,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0},GameBoyAdvanceChannel1Synth.prototype.clockAudioLength=function(){(0|this.totalLength)>1?this.totalLength=(0|this.totalLength)-1|0:1==(0|this.totalLength)&&(this.totalLength=0,this.enableCheck(),this.sound.unsetNR52(254))},GameBoyAdvanceChannel1Synth.prototype.enableCheck=function(){(this.consecutive||(0|this.totalLength)>0)&&!this.SweepFault&&this.canPlay?this.Enabled=15:this.Enabled=0},GameBoyAdvanceChannel1Synth.prototype.volumeEnableCheck=function(){this.canPlay=(0|this.nr12)>7,this.enableCheck()},GameBoyAdvanceChannel1Synth.prototype.outputLevelCache=function(){var e=this.CachedDuty>>(0|this.DutyTracker),t=this.envelopeVolume&this.Enabled&e;this.currentSampleLeft=this.leftEnable&t,this.currentSampleRight=this.rightEnable&t},GameBoyAdvanceChannel1Synth.prototype.setChannelOutputEnable=function(e){e|=0,this.rightEnable=e<<31>>31,this.leftEnable=e<<27>>31},GameBoyAdvanceChannel1Synth.prototype.clockAudioSweep=function(){!this.SweepFault&&(0|this.timeSweep)>0&&(this.timeSweep=(0|this.timeSweep)-1|0,0==(0|this.timeSweep)&&this.runAudioSweep())},GameBoyAdvanceChannel1Synth.prototype.runAudioSweep=function(){(0|this.lastTimeSweep)>0&&((0|this.frequencySweepDivider)>0?(this.Swept=!0,this.decreaseSweep?(this.ShadowFrequency=(0|this.ShadowFrequency)-(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0,this.frequency=2047&this.ShadowFrequency,this.FrequencyTracker=2048-(0|this.frequency)<<4):(this.ShadowFrequency=(0|this.ShadowFrequency)+(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0,this.frequency=0|this.ShadowFrequency,(0|this.ShadowFrequency)<=2047?(this.FrequencyTracker=2048-(0|this.frequency)<<4,((0|this.ShadowFrequency)+(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0)>2047&&(this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254))):(this.frequency&=2047,this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254))),this.timeSweep=0|this.lastTimeSweep):(this.SweepFault=!0,this.enableCheck()))},GameBoyAdvanceChannel1Synth.prototype.audioSweepPerformDummy=function(){if((0|this.frequencySweepDivider)>0&&!this.decreaseSweep){var e=(0|this.ShadowFrequency)+(this.ShadowFrequency>>(0|this.frequencySweepDivider))|0;(0|e)<=2047?((0|e)+(e>>(0|this.frequencySweepDivider))|0)>2047&&(this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254)):(this.SweepFault=!0,this.enableCheck(),this.sound.unsetNR52(254))}},GameBoyAdvanceChannel1Synth.prototype.clockAudioEnvelope=function(){(0|this.envelopeSweepsLast)>-1&&((0|this.envelopeSweeps)>0?this.envelopeSweeps=(0|this.envelopeSweeps)-1|0:this.envelopeType?(0|this.envelopeVolume)<15?(this.envelopeVolume=1+(0|this.envelopeVolume)|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1:(0|this.envelopeVolume)>0?(this.envelopeVolume=(0|this.envelopeVolume)-1|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1)},GameBoyAdvanceChannel1Synth.prototype.computeAudioChannel=function(){0==(0|this.FrequencyCounter)&&(this.FrequencyCounter=0|this.FrequencyTracker,this.DutyTracker=4+(0|this.DutyTracker)&28)},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNT8_0=function(){return 0|this.nr10},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT8_0=function(e){e|=0,this.decreaseSweep&&0==(8&e)&&this.Swept&&(this.SweepFault=!0),this.lastTimeSweep=(112&e)>>4,this.frequencySweepDivider=7&e,this.decreaseSweep=0!=(8&e),this.nr10=255&e,this.enableCheck()},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNT8_2=function(){return 0|this.nr11},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT8_2=function(e){switch((e|=0)>>6&3){case 0:this.CachedDuty=4026531840;break;case 1:this.CachedDuty=4026531855;break;case 2:this.CachedDuty=4293918735;break;default:this.CachedDuty=268435440}this.totalLength=64-(63&e)|0,this.nr11=255&e,this.enableCheck()},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNT8_3=function(){return 0|this.nr12},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT8_3=function(e){e|=0,this.envelopeType=0!=(8&e),this.nr12=255&e,this.volumeEnableCheck()},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT_X0=function(e){e|=0,this.frequency=1792&this.frequency|255&e,this.FrequencyTracker=2048-(0|this.frequency)<<4},GameBoyAdvanceChannel1Synth.prototype.readSOUND1CNTX8=function(){return 0|this.nr14},GameBoyAdvanceChannel1Synth.prototype.writeSOUND1CNT_X1=function(e){e|=0,this.consecutive=0==(64&e),this.frequency=(7&e)<<8|255&this.frequency,this.FrequencyTracker=2048-(0|this.frequency)<<4,0!=(128&e)&&(this.timeSweep=0|this.lastTimeSweep,this.Swept=!1,this.envelopeVolume=this.nr12>>4,this.envelopeSweepsLast=(7&this.nr12)-1|0,0==(0|this.totalLength)&&(this.totalLength=64),(0|this.lastTimeSweep)>0||(0|this.frequencySweepDivider)>0?this.sound.setNR52(1):this.sound.unsetNR52(254),0!=(64&e)&&this.sound.setNR52(1),this.ShadowFrequency=0|this.frequency,this.SweepFault=!1,this.audioSweepPerformDummy()),this.enableCheck(),this.nr14=255&e},GameBoyAdvanceChannel2Synth.prototype.disabled=function(){this.nr21=0,this.CachedDuty=4026531840,this.totalLength=64,this.nr22=0,this.envelopeVolume=0,this.nr23=0,this.frequency=0,this.FrequencyTracker=32768,this.nr24=0,this.consecutive=!0,this.canPlay=!1,this.Enabled=0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.FrequencyCounter=0,this.DutyTracker=0},GameBoyAdvanceChannel2Synth.prototype.clockAudioLength=function(){(0|this.totalLength)>1?this.totalLength=(0|this.totalLength)-1|0:1==(0|this.totalLength)&&(this.totalLength=0,this.enableCheck(),this.sound.unsetNR52(253))},GameBoyAdvanceChannel2Synth.prototype.clockAudioEnvelope=function(){(0|this.envelopeSweepsLast)>-1&&((0|this.envelopeSweeps)>0?this.envelopeSweeps=(0|this.envelopeSweeps)-1|0:this.envelopeType?(0|this.envelopeVolume)<15?(this.envelopeVolume=1+(0|this.envelopeVolume)|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1:(0|this.envelopeVolume)>0?(this.envelopeVolume=(0|this.envelopeVolume)-1|0,this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1)},GameBoyAdvanceChannel2Synth.prototype.computeAudioChannel=function(){0==(0|this.FrequencyCounter)&&(this.FrequencyCounter=0|this.FrequencyTracker,this.DutyTracker=4+(0|this.DutyTracker)&28)},GameBoyAdvanceChannel2Synth.prototype.enableCheck=function(){(this.consecutive||(0|this.totalLength)>0)&&this.canPlay?this.Enabled=15:this.Enabled=0},GameBoyAdvanceChannel2Synth.prototype.volumeEnableCheck=function(){this.canPlay=(0|this.nr22)>7,this.enableCheck()},GameBoyAdvanceChannel2Synth.prototype.outputLevelCache=function(){var e=this.CachedDuty>>(0|this.DutyTracker),t=this.envelopeVolume&this.Enabled&e;this.currentSampleLeft=this.leftEnable&t,this.currentSampleRight=this.rightEnable&t},GameBoyAdvanceChannel2Synth.prototype.setChannelOutputEnable=function(e){e|=0,this.rightEnable=e<<30>>31,this.leftEnable=e<<26>>31},GameBoyAdvanceChannel2Synth.prototype.readSOUND2CNT_L0=function(){return 0|this.nr21},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_L0=function(e){switch((e|=0)>>6&3){case 0:this.CachedDuty=4026531840;break;case 1:this.CachedDuty=4026531855;break;case 2:this.CachedDuty=4293918735;break;default:this.CachedDuty=268435440}this.totalLength=64-(63&e)|0,this.nr21=255&e,this.enableCheck()},GameBoyAdvanceChannel2Synth.prototype.readSOUND2CNT_L1=function(){return 0|this.nr22},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_L1=function(e){e|=0,this.envelopeType=0!=(8&e),this.nr22=255&e,this.volumeEnableCheck()},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_H0=function(e){e|=0,this.frequency=1792&this.frequency|255&e,this.FrequencyTracker=2048-(0|this.frequency)<<4},GameBoyAdvanceChannel2Synth.prototype.readSOUND2CNT_H=function(){return 0|this.nr24},GameBoyAdvanceChannel2Synth.prototype.writeSOUND2CNT_H1=function(e){0!=(128&(e|=0))&&(this.envelopeVolume=this.nr22>>4,this.envelopeSweepsLast=(7&this.nr22)-1|0,0==(0|this.totalLength)&&(this.totalLength=64),0!=(64&e)&&this.sound.setNR52(2)),this.consecutive=0==(64&e),this.frequency=(7&e)<<8|255&this.frequency,this.FrequencyTracker=2048-(0|this.frequency)<<4,this.nr24=255&e,this.enableCheck()},GameBoyAdvanceChannel3Synth.prototype.disabled=function(){this.nr30=0,this.lastSampleLookup=0,this.canPlay=!1,this.WAVERAMBankSpecified=0,this.WAVERAMBankAccessed=32,this.WaveRAMBankSize=31,this.totalLength=256,this.nr32=0,this.patternType=4,this.nr33=0,this.frequency=0,this.FrequencyPeriod=16384,this.nr34=0,this.consecutive=!0,this.Enabled=0,this.counter=0},"function"==typeof Math.imul?GameBoyAdvanceChannel3Synth.prototype.updateCache=function(){3!=(0|this.patternType)?this.cachedSample=this.PCM[0|this.lastSampleLookup]>>(0|this.patternType):this.cachedSample=Math.imul(0|this.PCM[0|this.lastSampleLookup],3)>>2,this.outputLevelCache()}:GameBoyAdvanceChannel3Synth.prototype.updateCache=function(){3!=(0|this.patternType)?this.cachedSample=this.PCM[0|this.lastSampleLookup]>>(0|this.patternType):this.cachedSample=.75*this.PCM[0|this.lastSampleLookup]|0,this.outputLevelCache()},GameBoyAdvanceChannel3Synth.prototype.outputLevelCache=function(){var e=this.cachedSample&this.Enabled;this.currentSampleLeft=this.leftEnable&e,this.currentSampleRight=this.rightEnable&e},GameBoyAdvanceChannel3Synth.prototype.setChannelOutputEnable=function(e){e|=0,this.rightEnable=e<<29>>31,this.leftEnable=e<<25>>31},GameBoyAdvanceChannel3Synth.prototype.readWAVE8=function(e){return e=(0|e)+(this.WAVERAMBankAccessed>>1)|0,0|this.WAVERAM8[0|e]},__LITTLE_ENDIAN__?(GameBoyAdvanceChannel3Synth.prototype.writeWAVE8=function(e,t){t|=0,e=(0|(e|=0))+(this.WAVERAMBankAccessed>>1)|0,this.WAVERAM8[0|e]=255&t;var i=t>>4&15;i|=(15&t)<<8,this.PCM16[0|e]=0|i},GameBoyAdvanceChannel3Synth.prototype.writeWAVE16=function(e,t){t|=0,e=(0|(e|=0))+(this.WAVERAMBankAccessed>>2)|0,this.WAVERAM16[0|e]=65535&t;var i=t>>4&15;i|=(15&t)<<8,i|=(61440&t)<<4,i|=(3840&t)<<16,this.PCM32[0|e]=0|i},GameBoyAdvanceChannel3Synth.prototype.writeWAVE32=function(e,t){t|=0,e=(0|(e|=0))+(this.WAVERAMBankAccessed>>3)|0,this.WAVERAM32[0|e]=0|t;var i=t>>4&15;i|=(15&t)<<8,i|=(61440&t)<<4,i|=(3840&t)<<16,e<<=1,this.PCM32[0|e]=0|i,i=t>>20&15,i|=t>>8&3840,i|=t>>12&983040,i|=251658240&t,this.PCM32[1|e]=0|i},GameBoyAdvanceChannel3Synth.prototype.readWAVE16=function(e){return e=(0|e)+(this.WAVERAMBankAccessed>>2)|0,0|this.WAVERAM16[0|e]},GameBoyAdvanceChannel3Synth.prototype.readWAVE32=function(e){return e=(0|e)+(this.WAVERAMBankAccessed>>3)|0,0|this.WAVERAM32[0|e]}):(GameBoyAdvanceChannel3Synth.prototype.writeWAVE8=function(e,t){e+=this.WAVERAMBankAccessed>>1,this.WAVERAM8[e]=255&t,e<<=1,this.PCM[e]=t>>4&15,this.PCM[1|e]=15&t},GameBoyAdvanceChannel3Synth.prototype.writeWAVE16=function(e,t){e+=this.WAVERAMBankAccessed>>2,e<<=1,this.WAVERAM8[e]=255&t,this.WAVERAM8[1|e]=t>>8&255,e<<=1,this.PCM[e]=t>>4&15,this.PCM[1|e]=15&t,this.PCM[2|e]=t>>12&15,this.PCM[3|e]=t>>8&15},GameBoyAdvanceChannel3Synth.prototype.writeWAVE32=function(e,t){e+=this.WAVERAMBankAccessed>>3,e<<=2,this.WAVERAM8[e]=255&t,this.WAVERAM8[1|e]=t>>8&255,this.WAVERAM8[2|e]=t>>16&255,this.WAVERAM8[3|e]=t>>>24,e<<=1,this.PCM[e]=t>>4&15,this.PCM[1|e]=15&t,this.PCM[2|e]=t>>12&15,this.PCM[3|e]=t>>8&15,this.PCM[4|e]=t>>20&15,this.PCM[5|e]=t>>16&15,this.PCM[6|e]=t>>>28,this.PCM[7|e]=t>>24&15},GameBoyAdvanceChannel3Synth.prototype.readWAVE16=function(e){return e+=this.WAVERAMBankAccessed>>1,this.WAVERAM8[e]|this.WAVERAM8[1|e]<<8},GameBoyAdvanceChannel3Synth.prototype.readWAVE32=function(e){return e+=this.WAVERAMBankAccessed>>1,this.WAVERAM8[e]|this.WAVERAM8[1|e]<<8|this.WAVERAM8[2|e]<<16|this.WAVERAM8[3|e]<<24}),GameBoyAdvanceChannel3Synth.prototype.enableCheck=function(){this.consecutive||(0|this.totalLength)>0?this.Enabled=15:this.Enabled=0},GameBoyAdvanceChannel3Synth.prototype.clockAudioLength=function(){(0|this.totalLength)>1?this.totalLength=(0|this.totalLength)-1|0:1==(0|this.totalLength)&&(this.totalLength=0,this.enableCheck(),this.sound.unsetNR52(251))},GameBoyAdvanceChannel3Synth.prototype.computeAudioChannel=function(){0==(0|this.counter)&&(this.canPlay&&(this.lastSampleLookup=1+(0|this.lastSampleLookup)&this.WaveRAMBankSize|this.WAVERAMBankSpecified),this.counter=0|this.FrequencyPeriod)},GameBoyAdvanceChannel3Synth.prototype.readSOUND3CNT_L=function(){return 0|this.nr30},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_L=function(e){e|=0,this.canPlay||0==(128&e)||(this.lastSampleLookup=0),this.canPlay=0!=(128&e),this.WaveRAMBankSize=32&e|31,this.WAVERAMBankSpecified=(64&e)>>1^32&e,this.WAVERAMBankAccessed=(64&e)>>1^32,this.canPlay&&0!=(128&this.nr30)&&!this.consecutive&&this.sound.setNR52(4),this.nr30=255&e},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_H0=function(e){e|=0,this.totalLength=256-(255&e)|0,this.enableCheck()},GameBoyAdvanceChannel3Synth.prototype.readSOUND3CNT_H=function(){return 0|this.nr32},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_H1=function(e){switch(e|=0,(e&=255)>>5){case 0:this.patternType=4;break;case 1:this.patternType=0;break;case 2:this.patternType=1;break;case 3:this.patternType=2;break;default:this.patternType=3}this.nr32=0|e},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_X0=function(e){e|=0,this.frequency=1792&this.frequency|255&e,this.FrequencyPeriod=2048-(0|this.frequency)<<3},GameBoyAdvanceChannel3Synth.prototype.readSOUND3CNT_X=function(){return 0|this.nr34},GameBoyAdvanceChannel3Synth.prototype.writeSOUND3CNT_X1=function(e){0!=(128&(e|=0))&&(0==(0|this.totalLength)&&(this.totalLength=256),this.lastSampleLookup=0,0!=(64&e)&&this.sound.setNR52(4)),this.consecutive=0==(64&e),this.frequency=(7&e)<<8|255&this.frequency,this.FrequencyPeriod=2048-(0|this.frequency)<<3,this.enableCheck(),this.nr34=255&e},GameBoyAdvanceChannel4Synth.prototype.intializeWhiteNoise=function(){var e=1;this.LSFR15Table=getInt8Array(524288);for(var t=32767,i=16383,r=0;r<32768;++r)e=1-(1&t),this.LSFR15Table[32768|r]=e,this.LSFR15Table[65536|r]=2*e,this.LSFR15Table[98304|r]=3*e,this.LSFR15Table[131072|r]=4*e,this.LSFR15Table[163840|r]=5*e,this.LSFR15Table[196608|r]=6*e,this.LSFR15Table[229376|r]=7*e,this.LSFR15Table[262144|r]=8*e,this.LSFR15Table[294912|r]=9*e,this.LSFR15Table[327680|r]=10*e,this.LSFR15Table[360448|r]=11*e,this.LSFR15Table[393216|r]=12*e,this.LSFR15Table[425984|r]=13*e,this.LSFR15Table[458752|r]=14*e,this.LSFR15Table[491520|r]=15*e,t=(i=t>>1)|(1&(i^t))<<14;for(this.LSFR7Table=getInt8Array(2048),t=127,r=0;r<128;++r)e=1-(1&t),this.LSFR7Table[128|r]=e,this.LSFR7Table[256|r]=2*e,this.LSFR7Table[384|r]=3*e,this.LSFR7Table[512|r]=4*e,this.LSFR7Table[640|r]=5*e,this.LSFR7Table[768|r]=6*e,this.LSFR7Table[896|r]=7*e,this.LSFR7Table[1024|r]=8*e,this.LSFR7Table[1152|r]=9*e,this.LSFR7Table[1280|r]=10*e,this.LSFR7Table[1408|r]=11*e,this.LSFR7Table[1536|r]=12*e,this.LSFR7Table[1664|r]=13*e,this.LSFR7Table[1792|r]=14*e,this.LSFR7Table[1920|r]=15*e,t=(i=t>>1)|(1&(i^t))<<6},GameBoyAdvanceChannel4Synth.prototype.disabled=function(){this.totalLength=64,this.nr42=0,this.envelopeVolume=0,this.nr43=0,this.FrequencyPeriod=32,this.lastSampleLookup=0,this.BitRange=32767,this.VolumeShifter=15,this.currentVolume=0,this.noiseSampleTable=this.LSFR15Table,this.nr44=0,this.consecutive=!0,this.envelopeSweeps=0,this.envelopeSweepsLast=-1,this.canPlay=!1,this.Enabled=0,this.counter=0},GameBoyAdvanceChannel4Synth.prototype.clockAudioLength=function(){(0|this.totalLength)>1?this.totalLength=(0|this.totalLength)-1|0:1==(0|this.totalLength)&&(this.totalLength=0,this.enableCheck(),this.sound.unsetNR52(247))},GameBoyAdvanceChannel4Synth.prototype.clockAudioEnvelope=function(){(0|this.envelopeSweepsLast)>-1&&((0|this.envelopeSweeps)>0?this.envelopeSweeps=(0|this.envelopeSweeps)-1|0:this.envelopeType?(0|this.envelopeVolume)<15?(this.envelopeVolume=1+(0|this.envelopeVolume)|0,this.currentVolume=(0|this.envelopeVolume)<<(0|this.VolumeShifter),this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1:(0|this.envelopeVolume)>0?(this.envelopeVolume=(0|this.envelopeVolume)-1|0,this.currentVolume=(0|this.envelopeVolume)<<(0|this.VolumeShifter),this.envelopeSweeps=0|this.envelopeSweepsLast):this.envelopeSweepsLast=-1)},GameBoyAdvanceChannel4Synth.prototype.computeAudioChannel=function(){0==(0|this.counter)&&(this.lastSampleLookup=1+(0|this.lastSampleLookup)&this.BitRange,this.counter=0|this.FrequencyPeriod)},GameBoyAdvanceChannel4Synth.prototype.enableCheck=function(){(this.consecutive||(0|this.totalLength)>0)&&this.canPlay?this.Enabled=15:this.Enabled=0},GameBoyAdvanceChannel4Synth.prototype.volumeEnableCheck=function(){this.canPlay=(0|this.nr42)>7,this.enableCheck()},GameBoyAdvanceChannel4Synth.prototype.outputLevelCache=function(){var e=this.cachedSample&this.Enabled;this.currentSampleLeft=this.leftEnable&e,this.currentSampleRight=this.rightEnable&e},GameBoyAdvanceChannel4Synth.prototype.setChannelOutputEnable=function(e){e|=0,this.rightEnable=e<<28>>31,this.leftEnable=e<<24>>31},GameBoyAdvanceChannel4Synth.prototype.updateCache=function(){this.cachedSample=0|this.noiseSampleTable[this.currentVolume|this.lastSampleLookup],this.outputLevelCache()},GameBoyAdvanceChannel4Synth.prototype.writeSOUND4CNT_L0=function(e){e|=0,this.totalLength=64-(63&e)|0,this.enableCheck()},GameBoyAdvanceChannel4Synth.prototype.writeSOUND4CNT_L1=function(e){e|=0,this.envelopeType=0!=(8&e),this.nr42=255&e,this.volumeEnableCheck()},GameBoyAdvanceChannel4Synth.prototype.readSOUND4CNT_L=function(){return 0|this.nr42},GameBoyAdvanceChannel4Synth.prototype.writeSOUND4CNT_H0=function(e){e|=0,this.FrequencyPeriod=Math.max((7&e)<<4,8)<<(2+(e>>4&15)|0);var t=8&e;(8==(0|t)&&32767==(0|this.BitRange)||0==(0|t)&&127==(0|this.BitRange))&&(this.lastSampleLookup=0,this.BitRange=8==(0|t)?127:32767,this.VolumeShifter=8==(0|t)?7:15,this.currentVolume=this.envelopeVolume<<(0|this.VolumeShifter),this.noiseSampleTable=8==(0|t)?this.LSFR7Table:this.LSFR15Table),this.nr43=255&e},GameBoyAdvanceChannel4Synth.prototype.readSOUND4CNT_H0=function(){return 0|this.nr43},GameBoyAdvanceChannel4Synth.prototype.writeSOUND4CNT_H1=function(e){e|=0,this.nr44=255&e,this.consecutive=0==(64&e),0!=(128&e)&&(this.envelopeVolume=this.nr42>>4,this.currentVolume=this.envelopeVolume<<(0|this.VolumeShifter),this.envelopeSweepsLast=(7&this.nr42)-1|0,0==(0|this.totalLength)&&(this.totalLength=64),0!=(64&e)&&this.sound.setNR52(8)),this.enableCheck()},GameBoyAdvanceChannel4Synth.prototype.readSOUND4CNT_H1=function(){return 0|this.nr44},ARMInstructionSet.prototype.initialize=function(){this.wait=this.CPUCore.wait,this.registers=this.CPUCore.registers,this.registersUSR=this.CPUCore.registersUSR,this.branchFlags=this.CPUCore.branchFlags,this.fetch=0,this.decode=0,this.execute=0,this.memory=this.CPUCore.memory},ARMInstructionSet.prototype.executeIteration=function(){this.fetch=0|this.memory.memoryReadCPU32(0|this.readPC()),this.executeConditionalCode(),this.execute=0|this.decode,this.decode=0|this.fetch},ARMInstructionSet.prototype.executeConditionalCode=function(){(this.execute<<3^this.branchFlags.checkConditionalCode(0|this.execute))>=0?this.executeDecoded():this.incrementProgramCounter()},ARMInstructionSet.prototype.executeBubble=function(){this.fetch=0|this.memory.memoryReadCPU32(0|this.readPC()),this.incrementProgramCounter(),this.execute=0|this.decode,this.decode=0|this.fetch},ARMInstructionSet.prototype.incrementProgramCounter=function(){this.registers[15]=4+(0|this.registers[15])|0},ARMInstructionSet.prototype.getLR=function(){return(0|this.readPC())-4|0},ARMInstructionSet.prototype.getIRQLR=function(){return 0|this.getLR()},ARMInstructionSet.prototype.getCurrentFetchValue=function(){return 0|this.fetch},ARMInstructionSet.prototype.getSWICode=function(){return this.execute>>16&255},"function"==typeof Math.imul?ARMInstructionSet.prototype.getPopCount=function(){var e=65535&this.execute;return e=(0|(e=(13107&(e=(0|e)-(e>>1&21845)|0))+(e>>2&13107)|0))+(e>>4)&3855|0,0|(e=Math.imul(0|e,16843009)>>24)}:ARMInstructionSet.prototype.getPopCount=function(){var e=65535&this.execute;return 0|(e=16843009*(e=(0|(e=(13107&(e=(0|e)-(e>>1&21845)|0))+(e>>2&13107)|0))+(e>>4)&3855|0)>>24)},ARMInstructionSet.prototype.getNegativeOffsetStartAddress=function(e){return 0|(e=(0|(e|=0))-(0|this.getPopCount()<<2)|0)},ARMInstructionSet.prototype.getPositiveOffsetStartAddress=function(e){return 0|(e=(0|(e|=0))+(0|this.getPopCount()<<2)|0)},ARMInstructionSet.prototype.writeRegister=function(e,t){e|=0,t|=0,this.registers[15&e]=0|t},ARMInstructionSet.prototype.writeUserRegister=function(e,t){e|=0,t|=0,this.registersUSR[7&e]=0|t},ARMInstructionSet.prototype.guardRegisterWrite=function(e,t){t|=0,(0|(e|=0))<15?this.writeRegister(0|e,0|t):this.CPUCore.branch(-4&t)},ARMInstructionSet.prototype.multiplyGuard12OffsetRegisterWrite=function(e){e|=0;var t=this.execute>>12&15;15!=(0|t)&&this.writeRegister(0|t,0|e)},ARMInstructionSet.prototype.multiplyGuard16OffsetRegisterWrite=function(e){e|=0;var t=this.execute>>16&15;this.incrementProgramCounter(),15!=(0|t)&&this.writeRegister(0|t,0|e)},ARMInstructionSet.prototype.performMUL32=function(){var e=0;return(this.execute>>16&15)!=(15&this.execute)&&(e=0|this.CPUCore.performMUL32(0|this.read0OffsetRegister(),0|this.read8OffsetRegister())),0|e},ARMInstructionSet.prototype.performMUL32MLA=function(){var e=0;return(this.execute>>16&15)!=(15&this.execute)&&(e=0|this.CPUCore.performMUL32MLA(0|this.read0OffsetRegister(),0|this.read8OffsetRegister())),0|e},ARMInstructionSet.prototype.guard12OffsetRegisterWrite=function(e){e|=0,this.incrementProgramCounter(),this.guard12OffsetRegisterWrite2(0|e)},ARMInstructionSet.prototype.guard12OffsetRegisterWrite2=function(e){e|=0,this.guardRegisterWrite(this.execute>>12&15,0|e)},ARMInstructionSet.prototype.guard16OffsetRegisterWrite=function(e){e|=0,this.guardRegisterWrite(this.execute>>16&15,0|e)},ARMInstructionSet.prototype.guard16OffsetUserRegisterWrite=function(e){e|=0;var t=this.execute>>16&15;(0|t)<15?this.guardUserRegisterWrite(0|t,0|e):this.CPUCore.branch(-4&e)},ARMInstructionSet.prototype.guardProgramCounterRegisterWriteCPSR=function(e){e|=0,e&=-4>>(this.CPUCore.SPSRtoCPSR()>>5),this.CPUCore.branch(0|e)},ARMInstructionSet.prototype.guardRegisterWriteCPSR=function(e,t){t|=0,(0|(e|=0))<15?this.writeRegister(0|e,0|t):this.guardProgramCounterRegisterWriteCPSR(0|t)},ARMInstructionSet.prototype.guard12OffsetRegisterWriteCPSR=function(e){e|=0,this.incrementProgramCounter(),this.guard12OffsetRegisterWriteCPSR2(0|e)},ARMInstructionSet.prototype.guard12OffsetRegisterWriteCPSR2=function(e){e|=0,this.guardRegisterWriteCPSR(this.execute>>12&15,0|e)},ARMInstructionSet.prototype.guard16OffsetRegisterWriteCPSR=function(e){e|=0,this.guardRegisterWriteCPSR(this.execute>>16&15,0|e)},ARMInstructionSet.prototype.guardUserRegisterWrite=function(e,t){switch(e|=0,t|=0,31&this.CPUCore.modeFlags){case 16:case 31:this.writeRegister(0|e,0|t);break;case 17:(0|e)<8?this.writeRegister(0|e,0|t):this.writeUserRegister(0|e,0|t);break;default:(0|e)<13?this.writeRegister(0|e,0|t):this.writeUserRegister(0|e,0|t)}},ARMInstructionSet.prototype.guardRegisterWriteLDM=function(e,t){e|=0,t|=0,this.guardRegisterWrite(0|e,0|t)},ARMInstructionSet.prototype.guardUserRegisterWriteLDM=function(e,t){t|=0,(0|(e|=0))<15?0!=(32768&this.execute)?this.writeRegister(0|e,0|t):this.guardUserRegisterWrite(0|e,0|t):this.guardProgramCounterRegisterWriteCPSR(0|t)},ARMInstructionSet.prototype.readPC=function(){return 0|this.registers[15]},ARMInstructionSet.prototype.readRegister=function(e){return e|=0,0|this.registers[15&e]},ARMInstructionSet.prototype.readUserRegister=function(e){return 0|((0|(e|=0))<15?0|this.registersUSR[7&e]:0|this.readPC())},ARMInstructionSet.prototype.read0OffsetRegister=function(){return 0|this.readRegister(0|this.execute)},ARMInstructionSet.prototype.read8OffsetRegister=function(){return 0|this.readRegister(this.execute>>8)},ARMInstructionSet.prototype.read12OffsetRegister=function(){return 0|this.readRegister(this.execute>>12)},ARMInstructionSet.prototype.read16OffsetRegister=function(){return 0|this.readRegister(this.execute>>16)},ARMInstructionSet.prototype.read16OffsetUserRegister=function(){return 0|this.guardUserRegisterRead(this.execute>>16)},ARMInstructionSet.prototype.guard12OffsetRegisterRead=function(){return this.incrementProgramCounter(),0|this.readRegister(this.execute>>12&15)},ARMInstructionSet.prototype.guardUserRegisterRead=function(e){e|=0;var t=0;switch(31&this.CPUCore.modeFlags){case 16:case 31:t=0|this.readRegister(0|e);break;case 17:t=(0|e)<8?0|this.readRegister(0|e):0|this.readUserRegister(0|e);break;default:t=(0|e)<13?0|this.readRegister(0|e):0|this.readUserRegister(0|e)}return 0|t},ARMInstructionSet.prototype.BX=function(){var e=0|this.read0OffsetRegister();0==(1&e)?this.CPUCore.branch(-4&e):(this.CPUCore.enterTHUMB(),this.CPUCore.branch(-2&e))},ARMInstructionSet.prototype.B=function(){this.CPUCore.branch((0|this.readPC())+(this.execute<<8>>6)|0)},ARMInstructionSet.prototype.BL=function(){this.writeRegister(14,0|this.getLR()),this.B()},ARMInstructionSet.prototype.AND=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWrite(e&t)},ARMInstructionSet.prototype.AND2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWrite2(e&t)},ARMInstructionSet.prototype.ANDS=function(){var e=(0|this.read16OffsetRegister())&(0|this.operand2OP_DataProcessing2());this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR(0|e)},ARMInstructionSet.prototype.ANDS2=function(){this.incrementProgramCounter();var e=(0|this.read16OffsetRegister())&(0|this.operand2OP_DataProcessing4());this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR2(0|e)},ARMInstructionSet.prototype.EOR=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWrite(e^t)},ARMInstructionSet.prototype.EOR2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWrite2(e^t)},ARMInstructionSet.prototype.EORS=function(){var e=(0|this.read16OffsetRegister())^(0|this.operand2OP_DataProcessing2());this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR(0|e)},ARMInstructionSet.prototype.EORS2=function(){this.incrementProgramCounter();var e=(0|this.read16OffsetRegister())^(0|this.operand2OP_DataProcessing4());this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR2(0|e)},ARMInstructionSet.prototype.SUB=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWrite((0|e)-(0|t)|0)},ARMInstructionSet.prototype.SUB2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWrite2((0|e)-(0|t)|0)},ARMInstructionSet.prototype.SUBS=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWriteCPSR(0|this.branchFlags.setSUBFlags(0|e,0|t))},ARMInstructionSet.prototype.SUBS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWriteCPSR2(0|this.branchFlags.setSUBFlags(0|e,0|t))},ARMInstructionSet.prototype.RSB=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWrite((0|t)-(0|e)|0)},ARMInstructionSet.prototype.RSB2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWrite2((0|t)-(0|e)|0)},ARMInstructionSet.prototype.RSBS=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWriteCPSR(0|this.branchFlags.setSUBFlags(0|t,0|e))},ARMInstructionSet.prototype.RSBS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWriteCPSR2(0|this.branchFlags.setSUBFlags(0|t,0|e))},ARMInstructionSet.prototype.ADD=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWrite((0|e)+(0|t)|0)},ARMInstructionSet.prototype.ADD2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWrite2((0|e)+(0|t)|0)},ARMInstructionSet.prototype.ADDS=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWriteCPSR(0|this.branchFlags.setADDFlags(0|e,0|t))},ARMInstructionSet.prototype.ADDS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWriteCPSR2(0|this.branchFlags.setADDFlags(0|e,0|t))},ARMInstructionSet.prototype.ADC=function(){var e=0|this.read16OffsetRegister();e=(0|(e=(0|e)+(0|(0|this.operand2OP_DataProcessing1()))|0))+(this.branchFlags.getCarry()>>>31)|0,this.guard12OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.ADC2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister();e=(0|(e=(0|e)+(0|(0|this.operand2OP_DataProcessing3()))|0))+(this.branchFlags.getCarry()>>>31)|0,this.guard12OffsetRegisterWrite2(0|e)},ARMInstructionSet.prototype.ADCS=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWriteCPSR(0|this.branchFlags.setADCFlags(0|e,0|t))},ARMInstructionSet.prototype.ADCS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWriteCPSR2(0|this.branchFlags.setADCFlags(0|e,0|t))},ARMInstructionSet.prototype.SBC=function(){var e=0|this.read16OffsetRegister();e=(0|(e=(0|e)-(0|(0|this.operand2OP_DataProcessing1()))|0))-(this.branchFlags.getCarryReverse()>>>31)|0,this.guard12OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.SBC2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister();e=(0|(e=(0|e)-(0|(0|this.operand2OP_DataProcessing3()))|0))-(this.branchFlags.getCarryReverse()>>>31)|0,this.guard12OffsetRegisterWrite2(0|e)},ARMInstructionSet.prototype.SBCS=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWriteCPSR(0|this.branchFlags.setSBCFlags(0|e,0|t))},ARMInstructionSet.prototype.SBCS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWriteCPSR2(0|this.branchFlags.setSBCFlags(0|e,0|t))},ARMInstructionSet.prototype.RSC=function(){var e=0|this.read16OffsetRegister();e=(0|(e=(0|(0|this.operand2OP_DataProcessing1()))-(0|e)|0))-(this.branchFlags.getCarryReverse()>>>31)|0,this.guard12OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.RSC2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister();e=(0|(e=(0|(0|this.operand2OP_DataProcessing3()))-(0|e)|0))-(this.branchFlags.getCarryReverse()>>>31)|0,this.guard12OffsetRegisterWrite2(0|e)},ARMInstructionSet.prototype.RSCS=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWriteCPSR(0|this.branchFlags.setSBCFlags(0|t,0|e))},ARMInstructionSet.prototype.RSCS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWriteCPSR2(0|this.branchFlags.setSBCFlags(0|t,0|e))},ARMInstructionSet.prototype.TSTS=function(){var e=(0|this.read16OffsetRegister())&(0|this.operand2OP_DataProcessing2());this.branchFlags.setNZInt(0|e),this.incrementProgramCounter()},ARMInstructionSet.prototype.TSTS2=function(){this.incrementProgramCounter();var e=(0|this.read16OffsetRegister())&(0|this.operand2OP_DataProcessing4());this.branchFlags.setNZInt(0|e)},ARMInstructionSet.prototype.TEQS=function(){var e=(0|this.read16OffsetRegister())^(0|this.operand2OP_DataProcessing2());this.branchFlags.setNZInt(0|e),this.incrementProgramCounter()},ARMInstructionSet.prototype.TEQS2=function(){this.incrementProgramCounter();var e=(0|this.read16OffsetRegister())^(0|this.operand2OP_DataProcessing4());this.branchFlags.setNZInt(0|e)},ARMInstructionSet.prototype.CMPS=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.branchFlags.setCMPFlags(0|e,0|t),this.incrementProgramCounter()},ARMInstructionSet.prototype.CMPS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.branchFlags.setCMPFlags(0|e,0|t)},ARMInstructionSet.prototype.CMNS=function(){var e=0|this.read16OffsetRegister(),t=this.operand2OP_DataProcessing1();this.branchFlags.setCMNFlags(0|e,0|t),this.incrementProgramCounter()},ARMInstructionSet.prototype.CMNS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=this.operand2OP_DataProcessing3();this.branchFlags.setCMNFlags(0|e,0|t)},ARMInstructionSet.prototype.ORR=function(){var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWrite(e|t)},ARMInstructionSet.prototype.ORR2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=0|this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWrite2(e|t)},ARMInstructionSet.prototype.ORRS=function(){var e=0|this.read16OffsetRegister()|(0|this.operand2OP_DataProcessing2());this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR(0|e)},ARMInstructionSet.prototype.ORRS2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister()|(0|this.operand2OP_DataProcessing4());this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR2(0|e)},ARMInstructionSet.prototype.MOV=function(){this.guard12OffsetRegisterWrite(0|this.operand2OP_DataProcessing1())},ARMInstructionSet.prototype.MOV2=function(){this.incrementProgramCounter(),this.guard12OffsetRegisterWrite2(0|this.operand2OP_DataProcessing3())},ARMInstructionSet.prototype.MOVS=function(){var e=0|this.operand2OP_DataProcessing2();this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR(0|e)},ARMInstructionSet.prototype.MOVS2=function(){this.incrementProgramCounter();var e=0|this.operand2OP_DataProcessing4();this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR2(0|e)},ARMInstructionSet.prototype.BIC=function(){var e=0|this.read16OffsetRegister(),t=~this.operand2OP_DataProcessing1();this.guard12OffsetRegisterWrite(e&t)},ARMInstructionSet.prototype.BIC2=function(){this.incrementProgramCounter();var e=0|this.read16OffsetRegister(),t=~this.operand2OP_DataProcessing3();this.guard12OffsetRegisterWrite2(e&t)},ARMInstructionSet.prototype.BICS=function(){var e=(0|this.read16OffsetRegister())&~this.operand2OP_DataProcessing2();this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR(0|e)},ARMInstructionSet.prototype.BICS2=function(){this.incrementProgramCounter();var e=(0|this.read16OffsetRegister())&~this.operand2OP_DataProcessing4();this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR2(0|e)},ARMInstructionSet.prototype.MVN=function(){this.guard12OffsetRegisterWrite(~this.operand2OP_DataProcessing1())},ARMInstructionSet.prototype.MVN2=function(){this.incrementProgramCounter(),this.guard12OffsetRegisterWrite2(~this.operand2OP_DataProcessing3())},ARMInstructionSet.prototype.MVNS=function(){var e=~this.operand2OP_DataProcessing2();this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR(0|e)},ARMInstructionSet.prototype.MVNS2=function(){this.incrementProgramCounter();var e=~this.operand2OP_DataProcessing4();this.branchFlags.setNZInt(0|e),this.guard12OffsetRegisterWriteCPSR2(0|e)},ARMInstructionSet.prototype.MRS=function(){var e=0;e=0==(4194304&this.execute)?0|this.rc():0|this.rs(),this.guard12OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.MSR=function(){switch(37748736&this.execute){case 0:this.MSR1();break;case 4194304:this.MSR2();break;case 33554432:this.MSR3();break;default:this.MSR4()}this.incrementProgramCounter()},ARMInstructionSet.prototype.MSR1=function(){var e=0|this.read0OffsetRegister();this.branchFlags.setNZCV(0|e),0!=(65536&this.execute)&&16!=(31&this.CPUCore.modeFlags)&&(this.CPUCore.switchRegisterBank(31&e),this.CPUCore.modeFlags=223&e,this.CPUCore.assertIRQ())},ARMInstructionSet.prototype.MSR2=function(){var e=0|this.read0OffsetRegister(),t=1;switch(31&this.CPUCore.modeFlags){case 18:break;case 19:t=2;break;case 17:t=0;break;case 23:t=3;break;case 27:t=4;break;default:return}var i=e>>20&3840;0!=(65536&this.execute)?i|=255&e:i|=255&this.CPUCore.SPSR[0|t],this.CPUCore.SPSR[0|t]=0|i},ARMInstructionSet.prototype.MSR3=function(){var e=0|this.imm();this.branchFlags.setNZCV(0|e)},ARMInstructionSet.prototype.MSR4=function(){var e=this.imm()>>20,t=1;switch(31&this.CPUCore.modeFlags){case 18:break;case 19:t=2;break;case 17:t=0;break;case 23:t=3;break;case 27:t=4;break;default:return}var i=255&this.CPUCore.SPSR[0|t];this.CPUCore.SPSR[0|t]=i|3840&e},ARMInstructionSet.prototype.MUL=function(){var e=0|this.performMUL32();this.multiplyGuard16OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.MULS=function(){var e=0|this.performMUL32();this.branchFlags.setCarryFalse(),this.branchFlags.setNZInt(0|e),this.multiplyGuard16OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.MLA=function(){var e=0|this.performMUL32MLA();e=(0|e)+(0|this.read12OffsetRegister())|0,this.multiplyGuard16OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.MLAS=function(){var e=0|this.performMUL32MLA();e=(0|e)+(0|this.read12OffsetRegister())|0,this.branchFlags.setCarryFalse(),this.branchFlags.setNZInt(0|e),this.multiplyGuard16OffsetRegisterWrite(0|e)},ARMInstructionSet.prototype.UMULL=function(){this.CPUCore.performUMUL64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister()),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.UMULLS=function(){this.CPUCore.performUMUL64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister()),this.branchFlags.setCarryFalse(),this.branchFlags.setNegative(0|this.CPUCore.mul64ResultHigh),this.branchFlags.setZero(this.CPUCore.mul64ResultHigh|this.CPUCore.mul64ResultLow),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.UMLAL=function(){this.CPUCore.performUMLA64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister(),0|this.read16OffsetRegister(),0|this.read12OffsetRegister()),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.UMLALS=function(){this.CPUCore.performUMLA64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister(),0|this.read16OffsetRegister(),0|this.read12OffsetRegister()),this.branchFlags.setCarryFalse(),this.branchFlags.setNegative(0|this.CPUCore.mul64ResultHigh),this.branchFlags.setZero(this.CPUCore.mul64ResultHigh|this.CPUCore.mul64ResultLow),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.SMULL=function(){this.CPUCore.performMUL64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister()),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.SMULLS=function(){this.CPUCore.performMUL64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister()),this.branchFlags.setCarryFalse(),this.branchFlags.setNegative(0|this.CPUCore.mul64ResultHigh),this.branchFlags.setZero(this.CPUCore.mul64ResultHigh|this.CPUCore.mul64ResultLow),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.SMLAL=function(){this.CPUCore.performMLA64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister(),0|this.read16OffsetRegister(),0|this.read12OffsetRegister()),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.SMLALS=function(){this.CPUCore.performMLA64(0|this.read0OffsetRegister(),0|this.read8OffsetRegister(),0|this.read16OffsetRegister(),0|this.read12OffsetRegister()),this.branchFlags.setCarryFalse(),this.branchFlags.setNegative(0|this.CPUCore.mul64ResultHigh),this.branchFlags.setZero(this.CPUCore.mul64ResultHigh|this.CPUCore.mul64ResultLow),this.multiplyGuard16OffsetRegisterWrite(0|this.CPUCore.mul64ResultHigh),this.multiplyGuard12OffsetRegisterWrite(0|this.CPUCore.mul64ResultLow)},ARMInstructionSet.prototype.STRH=function(){var e=0|this.operand2OP_LoadStore1();this.CPUCore.write16(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRH=function(){var e=0|this.operand2OP_LoadStore1();this.guard12OffsetRegisterWrite(0|this.CPUCore.read16(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDRSH=function(){var e=0|this.operand2OP_LoadStore1();this.guard12OffsetRegisterWrite(this.CPUCore.read16(0|e)<<16>>16),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDRSB=function(){var e=0|this.operand2OP_LoadStore1();this.guard12OffsetRegisterWrite(this.CPUCore.read8(0|e)<<24>>24),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRH2=function(){var e=0|this.operand2OP_LoadStore2();this.CPUCore.write16(0|e,0|this.guard12OffsetRegisterRead())};function GameBoyAdvanceOBJWindowRenderer(e){this.compositor=e}function GameBoyAdvanceWindowRenderer(e){this.compositor=e}function GameBoyAdvanceCompositor(e){this.gfx=e,this.doEffects=0}function GameBoyAdvanceWindowCompositor(e){this.gfx=e,this.doEffects=0}function GameBoyAdvanceOBJWindowCompositor(e){this.gfx=e,this.doEffects=0}function generateIodineGBAGFXCompositors(){!function(){function e(e,t,i){return function(e,r){function a(e,t,i){function r(e){var t="";return e||(t+="var "),t}var a="";if(e)switch(a+="var backdrop = SIMD.Int32x4.splat(this.gfx.backdrop | 0);",t){case 0:break;default:a+=r(i)+"workingPixel = this.mask0;var test1 = this.mask4;var test2 = this.mask4;";case 1:case 2:case 4:case 8:case 16:a+=r(i)+"currentPixel = this.mask0;"+r(i)+"lowerPixel = this.mask0;"}else switch(t){case 0:break;default:a+=r(i)+"workingPixel = 0;";case 1:case 2:case 4:case 8:case 16:a+=r(i)+"currentPixel = 0;"+r(i)+"lowerPixel = 0;"}return a}function s(e,t,i){function r(e){var t="";return t+=e?"lowerPixel = backdrop;":"lowerPixel = this.gfx.backdrop | 0;"}function a(e){var t="";return t+=e?"lowerPixel = backdrop;currentPixel = lowerPixel;":"lowerPixel = this.gfx.backdrop | 0;currentPixel = lowerPixel | 0;"}function s(e,t){var i="";return i+=e?"currentPixel = SIMD.Int32x4.load(this.buffer, xStart | "+t+");currentPixel = SIMD.Int32x4.select(SIMD.Int32x4.notEqual(this.mask0,SIMD.Int32x4.and(currentPixel, this.mask1)),lowerPixel,currentPixel);":"currentPixel = this.buffer[xStart | "+t+"] | 0;if ((currentPixel & 0x2000000) != 0) {currentPixel = lowerPixel | 0;}"}function o(e,t){var i="";return i+=e?"workingPixel = SIMD.Int32x4.load(this.buffer, xStart | "+t+");test1 = SIMD.Int32x4.lessThanOrEqual(SIMD.Int32x4.and(workingPixel, this.mask2),SIMD.Int32x4.and(currentPixel, this.mask3));lowerPixel = SIMD.Int32x4.select(test1, currentPixel, lowerPixel);currentPixel = SIMD.Int32x4.select(test1, workingPixel, currentPixel);test2 = SIMD.Int32x4.lessThanOrEqual(SIMD.Int32x4.and(workingPixel, this.mask2),SIMD.Int32x4.and(lowerPixel, this.mask3));lowerPixel = SIMD.Int32x4.select(test1,lowerPixel,SIMD.Int32x4.select(test2, workingPixel, lowerPixel));":"workingPixel = this.buffer[xStart | "+t+"] | 0;if ((workingPixel & 0x3800000) <= (currentPixel & 0x1800000)) {lowerPixel = currentPixel | 0;currentPixel = workingPixel | 0;}else if ((workingPixel & 0x3800000) <= (lowerPixel & 0x1800000)) {lowerPixel = workingPixel | 0;}"}function n(e,t){var i="";return i+=e?t?"SIMD.Int32x4.store(this.buffer, xStart | 0x700, lowerPixel);SIMD.Int32x4.store(this.buffer, xStart | 0x800, currentPixel);":"SIMD.Int32x4.store(this.buffer, xStart | 0, currentPixel);":t?"this.buffer[xStart | 0] = this.colorEffectsRenderer.processPixelNormal(lowerPixel | 0, currentPixel | 0) | 0;":"this.buffer[xStart | 0] = currentPixel | 0;"}function h(e,t){var i="";return e?i+="SIMD.Int32x4.store(this.buffer, xStart | 0x700, lowerPixel);SIMD.Int32x4.store(this.buffer, xStart | 0x800, currentPixel);":(i+="if ((currentPixel & 0x400000) == 0) {",i+=t?"this.buffer[xStart | 0] = this.colorEffectsRenderer.processPixelNormal(lowerPixel | 0, currentPixel | 0) | 0;":"this.buffer[xStart | 0] = currentPixel | 0;",i+="}else {this.buffer[xStart | 0] = this.colorEffectsRenderer.processPixelSprite(lowerPixel | 0, currentPixel | 0) | 0;}"),i}return function(e,t,i){var c="";switch(i){case 0:c+=function(e,t){var i="";return i+(e?t?"SIMD.Int32x4.store(this.buffer, xStart | 0x700, this.mask0);SIMD.Int32x4.store(this.buffer, xStart | 0x800, backdrop);":"SIMD.Int32x4.store(this.buffer, xStart | 0, backdrop);":t?"this.buffer[xStart | 0] = this.colorEffectsRenderer.processPixelNormal(0, this.gfx.backdrop | 0) | 0;":"this.buffer[xStart | 0] = this.gfx.backdrop | 0;")}(e,t);break;case 1:c+=r(e),c+=s(e,256),c+=n(e,t);break;case 2:c+=r(e),c+=s(e,512),c+=n(e,t);break;case 3:c+=a(e),c+=o(e,512),c+=o(e,256),c+=n(e,t);break;case 4:c+=r(e),c+=s(e,768),c+=n(e,t);break;case 5:c+=a(e),c+=o(e,768),c+=o(e,256),c+=n(e,t);break;case 6:c+=a(e),c+=o(e,768),c+=o(e,512),c+=n(e,t);break;case 7:c+=a(e),c+=o(e,768),c+=o(e,512),c+=o(e,256),c+=n(e,t);break;case 8:c+=r(e),c+=s(e,1024),c+=n(e,t);break;case 9:c+=a(e),c+=o(e,1024),c+=o(e,256),c+=n(e,t);break;case 10:c+=a(e),c+=o(e,1024),c+=o(e,512),c+=n(e,t);break;case 11:c+=a(e),c+=o(e,1024),c+=o(e,512),c+=o(e,256),c+=n(e,t);break;case 12:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=n(e,t);break;case 13:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=o(e,256),c+=n(e,t);break;case 14:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=o(e,512),c+=n(e,t);break;case 15:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=o(e,512),c+=o(e,256),c+=n(e,t);break;case 16:c+=r(e),c+=s(e,1280),c+=h(e,t);break;case 17:c+=a(e),c+=o(e,256),c+=o(e,1280),c+=h(e,t);break;case 18:c+=a(e),c+=o(e,512),c+=o(e,1280),c+=h(e,t);break;case 19:c+=a(e),c+=o(e,512),c+=o(e,256),c+=o(e,1280),c+=h(e,t);break;case 20:c+=a(e),c+=o(e,768),c+=o(e,1280),c+=h(e,t);break;case 21:c+=a(e),c+=o(e,768),c+=o(e,256),c+=o(e,1280),c+=h(e,t);break;case 22:c+=a(e),c+=o(e,768),c+=o(e,512),c+=o(e,1280),c+=h(e,t);break;case 23:c+=a(e),c+=o(e,768),c+=o(e,512),c+=o(e,256),c+=o(e,1280),c+=h(e,t);break;case 24:c+=a(e),c+=o(e,1024),c+=o(e,1280),c+=h(e,t);break;case 25:c+=a(e),c+=o(e,1024),c+=o(e,256),c+=o(e,1280),c+=h(e,t);break;case 26:c+=a(e),c+=o(e,1024),c+=o(e,512),c+=o(e,1280),c+=h(e,t);break;case 27:c+=a(e),c+=o(e,1024),c+=o(e,512),c+=o(e,256),c+=o(e,1280),c+=h(e,t);break;case 28:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=o(e,1280),c+=h(e,t);break;case 29:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=o(e,256),c+=o(e,1280),c+=h(e,t);break;case 30:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=o(e,512),c+=o(e,1280),c+=h(e,t);break;default:c+=a(e),c+=o(e,1024),c+=o(e,768),c+=o(e,512),c+=o(e,256),c+=o(e,1280),c+=h(e,t)}return c}(e,t,i)}var o="";switch(r){case 0:o+=e?a(!0,i,!1)+"for (var xStart = 0; (xStart | 0) < 240; xStart = ((xStart | 0) + 4) | 0) {"+s(!0,t,i)+"}":a(!1,i,!1)+"for (var xStart = 0; (xStart | 0) < 240; xStart = ((xStart | 0) + 1) | 0) {"+s(!1,t,i)+"}";break;case 1:o+="xStart = xStart | 0;xEnd = xEnd | 0;",o+=e?a(!1,i,!1)+"while ((xStart | 0) < (xEnd | 0) && (xStart | 0) <= (xStart | 0x3)) {"+s(!1,t,i)+"xStart = ((xStart | 0) + 1) | 0;}var xStartCopy = xStart | 0;"+a(!0,i,!0)+"while ((xStart | 0) < (xEnd & -4)) {"+s(!0,t,i)+"xStart = ((xStart | 0) + 4) | 0;}"+a(!1,i,!0)+"while ((xStart | 0) < (xEnd | 0)) {"+s(!1,t,i)+"xStart = ((xStart | 0) + 1) | 0;}":a(!1,i,!1)+"while ((xStart | 0) < (xEnd | 0)) {"+s(!1,t,i)+"xStart = ((xStart | 0) + 1) | 0;}";break;case 2:o+=a(!1,i,!1)+"for (var xStart = 0; (xStart | 0) < 240; xStart = ((xStart | 0) + 1) | 0) {if ((this.OBJWindowBuffer[xStart | 0] | 0) < 0x3800000) {"+s(!1,t,i)+"}}"}return o+=function(e,i,r){var a="";if(e)switch(r){case 0:i<16?t&&(a+=";this.colorEffectsRenderer.processFullNormalEffectsNoSprites()"):a+=t?";this.colorEffectsRenderer.processFullNormalEffectsWithSprites()":";this.colorEffectsRenderer.processFullNoEffectsWithSprites()";break;case 1:i<16?t&&(a+=";this.colorEffectsRenderer.processWindowNormalEffectsNoSprites(xStartCopy | 0, xEnd & -4)"):a+=t?";this.colorEffectsRenderer.processWindowNormalEffectsWithSprites(xStartCopy | 0, xEnd & -4)":";this.colorEffectsRenderer.processWindowNoEffectsWithSprites(xStartCopy | 0, xEnd & -4)"}return a}(e,i,r),o}("object"==typeof SIMD&&"function"==typeof SIMD.Int32x4,e)}function t(t,i){for(var r=i?"special":"normal",a=0;a<32;a++){var s=e(t,i,a);switch(t){case 0:GameBoyAdvanceCompositor.prototype[r+a]=Function(s);break;case 1:GameBoyAdvanceWindowCompositor.prototype[r+a]=Function("xStart","xEnd",s);break;default:GameBoyAdvanceOBJWindowCompositor.prototype[r+a]=Function(s)}}}for(var i=0;i<3;i++)t(i,!1),t(i,!0)}(),function(){function e(e,t){return function(e,t){return e?Function("xStart","xEnd","layers",t):Function("layers",t)}(e,function(e,t){return function(e,t){var i="";return i+=function(e){var t="";return e&&(t+="xStart = xStart | 0;xEnd = xEnd | 0;"),t+"layers = layers | 0;"}(e),i+=function(e,t){return i=function(e,t){return function(e,t){function i(e,t,i){return function(e,t){return""+(e<31?"case "+e+":{"+t+";break};":"default:{"+t+"}")}(e,function(e,t,i){var r="this.";return r+=i?"special":"normal",r+=e+"(",t&&(r+="xStart | 0, xEnd | 0"),r+")"}(e,t,i))}return function(e,t){for(var r="",a=0;a<32;a++)r+=i(a,e,t);return r}(e,t)}(e,t)}(e,t),"switch (layers | 0) {"+i+"}";var i}(e,t),i}(e,t)}(e,t))}GameBoyAdvanceOBJWindowCompositor.prototype.renderNormalScanLine=GameBoyAdvanceCompositor.prototype.renderNormalScanLine=e(!1,!1),GameBoyAdvanceWindowCompositor.prototype.renderNormalScanLine=e(!0,!1),GameBoyAdvanceOBJWindowCompositor.prototype.renderScanLineWithEffects=GameBoyAdvanceCompositor.prototype.renderScanLineWithEffects=e(!1,!0),GameBoyAdvanceWindowCompositor.prototype.renderScanLineWithEffects=e(!0,!0)}()}function GameBoyAdvanceDMA0(e){this.IOCore=e}function GameBoyAdvanceDMA1(e){this.IOCore=e}function GameBoyAdvanceDMA2(e){this.IOCore=e}function GameBoyAdvanceDMA3(e){this.IOCore=e}function GameBoyAdvanceSaveDeterminer(e){this.saves=null,this.saveCore=e,this.possible=7}function GameBoyAdvanceSRAMChip(){this.saves=null,this.TILTChip=null,this.TILTChipUnlocked=0}function GameBoyAdvanceFLASHChip(e,t){this.largestSizePossible=e?131072:65536,this.notATMEL=!t,this.saves=null,this.BANKOffset=0,this.flashCommandUnlockStage=0,this.flashCommand=0,this.writeBytesLeft=0}function GameBoyAdvanceEEPROMChip(e){this.saves=null,this.largestSizePossible=512,this.mode=0,this.bitsProcessed=0,this.address=0,this.buffer=getUint8Array(8),this.IOCore=e}function GameBoyAdvanceGPIOChip(){this.type=0,this.data=0,this.direction=0,this.readWrite=0}function GlueCodeMixer(e){var t=this;this.audio=new XAudioServer(2,this.sampleRate,0,this.bufferAmount,null,(function(){t.checkHeartbeats()}),(function(){t.checkPostHeartbeats()}),1,(function(){t.disableAudio()}),e),this.outputUnits=[],this.outputUnitsValid=[],this.initializeBuffer()}function GlueCodeMixerInput(e){this.mixer=e,this.volume=1}function AudioBufferWrapper(e,t,i,r,a){this.channelCount=e,this.mixerChannelCount=t,this.bufferAmount=i,this.sampleRate=r,this.mixerSampleRate=a,this.initialize()}function AudioSimpleBuffer(e,t){this.channelCount=e,this.bufferAmount=t,this.outBufferSize=this.channelCount*this.bufferAmount,this.stackLength=0,this.buffer=getFloat32Array(this.outBufferSize)}ARMInstructionSet.prototype.LDRH2=function(){var e=0|this.operand2OP_LoadStore2();this.guard12OffsetRegisterWrite(0|this.CPUCore.read16(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDRSH2=function(){var e=0|this.operand2OP_LoadStore2();this.guard12OffsetRegisterWrite(this.CPUCore.read16(0|e)<<16>>16),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDRSB2=function(){var e=0|this.operand2OP_LoadStore2();this.guard12OffsetRegisterWrite(this.CPUCore.read8(0|e)<<24>>24),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STR=function(){var e=0|this.operand2OP_LoadStore3Normal();this.CPUCore.write32(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDR=function(){var e=0|this.operand2OP_LoadStore3Normal();this.guard12OffsetRegisterWrite(0|this.CPUCore.read32(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRB=function(){var e=0|this.operand2OP_LoadStore3Normal();this.CPUCore.write8(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRB=function(){var e=0|this.operand2OP_LoadStore3Normal();this.guard12OffsetRegisterWrite(0|this.CPUCore.read8(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STR4=function(){var e=0|this.operand2OP_LoadStore4();this.CPUCore.write32(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDR4=function(){var e=0|this.operand2OP_LoadStore4();this.guard12OffsetRegisterWrite(0|this.CPUCore.read32(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRB4=function(){var e=0|this.operand2OP_LoadStore4();this.CPUCore.write8(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRB4=function(){var e=0|this.operand2OP_LoadStore4();this.guard12OffsetRegisterWrite(0|this.CPUCore.read8(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRT=function(){var e=0|this.operand2OP_LoadStore3User();this.CPUCore.write32(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRT=function(){var e=0|this.operand2OP_LoadStore3User();this.guard12OffsetRegisterWrite(0|this.CPUCore.read32(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRBT=function(){var e=0|this.operand2OP_LoadStore3User();this.CPUCore.write8(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRBT=function(){var e=0|this.operand2OP_LoadStore3User();this.guard12OffsetRegisterWrite(0|this.CPUCore.read8(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STR2=function(){var e=0|this.operand2OP_LoadStore5Normal();this.CPUCore.write32(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDR2=function(){var e=0|this.operand2OP_LoadStore5Normal();this.guard12OffsetRegisterWrite(0|this.CPUCore.read32(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRB2=function(){var e=0|this.operand2OP_LoadStore5Normal();this.CPUCore.write8(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRB2=function(){var e=0|this.operand2OP_LoadStore5Normal();this.guard12OffsetRegisterWrite(0|this.CPUCore.read8(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRT2=function(){var e=0|this.operand2OP_LoadStore5User();this.CPUCore.write32(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRT2=function(){var e=0|this.operand2OP_LoadStore5User();this.guard12OffsetRegisterWrite(0|this.CPUCore.read32(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRBT2=function(){var e=0|this.operand2OP_LoadStore5User();this.CPUCore.write8(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRBT2=function(){var e=0|this.operand2OP_LoadStore5User();this.guard12OffsetRegisterWrite(0|this.CPUCore.read8(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STR3=function(){var e=0|this.operand2OP_LoadStore6();this.CPUCore.write32(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDR3=function(){var e=0|this.operand2OP_LoadStore6();this.guard12OffsetRegisterWrite(0|this.CPUCore.read32(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STRB3=function(){var e=0|this.operand2OP_LoadStore6();this.CPUCore.write8(0|e,0|this.guard12OffsetRegisterRead())},ARMInstructionSet.prototype.LDRB3=function(){var e=0|this.operand2OP_LoadStore6();this.guard12OffsetRegisterWrite(0|this.CPUCore.read8(0|e)),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.STMIA=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();this.wait.NonSequentialBroadcast();for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.memory.memoryWrite32(0|e,0|this.readRegister(0|t)),e=4+(0|e)|0);this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMIAW=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|this.getPositiveOffsetStartAddress(0|e);this.wait.NonSequentialBroadcast();for(var i=0,r=0;r<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(this.memory.memoryWrite32(0|e,0|this.readRegister(0|r)),e=4+(0|e)|0,0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDA=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();e=0|this.getNegativeOffsetStartAddress(0|e),this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.readRegister(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDAW=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|(e=0|this.getNegativeOffsetStartAddress(0|e));this.wait.NonSequentialBroadcast();for(var i=0,r=0;(0|r)<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.readRegister(0|r)),0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMIB=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();this.wait.NonSequentialBroadcast();for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.readRegister(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMIBW=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|this.getPositiveOffsetStartAddress(0|e);this.wait.NonSequentialBroadcast();for(var i=0,r=0;r<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.readRegister(0|r)),0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDB=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();e=0|this.getNegativeOffsetStartAddress(0|e),this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.memory.memoryWrite32(0|e,0|this.readRegister(0|t)),e=4+(0|e)|0);this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDBW=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|(e=0|this.getNegativeOffsetStartAddress(0|e));this.wait.NonSequentialBroadcast();for(var i=0,r=0;(0|r)<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(this.memory.memoryWrite32(0|e,0|this.readRegister(0|r)),e=4+(0|e)|0,0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMIAG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();this.wait.NonSequentialBroadcast();for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|t)),e=4+(0|e)|0);this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMIAWG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|this.getPositiveOffsetStartAddress(0|e);this.wait.NonSequentialBroadcast();for(var i=0,r=0;r<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|r)),e=4+(0|e)|0,0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDAG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();e=0|this.getNegativeOffsetStartAddress(0|e),this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDAWG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|(e=0|this.getNegativeOffsetStartAddress(0|e));this.wait.NonSequentialBroadcast();for(var i=0,r=0;(0|r)<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|r)),0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMIBG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();this.wait.NonSequentialBroadcast();for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMIBWG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|this.getPositiveOffsetStartAddress(0|e);this.wait.NonSequentialBroadcast();for(var i=0,r=0;r<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(e=4+(0|e)|0,this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|r)),0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDBG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister();e=0|this.getNegativeOffsetStartAddress(0|e),this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|t)),e=4+(0|e)|0);this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.STMDBWG=function(){if((65535&this.execute)>0){var e=0|this.read16OffsetRegister(),t=0|(e=0|this.getNegativeOffsetStartAddress(0|e));this.wait.NonSequentialBroadcast();for(var i=0,r=0;(0|r)<16;r=1+(0|r)|0)0!=(this.execute&1<<r)&&(this.memory.memoryWrite32(0|e,0|this.guardUserRegisterRead(0|r)),e=4+(0|e)|0,0==(0|i)&&(i=1,this.guard16OffsetRegisterWrite(0|t)));this.wait.NonSequentialBroadcast()}},ARMInstructionSet.prototype.LDMIA=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.guardRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0);else this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMIAW=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.guardRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0);else this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e)),e=64+(0|e)|0;this.guard16OffsetRegisterWrite(0|e),this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDA=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0){e=0|this.getNegativeOffsetStartAddress(0|e);for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.guardRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)));this.wait.NonSequentialBroadcast()}else this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDAW=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0){for(var t=0|(e=0|this.getNegativeOffsetStartAddress(0|e)),i=0;i<16;i=1+(0|i)|0)0!=(this.execute&1<<i)&&(e=4+(0|e)|0,this.guardRegisterWriteLDM(0|i,0|this.memory.memoryRead32(0|e)));this.guard16OffsetRegisterWrite(0|t)}else this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e)),e=(0|e)-64|0,this.guard16OffsetRegisterWrite(0|e);this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMIB=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.guardRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)));else e=4+(0|e)|0,this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMIBW=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.guardRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)));else e=64+(0|e)|0,this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e));this.guard16OffsetRegisterWrite(0|e),this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDB=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0){e=0|this.getNegativeOffsetStartAddress(0|e);for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.guardRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0)}else e=(0|e)-4|0,this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDBW=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0){for(var t=0|(e=0|this.getNegativeOffsetStartAddress(0|e)),i=0;i<16;i=1+(0|i)|0)0!=(this.execute&1<<i)&&(this.guardRegisterWriteLDM(0|i,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0);this.guard16OffsetRegisterWrite(0|t)}else e=(0|e)-64|0,this.guardRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e)),this.guard16OffsetRegisterWrite(0|e);this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMIAG=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.guardUserRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0);else this.guardProgramCounterRegisterWriteCPSR(0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMIAWG=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.guardUserRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0);else this.guardProgramCounterRegisterWriteCPSR(0|this.memory.memoryRead32(0|e)),e=64+(0|e)|0;this.guard16OffsetRegisterWrite(0|e),this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDAG=function(){var e=0|this.read16OffsetRegister();if(e=0|this.getNegativeOffsetStartAddress(0|e),this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.guardUserRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)));else this.guardUserRegisterWriteLDM(15,0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDAWG=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0){for(var t=0|(e=0|this.getNegativeOffsetStartAddress(0|e)),i=0;i<16;i=1+(0|i)|0)0!=(this.execute&1<<i)&&(e=4+(0|e)|0,this.guardUserRegisterWriteLDM(0|i,0|this.memory.memoryRead32(0|e)));this.guard16OffsetRegisterWrite(0|t)}else this.guardProgramCounterRegisterWriteCPSR(0|this.memory.memoryRead32(0|e)),e=(0|e)-64|0,this.guard16OffsetRegisterWrite(0|e);this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMIBG=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.guardUserRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)));else e=4+(0|e)|0,this.guardProgramCounterRegisterWriteCPSR(0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMIBWG=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0)for(var t=0;t<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(e=4+(0|e)|0,this.guardUserRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)));else e=64+(0|e)|0,this.guardProgramCounterRegisterWriteCPSR(0|this.memory.memoryRead32(0|e));this.guard16OffsetRegisterWrite(0|e),this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDBG=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0){e=0|this.getNegativeOffsetStartAddress(0|e);for(var t=0;(0|t)<16;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.guardUserRegisterWriteLDM(0|t,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0)}else e=(0|e)-4|0,this.guardProgramCounterRegisterWriteCPSR(0|this.memory.memoryRead32(0|e));this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LDMDBWG=function(){var e=0|this.read16OffsetRegister();if(this.wait.NonSequentialBroadcast(),(65535&this.execute)>0){for(var t=0|(e=0|this.getNegativeOffsetStartAddress(0|e)),i=0;i<16;i=1+(0|i)|0)0!=(this.execute&1<<i)&&(this.guardUserRegisterWriteLDM(0|i,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0);this.guard16OffsetRegisterWrite(0|t)}else e=(0|e)-64|0,this.guardProgramCounterRegisterWriteCPSR(0|this.memory.memoryRead32(0|e)),this.guard16OffsetRegisterWrite(0|e);this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},ARMInstructionSet.prototype.LoadStoreMultiple=function(){switch(this.incrementProgramCounter(),this.execute>>20&31){case 0:this.STMDA();break;case 1:this.LDMDA();break;case 2:this.STMDAW();break;case 3:this.LDMDAW();break;case 4:this.STMDAG();break;case 5:this.LDMDAG();break;case 6:this.STMDAWG();break;case 7:this.LDMDAWG();break;case 8:this.STMIA();break;case 9:this.LDMIA();break;case 10:this.STMIAW();break;case 11:this.LDMIAW();break;case 12:this.STMIAG();break;case 13:this.LDMIAG();break;case 14:this.STMIAWG();break;case 15:this.LDMIAWG();break;case 16:this.STMDB();break;case 17:this.LDMDB();break;case 18:this.STMDBW();break;case 19:this.LDMDBW();break;case 20:this.STMDBG();break;case 21:this.LDMDBG();break;case 22:this.STMDBWG();break;case 23:this.LDMDBWG();break;case 24:this.STMIB();break;case 25:this.LDMIB();break;case 26:this.STMIBW();break;case 27:this.LDMIBW();break;case 28:this.STMIBG();break;case 29:this.LDMIBG();break;case 30:this.STMIBWG();break;default:this.LDMIBWG()}},ARMInstructionSet.prototype.SWP=function(){var e=0|this.read16OffsetRegister(),t=0|this.CPUCore.read32(0|e);this.wait.CPUInternalSingleCyclePrefetch(),this.CPUCore.write32(0|e,0|this.read0OffsetRegister()),this.guard12OffsetRegisterWrite(0|t)},ARMInstructionSet.prototype.SWPB=function(){var e=0|this.read16OffsetRegister(),t=0|this.CPUCore.read8(0|e);this.wait.CPUInternalSingleCyclePrefetch(),this.CPUCore.write8(0|e,0|this.read0OffsetRegister()),this.guard12OffsetRegisterWrite(0|t)},ARMInstructionSet.prototype.SWI=function(){this.CPUCore.SWI()},ARMInstructionSet.prototype.UNDEFINED=function(){this.CPUCore.UNDEFINED()},ARMInstructionSet.prototype.operand2OP_DataProcessing1=function(){var e=0;switch((33554528&this.execute)>>5){case 0:e=0|this.lli();break;case 1:e=0|this.lri();break;case 2:e=0|this.ari();break;case 3:e=0|this.rri();break;default:e=0|this.imm()}return 0|e},ARMInstructionSet.prototype.operand2OP_DataProcessing2=function(){var e=0;switch((33554528&this.execute)>>5){case 0:e=0|this.llis();break;case 1:e=0|this.lris();break;case 2:e=0|this.aris();break;case 3:e=0|this.rris();break;default:e=0|this.imms()}return 0|e},ARMInstructionSet.prototype.operand2OP_DataProcessing3=function(){var e=0;switch(this.execute>>5&3){case 0:e=0|this.llr();break;case 1:e=0|this.lrr();break;case 2:e=0|this.arr();break;default:e=0|this.rrr()}return 0|e},ARMInstructionSet.prototype.operand2OP_DataProcessing4=function(){var e=0;switch(this.execute>>5&3){case 0:e=0|this.llrs();break;case 1:e=0|this.lrrs();break;case 2:e=0|this.arrs();break;default:e=0|this.rrrs()}return 0|e},ARMInstructionSet.prototype.operand2OP_LoadStoreOffsetGen=function(){var e=0;switch(this.execute>>5&3){case 0:e=0|this.lli();break;case 1:e=0|this.lri();break;case 2:e=0|this.ari();break;default:e=0|this.rri()}return 0|e},ARMInstructionSet.prototype.operand2OP_LoadStoreOperandDetermine=function(){return 0|(0==(4194304&this.execute)?0|this.read0OffsetRegister():(3840&this.execute)>>4|15&this.execute)},ARMInstructionSet.prototype.operand2OP_LoadStorePostTUser=function(e){e|=0;var t=0|this.read16OffsetUserRegister();return e=0==(8388608&this.execute)?(0|t)-(0|e)|0:(0|t)+(0|e)|0,this.guard16OffsetUserRegisterWrite(0|e),0|t},ARMInstructionSet.prototype.operand2OP_LoadStorePostTNormal=function(e){e|=0;var t=0|this.read16OffsetRegister();return e=0==(8388608&this.execute)?(0|t)-(0|e)|0:(0|t)+(0|e)|0,this.guard16OffsetRegisterWrite(0|e),0|t},ARMInstructionSet.prototype.operand2OP_LoadStoreNotT=function(e){e|=0;var t=0|this.read16OffsetRegister();return e=0==(8388608&this.execute)?(0|t)-(0|e)|0:(0|t)+(0|e)|0,0!=(2097152&this.execute)&&this.guard16OffsetRegisterWrite(0|e),0|e},ARMInstructionSet.prototype.operand2OP_LoadStore1=function(){return 0|this.operand2OP_LoadStorePostTNormal(0|this.operand2OP_LoadStoreOperandDetermine())},ARMInstructionSet.prototype.operand2OP_LoadStore2=function(){return 0|this.operand2OP_LoadStoreNotT(0|this.operand2OP_LoadStoreOperandDetermine())},ARMInstructionSet.prototype.operand2OP_LoadStore3Normal=function(){return 0|this.operand2OP_LoadStorePostTNormal(4095&this.execute)},ARMInstructionSet.prototype.operand2OP_LoadStore3User=function(){return 0|this.operand2OP_LoadStorePostTUser(4095&this.execute)},ARMInstructionSet.prototype.operand2OP_LoadStore4=function(){return 0|this.operand2OP_LoadStoreNotT(4095&this.execute)},ARMInstructionSet.prototype.operand2OP_LoadStore5Normal=function(){return 0|this.operand2OP_LoadStorePostTNormal(0|this.operand2OP_LoadStoreOffsetGen())},ARMInstructionSet.prototype.operand2OP_LoadStore5User=function(){return 0|this.operand2OP_LoadStorePostTUser(0|this.operand2OP_LoadStoreOffsetGen())},ARMInstructionSet.prototype.operand2OP_LoadStore6=function(){return 0|this.operand2OP_LoadStoreNotT(0|this.operand2OP_LoadStoreOffsetGen())},ARMInstructionSet.prototype.lli=function(){return(0|this.read0OffsetRegister())<<(0|this.execute>>7&31)},ARMInstructionSet.prototype.llis=function(){var e=0|this.read0OffsetRegister(),t=this.execute>>7&31;return(0|t)>0&&this.branchFlags.setCarry(e<<((0|t)-1|0)),e<<(0|t)},ARMInstructionSet.prototype.llr=function(){var e=0|this.read0OffsetRegister();this.wait.CPUInternalSingleCyclePrefetch();var t=255&this.read8OffsetRegister();return(0|t)<32?e<<=0|t:e=0,0|e},ARMInstructionSet.prototype.llrs=function(){var e=0|this.read0OffsetRegister();this.wait.CPUInternalSingleCyclePrefetch();var t=255&this.read8OffsetRegister();return(0|t)>0&&((0|t)<32?(this.branchFlags.setCarry(e<<((0|t)-1|0)),e<<=0|t):(32==(0|t)?this.branchFlags.setCarry(e<<31):this.branchFlags.setCarryFalse(),e=0)),0|e},ARMInstructionSet.prototype.lri=function(){var e=0|this.read0OffsetRegister(),t=this.execute>>7&31;return 0|(e=0==(0|t)?0:e>>>(0|t)|0)},ARMInstructionSet.prototype.lris=function(){var e=0|this.read0OffsetRegister(),t=this.execute>>7&31;return(0|t)>0?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e=e>>>(0|t)|0):(this.branchFlags.setCarry(0|e),e=0),0|e},ARMInstructionSet.prototype.lrr=function(){var e=0|this.read0OffsetRegister();this.wait.CPUInternalSingleCyclePrefetch();var t=255&this.read8OffsetRegister();return 0|(e=(0|t)<32?e>>>(0|t)|0:0)},ARMInstructionSet.prototype.lrrs=function(){var e=0|this.read0OffsetRegister();this.wait.CPUInternalSingleCyclePrefetch();var t=255&this.read8OffsetRegister();return(0|t)>0&&((0|t)<32?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e=e>>>(0|t)|0):(32==(0|t)?this.branchFlags.setCarry(0|e):this.branchFlags.setCarryFalse(),e=0)),0|e},ARMInstructionSet.prototype.ari=function(){var e=0|this.read0OffsetRegister(),t=this.execute>>7&31;return 0==(0|t)&&(t=31),e>>(0|t)},ARMInstructionSet.prototype.aris=function(){var e=0|this.read0OffsetRegister(),t=this.execute>>7&31;return(0|t)>0?this.branchFlags.setCarry(e>>((0|t)-1|0)<<31):(t=31,this.branchFlags.setCarry(0|e)),e>>(0|t)},ARMInstructionSet.prototype.arr=function(){var e=0|this.read0OffsetRegister();return this.wait.CPUInternalSingleCyclePrefetch(),e>>Math.min(255&this.read8OffsetRegister(),31)},ARMInstructionSet.prototype.arrs=function(){var e=0|this.read0OffsetRegister();this.wait.CPUInternalSingleCyclePrefetch();var t=255&this.read8OffsetRegister();return(0|t)>0&&((0|t)<32?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e>>=0|t):(this.branchFlags.setCarry(0|e),e>>=31)),0|e},ARMInstructionSet.prototype.rri=function(){var e=0|this.read0OffsetRegister(),t=this.execute>>7&31;return 0|(e=(0|t)>0?e<<32-(0|t)|e>>>(0|t):2147483648&this.branchFlags.getCarry()|e>>>1)},ARMInstructionSet.prototype.rris=function(){var e=0|this.read0OffsetRegister(),t=this.execute>>7&31;if((0|t)>0)this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e=e<<32-(0|t)|e>>>(0|t);else{var i=2147483648&this.branchFlags.getCarry()|e>>>1;this.branchFlags.setCarry(e<<31),e=0|i}return 0|e},ARMInstructionSet.prototype.rrr=function(){var e=0|this.read0OffsetRegister();this.wait.CPUInternalSingleCyclePrefetch();var t=31&this.read8OffsetRegister();return(0|t)>0&&(e=e<<32-(0|t)|e>>>(0|t)),0|e},ARMInstructionSet.prototype.rrrs=function(){var e=0|this.read0OffsetRegister();this.wait.CPUInternalSingleCyclePrefetch();var t=255&this.read8OffsetRegister();return(0|t)>0&&((0|(t&=31))>0?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e=e<<32-(0|t)|e>>>(0|t)):this.branchFlags.setCarry(0|e)),0|e},ARMInstructionSet.prototype.imm=function(){var e=255&this.execute,t=this.execute>>7&30;return(0|t)>0&&(e=e<<32-(0|t)|e>>>(0|t)),0|e},ARMInstructionSet.prototype.imms=function(){var e=255&this.execute,t=this.execute>>7&30;return(0|t)>0&&(e=e<<32-(0|t)|e>>>(0|t),this.branchFlags.setCarry(0|e)),0|e},ARMInstructionSet.prototype.rc=function(){return this.branchFlags.getNZCV()|this.CPUCore.modeFlags},ARMInstructionSet.prototype.rs=function(){var e=0;switch(31&this.CPUCore.modeFlags){case 18:e=0|this.CPUCore.SPSR[1];break;case 19:e=0|this.CPUCore.SPSR[2];break;case 17:e=0|this.CPUCore.SPSR[0];break;case 23:e=0|this.CPUCore.SPSR[3];break;case 27:e=0|this.CPUCore.SPSR[4];break;default:return 0|this.rc()}return(3840&e)<<20|255&e},compileARMInstructionDecodeMap(),THUMBInstructionSet.prototype.initialize=function(){this.wait=this.CPUCore.wait,this.registers=this.CPUCore.registers,this.branchFlags=this.CPUCore.branchFlags,this.fetch=0,this.decode=0,this.execute=0,this.memory=this.CPUCore.memory},THUMBInstructionSet.prototype.executeIteration=function(){this.fetch=0|this.memory.memoryReadCPU16(0|this.readPC()),this.executeDecoded(),this.execute=0|this.decode,this.decode=0|this.fetch},THUMBInstructionSet.prototype.executeDecoded=function(){switch(255&this.instructionMap[this.execute>>6]){case 0:this.CMPimm8();break;case 1:this.BEQ();break;case 2:this.MOVH_LH();break;case 3:this.LDRimm5();break;case 4:this.AND();break;case 5:this.LDRBimm5();break;case 6:this.LSLimm();break;case 7:this.LSRimm();break;case 8:this.MOVimm8();break;case 9:this.CMP();break;case 10:this.LDRSP();break;case 11:this.ADDimm3();break;case 12:this.ADDreg();break;case 13:this.STRSP();break;case 14:this.B();break;case 15:this.LDRPC();break;case 16:this.MOVH_HL();break;case 17:this.ADDimm8();break;case 18:this.SUBreg();break;case 19:this.BCC();break;case 20:this.STRimm5();break;case 21:this.ORR();break;case 22:this.LDRHimm5();break;case 23:this.BCS();break;case 24:this.BNE();break;case 25:this.BGE();break;case 26:this.POP();break;case 27:this.ADDH_HL();break;case 28:this.STRHimm5();break;case 29:this.BLE();break;case 30:this.ASRimm();break;case 31:this.MUL();break;case 32:this.BLsetup();break;case 33:this.BLoff();break;case 34:this.BGT();break;case 35:this.STRHreg();break;case 36:this.LDRHreg();break;case 37:this.BX_L();break;case 38:this.BLT();break;case 39:this.ADDSPimm7();break;case 40:this.PUSHlr();break;case 41:this.PUSH();break;case 42:this.SUBimm8();break;case 43:this.ROR();break;case 44:this.LDRSHreg();break;case 45:this.STRBimm5();break;case 46:this.NEG();break;case 47:this.BHI();break;case 48:this.TST();break;case 49:this.BX_H();break;case 50:this.STMIA();break;case 51:this.BLS();break;case 52:this.SWI();break;case 53:this.LDMIA();break;case 54:this.MOVH_HH();break;case 55:this.LSL();break;case 56:this.POPpc();break;case 57:this.LSR();break;case 58:this.CMPH_LH();break;case 59:this.EOR();break;case 60:this.SUBimm3();break;case 61:this.ADDH_LH();break;case 62:this.BPL();break;case 63:this.CMPH_HL();break;case 64:this.ADDPC();break;case 65:this.LDRSBreg();break;case 66:this.BIC();break;case 67:this.ADDSP();break;case 68:this.MVN();break;case 69:this.ASR();break;case 70:this.LDRreg();break;case 71:this.ADC();break;case 72:this.SBC();break;case 73:this.BMI();break;case 74:this.STRreg();break;case 75:this.CMN();break;case 76:this.LDRBreg();break;case 77:this.ADDH_HH();break;case 78:this.CMPH_HH();break;case 79:this.STRBreg();break;case 80:this.BVS();break;case 81:this.BVC();break;default:this.UNDEFINED()}},THUMBInstructionSet.prototype.executeBubble=function(){this.fetch=0|this.memory.memoryReadCPU16(0|this.readPC()),this.incrementProgramCounter(),this.execute=0|this.decode,this.decode=0|this.fetch},THUMBInstructionSet.prototype.incrementProgramCounter=function(){this.registers[15]=2+(0|this.registers[15])|0},THUMBInstructionSet.prototype.readLowRegister=function(e){return e|=0,0|this.registers[7&e]},THUMBInstructionSet.prototype.read0OffsetLowRegister=function(){return 0|this.readLowRegister(0|this.execute)},THUMBInstructionSet.prototype.read3OffsetLowRegister=function(){return 0|this.readLowRegister(this.execute>>3)},THUMBInstructionSet.prototype.read6OffsetLowRegister=function(){return 0|this.readLowRegister(this.execute>>6)},THUMBInstructionSet.prototype.read8OffsetLowRegister=function(){return 0|this.readLowRegister(this.execute>>8)},THUMBInstructionSet.prototype.readHighRegister=function(e){return e|=8,0|this.registers[15&e]},THUMBInstructionSet.prototype.writeLowRegister=function(e,t){e|=0,t|=0,this.registers[7&e]=0|t},THUMBInstructionSet.prototype.write0OffsetLowRegister=function(e){e|=0,this.writeLowRegister(0|this.execute,0|e)},THUMBInstructionSet.prototype.write8OffsetLowRegister=function(e){e|=0,this.writeLowRegister(this.execute>>8,0|e)},THUMBInstructionSet.prototype.guardHighRegisterWrite=function(e){e|=0;var t=8|7&this.execute;15==(0|t)?this.CPUCore.branch(-2&e):(this.registers[15&t]=0|e,this.incrementProgramCounter())},THUMBInstructionSet.prototype.writeSP=function(e){e|=0,this.registers[13]=0|e},THUMBInstructionSet.prototype.SPDecrementWord=function(){this.registers[13]=(0|this.registers[13])-4|0},THUMBInstructionSet.prototype.SPIncrementWord=function(){this.registers[13]=4+(0|this.registers[13])|0},THUMBInstructionSet.prototype.writeLR=function(e){e|=0,this.registers[14]=0|e},THUMBInstructionSet.prototype.writePC=function(e){e|=0,this.CPUCore.branch(-2&e)},THUMBInstructionSet.prototype.offsetPC=function(){this.CPUCore.branch((0|this.readPC())+(this.execute<<24>>23)|0)},THUMBInstructionSet.prototype.getLR=function(){return(0|this.readPC())-2|0},THUMBInstructionSet.prototype.getIRQLR=function(){return 0|this.readPC()},THUMBInstructionSet.prototype.readSP=function(){return 0|this.registers[13]},THUMBInstructionSet.prototype.readLR=function(){return 0|this.registers[14]},THUMBInstructionSet.prototype.readPC=function(){return 0|this.registers[15]},THUMBInstructionSet.prototype.getCurrentFetchValue=function(){return this.fetch|this.fetch<<16},THUMBInstructionSet.prototype.getSWICode=function(){return 255&this.execute},THUMBInstructionSet.prototype.LSLimm=function(){var e=0|this.read3OffsetLowRegister(),t=this.execute>>6&31;(0|t)>0&&(this.branchFlags.setCarry(e<<((0|t)-1|0)|0),e<<=0|t),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LSRimm=function(){var e=0|this.read3OffsetLowRegister(),t=this.execute>>6&31;(0|t)>0?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e=e>>>(0|t)|0):(this.branchFlags.setCarry(0|e),e=0),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ASRimm=function(){var e=0|this.read3OffsetLowRegister(),t=this.execute>>6&31;(0|t)>0?(this.branchFlags.setCarry(e>>((0|t)-1|0)<<31),e>>=0|t):(this.branchFlags.setCarry(0|e),e>>=31),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDreg=function(){var e=0|this.read3OffsetLowRegister(),t=0|this.read6OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setADDFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SUBreg=function(){var e=0|this.read3OffsetLowRegister(),t=0|this.read6OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setSUBFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDimm3=function(){var e=0|this.read3OffsetLowRegister(),t=this.execute>>6&7;this.write0OffsetLowRegister(0|this.branchFlags.setADDFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SUBimm3=function(){var e=0|this.read3OffsetLowRegister(),t=this.execute>>6&7;this.write0OffsetLowRegister(0|this.branchFlags.setSUBFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MOVimm8=function(){var e=255&this.execute;this.branchFlags.setNegativeFalse(),this.branchFlags.setZero(0|e),this.write8OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMPimm8=function(){var e=0|this.read8OffsetLowRegister(),t=255&this.execute;this.branchFlags.setCMPFlags(0|e,0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDimm8=function(){var e=0|this.read8OffsetLowRegister(),t=255&this.execute;this.write8OffsetLowRegister(0|this.branchFlags.setADDFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SUBimm8=function(){var e=0|this.read8OffsetLowRegister(),t=255&this.execute;this.write8OffsetLowRegister(0|this.branchFlags.setSUBFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.AND=function(){var e=(0|this.read3OffsetLowRegister())&(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.EOR=function(){var e=(0|this.read3OffsetLowRegister())^(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LSL=function(){var e=255&this.read3OffsetLowRegister(),t=0|this.read0OffsetLowRegister();(0|e)>0&&((0|e)<32?(this.branchFlags.setCarry(t<<((0|e)-1|0)),t<<=0|e):32==(0|e)?(this.branchFlags.setCarry(t<<31),t=0):(this.branchFlags.setCarryFalse(),t=0)),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LSR=function(){var e=255&this.read3OffsetLowRegister(),t=0|this.read0OffsetLowRegister();(0|e)>0&&((0|e)<32?(this.branchFlags.setCarry(t>>((0|e)-1|0)<<31),t=t>>>(0|e)|0):32==e?(this.branchFlags.setCarry(0|t),t=0):(this.branchFlags.setCarryFalse(),t=0)),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ASR=function(){var e=255&this.read3OffsetLowRegister(),t=0|this.read0OffsetLowRegister();(0|e)>0&&((0|e)<32?(this.branchFlags.setCarry(t>>((0|e)-1|0)<<31),t>>=0|e):(this.branchFlags.setCarry(0|t),t>>=31)),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADC=function(){var e=0|this.read0OffsetLowRegister(),t=0|this.read3OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setADCFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.SBC=function(){var e=0|this.read0OffsetLowRegister(),t=0|this.read3OffsetLowRegister();this.write0OffsetLowRegister(0|this.branchFlags.setSBCFlags(0|e,0|t)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ROR=function(){var e=255&this.read3OffsetLowRegister(),t=0|this.read0OffsetLowRegister();(0|e)>0&&((0|(e&=31))>0?(this.branchFlags.setCarry(t>>(e-1|0)<<31),t=t<<(32-(0|e)|0)|t>>>(0|e)):this.branchFlags.setCarry(0|t)),this.branchFlags.setNZInt(0|t),this.write0OffsetLowRegister(0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.TST=function(){var e=(0|this.read3OffsetLowRegister())&(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.NEG=function(){var e=0|this.read3OffsetLowRegister();-2147483648!=(0|e)?(e=0|-(0|e),this.branchFlags.setOverflowFalse()):this.branchFlags.setOverflowTrue(),this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMP=function(){var e=0|this.read0OffsetLowRegister(),t=0|this.read3OffsetLowRegister();this.branchFlags.setCMPFlags(0|e,0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMN=function(){var e=0|this.read0OffsetLowRegister(),t=0|this.read3OffsetLowRegister();this.branchFlags.setCMNFlags(0|e,0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ORR=function(){var e=0|this.read3OffsetLowRegister()|(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MUL=function(){var e=0|this.read3OffsetLowRegister(),t=0|this.read0OffsetLowRegister(),i=0|this.CPUCore.performMUL32(0|e,0|t,0);this.branchFlags.setCarryFalse(),this.branchFlags.setNZInt(0|i),this.write0OffsetLowRegister(0|i),this.incrementProgramCounter()},THUMBInstructionSet.prototype.BIC=function(){var e=~(0|this.read3OffsetLowRegister())&(0|this.read0OffsetLowRegister());this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MVN=function(){var e=~this.read3OffsetLowRegister();this.branchFlags.setNZInt(0|e),this.write0OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDH_LH=function(){var e=0|this.read0OffsetLowRegister(),t=0|this.readHighRegister(this.execute>>3);this.write0OffsetLowRegister((0|e)+(0|t)|0),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDH_HL=function(){var e=0|this.readHighRegister(0|this.execute),t=0|this.read3OffsetLowRegister();this.guardHighRegisterWrite((0|e)+(0|t)|0)},THUMBInstructionSet.prototype.ADDH_HH=function(){var e=0|this.readHighRegister(0|this.execute),t=0|this.readHighRegister(this.execute>>3);this.guardHighRegisterWrite((0|e)+(0|t)|0)},THUMBInstructionSet.prototype.CMPH_LH=function(){var e=0|this.read0OffsetLowRegister(),t=0|this.readHighRegister(this.execute>>3);this.branchFlags.setCMPFlags(0|e,0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMPH_HL=function(){var e=0|this.readHighRegister(0|this.execute),t=0|this.read3OffsetLowRegister();this.branchFlags.setCMPFlags(0|e,0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.CMPH_HH=function(){var e=0|this.readHighRegister(0|this.execute),t=0|this.readHighRegister(this.execute>>3);this.branchFlags.setCMPFlags(0|e,0|t),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MOVH_LH=function(){this.write0OffsetLowRegister(0|this.readHighRegister(this.execute>>3)),this.incrementProgramCounter()},THUMBInstructionSet.prototype.MOVH_HL=function(){this.guardHighRegisterWrite(0|this.read3OffsetLowRegister())},THUMBInstructionSet.prototype.MOVH_HH=function(){this.guardHighRegisterWrite(0|this.readHighRegister(this.execute>>3))},THUMBInstructionSet.prototype.BX_L=function(){var e=0|this.read3OffsetLowRegister();0==(1&e)?(this.CPUCore.enterARM(),this.CPUCore.branch(-4&e)):this.CPUCore.branch(-2&e)},THUMBInstructionSet.prototype.BX_H=function(){var e=0|this.readHighRegister(this.execute>>3);0==(1&e)?(this.CPUCore.enterARM(),this.CPUCore.branch(-4&e)):this.CPUCore.branch(-2&e)},THUMBInstructionSet.prototype.LDRPC=function(){var e=0|this.CPUCore.read32((-3&this.readPC())+((255&this.execute)<<2)|0);this.write8OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRreg=function(){var e=(0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write32(0|e,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.STRHreg=function(){var e=(0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write16(0|e,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.STRBreg=function(){var e=(0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write8(0|e,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRSBreg=function(){var e=this.CPUCore.read8((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0)<<24>>24;this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRreg=function(){var e=0|this.CPUCore.read32((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRHreg=function(){var e=0|this.CPUCore.read16((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRBreg=function(){var e=0|this.CPUCore.read8((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.LDRSHreg=function(){var e=this.CPUCore.read16((0|this.read6OffsetLowRegister())+(0|this.read3OffsetLowRegister())|0)<<16>>16;this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRimm5=function(){var e=(this.execute>>4&124)+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write32(0|e,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRimm5=function(){var e=0|this.CPUCore.read32((this.execute>>4&124)+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRBimm5=function(){var e=(this.execute>>6&31)+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write8(0|e,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRBimm5=function(){var e=0|this.CPUCore.read8((this.execute>>6&31)+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRHimm5=function(){var e=(this.execute>>5&62)+(0|this.read3OffsetLowRegister())|0;this.CPUCore.write16(0|e,0|this.read0OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRHimm5=function(){var e=0|this.CPUCore.read16((this.execute>>5&62)+(0|this.read3OffsetLowRegister())|0);this.write0OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STRSP=function(){var e=((255&this.execute)<<2)+(0|this.readSP())|0;this.CPUCore.write32(0|e,0|this.read8OffsetLowRegister()),this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDRSP=function(){var e=0|this.CPUCore.read32(((255&this.execute)<<2)+(0|this.readSP())|0);this.write8OffsetLowRegister(0|e),this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.ADDPC=function(){var e=(-3&this.readPC())+((255&this.execute)<<2)|0;this.write8OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDSP=function(){var e=((255&this.execute)<<2)+(0|this.readSP())|0;this.write8OffsetLowRegister(0|e),this.incrementProgramCounter()},THUMBInstructionSet.prototype.ADDSPimm7=function(){0!=(128&this.execute)?this.writeSP((0|this.readSP())-((127&this.execute)<<2)|0):this.writeSP((0|this.readSP())+((127&this.execute)<<2)|0),this.incrementProgramCounter()},THUMBInstructionSet.prototype.PUSH=function(){if((255&this.execute)>0){this.wait.NonSequentialBroadcast();for(var e=7;(0|e)>-1;e=(0|e)-1|0)0!=(this.execute&1<<e)&&(this.SPDecrementWord(),this.memory.memoryWrite32(0|this.readSP(),0|this.readLowRegister(0|e)));this.wait.NonSequentialBroadcast()}this.incrementProgramCounter()},THUMBInstructionSet.prototype.PUSHlr=function(){this.wait.NonSequentialBroadcast(),this.SPDecrementWord(),this.memory.memoryWrite32(0|this.readSP(),0|this.readLR());for(var e=7;(0|e)>-1;e=(0|e)-1|0)0!=(this.execute&1<<e)&&(this.SPDecrementWord(),this.memory.memoryWrite32(0|this.readSP(),0|this.readLowRegister(0|e)));this.wait.NonSequentialBroadcast(),this.incrementProgramCounter()},THUMBInstructionSet.prototype.POP=function(){if((255&this.execute)>0){this.wait.NonSequentialBroadcast();for(var e=0;(0|e)<8;e=1+(0|e)|0)0!=(this.execute&1<<e)&&(this.writeLowRegister(0|e,0|this.memory.memoryRead32(0|this.readSP())),this.SPIncrementWord());this.wait.NonSequentialBroadcast()}this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.POPpc=function(){this.wait.NonSequentialBroadcast();for(var e=0;(0|e)<8;e=1+(0|e)|0)0!=(this.execute&1<<e)&&(this.writeLowRegister(0|e,0|this.memory.memoryRead32(0|this.readSP())),this.SPIncrementWord());this.writePC(0|this.memory.memoryRead32(0|this.readSP())),this.SPIncrementWord(),this.wait.NonSequentialBroadcast(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.STMIA=function(){if((255&this.execute)>0){var e=0|this.read8OffsetLowRegister();this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<8;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.memory.memoryWrite32(0|e,0|this.readLowRegister(0|t)),e=4+(0|e)|0);this.write8OffsetLowRegister(0|e),this.wait.NonSequentialBroadcast()}this.incrementProgramCounter()},THUMBInstructionSet.prototype.LDMIA=function(){if((255&this.execute)>0){var e=0|this.read8OffsetLowRegister();this.wait.NonSequentialBroadcast();for(var t=0;(0|t)<8;t=1+(0|t)|0)0!=(this.execute&1<<t)&&(this.writeLowRegister(0|t,0|this.memory.memoryRead32(0|e)),e=4+(0|e)|0);this.write8OffsetLowRegister(0|e),this.wait.NonSequentialBroadcast()}this.incrementProgramCounter(),this.wait.CPUInternalSingleCyclePrefetch()},THUMBInstructionSet.prototype.BEQ=function(){0==(0|this.branchFlags.getZero())?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BNE=function(){0!=(0|this.branchFlags.getZero())?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BCS=function(){(0|this.branchFlags.getCarry())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BCC=function(){(0|this.branchFlags.getCarry())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BMI=function(){(0|this.branchFlags.getNegative())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BPL=function(){(0|this.branchFlags.getNegative())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BVS=function(){(0|this.branchFlags.getOverflow())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BVC=function(){(0|this.branchFlags.getOverflow())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BHI=function(){(0|this.branchFlags.getCarry())<0&&0!=(0|this.branchFlags.getZero())?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLS=function(){(0|this.branchFlags.getCarry())<0&&0!=(0|this.branchFlags.getZero())?this.incrementProgramCounter():this.offsetPC()},THUMBInstructionSet.prototype.BGE=function(){(0|this.branchFlags.BGE())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLT=function(){(0|this.branchFlags.BGE())<0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BGT=function(){0!=(0|this.branchFlags.getZero())&&(0|this.branchFlags.BGE())>=0?this.offsetPC():this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLE=function(){0!=(0|this.branchFlags.getZero())&&(0|this.branchFlags.BGE())>=0?this.incrementProgramCounter():this.offsetPC()},THUMBInstructionSet.prototype.SWI=function(){this.CPUCore.SWI()},THUMBInstructionSet.prototype.B=function(){this.CPUCore.branch((0|this.readPC())+(this.execute<<21>>20)|0)},THUMBInstructionSet.prototype.BLsetup=function(){this.writeLR((0|this.readPC())+(this.execute<<21>>9)|0),this.incrementProgramCounter()},THUMBInstructionSet.prototype.BLoff=function(){this.writeLR((0|this.readLR())+((2047&this.execute)<<1)|0);var e=0|this.readPC();this.CPUCore.branch(-2&this.readLR()),this.writeLR((0|e)-2|1)},THUMBInstructionSet.prototype.UNDEFINED=function(){this.CPUCore.UNDEFINED()},compileTHUMBInstructionDecodeMap(),GameBoyAdvanceGraphicsRendererOffthread.prototype.initializeIO=GameBoyAdvanceGraphicsRenderer.prototype.initializeIO=__VIEWS_SUPPORTED__?function(e){this.displayControl=128,this.display=0,this.greenSwap=0,this.WINOutside=0,this.paletteRAM=getUint8Array(1024),this.VRAM=getUint8Array(98304),this.VRAM16=getUint16View(this.VRAM),this.VRAM32=getInt32View(this.VRAM),this.paletteRAM16=getUint16View(this.paletteRAM),this.paletteRAM32=getInt32View(this.paletteRAM),"object"==typeof SIMD&&"function"==typeof SIMD.Int32x4?this.buffer=getInt32Array(2304):this.buffer=getInt32Array(1664),this.lineBuffer=getInt32ViewCustom(this.buffer,0,240),this.frameBuffer=getInt32Array(38400),this.swizzledFrame=getUint8Array(115200),this.totalLinesPassed=0,this.queuedScanLines=0,this.lastUnrenderedLine=0,e&&(this.lastUnrenderedLine=124),this.backdrop=60817408}:function(e){this.displayControl=128,this.display=0,this.greenSwap=0,this.WINOutside=0,this.paletteRAM=getUint8Array(1024),this.VRAM=getUint8Array(98304),this.VRAM16=getUint16View(this.VRAM),this.VRAM32=getInt32View(this.VRAM),this.paletteRAM16=getUint16View(this.paletteRAM),this.paletteRAM32=getInt32View(this.paletteRAM),this.buffer=getInt32Array(1664),this.frameBuffer=getInt32Array(38400),this.swizzledFrame=getUint8Array(115200),this.totalLinesPassed=0,this.queuedScanLines=0,this.lastUnrenderedLine=0,e&&(this.lastUnrenderedLine=124),this.backdrop=60817408},GameBoyAdvanceGraphicsRendererOffthread.prototype.generateRenderers=GameBoyAdvanceGraphicsRenderer.prototype.generateRenderers=function(){this.compositor=new GameBoyAdvanceCompositor(this),this.bg0Renderer=new GameBoyAdvanceBGTEXTRenderer(this,0),this.bg1Renderer=new GameBoyAdvanceBGTEXTRenderer(this,1),this.bg2TextRenderer=new GameBoyAdvanceBGTEXTRenderer(this,2),this.bg3TextRenderer=new GameBoyAdvanceBGTEXTRenderer(this,3),this.bgAffineRenderer0=new GameBoyAdvanceAffineBGRenderer(this,2),this.bgAffineRenderer1=new GameBoyAdvanceAffineBGRenderer(this,3),this.bg2MatrixRenderer=new GameBoyAdvanceBGMatrixRenderer(this),this.bg3MatrixRenderer=new GameBoyAdvanceBGMatrixRenderer(this),this.bg2FrameBufferRenderer=new GameBoyAdvanceBG2FrameBufferRenderer(this),this.objRenderer=new GameBoyAdvanceOBJRenderer(this),this.window0Renderer=new GameBoyAdvanceWindowRenderer(new GameBoyAdvanceWindowCompositor(this)),this.window1Renderer=new GameBoyAdvanceWindowRenderer(new GameBoyAdvanceWindowCompositor(this)),this.objWindowRenderer=new GameBoyAdvanceOBJWindowRenderer(new GameBoyAdvanceOBJWindowCompositor(this)),this.mosaicRenderer=new GameBoyAdvanceMosaicRenderer(this.buffer),this.colorEffectsRenderer=new GameBoyAdvanceColorEffectsRenderer(this.buffer)},GameBoyAdvanceGraphicsRendererOffthread.prototype.initializeRenderers=GameBoyAdvanceGraphicsRenderer.prototype.initializeRenderers=function(){this.compositor.initialize(),this.compositorPreprocess(),this.bg0Renderer.initialize(),this.bg1Renderer.initialize(),this.bg2TextRenderer.initialize(),this.bg3TextRenderer.initialize(),this.bgAffineRenderer0.initialize(),this.bgAffineRenderer1.initialize(),this.bg2MatrixRenderer.initialize(),this.bg3MatrixRenderer.initialize(),this.bg2FrameBufferRenderer.initialize(),this.objRenderer.initialize(),this.window0Renderer.initialize(),this.window1Renderer.initialize(),this.objWindowRenderer.initialize()},GameBoyAdvanceGraphicsRendererOffthread.prototype.initializePaletteStorage=GameBoyAdvanceGraphicsRenderer.prototype.initializePaletteStorage=function(){this.palette256=getInt32Array(256),this.palette256[0]=58720256,this.paletteOBJ256=getInt32Array(256),this.paletteOBJ256[0]=58720256,this.palette16=getInt32Array(256),this.paletteOBJ16=getInt32Array(256);for(var e=0;(0|e)<16;e=1+(0|e)|0)this.palette16[e<<4]=58720256,this.paletteOBJ16[e<<4]=58720256},GameBoyAdvanceGraphicsRendererOffthread.prototype.swizzleFrameBuffer=GameBoyAdvanceGraphicsRenderer.prototype.swizzleFrameBuffer=function(){for(var e=0,t=0;(0|t)<115200;e=1+(0|e)|0)this.swizzledFrame[0|t]=(31&this.frameBuffer[0|e])<<3,t=1+(0|t)|0,this.swizzledFrame[0|t]=(992&this.frameBuffer[0|e])>>2,t=1+(0|t)|0,this.swizzledFrame[0|t]=(31744&this.frameBuffer[0|e])>>7,t=1+(0|t)|0},GameBoyAdvanceGraphicsRendererOffthread.prototype.prepareFrame=GameBoyAdvanceGraphicsRenderer.prototype.prepareFrame=function(){this.swizzleFrameBuffer(),this.requestDraw()},GameBoyAdvanceGraphicsRenderer.prototype.requestDraw=function(){this.coreExposed.graphicsHandle&&this.coreExposed.graphicsHandle.copyBuffer(this.swizzledFrame)},GameBoyAdvanceGraphicsRendererOffthread.prototype.requestDraw=function(){copyBuffer(this.swizzledFrame)},GameBoyAdvanceGraphicsRendererOffthread.prototype.graphicsJIT=function(){},GameBoyAdvanceGraphicsRenderer.prototype.graphicsJIT=function(){this.totalLinesPassed=0,this.graphicsJITScanlineGroup()},GameBoyAdvanceGraphicsRenderer.prototype.graphicsJITVBlank=function(){this.totalLinesPassed=(0|this.totalLinesPassed)+(0|this.queuedScanLines)|0,this.graphicsJITScanlineGroup()},GameBoyAdvanceGraphicsRenderer.prototype.graphicsJITScanlineGroup=function(){for(;(0|this.queuedScanLines)>0;)this.renderScanLine(),this.incrementScanLine(),this.queuedScanLines=(0|this.queuedScanLines)-1|0},GameBoyAdvanceGraphicsRenderer.prototype.incrementScanLineQueue=function(){(0|this.queuedScanLines)<160?this.queuedScanLines=1+(0|this.queuedScanLines)|0:this.incrementScanLine()},GameBoyAdvanceGraphicsRenderer.prototype.ensureFraming=function(){(0|this.totalLinesPassed)<160&&(this.graphicsJITVBlank(),this.prepareFrame())},GameBoyAdvanceGraphicsRendererOffthread.prototype.renderScanLine=GameBoyAdvanceGraphicsRenderer.prototype.renderScanLine=function(){var e=0|this.lastUnrenderedLine;if(0==(128&this.displayControl)){switch(7&this.displayControl){case 0:this.renderMode0(0|e);break;case 1:this.renderMode1(0|e);break;case 2:this.renderMode2(0|e);break;default:this.renderModeFrameBuffer(0|e)}this.copyLineToFrameBuffer(0|e)}else this.renderForcedBlank(0|e);this.updateReferenceCounters()},GameBoyAdvanceGraphicsRendererOffthread.prototype.incrementScanLine=GameBoyAdvanceGraphicsRenderer.prototype.incrementScanLine=function(){(0|this.lastUnrenderedLine)<159?this.lastUnrenderedLine=1+(0|this.lastUnrenderedLine)|0:this.lastUnrenderedLine=0},GameBoyAdvanceGraphicsRendererOffthread.prototype.renderMode0=GameBoyAdvanceGraphicsRenderer.prototype.renderMode0=function(e){e|=0;var t=31&this.display;0!=(1&t)&&this.bg0Renderer.renderScanLine(0|e),0!=(2&t)&&this.bg1Renderer.renderScanLine(0|e),0!=(4&t)&&this.bg2TextRenderer.renderScanLine(0|e),0!=(8&t)&&this.bg3TextRenderer.renderScanLine(0|e),0!=(16&t)&&this.objRenderer.renderScanLine(0|e),this.compositeLayers(0|t),this.compositeWindowedLayers(0|e,0|t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.renderMode1=GameBoyAdvanceGraphicsRenderer.prototype.renderMode1=function(e){e|=0;var t=23&this.display;0!=(1&t)&&this.bg0Renderer.renderScanLine(0|e),0!=(2&t)&&this.bg1Renderer.renderScanLine(0|e),0!=(4&t)&&this.bgAffineRenderer0.renderScanLine2M(0|e),0!=(16&t)&&this.objRenderer.renderScanLine(0|e),this.compositeLayers(0|t),this.compositeWindowedLayers(0|e,0|t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.renderMode2=GameBoyAdvanceGraphicsRenderer.prototype.renderMode2=function(e){e|=0;var t=28&this.display;0!=(4&t)&&this.bgAffineRenderer0.renderScanLine2M(0|e),0!=(8&t)&&this.bgAffineRenderer1.renderScanLine3M(0|e),0!=(16&t)&&this.objRenderer.renderScanLine(0|e),this.compositeLayers(0|t),this.compositeWindowedLayers(0|e,0|t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.renderModeFrameBuffer=GameBoyAdvanceGraphicsRenderer.prototype.renderModeFrameBuffer=function(e){e|=0;var t=20&this.display;0!=(4&t)&&this.bgAffineRenderer0.renderScanLine2F(0|e),0!=(16&t)&&this.objRenderer.renderScanLine(0|e),this.compositeLayers(0|t),this.compositeWindowedLayers(0|e,0|t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.compositeLayers=GameBoyAdvanceGraphicsRenderer.prototype.compositeLayers=function(e){e|=0,(224&this.display)>0&&(e&=this.WINOutside),this.compositor.renderScanLine(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.compositeWindowedLayers=GameBoyAdvanceGraphicsRenderer.prototype.compositeWindowedLayers=function(e,t){e|=0,t|=0,144==(144&this.display)&&this.objWindowRenderer.renderScanLine(0|e,0|t),0!=(64&this.display)&&this.window1Renderer.renderScanLine(0|e,0|t),0!=(32&this.display)&&this.window0Renderer.renderScanLine(0|e,0|t)},"function"==typeof Math.imul?(GameBoyAdvanceGraphicsRendererOffthread.prototype.copyLineToFrameBuffer=GameBoyAdvanceGraphicsRenderer.prototype.copyLineToFrameBuffer=function(e){e|=0;var t=0|Math.imul(0|e,240);0==(0|this.greenSwap)?this.copyLineToFrameBufferNormal(0|t):this.copyLineToFrameBufferGreenSwapped(0|t)},__LITTLE_ENDIAN__&&"function"==typeof Uint8Array.prototype.fill?GameBoyAdvanceGraphicsRendererOffthread.prototype.renderForcedBlank=GameBoyAdvanceGraphicsRenderer.prototype.renderForcedBlank=function(e){e|=0;var t=0|Math.imul(0|e,240),i=240+(0|t)|0;this.frameBuffer.fill(32767,0|t,0|i)}:GameBoyAdvanceGraphicsRendererOffthread.prototype.renderForcedBlank=GameBoyAdvanceGraphicsRenderer.prototype.renderForcedBlank=function(e){e|=0;for(var t=0|Math.imul(0|e,240),i=0;(0|i)<240;i=1+(0|i)|0)this.frameBuffer[0|t]=32767,t=1+(0|t)|0}):(GameBoyAdvanceGraphicsRendererOffthread.prototype.copyLineToFrameBuffer=GameBoyAdvanceGraphicsRenderer.prototype.copyLineToFrameBuffer=function(e){var t=240*e;0==this.greenSwap?this.copyLineToFrameBufferNormal(t):this.copyLineToFrameBufferGreenSwapped(t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.renderForcedBlank=GameBoyAdvanceGraphicsRenderer.prototype.renderForcedBlank=function(e){for(var t=240*e,i=0;i<240;++i)this.frameBuffer[t++]=32767}),__VIEWS_SUPPORTED__&&"function"==typeof Uint8Array.prototype.set?GameBoyAdvanceGraphicsRendererOffthread.prototype.copyLineToFrameBufferNormal=GameBoyAdvanceGraphicsRenderer.prototype.copyLineToFrameBufferNormal=function(e){e|=0,this.frameBuffer.set(this.lineBuffer,0|e)}:GameBoyAdvanceGraphicsRendererOffthread.prototype.copyLineToFrameBufferNormal=GameBoyAdvanceGraphicsRenderer.prototype.copyLineToFrameBufferNormal=function(e){e|=0;for(var t=0;(0|t)<240;t=1+(0|t)|0)this.frameBuffer[0|e]=0|this.buffer[0|t],e=1+(0|e)|0},GameBoyAdvanceGraphicsRendererOffthread.prototype.copyLineToFrameBufferGreenSwapped=GameBoyAdvanceGraphicsRenderer.prototype.copyLineToFrameBufferGreenSwapped=function(e){e|=0;for(var t=0,i=0,r=0;(0|t)<240;)i=0|this.buffer[0|t],t=1+(0|t)|0,r=0|this.buffer[0|t],t=1+(0|t)|0,this.frameBuffer[0|e]=31775&i|992&r,e=1+(0|e)|0,this.frameBuffer[0|e]=31775&r|992&i,e=1+(0|e)|0},GameBoyAdvanceGraphicsRendererOffthread.prototype.updateReferenceCounters=GameBoyAdvanceGraphicsRenderer.prototype.updateReferenceCounters=function(){159==(0|this.lastUnrenderedLine)?(this.bgAffineRenderer0.resetReferenceCounters(),this.bgAffineRenderer1.resetReferenceCounters()):(this.bgAffineRenderer0.incrementReferenceCounters(),this.bgAffineRenderer1.incrementReferenceCounters())},GameBoyAdvanceGraphicsRendererOffthread.prototype.compositorPreprocess=GameBoyAdvanceGraphicsRenderer.prototype.compositorPreprocess=function(){var e=32&this.WINOutside;0==(224&this.display)&&(e|=1),this.compositor.preprocess(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.frameBufferModePreprocess=GameBoyAdvanceGraphicsRenderer.prototype.frameBufferModePreprocess=function(e){e|=0,(0|(e=0|Math.min(7&e,5)))>2&&this.bg2FrameBufferRenderer.selectMode(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeDISPCNT8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeDISPCNT8_0=function(e){e|=0,this.graphicsJIT(),this.bg2FrameBufferRenderer.writeFrameSelect((16&e)<<27),this.objRenderer.setHBlankIntervalFreeStatus(32&e),this.frameBufferModePreprocess(0|e),this.displayControl=0|e},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeDISPCNT8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeDISPCNT8_1=function(e){e|=0,this.graphicsJIT(),this.display=255&e,this.compositorPreprocess()},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeDISPCNT8_2=GameBoyAdvanceGraphicsRenderer.prototype.writeDISPCNT8_2=function(e){e|=0,this.graphicsJIT(),this.greenSwap=1&e},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeDISPCNT16=GameBoyAdvanceGraphicsRenderer.prototype.writeDISPCNT16=function(e){e|=0,this.graphicsJIT(),this.bg2FrameBufferRenderer.writeFrameSelect((16&e)<<27),this.objRenderer.setHBlankIntervalFreeStatus(32&e),this.frameBufferModePreprocess(0|e),this.displayControl=0|e,this.display=e>>8,this.compositorPreprocess()},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeDISPCNT32=GameBoyAdvanceGraphicsRenderer.prototype.writeDISPCNT32=function(e){e|=0,this.graphicsJIT(),this.bg2FrameBufferRenderer.writeFrameSelect((16&e)<<27),this.objRenderer.setHBlankIntervalFreeStatus(32&e),this.frameBufferModePreprocess(0|e),this.displayControl=0|e,this.display=e>>8&255,this.compositorPreprocess(),this.greenSwap=65536&e},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0CNT8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0CNT8_0=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGCNT8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0CNT8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0CNT8_1=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGCNT8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0CNT16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0CNT16=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGCNT16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1CNT8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1CNT8_0=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGCNT8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1CNT8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1CNT8_1=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGCNT8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1CNT16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1CNT16=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGCNT16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0BG1CNT32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0BG1CNT32=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGCNT16(0|e),this.bg1Renderer.writeBGCNT16(e>>16)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2CNT8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2CNT8_0=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGCNT8_0(0|e),this.bgAffineRenderer0.setMosaicEnable(64&e),this.bgAffineRenderer0.priorityPreprocess(3&e),this.bg2MatrixRenderer.characterBaseBlockPreprocess((12&e)>>2)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2CNT8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2CNT8_1=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGCNT8_1(0|e),this.bg2MatrixRenderer.screenSizePreprocess((192&e)>>6),this.bg2MatrixRenderer.screenBaseBlockPreprocess(31&e),this.bg2MatrixRenderer.displayOverflowPreprocess(32&e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2CNT16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2CNT16=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGCNT16(0|e),this.bgAffineRenderer0.setMosaicEnable(64&e),this.bgAffineRenderer0.priorityPreprocess(3&e),this.bg2MatrixRenderer.characterBaseBlockPreprocess((12&e)>>2),this.bg2MatrixRenderer.screenSizePreprocess((49152&e)>>14),e>>=8,this.bg2MatrixRenderer.screenBaseBlockPreprocess(31&e),this.bg2MatrixRenderer.displayOverflowPreprocess(32&e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3CNT8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3CNT8_0=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGCNT8_0(0|e),this.bgAffineRenderer1.setMosaicEnable(64&e),this.bgAffineRenderer1.priorityPreprocess(3&e),this.bg3MatrixRenderer.characterBaseBlockPreprocess((12&e)>>2)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3CNT8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3CNT8_1=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGCNT8_1(0|e),this.bg3MatrixRenderer.screenSizePreprocess((192&e)>>6),this.bg3MatrixRenderer.screenBaseBlockPreprocess(31&e),this.bg3MatrixRenderer.displayOverflowPreprocess(32&e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3CNT16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3CNT16=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGCNT16(0|e),this.bgAffineRenderer1.setMosaicEnable(64&e),this.bgAffineRenderer1.priorityPreprocess(3&e),this.bg3MatrixRenderer.characterBaseBlockPreprocess((12&e)>>2),this.bg3MatrixRenderer.screenSizePreprocess((49152&e)>>14),e>>=8,this.bg3MatrixRenderer.screenBaseBlockPreprocess(31&e),this.bg3MatrixRenderer.displayOverflowPreprocess(32&e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2BG3CNT32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2BG3CNT32=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGCNT16(0|e),this.bgAffineRenderer0.setMosaicEnable(64&e),this.bgAffineRenderer0.priorityPreprocess(3&e),this.bg2MatrixRenderer.characterBaseBlockPreprocess((12&e)>>2),this.bg2MatrixRenderer.screenSizePreprocess((49152&e)>>14),this.bg2MatrixRenderer.screenBaseBlockPreprocess(e>>8&31),this.bg2MatrixRenderer.displayOverflowPreprocess(e>>8&32),e>>=16,this.bg3TextRenderer.writeBGCNT16(0|e),this.bgAffineRenderer1.setMosaicEnable(64&e),this.bgAffineRenderer1.priorityPreprocess(3&e),this.bg3MatrixRenderer.characterBaseBlockPreprocess((12&e)>>2),this.bg3MatrixRenderer.screenSizePreprocess((49152&e)>>14),e>>=8,this.bg3MatrixRenderer.screenBaseBlockPreprocess(31&e),this.bg3MatrixRenderer.displayOverflowPreprocess(32&e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0HOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0HOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGHOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0HOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0HOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGHOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0HOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0HOFS16=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGHOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0VOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0VOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGVOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0VOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0VOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGVOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0VOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0VOFS16=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGVOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG0OFS32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG0OFS32=function(e){e|=0,this.graphicsJIT(),this.bg0Renderer.writeBGOFS32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1HOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1HOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGHOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1HOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1HOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGHOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1HOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1HOFS16=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGHOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1VOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1VOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGVOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1VOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1VOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGVOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1VOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1VOFS16=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGVOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG1OFS32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG1OFS32=function(e){e|=0,this.graphicsJIT(),this.bg1Renderer.writeBGOFS32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2HOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2HOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGHOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2HOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2HOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGHOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2HOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2HOFS16=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGHOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2VOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2VOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGVOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2VOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2VOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGVOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2VOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2VOFS16=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGVOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2OFS32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2OFS32=function(e){e|=0,this.graphicsJIT(),this.bg2TextRenderer.writeBGOFS32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3HOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3HOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGHOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3HOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3HOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGHOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3HOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3HOFS16=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGHOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3VOFS8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3VOFS8_0=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGVOFS8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3VOFS8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3VOFS8_1=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGVOFS8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3VOFS16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3VOFS16=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGVOFS16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3OFS32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3OFS32=function(e){e|=0,this.graphicsJIT(),this.bg3TextRenderer.writeBGOFS32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PA8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PA8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPA8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PA8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PA8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPA8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PA16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PA16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPA16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PB8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PB8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPB8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PB8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PB8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPB8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PB16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PB16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPB16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PAB32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PAB32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPAB32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PC8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PC8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPC8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PC8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PC8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPC8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PC16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PC16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPC16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PD8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PD8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPD8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PD8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PD8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPD8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PD16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PD16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPD16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2PCD32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2PCD32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGPCD32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PA8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PA8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPA8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PA8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PA8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPA8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PA16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PA16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPA16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PB8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PB8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPB8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PB8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PB8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPB8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PB16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PB16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPB16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PAB32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PAB32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPAB32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PC8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PC8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPC8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PC8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PC8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPC8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PC16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PC16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPC16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PD8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PD8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPD8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PD8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PD8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPD8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PD16=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PD16=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPD16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3PCD32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3PCD32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGPCD32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2X8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2X8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGX8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2X8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2X8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGX8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2X8_2=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2X8_2=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGX8_2(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2X8_3=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2X8_3=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGX8_3(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2X16_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2X16_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGX16_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2X16_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2X16_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGX16_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2X32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2X32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGX32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2Y8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2Y8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGY8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2Y8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2Y8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGY8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2Y8_2=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2Y8_2=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGY8_2(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2Y8_3=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2Y8_3=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGY8_3(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2Y16_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2Y16_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGY16_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2Y16_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2Y16_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGY16_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG2Y32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG2Y32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer0.writeBGY32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3X8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3X8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGX8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3X8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3X8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGX8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3X8_2=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3X8_2=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGX8_2(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3X8_3=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3X8_3=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGX8_3(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3X16_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3X16_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGX16_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3X16_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3X16_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGX16_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3X32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3X32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGX32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3Y8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3Y8_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGY8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3Y8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3Y8_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGY8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3Y8_2=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3Y8_2=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGY8_2(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3Y8_3=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3Y8_3=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGY8_3(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3Y16_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3Y16_0=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGY16_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3Y16_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3Y16_1=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGY16_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBG3Y32=GameBoyAdvanceGraphicsRenderer.prototype.writeBG3Y32=function(e){e|=0,this.graphicsJIT(),this.bgAffineRenderer1.writeBGY32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN0XCOORDRight8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN0XCOORDRight8=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINXCOORDRight8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN0XCOORDLeft8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN0XCOORDLeft8=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINXCOORDLeft8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN0XCOORD16=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN0XCOORD16=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINXCOORD16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN1XCOORDRight8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN1XCOORDRight8=function(e){e|=0,this.graphicsJIT(),this.window1Renderer.writeWINXCOORDRight8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN1XCOORDLeft8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN1XCOORDLeft8=function(e){e|=0,this.graphicsJIT(),this.window1Renderer.writeWINXCOORDLeft8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN1XCOORD16=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN1XCOORD16=function(e){e|=0,this.graphicsJIT(),this.window1Renderer.writeWINXCOORD16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWINXCOORD32=GameBoyAdvanceGraphicsRenderer.prototype.writeWINXCOORD32=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINXCOORD16(65535&e),this.window1Renderer.writeWINXCOORD16(e>>>16)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN0YCOORDBottom8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN0YCOORDBottom8=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINYCOORDBottom8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN0YCOORDTop8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN0YCOORDTop8=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINYCOORDTop8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN0YCOORD16=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN0YCOORD16=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINYCOORD16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN1YCOORDBottom8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN1YCOORDBottom8=function(e){e|=0,this.graphicsJIT(),this.window1Renderer.writeWINYCOORDBottom8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN1YCOORDTop8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN1YCOORDTop8=function(e){e|=0,this.graphicsJIT(),this.window1Renderer.writeWINYCOORDTop8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN1YCOORD16=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN1YCOORD16=function(e){e|=0,this.graphicsJIT(),this.window1Renderer.writeWINYCOORD16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWINYCOORD32=GameBoyAdvanceGraphicsRenderer.prototype.writeWINYCOORD32=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWINYCOORD16(65535&e),this.window1Renderer.writeWINYCOORD16(e>>>16)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN0IN8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN0IN8=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWININ8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWIN1IN8=GameBoyAdvanceGraphicsRenderer.prototype.writeWIN1IN8=function(e){e|=0,this.graphicsJIT(),this.window1Renderer.writeWININ8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWININ16=GameBoyAdvanceGraphicsRenderer.prototype.writeWININ16=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWININ8(255&e),this.window1Renderer.writeWININ8(e>>8)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWINOUT8=GameBoyAdvanceGraphicsRenderer.prototype.writeWINOUT8=function(e){e|=0,this.graphicsJIT(),this.WINOutside=0|e,this.compositorPreprocess()},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWINOBJIN8=GameBoyAdvanceGraphicsRenderer.prototype.writeWINOBJIN8=function(e){e|=0,this.graphicsJIT(),this.objWindowRenderer.writeWINOBJIN8(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWINOUT16=GameBoyAdvanceGraphicsRenderer.prototype.writeWINOUT16=function(e){e|=0,this.graphicsJIT(),this.WINOutside=0|e,this.compositorPreprocess(),this.objWindowRenderer.writeWINOBJIN8(e>>8)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeWINCONTROL32=GameBoyAdvanceGraphicsRenderer.prototype.writeWINCONTROL32=function(e){e|=0,this.graphicsJIT(),this.window0Renderer.writeWININ8(255&e),this.window1Renderer.writeWININ8(e>>8&255),this.WINOutside=e>>16,this.compositorPreprocess(),this.objWindowRenderer.writeWINOBJIN8(e>>>24)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeMOSAIC8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeMOSAIC8_0=function(e){e|=0,this.graphicsJIT(),this.mosaicRenderer.writeMOSAIC8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeMOSAIC8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeMOSAIC8_1=function(e){e|=0,this.graphicsJIT(),this.mosaicRenderer.writeMOSAIC8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeMOSAIC16=GameBoyAdvanceGraphicsRenderer.prototype.writeMOSAIC16=function(e){e|=0,this.graphicsJIT(),this.mosaicRenderer.writeMOSAIC16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDCNT8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDCNT8_0=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDCNT8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDCNT8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDCNT8_1=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDCNT8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDCNT16=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDCNT16=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDCNT16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDALPHA8_0=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDALPHA8_0=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDALPHA8_0(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDALPHA8_1=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDALPHA8_1=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDALPHA8_1(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDALPHA16=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDALPHA16=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDALPHA16(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDCNT32=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDCNT32=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDCNT32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeBLDY8=GameBoyAdvanceGraphicsRenderer.prototype.writeBLDY8=function(e){e|=0,this.graphicsJIT(),this.colorEffectsRenderer.writeBLDY8(0|e)},__LITTLE_ENDIAN__?(GameBoyAdvanceGraphicsRendererOffthread.prototype.writeVRAM8=GameBoyAdvanceGraphicsRenderer.prototype.writeVRAM8=GameBoyAdvanceGraphicsRendererOffthread.prototype.writeVRAM16=GameBoyAdvanceGraphicsRenderer.prototype.writeVRAM16=function(e,t){e|=0,t|=0,this.graphicsJIT(),this.VRAM16[65535&e]=65535&t},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeVRAM32=GameBoyAdvanceGraphicsRenderer.prototype.writeVRAM32=function(e,t){e|=0,t|=0,this.graphicsJIT(),this.VRAM32[32767&e]=0|t},GameBoyAdvanceGraphicsRenderer.prototype.readVRAM16=function(e){return e|=0,0|this.VRAM16[65535&e]},GameBoyAdvanceGraphicsRenderer.prototype.readVRAM32=function(e){return e|=0,0|this.VRAM32[32767&e]},GameBoyAdvanceGraphicsRendererOffthread.prototype.writePalette16=GameBoyAdvanceGraphicsRenderer.prototype.writePalette16=function(e,t){t|=0,e|=0,this.graphicsJIT(),this.paletteRAM16[511&e]=65535&t,t&=32767,this.writePalette256Color(0|e,0|t),this.writePalette16Color(0|e,0|t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writePalette32=GameBoyAdvanceGraphicsRenderer.prototype.writePalette32=function(e,t){t|=0,e|=0,this.graphicsJIT(),this.paletteRAM32[255&e]=0|t,e<<=1;var i=32767&t;this.writePalette256Color(0|e,0|i),this.writePalette16Color(0|e,0|i),i=t>>16&32767,this.writePalette256Color(1|e,0|i),this.writePalette16Color(1|e,0|i)},GameBoyAdvanceGraphicsRenderer.prototype.readPalette16=function(e){return e|=0,0|this.paletteRAM16[511&e]},GameBoyAdvanceGraphicsRenderer.prototype.readPalette32=function(e){return e|=0,0|this.paletteRAM32[255&e]}):(GameBoyAdvanceGraphicsRendererOffthread.prototype.writeVRAM8=GameBoyAdvanceGraphicsRenderer.prototype.writeVRAM8=GameBoyAdvanceGraphicsRendererOffthread.prototype.writeVRAM16=GameBoyAdvanceGraphicsRenderer.prototype.writeVRAM16=function(e,t){e<<=1,e&=131070,this.graphicsJIT(),this.VRAM[e++]=255&t,this.VRAM[e]=t>>8&255},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeVRAM32=GameBoyAdvanceGraphicsRenderer.prototype.writeVRAM32=function(e,t){e<<=2,e&=131068,this.graphicsJIT(),this.VRAM[e++]=255&t,this.VRAM[e++]=t>>8&255,this.VRAM[e++]=t>>16&255,this.VRAM[e]=t>>>24},GameBoyAdvanceGraphicsRenderer.prototype.readVRAM16=function(e){return e<<=1,e&=131070,this.VRAM[e]|this.VRAM[e+1]<<8},GameBoyAdvanceGraphicsRenderer.prototype.readVRAM32=function(e){return e<<=2,e&=131068,this.VRAM[e]|this.VRAM[e+1]<<8|this.VRAM[e+2]<<16|this.VRAM[e+3]<<24},GameBoyAdvanceGraphicsRendererOffthread.prototype.writePalette16=GameBoyAdvanceGraphicsRenderer.prototype.writePalette16=function(e,t){this.graphicsJIT(),e<<=1,this.paletteRAM[e]=255&t,this.paletteRAM[1|e]=t>>8,t&=32767,e>>=1,this.writePalette256Color(e,t),this.writePalette16Color(e,t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writePalette32=GameBoyAdvanceGraphicsRenderer.prototype.writePalette32=function(e,t){this.graphicsJIT(),e<<=2,this.paletteRAM[e]=255&t,this.paletteRAM[1|e]=t>>8&255,this.paletteRAM[2|e]=t>>16&255,this.paletteRAM[3|e]=t>>>24,e>>=1;var i=32767&t;this.writePalette256Color(e,i),this.writePalette16Color(e,i),i=t>>16&32767,e|=1,this.writePalette256Color(e,i),this.writePalette16Color(e,i)},GameBoyAdvanceGraphicsRenderer.prototype.readPalette16=function(e){return e<<=1,e&=1022,this.paletteRAM[e]|this.paletteRAM[1|e]<<8},GameBoyAdvanceGraphicsRenderer.prototype.readPalette32=function(e){return e<<=2,e&=1020,this.paletteRAM[e]|this.paletteRAM[1|e]<<8|this.paletteRAM[2|e]<<16|this.paletteRAM[3|e]<<24}),GameBoyAdvanceGraphicsRenderer.prototype.readVRAM8=function(e){return e|=0,0|this.VRAM[131071&e]},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeOAM16=GameBoyAdvanceGraphicsRenderer.prototype.writeOAM16=function(e,t){e|=0,t|=0,this.graphicsJIT(),this.objRenderer.writeOAM16(511&e,65535&t)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writeOAM32=GameBoyAdvanceGraphicsRenderer.prototype.writeOAM32=function(e,t){e|=0,t|=0,this.graphicsJIT(),this.objRenderer.writeOAM32(255&e,0|t)},GameBoyAdvanceGraphicsRenderer.prototype.readOAM=function(e){return e|=0,0|this.objRenderer.readOAM(0|e)},GameBoyAdvanceGraphicsRenderer.prototype.readOAM16=function(e){return e|=0,0|this.objRenderer.readOAM16(0|e)},GameBoyAdvanceGraphicsRenderer.prototype.readOAM32=function(e){return e|=0,0|this.objRenderer.readOAM32(0|e)},GameBoyAdvanceGraphicsRendererOffthread.prototype.writePalette256Color=GameBoyAdvanceGraphicsRenderer.prototype.writePalette256Color=function(e,t){t|=0,0==(255&(e|=0))&&(t|=58720256,0==e&&(this.backdrop=2097152|t)),(0|e)<256?this.palette256[255&e]=0|t:this.paletteOBJ256[255&e]=0|t},GameBoyAdvanceGraphicsRendererOffthread.prototype.writePalette16Color=GameBoyAdvanceGraphicsRenderer.prototype.writePalette16Color=function(e,t){t|=0,0==(15&(e|=0))&&(t|=58720256),(0|e)<256?this.palette16[255&e]=0|t:this.paletteOBJ16[255&e]=0|t},GameBoyAdvanceGraphicsRenderer.prototype.readPalette8=function(e){return e|=0,0|this.paletteRAM[1023&e]},GameBoyAdvanceGraphicsRendererShim.prototype.initializeWorker=function(e){var t;e=!!e,t=(t=(t=location.href).split("/")).slice(0,t.length-1).join("/");try{if("undefined"==typeof WorkerGlobalScope||!(self instanceof WorkerGlobalScope))throw null;var i=t+"/graphics/Worker.js";this.worker=new Worker(i)}catch(e){var r=t+"/IodineGBA/core/graphics/Worker.js";this.worker=new Worker(r)}this.worker.postMessage({messageID:1,skippingBIOS:!!e})},GameBoyAdvanceGraphicsRendererShim.prototype.initializeBuffers=function(){this.gfxCommandBufferLength=524288,this.gfxCommandBufferMask=(0|this.gfxCommandBufferLength)-1|0,this.gfxCommandBuffer=getSharedInt32Array(0|this.gfxCommandBufferLength),this.gfxCommandCounters=getSharedInt32Array(3),this.gfxLineCounter=getSharedInt32Array(1),this.start=0,this.end=0,this.linesPassed=0,this.OAMRAM=getUint8Array(1024),this.OAMRAM16=getUint16View(this.OAMRAM),this.OAMRAM32=getInt32View(this.OAMRAM),this.paletteRAM=getUint8Array(1024),this.VRAM=getUint8Array(98304),this.VRAM16=getUint16View(this.VRAM),this.VRAM32=getInt32View(this.VRAM),this.paletteRAM16=getUint16View(this.paletteRAM),this.paletteRAM32=getInt32View(this.paletteRAM)},GameBoyAdvanceGraphicsRendererShim.prototype.increaseCommandBufferCapacity=function(){Atomics.store(this.gfxCommandCounters,2,1),this.gfxCommandBufferLength=this.gfxCommandBufferLength<<1,this.gfxCommandBufferMask=(0|this.gfxCommandBufferLength)-1|0,this.gfxCommandBuffer=getSharedInt32Array(0|this.gfxCommandBufferLength),this.gfxCommandCounters=getSharedInt32Array(3),this.start=0,this.end=0,this.shareDynamicBuffers()},GameBoyAdvanceGraphicsRendererShim.prototype.appendAtomicSync=function(){var e=this;this.coreExposed.appendStartIterationSync((function(){e.synchronizeReader()})),this.coreExposed.appendEndIterationSync((function(){e.synchronizeWriter()})),this.coreExposed.appendTerminationSync((function(){e.worker.terminate()}))},GameBoyAdvanceGraphicsRendererShim.prototype.shareStaticBuffers=function(){try{this.worker.postMessage({messageID:0,gfxBuffers:gfxBuffers,gfxCounters:gfxCounters,gfxLineCounter:this.gfxLineCounter},[gfxBuffers[0].buffer,gfxBuffers[1].buffer,gfxCounters.buffer,this.gfxLineCounter.buffer])}catch(e){this.worker.postMessage({messageID:0,gfxBuffers:gfxBuffers,gfxCounters:gfxCounters,gfxLineCounter:this.gfxLineCounter})}},GameBoyAdvanceGraphicsRendererShim.prototype.shareDynamicBuffers=function(){try{this.worker.postMessage({messageID:2,gfxCommandBuffer:this.gfxCommandBuffer,gfxCommandCounters:this.gfxCommandCounters},[this.gfxCommandBuffer.buffer,this.gfxCommandCounters.buffer])}catch(e){this.worker.postMessage({messageID:2,gfxCommandBuffer:this.gfxCommandBuffer,gfxCommandCounters:this.gfxCommandCounters})}Atomics.notify(gfxCounters,2,1)},GameBoyAdvanceGraphicsRendererShim.prototype.pushCommand=function(e,t){e|=0,t|=0,this.checkCommandBufferFull();var i=this.end&this.gfxCommandBufferMask;this.gfxCommandBuffer[0|i]=0|e,this.gfxCommandBuffer[1|i]=0|t,this.end=2+(0|this.end)|0},GameBoyAdvanceGraphicsRendererShim.prototype.checkCommandBufferFull=function(){(0|this.start)==((0|this.end)-(0|this.gfxCommandBufferLength)|0)&&(this.synchronizeWriter(),this.increaseCommandBufferCapacity(),this.synchronizeReader())},GameBoyAdvanceGraphicsRendererShim.prototype.synchronizeWriter=function(){Atomics.store(this.gfxCommandCounters,1,0|this.end),Atomics.store(this.gfxLineCounter,0,0|this.linesPassed)},GameBoyAdvanceGraphicsRendererShim.prototype.synchronizeReader=function(){this.start=0|Atomics.load(this.gfxCommandCounters,0)},GameBoyAdvanceGraphicsRendererShim.prototype.pushVRAM16=function(e,t){e|=0,t|=0,e&=65535,this.pushCommand(65536|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.pushVRAM32=function(e,t){e|=0,t|=0,e&=32767,this.pushCommand(131072|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.pushPAL16=function(e,t){e|=0,t|=0,e&=511,this.pushCommand(196608|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.pushPAL32=function(e,t){e|=0,t|=0,e&=255,this.pushCommand(262144|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.pushOAM16=function(e,t){e|=0,t|=0,e&=511,this.pushCommand(327680|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.pushOAM32=function(e,t){e|=0,t|=0,e&=255,this.pushCommand(393216|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.incrementScanLineQueue=function(){this.pushCommand(0,0),this.linesPassed=1+(0|this.linesPassed)|0},GameBoyAdvanceGraphicsRendererShim.prototype.ensureFraming=function(){this.pushCommand(0,1)},GameBoyAdvanceGraphicsRendererShim.prototype.writeDISPCNT8_0=function(e){e|=0,this.pushCommand(1,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeDISPCNT8_1=function(e){e|=0,this.pushCommand(2,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeDISPCNT8_2=function(e){e|=0,this.pushCommand(3,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeDISPCNT16=function(e){e|=0,this.pushCommand(4,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeDISPCNT32=function(e){e|=0,this.pushCommand(5,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0CNT8_0=function(e){e|=0,this.pushCommand(6,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0CNT8_1=function(e){e|=0,this.pushCommand(7,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0CNT16=function(e){e|=0,this.pushCommand(8,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1CNT8_0=function(e){e|=0,this.pushCommand(9,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1CNT8_1=function(e){e|=0,this.pushCommand(10,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1CNT16=function(e){e|=0,this.pushCommand(11,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0BG1CNT32=function(e){e|=0,this.pushCommand(12,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2CNT8_0=function(e){e|=0,this.pushCommand(13,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2CNT8_1=function(e){e|=0,this.pushCommand(14,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2CNT16=function(e){e|=0,this.pushCommand(15,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3CNT8_0=function(e){e|=0,this.pushCommand(16,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3CNT8_1=function(e){e|=0,this.pushCommand(17,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3CNT16=function(e){e|=0,this.pushCommand(18,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2BG3CNT32=function(e){e|=0,this.pushCommand(19,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0HOFS8_0=function(e){e|=0,this.pushCommand(20,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0HOFS8_1=function(e){e|=0,this.pushCommand(21,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0HOFS16=function(e){e|=0,this.pushCommand(22,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0VOFS8_0=function(e){e|=0,this.pushCommand(23,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0VOFS8_1=function(e){e|=0,this.pushCommand(24,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0VOFS16=function(e){e|=0,this.pushCommand(25,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG0OFS32=function(e){e|=0,this.pushCommand(26,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1HOFS8_0=function(e){e|=0,this.pushCommand(27,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1HOFS8_1=function(e){e|=0,this.pushCommand(28,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1HOFS16=function(e){e|=0,this.pushCommand(29,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1VOFS8_0=function(e){e|=0,this.pushCommand(30,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1VOFS8_1=function(e){e|=0,this.pushCommand(31,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1VOFS16=function(e){e|=0,this.pushCommand(32,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG1OFS32=function(e){e|=0,this.pushCommand(33,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2HOFS8_0=function(e){e|=0,this.pushCommand(34,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2HOFS8_1=function(e){e|=0,this.pushCommand(35,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2HOFS16=function(e){e|=0,this.pushCommand(36,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2VOFS8_0=function(e){e|=0,this.pushCommand(37,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2VOFS8_1=function(e){e|=0,this.pushCommand(38,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2VOFS16=function(e){e|=0,this.pushCommand(39,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2OFS32=function(e){e|=0,this.pushCommand(40,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3HOFS8_0=function(e){e|=0,this.pushCommand(41,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3HOFS8_1=function(e){e|=0,this.pushCommand(42,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3HOFS16=function(e){e|=0,this.pushCommand(43,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3VOFS8_0=function(e){e|=0,this.pushCommand(44,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3VOFS8_1=function(e){e|=0,this.pushCommand(45,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3VOFS16=function(e){e|=0,this.pushCommand(46,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3OFS32=function(e){e|=0,this.pushCommand(47,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PA8_0=function(e){e|=0,this.pushCommand(48,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PA8_1=function(e){e|=0,this.pushCommand(49,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PA16=function(e){e|=0,this.pushCommand(50,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PB8_0=function(e){e|=0,this.pushCommand(51,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PB8_1=function(e){e|=0,this.pushCommand(52,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PB16=function(e){e|=0,this.pushCommand(53,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PAB32=function(e){e|=0,this.pushCommand(54,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PC8_0=function(e){e|=0,this.pushCommand(55,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PC8_1=function(e){e|=0,this.pushCommand(56,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PC16=function(e){e|=0,this.pushCommand(57,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PD8_0=function(e){e|=0,this.pushCommand(58,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PD8_1=function(e){e|=0,this.pushCommand(59,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PD16=function(e){e|=0,this.pushCommand(60,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2PCD32=function(e){e|=0,this.pushCommand(61,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PA8_0=function(e){e|=0,this.pushCommand(62,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PA8_1=function(e){e|=0,this.pushCommand(63,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PA16=function(e){e|=0,this.pushCommand(64,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PB8_0=function(e){e|=0,this.pushCommand(65,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PB8_1=function(e){e|=0,this.pushCommand(66,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PB16=function(e){e|=0,this.pushCommand(67,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PAB32=function(e){e|=0,this.pushCommand(68,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PC8_0=function(e){e|=0,this.pushCommand(69,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PC8_1=function(e){e|=0,this.pushCommand(70,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PC16=function(e){e|=0,this.pushCommand(71,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PD8_0=function(e){e|=0,this.pushCommand(72,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PD8_1=function(e){e|=0,this.pushCommand(73,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PD16=function(e){e|=0,this.pushCommand(74,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3PCD32=function(e){e|=0,this.pushCommand(75,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2X8_0=function(e){e|=0,this.pushCommand(76,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2X8_1=function(e){e|=0,this.pushCommand(77,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2X8_2=function(e){e|=0,this.pushCommand(78,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2X8_3=function(e){e|=0,this.pushCommand(79,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2X16_0=function(e){e|=0,this.pushCommand(80,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2X16_1=function(e){e|=0,this.pushCommand(81,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2X32=function(e){e|=0,this.pushCommand(82,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2Y8_0=function(e){e|=0,this.pushCommand(83,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2Y8_1=function(e){e|=0,this.pushCommand(84,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2Y8_2=function(e){e|=0,this.pushCommand(85,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2Y8_3=function(e){e|=0,this.pushCommand(86,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2Y16_0=function(e){e|=0,this.pushCommand(87,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2Y16_1=function(e){e|=0,this.pushCommand(88,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG2Y32=function(e){e|=0,this.pushCommand(89,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3X8_0=function(e){e|=0,this.pushCommand(90,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3X8_1=function(e){e|=0,this.pushCommand(91,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3X8_2=function(e){e|=0,this.pushCommand(92,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3X8_3=function(e){e|=0,this.pushCommand(93,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3X16_0=function(e){e|=0,this.pushCommand(94,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3X16_1=function(e){e|=0,this.pushCommand(95,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3X32=function(e){e|=0,this.pushCommand(96,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3Y8_0=function(e){e|=0,this.pushCommand(97,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3Y8_1=function(e){e|=0,this.pushCommand(98,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3Y8_2=function(e){e|=0,this.pushCommand(99,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3Y8_3=function(e){e|=0,this.pushCommand(100,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3Y16_0=function(e){e|=0,this.pushCommand(101,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3Y16_1=function(e){e|=0,this.pushCommand(102,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBG3Y32=function(e){e|=0,this.pushCommand(103,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN0XCOORDRight8=function(e){e|=0,this.pushCommand(104,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN0XCOORDLeft8=function(e){e|=0,this.pushCommand(105,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN0XCOORD16=function(e){e|=0,this.pushCommand(106,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN1XCOORDRight8=function(e){e|=0,this.pushCommand(107,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN1XCOORDLeft8=function(e){e|=0,this.pushCommand(108,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN1XCOORD16=function(e){e|=0,this.pushCommand(109,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWINXCOORD32=function(e){e|=0,this.pushCommand(110,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN0YCOORDBottom8=function(e){e|=0,this.pushCommand(111,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN0YCOORDTop8=function(e){e|=0,this.pushCommand(112,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN0YCOORD16=function(e){e|=0,this.pushCommand(113,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN1YCOORDBottom8=function(e){e|=0,this.pushCommand(114,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN1YCOORDTop8=function(e){e|=0,this.pushCommand(115,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN1YCOORD16=function(e){e|=0,this.pushCommand(116,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWINYCOORD32=function(e){e|=0,this.pushCommand(117,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN0IN8=function(e){e|=0,this.pushCommand(118,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWIN1IN8=function(e){e|=0,this.pushCommand(119,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWININ16=function(e){e|=0,this.pushCommand(120,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWINOUT8=function(e){e|=0,this.pushCommand(121,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWINOBJIN8=function(e){e|=0,this.pushCommand(122,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWINOUT16=function(e){e|=0,this.pushCommand(123,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeWINCONTROL32=function(e){e|=0,this.pushCommand(124,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeMOSAIC8_0=function(e){e|=0,this.pushCommand(125,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeMOSAIC8_1=function(e){e|=0,this.pushCommand(126,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeMOSAIC16=function(e){e|=0,this.pushCommand(127,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDCNT8_0=function(e){e|=0,this.pushCommand(128,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDCNT8_1=function(e){e|=0,this.pushCommand(129,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDCNT16=function(e){e|=0,this.pushCommand(130,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDALPHA8_0=function(e){e|=0,this.pushCommand(131,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDALPHA8_1=function(e){e|=0,this.pushCommand(132,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDALPHA16=function(e){e|=0,this.pushCommand(133,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDCNT32=function(e){e|=0,this.pushCommand(134,0|e)},GameBoyAdvanceGraphicsRendererShim.prototype.writeBLDY8=function(e){e|=0,this.pushCommand(135,0|e)},__LITTLE_ENDIAN__?(GameBoyAdvanceGraphicsRendererShim.prototype.writeVRAM8=GameBoyAdvanceGraphicsRendererShim.prototype.writeVRAM16=function(e,t){e|=0,t|=0,this.VRAM16[65535&e]=65535&t,this.pushVRAM16(0|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.writeVRAM32=function(e,t){e|=0,t|=0,this.VRAM32[32767&e]=0|t,this.pushVRAM32(0|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.readVRAM16=function(e){return e|=0,0|this.VRAM16[65535&e]},GameBoyAdvanceGraphicsRendererShim.prototype.readVRAM32=function(e){return e|=0,0|this.VRAM32[32767&e]},GameBoyAdvanceGraphicsRendererShim.prototype.writePalette16=function(e,t){t|=0,e|=0,this.paletteRAM16[511&e]=65535&t,this.pushPAL16(0|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.writePalette32=function(e,t){t|=0,e|=0,this.paletteRAM32[255&e]=0|t,this.pushPAL32(0|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.readPalette16=function(e){return e|=0,0|this.paletteRAM16[511&e]},GameBoyAdvanceGraphicsRendererShim.prototype.readPalette32=function(e){return e|=0,0|this.paletteRAM32[255&e]},GameBoyAdvanceGraphicsRendererShim.prototype.writeOAM16=function(e,t){e|=0,t|=0,this.OAMRAM16[511&e]=65535&t,this.pushOAM16(0|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.writeOAM32=function(e,t){e|=0,t|=0,this.OAMRAM32[255&e]=0|t,this.pushOAM32(0|e,0|t)},GameBoyAdvanceGraphicsRendererShim.prototype.readOAM16=function(e){return e|=0,0|this.OAMRAM16[511&e]},GameBoyAdvanceGraphicsRendererShim.prototype.readOAM32=function(e){return e|=0,0|this.OAMRAM32[255&e]}):(GameBoyAdvanceGraphicsRendererShim.prototype.writeVRAM8=GameBoyAdvanceGraphicsRendererShim.prototype.writeVRAM16=function(e,t){e<<=1,e&=131070,this.VRAM[e]=255&t,this.VRAM[e+1]=t>>8&255,this.pushVRAM16(e,t)},GameBoyAdvanceGraphicsRendererShim.prototype.writeVRAM32=function(e,t){e<<=2,e&=131068,this.VRAM[e]=255&t,this.VRAM[e+1]=t>>8&255,this.VRAM[e+2]=t>>16&255,this.VRAM[e+3]=t>>>24,this.pushVRAM32(e,t)},GameBoyAdvanceGraphicsRendererShim.prototype.readVRAM16=function(e){return e<<=1,e&=131070,this.VRAM[e]|this.VRAM[e+1]<<8},GameBoyAdvanceGraphicsRendererShim.prototype.readVRAM32=function(e){return e<<=2,e&=131068,this.VRAM[e]|this.VRAM[e+1]<<8|this.VRAM[e+2]<<16|this.VRAM[e+3]<<24},GameBoyAdvanceGraphicsRendererShim.prototype.writePalette16=function(e,t){this.paletteRAM[e<<1]=255&t,this.paletteRAM[1+(e<<1)]=t>>8,this.pushPAL16(e,t)},GameBoyAdvanceGraphicsRendererShim.prototype.writePalette32=function(e,t){e<<=2,this.paletteRAM[e]=255&t,this.paletteRAM[1|e]=t>>8&255,this.paletteRAM[2|e]=t>>16&255,this.paletteRAM[3|e]=t>>>24,e>>=2,this.pushPAL32(e,t)},GameBoyAdvanceGraphicsRendererShim.prototype.readPalette16=function(e){return e&=1022,this.paletteRAM[e]|this.paletteRAM[1|e]<<8},GameBoyAdvanceGraphicsRendererShim.prototype.readPalette32=function(e){return e&=1020,this.paletteRAM[e]|this.paletteRAM[1|e]<<8|this.paletteRAM[2|e]<<16|this.paletteRAM[3|e]<<24},GameBoyAdvanceGraphicsRendererShim.prototype.writeOAM16=function(e,t){e&=511,this.OAMRAM[e<<1]=255&t,this.OAMRAM[e<<1|1]=t>>8,this.pushOAM16(e,t)},GameBoyAdvanceGraphicsRendererShim.prototype.writeOAM32=function(e,t){e&=255,e<<=2,this.OAMRAM[e]=255&t,this.OAMRAM[e+1]=t>>8&255,this.OAMRAM[e+2]=t>>16&255,this.OAMRAM[e+3]=t>>>24,e>>=2,this.pushOAM32(e,t)},GameBoyAdvanceGraphicsRendererShim.prototype.readOAM16=function(e){return e&=511,e<<=1,this.OAMRAM[e]|this.OAMRAM[1|e]<<8},GameBoyAdvanceGraphicsRendererShim.prototype.readOAM32=function(e){return e&=255,e<<=2,this.OAMRAM[e]|this.OAMRAM[1|e]<<8|this.OAMRAM[2|e]<<16|this.OAMRAM[3|e]<<24}),GameBoyAdvanceGraphicsRendererShim.prototype.readVRAM8=function(e){return e|=0,0|this.VRAM[131071&e]},GameBoyAdvanceGraphicsRendererShim.prototype.readOAM=function(e){return e|=0,0|this.OAMRAM[1023&e]},GameBoyAdvanceGraphicsRendererShim.prototype.readPalette8=function(e){return e|=0,0|this.paletteRAM[1023&e]},GameBoyAdvanceRendererProxy.prototype.initialize=function(){this.IOData8=getUint8Array(20),this.IOData16=getUint16View(this.IOData8),this.IOData32=getInt32View(this.IOData8),this.gfxState=this.IOCore.gfxState,this.renderer=getGameBoyAdvanceGraphicsRenderer(this.IOCore.coreExposed,!!this.IOCore.SKIPBoot)},GameBoyAdvanceRendererProxy.prototype.incrementScanLineQueue=function(){this.renderer.incrementScanLineQueue()},GameBoyAdvanceRendererProxy.prototype.ensureFraming=function(){this.renderer.ensureFraming()},GameBoyAdvanceRendererProxy.prototype.writeDISPCNT8_0=function(e){e|=0,e&=247,this.IOCore.updateGraphicsClocking(),this.IOData8[0]=0|e,this.renderer.writeDISPCNT8_0(0|e),this.gfxState.isRenderingCheckPreprocess()},GameBoyAdvanceRendererProxy.prototype.readDISPCNT8_0=function(){return 0|this.IOData8[0]},GameBoyAdvanceRendererProxy.prototype.writeDISPCNT8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.IOData8[1]=0|e,this.renderer.writeDISPCNT8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.readDISPCNT8_1=function(){return 0|this.IOData8[1]},GameBoyAdvanceRendererProxy.prototype.writeDISPCNT8_2=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.IOData8[2]=0|e,this.renderer.writeDISPCNT8_2(0|e)},GameBoyAdvanceRendererProxy.prototype.readDISPCNT8_2=function(){return 0|this.IOData8[2]},__LITTLE_ENDIAN__?(GameBoyAdvanceRendererProxy.prototype.writeDISPCNT16=function(e){e|=0,e&=65527,this.IOCore.updateGraphicsClocking(),this.IOData16[0]=0|e,this.renderer.writeDISPCNT16(0|e),this.gfxState.isRenderingCheckPreprocess()},GameBoyAdvanceRendererProxy.prototype.readDISPCNT16=function(){return 0|this.IOData16[0]},GameBoyAdvanceRendererProxy.prototype.writeDISPCNT32=function(e){e|=0,e&=131063,this.IOCore.updateGraphicsClocking(),this.IOData32[0]=0|e,this.renderer.writeDISPCNT32(0|e),this.gfxState.isRenderingCheckPreprocess()},GameBoyAdvanceRendererProxy.prototype.readDISPCNT32=function(){return 0|this.IOData32[0]}):(GameBoyAdvanceRendererProxy.prototype.writeDISPCNT16=function(e){e|=0,e&=65527,this.IOCore.updateGraphicsClocking(),this.IOData8[0]=247&e,this.IOData8[1]=e>>8,this.renderer.writeDISPCNT16(0|e),this.gfxState.isRenderingCheckPreprocess()},GameBoyAdvanceRendererProxy.prototype.readDISPCNT16=function(){return this.IOData8[0]|this.IOData8[1]<<8},GameBoyAdvanceRendererProxy.prototype.writeDISPCNT32=function(e){e|=0,e&=131063,this.IOCore.updateGraphicsClocking(),this.IOData8[0]=247&e,this.IOData8[1]=e>>8&255,this.IOData8[2]=e>>16,this.renderer.writeDISPCNT32(0|e),this.gfxState.isRenderingCheckPreprocess()},GameBoyAdvanceRendererProxy.prototype.readDISPCNT32=function(){return this.IOData8[0]|this.IOData8[1]<<8|this.IOData8[2]<<16}),GameBoyAdvanceRendererProxy.prototype.writeBG0CNT8_0=function(e){e|=0,e&=207,this.IOCore.updateGraphicsClocking(),this.IOData8[4]=0|e,this.renderer.writeBG0CNT8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG0CNT8_0=function(){return 0|this.IOData8[4]},GameBoyAdvanceRendererProxy.prototype.writeBG0CNT8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.IOData8[5]=0|e,this.renderer.writeBG0CNT8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG0CNT8_1=function(){return 0|this.IOData8[5]},GameBoyAdvanceRendererProxy.prototype.writeBG1CNT8_0=function(e){e|=0,e&=207,this.IOCore.updateGraphicsClocking(),this.IOData8[6]=0|e,this.renderer.writeBG1CNT8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG1CNT8_0=function(){return 0|this.IOData8[6]},GameBoyAdvanceRendererProxy.prototype.writeBG1CNT8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.IOData8[7]=0|e,this.renderer.writeBG1CNT8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG1CNT8_1=function(){return 0|this.IOData8[7]},__LITTLE_ENDIAN__?(GameBoyAdvanceRendererProxy.prototype.writeBG0CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData16[2]=0|e,this.renderer.writeBG0CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData16[3]=0|e,this.renderer.writeBG1CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0BG1CNT32=function(e){e|=0,e&=4291821519,this.IOCore.updateGraphicsClocking(),this.IOData32[1]=0|e,this.renderer.writeBG0BG1CNT32(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG0CNT16=function(){return 0|this.IOData16[2]},GameBoyAdvanceRendererProxy.prototype.readBG1CNT16=function(){return 0|this.IOData16[3]},GameBoyAdvanceRendererProxy.prototype.readBG0BG1CNT32=function(){return 0|this.IOData32[1]}):(GameBoyAdvanceRendererProxy.prototype.writeBG0CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData8[4]=255&e,this.IOData8[5]=e>>8,this.renderer.writeBG0CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData8[6]=255&e,this.IOData8[7]=e>>8,this.renderer.writeBG1CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0BG1CNT32=function(e){e|=0,e&=4291821519,this.IOCore.updateGraphicsClocking(),this.IOData8[4]=255&e,this.IOData8[5]=e>>8&255,this.IOData8[6]=e>>16&255,this.IOData8[7]=e>>>24,this.renderer.writeBG0BG1CNT32(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG0CNT16=function(){return this.IOData8[4]|this.IOData8[5]<<8},GameBoyAdvanceRendererProxy.prototype.readBG1CNT16=function(){return this.IOData8[6]|this.IOData8[7]<<8},GameBoyAdvanceRendererProxy.prototype.readBG0BG1CNT32=function(){return this.IOData8[4]|this.IOData8[5]<<8|this.IOData8[6]<<16|this.IOData8[7]<<24}),GameBoyAdvanceRendererProxy.prototype.writeBG2CNT8_0=function(e){e|=0,e&=207,this.IOCore.updateGraphicsClocking(),this.IOData8[8]=0|e,this.renderer.writeBG2CNT8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG2CNT8_0=function(){return 0|this.IOData8[8]},GameBoyAdvanceRendererProxy.prototype.writeBG2CNT8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.IOData8[9]=0|e,this.renderer.writeBG2CNT8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG2CNT8_1=function(){return 0|this.IOData8[9]},GameBoyAdvanceRendererProxy.prototype.writeBG3CNT8_0=function(e){e|=0,e&=207,this.IOCore.updateGraphicsClocking(),this.IOData8[10]=0|e,this.renderer.writeBG3CNT8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG3CNT8_0=function(){return 0|this.IOData8[10]},GameBoyAdvanceRendererProxy.prototype.writeBG3CNT8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.IOData8[11]=0|e,this.renderer.writeBG3CNT8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG3CNT8_1=function(){return 0|this.IOData8[11]},__LITTLE_ENDIAN__?(GameBoyAdvanceRendererProxy.prototype.writeBG2CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData16[4]=0|e,this.renderer.writeBG2CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData16[5]=0|e,this.renderer.writeBG3CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2BG3CNT32=function(e){e|=0,e&=4291821519,this.IOCore.updateGraphicsClocking(),this.IOData32[2]=0|e,this.renderer.writeBG2BG3CNT32(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG2CNT16=function(){return 0|this.IOData16[4]},GameBoyAdvanceRendererProxy.prototype.readBG3CNT16=function(){return 0|this.IOData16[5]},GameBoyAdvanceRendererProxy.prototype.readBG2BG3CNT32=function(){return 0|this.IOData32[2]}):(GameBoyAdvanceRendererProxy.prototype.writeBG2CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData8[8]=255&e,this.IOData8[9]=e>>8,this.renderer.writeBG2CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3CNT16=function(e){e|=0,e&=65487,this.IOCore.updateGraphicsClocking(),this.IOData8[10]=255&e,this.IOData8[11]=e>>8,this.renderer.writeBG3CNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2BG3CNT32=function(e){e|=0,e&=4291821519,this.IOCore.updateGraphicsClocking(),this.IOData8[8]=255&e,this.IOData8[9]=e>>8&255,this.IOData8[10]=e>>16&255,this.IOData8[11]=e>>>24,this.renderer.writeBG2BG3CNT32(0|e)},GameBoyAdvanceRendererProxy.prototype.readBG2CNT16=function(){return this.IOData8[8]|this.IOData8[9]<<8},GameBoyAdvanceRendererProxy.prototype.readBG3CNT16=function(){return this.IOData8[10]|this.IOData8[11]<<8},GameBoyAdvanceRendererProxy.prototype.readBG2BG3CNT32=function(){return this.IOData8[8]|this.IOData8[9]<<8|this.IOData8[10]<<16|this.IOData8[11]<<24}),GameBoyAdvanceRendererProxy.prototype.writeBG0HOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG0HOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0HOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG0HOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0HOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG0HOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0VOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG0VOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0VOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG0VOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0VOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG0VOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG0OFS32=function(e){e|=0,e&=33489407,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG0OFS32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1HOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG1HOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1HOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG1HOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1HOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG1HOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1VOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG1VOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1VOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG1VOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1VOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG1VOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG1OFS32=function(e){e|=0,e&=33489407,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG1OFS32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2HOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2HOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2HOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2HOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2HOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2HOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2VOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2VOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2VOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2VOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2VOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2VOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2OFS32=function(e){e|=0,e&=33489407,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2OFS32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3HOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3HOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3HOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3HOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3HOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3HOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3VOFS8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3VOFS8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3VOFS8_1=function(e){e|=0,e&=1,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3VOFS8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3VOFS16=function(e){e|=0,e&=511,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3VOFS16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3OFS32=function(e){e|=0,e&=33489407,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3OFS32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PA8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PA8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PA8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PA8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PA16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PA16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PB8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PB8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PB8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PB8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PB16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PB16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PAB32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PAB32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PC8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PC8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PC8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PC8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PC16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PC16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PD8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PD8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PD8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PD8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PD16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PD16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2PCD32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2PCD32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PA8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PA8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PA8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PA8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PA16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PA16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PB8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PB8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PB8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PB8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PB16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PB16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PAB32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PAB32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PC8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PC8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PC8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PC8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PC16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PC16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PD8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PD8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PD8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PD8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PD16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PD16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3PCD32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3PCD32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2X8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2X8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2X8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2X8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2X8_2=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2X8_2(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2X8_3=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2X8_3(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2X16_0=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2X16_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2X16_1=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2X16_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2X32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2X32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2Y8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2Y8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2Y8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2Y8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2Y8_2=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2Y8_2(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2Y8_3=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2Y8_3(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2Y16_0=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2Y16_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2Y16_1=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2Y16_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG2Y32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG2Y32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3X8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3X8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3X8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3X8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3X8_2=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3X8_2(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3X8_3=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3X8_3(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3X16_0=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3X16_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3X16_1=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3X16_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3X32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3X32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3Y8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3Y8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3Y8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3Y8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3Y8_2=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3Y8_2(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3Y8_3=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3Y8_3(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3Y16_0=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3Y16_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3Y16_1=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3Y16_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBG3Y32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeBG3Y32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN0XCOORDRight8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN0XCOORDRight8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN0XCOORDLeft8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN0XCOORDLeft8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN0XCOORD16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN0XCOORD16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN1XCOORDRight8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN1XCOORDRight8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN1XCOORDLeft8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN1XCOORDLeft8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN1XCOORD16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN1XCOORD16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWINXCOORD32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeWINXCOORD32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN0YCOORDBottom8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN0YCOORDBottom8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN0YCOORDTop8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN0YCOORDTop8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN0YCOORD16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN0YCOORD16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN1YCOORDBottom8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN1YCOORDBottom8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN1YCOORDTop8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN1YCOORDTop8(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN1YCOORD16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeWIN1YCOORD16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWINYCOORD32=function(e){e|=0,this.IOCore.updateGraphicsClocking(),this.renderer.writeWINYCOORD32(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWIN0IN8=function(e){e|=0,e&=63,this.IOCore.updateGraphicsClocking(),this.IOData8[12]=0|e,this.renderer.writeWIN0IN8(0|e)},GameBoyAdvanceRendererProxy.prototype.readWIN0IN8=function(){return 0|this.IOData8[12]},GameBoyAdvanceRendererProxy.prototype.writeWIN1IN8=function(e){e|=0,e&=63,this.IOCore.updateGraphicsClocking(),this.IOData8[13]=0|e,this.renderer.writeWIN1IN8(0|e)},GameBoyAdvanceRendererProxy.prototype.readWIN1IN8=function(){return 0|this.IOData8[13]},GameBoyAdvanceRendererProxy.prototype.writeWINOUT8=function(e){e|=0,e&=63,this.IOCore.updateGraphicsClocking(),this.IOData8[14]=0|e,this.renderer.writeWINOUT8(0|e)},GameBoyAdvanceRendererProxy.prototype.readWINOUT8=function(){return 0|this.IOData8[14]},GameBoyAdvanceRendererProxy.prototype.writeWINOBJIN8=function(e){e|=0,e&=63,this.IOCore.updateGraphicsClocking(),this.IOData8[15]=0|e,this.renderer.writeWINOBJIN8(0|e)},GameBoyAdvanceRendererProxy.prototype.readWINOBJIN8=function(){return 0|this.IOData8[15]},__LITTLE_ENDIAN__?(GameBoyAdvanceRendererProxy.prototype.writeWININ16=function(e){e|=0,e&=16191,this.IOCore.updateGraphicsClocking(),this.IOData16[6]=0|e,this.renderer.writeWININ16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWINOUT16=function(e){e|=0,e&=16191,this.IOCore.updateGraphicsClocking(),this.IOData16[7]=0|e,this.renderer.writeWINOUT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWINCONTROL32=function(e){e|=0,e&=1061109567,this.IOCore.updateGraphicsClocking(),this.IOData32[3]=0|e,this.renderer.writeWINCONTROL32(0|e)},GameBoyAdvanceRendererProxy.prototype.readWININ16=function(){return 0|this.IOData16[6]},GameBoyAdvanceRendererProxy.prototype.readWINOUT16=function(){return 0|this.IOData16[7]},GameBoyAdvanceRendererProxy.prototype.readWINCONTROL32=function(){return 0|this.IOData32[3]}):(GameBoyAdvanceRendererProxy.prototype.writeWININ16=function(e){e|=0,e&=16191,this.IOCore.updateGraphicsClocking(),this.IOData8[12]=255&e,this.IOData8[13]=e>>8,this.renderer.writeWININ16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWINOUT16=function(e){e|=0,e&=16191,this.IOCore.updateGraphicsClocking(),this.IOData8[14]=255&e,this.IOData8[15]=e>>8,this.renderer.writeWINOUT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeWINCONTROL32=function(e){e|=0,e&=1061109567,this.IOCore.updateGraphicsClocking(),this.IOData8[12]=255&e,this.IOData8[13]=e>>8&255,this.IOData8[14]=e>>16&255,this.IOData8[15]=e>>>24,this.renderer.writeWINCONTROL32(0|e)},GameBoyAdvanceRendererProxy.prototype.readWININ16=function(){return this.IOData8[12]|this.IOData8[13]<<8},GameBoyAdvanceRendererProxy.prototype.readWINOUT16=function(){return this.IOData8[14]|this.IOData8[15]<<8},GameBoyAdvanceRendererProxy.prototype.readWINCONTROL32=function(){return this.IOData8[12]|this.IOData8[13]<<8|this.IOData8[14]<<16|this.IOData8[15]<<24}),GameBoyAdvanceRendererProxy.prototype.writeMOSAIC8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeMOSAIC8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.writeMOSAIC8_1=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeMOSAIC8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.writeMOSAIC16=function(e){e|=0,e&=65535,this.IOCore.updateGraphicsClocking(),this.renderer.writeMOSAIC16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBLDCNT8_0=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.IOData8[16]=0|e,this.renderer.writeBLDCNT8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.readBLDCNT8_0=function(){return 0|this.IOData8[16]},GameBoyAdvanceRendererProxy.prototype.writeBLDCNT8_1=function(e){e|=0,e&=63,this.IOCore.updateGraphicsClocking(),this.IOData8[17]=0|e,this.renderer.writeBLDCNT8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.readBLDCNT8_1=function(){return 0|this.IOData8[17]},GameBoyAdvanceRendererProxy.prototype.writeBLDALPHA8_0=function(e){e|=0,e&=31,this.IOCore.updateGraphicsClocking(),this.IOData8[18]=0|e,this.renderer.writeBLDALPHA8_0(0|e)},GameBoyAdvanceRendererProxy.prototype.readBLDALPHA8_0=function(){return 0|this.IOData8[18]},GameBoyAdvanceRendererProxy.prototype.writeBLDALPHA8_1=function(e){e|=0,e&=31,this.IOCore.updateGraphicsClocking(),this.IOData8[19]=0|e,this.renderer.writeBLDALPHA8_1(0|e)},GameBoyAdvanceRendererProxy.prototype.readBLDALPHA8_1=function(){return 0|this.IOData8[19]},__LITTLE_ENDIAN__?(GameBoyAdvanceRendererProxy.prototype.writeBLDCNT16=function(e){e|=0,e&=16383,this.IOCore.updateGraphicsClocking(),this.IOData16[8]=0|e,this.renderer.writeBLDCNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBLDALPHA16=function(e){e|=0,e&=7967,this.IOCore.updateGraphicsClocking(),this.IOData16[9]=0|e,this.renderer.writeBLDALPHA16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBLDCNT32=function(e){e|=0,e&=522141695,this.IOCore.updateGraphicsClocking(),this.IOData32[4]=0|e,this.renderer.writeBLDCNT32(0|e)},GameBoyAdvanceRendererProxy.prototype.readBLDCNT16=function(){return 0|this.IOData16[8]},GameBoyAdvanceRendererProxy.prototype.readBLDALPHA16=function(){return 0|this.IOData16[9]},GameBoyAdvanceRendererProxy.prototype.readBLDCNT32=function(){return 0|this.IOData32[4]}):(GameBoyAdvanceRendererProxy.prototype.writeBLDCNT16=function(e){e|=0,e&=16383,this.IOCore.updateGraphicsClocking(),this.IOData8[16]=255&e,this.IOData8[17]=e>>8,this.renderer.writeBLDCNT16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBLDALPHA16=function(e){e|=0,e&=7967,this.IOCore.updateGraphicsClocking(),this.IOData8[18]=255&e,this.IOData8[19]=e>>8,this.renderer.writeBLDALPHA16(0|e)},GameBoyAdvanceRendererProxy.prototype.writeBLDCNT32=function(e){e|=0,e&=522141695,this.IOCore.updateGraphicsClocking(),this.IOData8[16]=255&e,this.IOData8[17]=e>>8&255,this.IOData8[18]=e>>16&255,this.IOData8[19]=e>>>24,this.renderer.writeBLDCNT32(0|e)},GameBoyAdvanceRendererProxy.prototype.readBLDCNT16=function(){return this.IOData8[16]|this.IOData8[17]<<8},GameBoyAdvanceRendererProxy.prototype.readBLDALPHA16=function(){return this.IOData8[18]|this.IOData8[19]<<8},GameBoyAdvanceRendererProxy.prototype.readBLDCNT32=function(){return this.IOData8[16]|this.IOData8[17]<<8|this.IOData8[18]<<16|this.IOData8[19]<<24}),GameBoyAdvanceRendererProxy.prototype.writeBLDY8=function(e){e|=0,e&=255,this.IOCore.updateGraphicsClocking(),this.renderer.writeBLDY8(0|e)},"function"==typeof Math.imul?GameBoyAdvanceRendererProxy.prototype.writeVRAM8=function(e,t){t|=0,(0==(65536&(e|=0))||(98303&e)<81920&&(7&this.IOData8[0])>=3)&&(e&=(65536&e)>>1^e,e>>=1,t=0|Math.imul(255&t,257),this.renderer.writeVRAM8(0|e,0|t))}:GameBoyAdvanceRendererProxy.prototype.writeVRAM8=function(e,t){t|=0,(0==(65536&(e|=0))||(98303&e)<81920&&(7&this.IOData8[0])>=3)&&(e&=(65536&e)>>1^e,e>>=1,t=257*(255&t),this.renderer.writeVRAM8(0|e,0|t))},GameBoyAdvanceRendererProxy.prototype.writeVRAM16=function(e,t){e|=0,t|=0,e&=(65536&e)>>1^e,this.renderer.writeVRAM16(e>>1,0|t)},GameBoyAdvanceRendererProxy.prototype.writeVRAM32=function(e,t){e|=0,t|=0,e&=(65536&e)>>1^e,this.renderer.writeVRAM32(e>>2,0|t)},GameBoyAdvanceRendererProxy.prototype.readVRAM16=function(e){return e|=0,e&=(65536&e)>>1^e,0|(0|this.renderer.readVRAM16(e>>1))},GameBoyAdvanceRendererProxy.prototype.readVRAM32=function(e){return e|=0,e&=(65536&e)>>1^e,0|(0|this.renderer.readVRAM32(e>>2))},GameBoyAdvanceRendererProxy.prototype.writePalette16=function(e,t){t|=0,e|=0,this.renderer.writePalette16(e>>1,0|t)},GameBoyAdvanceRendererProxy.prototype.writePalette32=function(e,t){t|=0,e|=0,this.renderer.writePalette32(e>>2,0|t)},GameBoyAdvanceRendererProxy.prototype.readPalette16=function(e){return e|=0,0|(0|this.renderer.readPalette16(e>>1))},GameBoyAdvanceRendererProxy.prototype.readPalette32=function(e){return e|=0,0|(0|this.renderer.readPalette32(e>>2))},GameBoyAdvanceRendererProxy.prototype.readVRAM8=function(e){return e|=0,e&=(65536&e)>>1^e,0|(0|this.renderer.readVRAM8(0|e))},GameBoyAdvanceRendererProxy.prototype.writeOAM16=function(e,t){e|=0,t|=0,this.renderer.writeOAM16(e>>1,0|t)},GameBoyAdvanceRendererProxy.prototype.writeOAM32=function(e,t){e|=0,t|=0,this.renderer.writeOAM32(e>>2,0|t)},GameBoyAdvanceRendererProxy.prototype.readOAM=function(e){return e|=0,0|(0|this.renderer.readOAM(0|e))},GameBoyAdvanceRendererProxy.prototype.readOAM16=function(e){return e|=0,0|(0|this.renderer.readOAM16(e>>1))},GameBoyAdvanceRendererProxy.prototype.readOAM32=function(e){return e|=0,0|(0|this.renderer.readOAM32(e>>2))},GameBoyAdvanceRendererProxy.prototype.readPalette8=function(e){return e|=0,0|(0|this.renderer.readPalette8(0|e))},__VIEWS_SUPPORTED__?(GameBoyAdvanceBGTEXTRenderer.prototype.initialize=function(){this.VRAM=this.gfx.VRAM,this.VRAM16=this.gfx.VRAM16,this.VRAM32=this.gfx.VRAM32,this.palette16=this.gfx.palette16,this.palette256=this.gfx.palette256,this.offset=256+(this.BGLayer<<8)|0,this.scratchBuffer=getInt32ViewCustom(this.gfx.buffer,0|this.offset,248+(0|this.offset)|0),this.tileFetched=getInt32ViewCustom(this.gfx.buffer,248+(0|this.offset)|0,256+(0|this.offset)|0),this.BGXCoord=0,this.BGYCoord=0,this.do256=0,this.doMosaic=0,this.screenSizePreprocess(0),this.priorityPreprocess(0),this.screenBaseBlockPreprocess(0),this.characterBaseBlockPreprocess(0)},GameBoyAdvanceBGTEXTRenderer.prototype.renderWholeTiles8BIT=function(e,t,i){e|=0,t|=0,i|=0;for(var r=8-(7&this.BGXCoord)|0;(0|r)<240;r=8+(0|r)|0)this.process8BitVRAM(0|this.fetchTile(0|t,0|e),0|i),this.scratchBuffer[0|r]=0|this.tileFetched[0],this.scratchBuffer[1+(0|r)|0]=0|this.tileFetched[1],this.scratchBuffer[2+(0|r)|0]=0|this.tileFetched[2],this.scratchBuffer[3+(0|r)|0]=0|this.tileFetched[3],this.scratchBuffer[4+(0|r)|0]=0|this.tileFetched[4],this.scratchBuffer[5+(0|r)|0]=0|this.tileFetched[5],this.scratchBuffer[6+(0|r)|0]=0|this.tileFetched[6],this.scratchBuffer[7+(0|r)|0]=0|this.tileFetched[7],e=1+(0|e)|0},GameBoyAdvanceBGTEXTRenderer.prototype.renderWholeTiles4BIT=function(e,t,i){e|=0,t|=0,i|=0;for(var r=8-(7&this.BGXCoord)|0;(0|r)<240;r=8+(0|r)|0)this.process4BitVRAM(0|this.fetchTile(0|t,0|e),0|i),this.scratchBuffer[0|r]=0|this.tileFetched[0],this.scratchBuffer[1+(0|r)|0]=0|this.tileFetched[1],this.scratchBuffer[2+(0|r)|0]=0|this.tileFetched[2],this.scratchBuffer[3+(0|r)|0]=0|this.tileFetched[3],this.scratchBuffer[4+(0|r)|0]=0|this.tileFetched[4],this.scratchBuffer[5+(0|r)|0]=0|this.tileFetched[5],this.scratchBuffer[6+(0|r)|0]=0|this.tileFetched[6],this.scratchBuffer[7+(0|r)|0]=0|this.tileFetched[7],e=1+(0|e)|0},GameBoyAdvanceBGTEXTRenderer.prototype.fetchVRAMStart=function(){var e=7&this.BGXCoord;switch(0|e){case 0:this.scratchBuffer[0]=0|this.tileFetched[0];case 1:this.scratchBuffer[1-(0|e)|0]=0|this.tileFetched[1];case 2:this.scratchBuffer[2-(0|e)|0]=0|this.tileFetched[2];case 3:this.scratchBuffer[3-(0|e)|0]=0|this.tileFetched[3];case 4:this.scratchBuffer[4-(0|e)|0]=0|this.tileFetched[4];case 5:this.scratchBuffer[5-(0|e)|0]=0|this.tileFetched[5];case 6:this.scratchBuffer[6-(0|e)|0]=0|this.tileFetched[6];default:this.scratchBuffer[7-(0|e)|0]=0|this.tileFetched[7]}}):(GameBoyAdvanceBGTEXTRenderer.prototype.initialize=function(){this.VRAM=this.gfx.VRAM,this.VRAM16=this.gfx.VRAM16,this.VRAM32=this.gfx.VRAM32,this.palette16=this.gfx.palette16,this.palette256=this.gfx.palette256,this.offset=256+(this.BGLayer<<8),this.offsetEnd=this.offset+240,this.scratchBuffer=this.gfx.buffer,this.tileFetched=getInt32Array(8),this.BGXCoord=0,this.BGYCoord=0,this.do256=0,this.doMosaic=0,this.screenSizePreprocess(0),this.priorityPreprocess(0),this.screenBaseBlockPreprocess(0),this.characterBaseBlockPreprocess(0)},GameBoyAdvanceBGTEXTRenderer.prototype.renderWholeTiles8BIT=function(e,t,i){for(var r=8-(7&this.BGXCoord)+this.offset;r<this.offsetEnd;)this.process8BitVRAM(this.fetchTile(t,e++),i),this.scratchBuffer[r++]=this.tileFetched[0],this.scratchBuffer[r++]=this.tileFetched[1],this.scratchBuffer[r++]=this.tileFetched[2],this.scratchBuffer[r++]=this.tileFetched[3],this.scratchBuffer[r++]=this.tileFetched[4],this.scratchBuffer[r++]=this.tileFetched[5],this.scratchBuffer[r++]=this.tileFetched[6],this.scratchBuffer[r++]=this.tileFetched[7]},GameBoyAdvanceBGTEXTRenderer.prototype.renderWholeTiles4BIT=function(e,t,i){for(var r=8-(7&this.BGXCoord)+this.offset;r<this.offsetEnd;)this.process4BitVRAM(this.fetchTile(t,e++),i),this.scratchBuffer[r++]=this.tileFetched[0],this.scratchBuffer[r++]=this.tileFetched[1],this.scratchBuffer[r++]=this.tileFetched[2],this.scratchBuffer[r++]=this.tileFetched[3],this.scratchBuffer[r++]=this.tileFetched[4],this.scratchBuffer[r++]=this.tileFetched[5],this.scratchBuffer[r++]=this.tileFetched[6],this.scratchBuffer[r++]=this.tileFetched[7]},GameBoyAdvanceBGTEXTRenderer.prototype.fetchVRAMStart=function(){var e=7&this.BGXCoord,t=e-this.offset;switch(0|e){case 0:this.scratchBuffer[t]=this.tileFetched[0];case 1:this.scratchBuffer[1-t]=this.tileFetched[1];case 2:this.scratchBuffer[2-t]=this.tileFetched[2];case 3:this.scratchBuffer[3-t]=this.tileFetched[3];case 4:this.scratchBuffer[4-t]=this.tileFetched[4];case 5:this.scratchBuffer[5-t]=this.tileFetched[5];case 6:this.scratchBuffer[6-t]=this.tileFetched[6];default:this.scratchBuffer[7-t]=this.tileFetched[7]}}),GameBoyAdvanceBGTEXTRenderer.prototype.renderScanLine=function(e){e|=0,0!=(0|this.doMosaic)&&(e=(0|e)-(0|this.gfx.mosaicRenderer.getMosaicYOffset(0|e))|0);var t=(0|e)+(0|this.BGYCoord)&7,i=(0|e)+(0|this.BGYCoord)>>3,r=this.BGXCoord>>3;0!=(0|this.do256)?this.render8BITLine(0|i,0|r,0|t):this.render4BITLine(0|i,0|r,0|t),0!=(0|this.doMosaic)&&this.gfx.mosaicRenderer.renderMosaicHorizontal(0|this.offset)},GameBoyAdvanceBGTEXTRenderer.prototype.render8BITLine=function(e,t,i){e|=0,t|=0,i|=0;var r=0|this.fetchTile(0|e,0|t);t=1+(0|t)|0,this.process8BitVRAM(0|r,0|i),this.fetchVRAMStart(),this.renderWholeTiles8BIT(0|t,0|e,0|i)},GameBoyAdvanceBGTEXTRenderer.prototype.render4BITLine=function(e,t,i){var r=0|this.fetchTile(0|e,0|t);t=1+(0|t)|0,this.process4BitVRAM(0|r,0|i),this.fetchVRAMStart(),this.renderWholeTiles4BIT(0|t,0|e,0|i)},GameBoyAdvanceBGTEXTRenderer.prototype.fetchTile=__LITTLE_ENDIAN__?function(e,t){e|=0,t|=0;var i=(0|this.computeTileNumber(0|e,0|t))+(0|this.BGScreenBaseBlock)|0;return 0|this.VRAM16[32767&i]}:function(e,t){var i=this.computeTileNumber(e,t)+this.BGScreenBaseBlock<<1&65535;return this.VRAM[1|i]<<8|this.VRAM[i]},GameBoyAdvanceBGTEXTRenderer.prototype.computeTileNumber=function(e,t){e|=0;var i=31&(t|=0);switch(0|this.tileMode){case 0:i|=(31&e)<<5;break;case 1:i|=(32&t|31&e)<<5;break;case 2:i|=(63&e)<<5;break;default:i=i|(32&t|31&e)<<5|(32&e)<<6}return 0|i},GameBoyAdvanceBGTEXTRenderer.prototype.process4BitVRAM=function(e,t){t|=0;var i=(1023&(e|=0))<<3;i=(0|i)+(0|this.BGCharacterBaseBlock)|0,i=0==(2048&e)?(0|i)+(0|t)|0:(0|(i=7+(0|i)|0))-(0|t)|0,this.render4BitVRAM(e>>8,0|i)},GameBoyAdvanceBGTEXTRenderer.prototype.render4BitVRAM=__LITTLE_ENDIAN__?function(e,t){if(e|=0,(0|(t|=0))<16384){var i=240&e,r=0|this.VRAM32[0|t];0==(4&e)?(this.tileFetched[0]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[1]=this.palette16[i|r>>4&15]|this.priorityFlag,this.tileFetched[2]=this.palette16[i|r>>8&15]|this.priorityFlag,this.tileFetched[3]=this.palette16[i|r>>12&15]|this.priorityFlag,this.tileFetched[4]=this.palette16[i|r>>16&15]|this.priorityFlag,this.tileFetched[5]=this.palette16[i|r>>20&15]|this.priorityFlag,this.tileFetched[6]=this.palette16[i|r>>24&15]|this.priorityFlag,this.tileFetched[7]=this.palette16[i|r>>>28]|this.priorityFlag):(this.tileFetched[0]=this.palette16[i|r>>>28]|this.priorityFlag,this.tileFetched[1]=this.palette16[i|r>>24&15]|this.priorityFlag,this.tileFetched[2]=this.palette16[i|r>>20&15]|this.priorityFlag,this.tileFetched[3]=this.palette16[i|r>>16&15]|this.priorityFlag,this.tileFetched[4]=this.palette16[i|r>>12&15]|this.priorityFlag,this.tileFetched[5]=this.palette16[i|r>>8&15]|this.priorityFlag,this.tileFetched[6]=this.palette16[i|r>>4&15]|this.priorityFlag,this.tileFetched[7]=this.palette16[i|15&r]|this.priorityFlag)}else this.addressInvalidRender()}:function(e,t){if((t<<=2)<65536){var i=240&e,r=this.VRAM[t];0==(4&e)?(this.tileFetched[0]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[1]=this.palette16[i|r>>4]|this.priorityFlag,r=this.VRAM[1|t],this.tileFetched[2]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[3]=this.palette16[i|r>>4]|this.priorityFlag,r=this.VRAM[2|t],this.tileFetched[4]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[5]=this.palette16[i|r>>4]|this.priorityFlag,r=this.VRAM[3|t],this.tileFetched[6]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[7]=this.palette16[i|r>>4]|this.priorityFlag):(this.tileFetched[7]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[6]=this.palette16[i|r>>4]|this.priorityFlag,r=this.VRAM[1|t],this.tileFetched[5]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[4]=this.palette16[i|r>>4]|this.priorityFlag,r=this.VRAM[2|t],this.tileFetched[3]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[2]=this.palette16[i|r>>4]|this.priorityFlag,r=this.VRAM[3|t],this.tileFetched[1]=this.palette16[i|15&r]|this.priorityFlag,this.tileFetched[0]=this.palette16[i|r>>4]|this.priorityFlag)}else this.addressInvalidRender()},GameBoyAdvanceBGTEXTRenderer.prototype.process8BitVRAM=function(e,t){t|=0;var i=(1023&(e|=0))<<4;switch(i=(0|i)+(0|this.BGCharacterBaseBlock)|0,3072&e){case 0:i=(0|i)+(t<<1)|0,this.render8BitVRAMNormal(0|i);break;case 1024:i=(0|i)+(t<<1)|0,this.render8BitVRAMFlipped(0|i);break;case 2048:i=(0|(i=14+(0|i)|0))-(t<<1)|0,this.render8BitVRAMNormal(0|i);break;default:i=(0|(i=14+(0|i)|0))-(t<<1)|0,this.render8BitVRAMFlipped(0|i)}},__LITTLE_ENDIAN__?(GameBoyAdvanceBGTEXTRenderer.prototype.render8BitVRAMNormal=function(e){if((0|(e|=0))<16384){var t=0|this.VRAM32[0|e];this.tileFetched[0]=this.palette256[255&t]|this.priorityFlag,this.tileFetched[1]=this.palette256[t>>8&255]|this.priorityFlag,this.tileFetched[2]=this.palette256[t>>16&255]|this.priorityFlag,this.tileFetched[3]=this.palette256[t>>>24]|this.priorityFlag,t=0|this.VRAM32[1|e],this.tileFetched[4]=this.palette256[255&t]|this.priorityFlag,this.tileFetched[5]=this.palette256[t>>8&255]|this.priorityFlag,this.tileFetched[6]=this.palette256[t>>16&255]|this.priorityFlag,this.tileFetched[7]=this.palette256[t>>>24]|this.priorityFlag}else this.addressInvalidRender()},GameBoyAdvanceBGTEXTRenderer.prototype.render8BitVRAMFlipped=function(e){if((0|(e|=0))<16384){var t=0|this.VRAM32[0|e];this.tileFetched[4]=this.palette256[t>>>24]|this.priorityFlag,this.tileFetched[5]=this.palette256[t>>16&255]|this.priorityFlag,this.tileFetched[6]=this.palette256[t>>8&255]|this.priorityFlag,this.tileFetched[7]=this.palette256[255&t]|this.priorityFlag,t=0|this.VRAM32[1|e],this.tileFetched[0]=this.palette256[t>>>24]|this.priorityFlag,this.tileFetched[1]=this.palette256[t>>16&255]|this.priorityFlag,this.tileFetched[2]=this.palette256[t>>8&255]|this.priorityFlag,this.tileFetched[3]=this.palette256[255&t]|this.priorityFlag}else this.addressInvalidRender()}):(GameBoyAdvanceBGTEXTRenderer.prototype.render8BitVRAMNormal=function(e){(e<<=2)<65536?(this.tileFetched[0]=this.palette256[this.VRAM[e]]|this.priorityFlag,this.tileFetched[1]=this.palette256[this.VRAM[1|e]]|this.priorityFlag,this.tileFetched[2]=this.palette256[this.VRAM[2|e]]|this.priorityFlag,this.tileFetched[3]=this.palette256[this.VRAM[3|e]]|this.priorityFlag,this.tileFetched[4]=this.palette256[this.VRAM[4|e]]|this.priorityFlag,this.tileFetched[5]=this.palette256[this.VRAM[5|e]]|this.priorityFlag,this.tileFetched[6]=this.palette256[this.VRAM[6|e]]|this.priorityFlag,this.tileFetched[7]=this.palette256[this.VRAM[7|e]]|this.priorityFlag):this.addressInvalidRender()},GameBoyAdvanceBGTEXTRenderer.prototype.render8BitVRAMFlipped=function(e){(e<<=2)<65536?(this.tileFetched[7]=this.palette256[this.VRAM[e]]|this.priorityFlag,this.tileFetched[6]=this.palette256[this.VRAM[1|e]]|this.priorityFlag,this.tileFetched[5]=this.palette256[this.VRAM[2|e]]|this.priorityFlag,this.tileFetched[4]=this.palette256[this.VRAM[3|e]]|this.priorityFlag,this.tileFetched[3]=this.palette256[this.VRAM[4|e]]|this.priorityFlag,this.tileFetched[2]=this.palette256[this.VRAM[5|e]]|this.priorityFlag,this.tileFetched[1]=this.palette256[this.VRAM[6|e]]|this.priorityFlag,this.tileFetched[0]=this.palette256[this.VRAM[7|e]]|this.priorityFlag):this.addressInvalidRender()}),GameBoyAdvanceBGTEXTRenderer.prototype.addressInvalidRender=function(){var e=this.gfx.transparency|this.priorityFlag;this.tileFetched[0]=0|e,this.tileFetched[1]=0|e,this.tileFetched[2]=0|e,this.tileFetched[3]=0|e,this.tileFetched[4]=0|e,this.tileFetched[5]=0|e,this.tileFetched[6]=0|e,this.tileFetched[7]=0|e},GameBoyAdvanceBGTEXTRenderer.prototype.setMosaicEnable=function(e){e|=0,this.doMosaic=0|e},GameBoyAdvanceBGTEXTRenderer.prototype.paletteModeSelect=function(e){e|=0,this.do256=0|e},GameBoyAdvanceBGTEXTRenderer.prototype.screenSizePreprocess=function(e){e|=0,this.tileMode=0|e},GameBoyAdvanceBGTEXTRenderer.prototype.priorityPreprocess=function(e){e|=0,this.priorityFlag=e<<23|1<<(16|this.BGLayer)},GameBoyAdvanceBGTEXTRenderer.prototype.screenBaseBlockPreprocess=function(e){e|=0,this.BGScreenBaseBlock=e<<10},GameBoyAdvanceBGTEXTRenderer.prototype.characterBaseBlockPreprocess=function(e){e|=0,this.BGCharacterBaseBlock=e<<12},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGCNT8_0=function(e){e|=0,this.setMosaicEnable(64&e),this.paletteModeSelect(128&e),this.priorityPreprocess(3&e),this.characterBaseBlockPreprocess((12&e)>>2)},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGCNT8_1=function(e){e|=0,this.screenSizePreprocess((192&e)>>6),this.screenBaseBlockPreprocess(31&e)},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGCNT16=function(e){e|=0,this.setMosaicEnable(64&e),this.paletteModeSelect(128&e),this.priorityPreprocess(3&e),this.characterBaseBlockPreprocess((12&e)>>2),this.screenSizePreprocess((49152&e)>>14),this.screenBaseBlockPreprocess(e>>8&31)},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGHOFS8_0=function(e){e|=0,this.BGXCoord=256&this.BGXCoord|e},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGHOFS8_1=function(e){e|=0,this.BGXCoord=e<<8|255&this.BGXCoord},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGHOFS16=function(e){e|=0,this.BGXCoord=0|e},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGVOFS8_0=function(e){e|=0,this.BGYCoord=256&this.BGYCoord|e},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGVOFS8_1=function(e){e|=0,this.BGYCoord=e<<8|255&this.BGYCoord},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGVOFS16=function(e){e|=0,this.BGYCoord=0|e},GameBoyAdvanceBGTEXTRenderer.prototype.writeBGOFS32=function(e){e|=0,this.BGXCoord=511&e,this.BGYCoord=e>>16},GameBoyAdvanceBG2FrameBufferRenderer.prototype.initialize=function(){this.palette=this.gfx.palette256,this.VRAM=this.gfx.VRAM,this.VRAM16=this.gfx.VRAM16,this.fetchPixel=this.fetchMode3Pixel,this.frameSelect=0},GameBoyAdvanceBG2FrameBufferRenderer.prototype.selectMode=function(e){switch(0|(e|=0)){case 3:this.fetchPixel=this.fetchMode3Pixel;break;case 4:this.fetchPixel=this.fetchMode4Pixel;break;case 5:this.fetchPixel=this.fetchMode5Pixel}},__LITTLE_ENDIAN__?"function"==typeof Math.imul?(GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode3Pixel=function(e,t){if(t|=0,(e|=0)>>>0<240&&t>>>0<160){var i=Math.imul(0|t,240)+(0|e)|0;return 32767&this.VRAM16[65535&i]}return 58720256},GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode5Pixel=function(e,t){if(t|=0,(e|=0)>>>0<160&&t>>>0<128){var i=(0|this.frameSelect)+Math.imul(0|t,160)+(0|e)|0;return 32767&this.VRAM16[65535&i]}return 58720256}):(GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode3Pixel=function(e,t){if(t|=0,(e|=0)>>>0<240&&t>>>0<160){var i=(240*t|0)+(0|e)|0;return 32767&this.VRAM16[65535&i]}return 58720256},GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode5Pixel=function(e,t){if(t|=0,(e|=0)>>>0<160&&t>>>0<128){var i=(0|this.frameSelect)+(160*t|0)+(0|e)|0;return 32767&this.VRAM16[65535&i]}return 58720256}):"function"==typeof Math.imul?(GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode3Pixel=function(e,t){if(t|=0,(e|=0)>>>0<240&&t>>>0<160){var i=Math.imul(0|t,240)+(0|e)<<1;return 32767&(this.VRAM[1|i]<<8|this.VRAM[0|i])}return 58720256},GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode5Pixel=function(e,t){if(t|=0,(e|=0)>>>0<160&&t>>>0<128){var i=(0|this.frameSelect)+(Math.imul(0|t,160)+(0|e)<<1)|0;return 32767&(this.VRAM[1|i]<<8|this.VRAM[0|i])}return 58720256}):(GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode3Pixel=function(e,t){if(e>>>0<240&&t>>>0<160){var i=240*t+e<<1;return 32767&(this.VRAM[1|i]<<8|this.VRAM[i])}return 58720256},GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode5Pixel=function(e,t){if(e>>>0<160&&t>>>0<128){var i=this.frameSelect+(160*t+e<<1);return 32767&(this.VRAM[1|i]<<8|this.VRAM[i])}return 58720256}),"function"==typeof Math.imul?GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode4Pixel=function(e,t){if(t|=0,(e|=0)>>>0<240&&t>>>0<160){var i=(0|this.frameSelect)+(0|Math.imul(0|t,240))+(0|e)|0;return 0|this.palette[255&this.VRAM[0|i]]}return 58720256}:GameBoyAdvanceBG2FrameBufferRenderer.prototype.fetchMode4Pixel=function(e,t){return e>>>0<240&&t>>>0<160?this.palette[this.VRAM[this.frameSelect+240*t+e]]:58720256},GameBoyAdvanceBG2FrameBufferRenderer.prototype.writeFrameSelect=function(e){e>>=31,this.frameSelect=40960&e},GameBoyAdvanceBGMatrixRenderer.prototype.initialize=function(){this.VRAM=this.gfx.VRAM,this.palette=this.gfx.palette256,this.screenSizePreprocess(0),this.screenBaseBlockPreprocess(0),this.characterBaseBlockPreprocess(0),this.displayOverflowProcess(0)},"function"==typeof Math.imul?GameBoyAdvanceBGMatrixRenderer.prototype.fetchTile=function(e,t){t|=0;var i=(0|(e|=0))+Math.imul(0|t,0|this.mapSize)|0;return 0|this.VRAM[(0|i)+(0|this.BGScreenBaseBlock)&65535]}:GameBoyAdvanceBGMatrixRenderer.prototype.fetchTile=function(e,t){var i=e+t*this.mapSize;return this.VRAM[i+this.BGScreenBaseBlock&65535]},GameBoyAdvanceBGMatrixRenderer.prototype.computeScreenAddress=function(e,t){e|=0,t|=0;var i=this.fetchTile(e>>3,t>>3)<<6;return 0|(i=(0|(i=(0|(i=(0|i)+(0|this.BGCharacterBaseBlock)|0))+((7&t)<<3)|0))+(7&e)|0)},GameBoyAdvanceBGMatrixRenderer.prototype.fetchPixelOverflow=function(e,t){e|=0,t|=0;var i=0|this.computeScreenAddress(e&this.mapSizeComparer,t&this.mapSizeComparer);return 0|this.palette[255&this.VRAM[65535&i]]},GameBoyAdvanceBGMatrixRenderer.prototype.fetchPixelNoOverflow=function(e,t){if(t|=0,(0|(e|=0))!=(e&this.mapSizeComparer)||(0|t)!=(t&this.mapSizeComparer))return 58720256;var i=0|this.computeScreenAddress(0|e,0|t);return 0|this.palette[255&this.VRAM[65535&i]]},GameBoyAdvanceBGMatrixRenderer.prototype.screenBaseBlockPreprocess=function(e){e|=0,this.BGScreenBaseBlock=e<<11},GameBoyAdvanceBGMatrixRenderer.prototype.characterBaseBlockPreprocess=function(e){e|=0,this.BGCharacterBaseBlock=e<<14},GameBoyAdvanceBGMatrixRenderer.prototype.screenSizePreprocess=function(e){e|=0,this.mapSize=16<<(0|e),this.mapSizeComparer=(this.mapSize<<3)-1|0},GameBoyAdvanceBGMatrixRenderer.prototype.displayOverflowPreprocess=function(e){(0|(e|=0))!=(0|this.BGDisplayOverflow)&&this.displayOverflowProcess(0|e)},GameBoyAdvanceBGMatrixRenderer.prototype.displayOverflowProcess=function(e){e|=0,this.BGDisplayOverflow=0|e,this.fetchPixel=0!=(0|e)?this.fetchPixelOverflow:this.fetchPixelNoOverflow},__VIEWS_SUPPORTED__?(GameBoyAdvanceAffineBGRenderer.prototype.initialize=function(){this.bg2MatrixRenderer=this.gfx.bg2MatrixRenderer,this.bg3MatrixRenderer=this.gfx.bg3MatrixRenderer,this.bg2FrameBufferRenderer=this.gfx.bg2FrameBufferRenderer,this.scratchBuffer=getInt32ViewCustom(this.gfx.buffer,0|this.offset,240+(0|this.offset)|0),this.BGdx=256,this.BGdmx=0,this.BGdy=0,this.BGdmy=256,this.BGReferenceX=0,this.BGReferenceY=0,this.pb=0,this.pd=0,this.doMosaic=0,this.priorityPreprocess(0),this.offsetReferenceCounters()},"function"==typeof Math.imul?(GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine2M=function(e){e|=0;var t=0|this.pb,i=0|this.pd;if(0!=(0|this.doMosaic)){var r=0|this.gfx.mosaicRenderer.getMosaicYOffset(0|e);t=(0|t)-Math.imul(0|this.BGdmx,0|r)|0,i=(0|i)-Math.imul(0|this.BGdmy,0|r)|0}for(var a=0;(0|a)<240;a=1+(0|a)|0,t=(0|t)+(0|this.BGdx)|0,i=(0|i)+(0|this.BGdy)|0)this.scratchBuffer[0|a]=this.priorityFlag|this.bg2MatrixRenderer.fetchPixel(t>>8,i>>8);0!=(0|this.doMosaic)&&this.gfx.mosaicRenderer.renderMosaicHorizontal(0|this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine3M=function(e){e|=0;var t=0|this.pb,i=0|this.pd;if(0!=(0|this.doMosaic)){var r=0|this.gfx.mosaicRenderer.getMosaicYOffset(0|e);t=(0|t)-Math.imul(0|this.BGdmx,0|r)|0,i=(0|i)-Math.imul(0|this.BGdmy,0|r)|0}for(var a=0;(0|a)<240;a=1+(0|a)|0,t=(0|t)+(0|this.BGdx)|0,i=(0|i)+(0|this.BGdy)|0)this.scratchBuffer[0|a]=this.priorityFlag|this.bg3MatrixRenderer.fetchPixel(t>>8,i>>8);0!=(0|this.doMosaic)&&this.gfx.mosaicRenderer.renderMosaicHorizontal(0|this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine2F=function(e){e|=0;var t=0|this.pb,i=0|this.pd;if(0!=(0|this.doMosaic)){var r=0|this.gfx.mosaicRenderer.getMosaicYOffset(0|e);t=(0|t)-Math.imul(0|this.BGdmx,0|r)|0,i=(0|i)-Math.imul(0|this.BGdmy,0|r)|0}for(var a=0;(0|a)<240;a=1+(0|a)|0,t=(0|t)+(0|this.BGdx)|0,i=(0|i)+(0|this.BGdy)|0)this.scratchBuffer[0|a]=this.priorityFlag|this.bg2FrameBufferRenderer.fetchPixel(t>>8,i>>8);0!=(0|this.doMosaic)&&this.gfx.mosaicRenderer.renderMosaicHorizontal(0|this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.offsetReferenceCounters=function(){var e=0|this.gfx.lastUnrenderedLine;this.pb=0|Math.imul((0|this.pb)+(0|this.BGdmx)|0,0|e),this.pd=0|Math.imul((0|this.pd)+(0|this.BGdmy)|0,0|e)}):(GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine2M=function(e){var t=this.pb,i=this.pd;if(0!=this.doMosaic){var r=this.gfx.mosaicRenderer.getMosaicYOffset(e);t-=this.BGdmx*r,i-=this.BGdmy*r}for(var a=0;a<240;++a,t+=this.BGdx,i+=this.BGdy)this.scratchBuffer[a]=this.priorityFlag|this.bg2MatrixRenderer.fetchPixel(t>>8,i>>8);0!=this.doMosaic&&this.gfx.mosaicRenderer.renderMosaicHorizontal(this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine3M=function(e){var t=this.pb,i=this.pd;if(0!=this.doMosaic){var r=this.gfx.mosaicRenderer.getMosaicYOffset(e);t-=this.BGdmx*r,i-=this.BGdmy*r}for(var a=0;a<240;++a,t+=this.BGdx,i+=this.BGdy)this.scratchBuffer[a]=this.priorityFlag|this.bg3MatrixRenderer.fetchPixel(t>>8,i>>8);0!=this.doMosaic&&this.gfx.mosaicRenderer.renderMosaicHorizontal(this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine2F=function(e){var t=this.pb,i=this.pd;if(0!=this.doMosaic){var r=this.gfx.mosaicRenderer.getMosaicYOffset(e);t-=this.BGdmx*r,i-=this.BGdmy*r}for(var a=0;a<240;++a,t+=this.BGdx,i+=this.BGdy)this.scratchBuffer[a]=this.priorityFlag|this.bg2FrameBufferRenderer.fetchPixel(t>>8,i>>8);0!=this.doMosaic&&this.gfx.mosaicRenderer.renderMosaicHorizontal(this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.offsetReferenceCounters=function(){var e=0|this.gfx.lastUnrenderedLine;this.pb=((0|this.pb)+(0|this.BGdmx))*(0|e)|0,this.pd=((0|this.pd)+(0|this.BGdmy))*(0|e)|0})):(GameBoyAdvanceAffineBGRenderer.prototype.initialize=function(){this.bg2MatrixRenderer=this.gfx.bg2MatrixRenderer,this.bg3MatrixRenderer=this.gfx.bg3MatrixRenderer,this.bg2FrameBufferRenderer=this.gfx.bg2FrameBufferRenderer,this.scratchBuffer=this.gfx.buffer,this.BGdx=256,this.BGdmx=0,this.BGdy=0,this.BGdmy=256,this.BGReferenceX=0,this.BGReferenceY=0,this.pb=0,this.pd=0,this.doMosaic=0,this.priorityPreprocess(0),this.offsetReferenceCounters()},GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine2M=function(e){var t=this.pb,i=this.pd;if(0!=this.doMosaic){var r=this.gfx.mosaicRenderer.getMosaicYOffset(e);t-=this.BGdmx*r,i-=this.BGdmy*r}for(var a=0;a<240;++a,t+=this.BGdx,i+=this.BGdy)this.scratchBuffer[this.offset+a]=this.priorityFlag|this.bg2MatrixRenderer.fetchPixel(t>>8,i>>8);0!=this.doMosaic&&this.gfx.mosaicRenderer.renderMosaicHorizontal(this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine3M=function(e){var t=this.pb,i=this.pd;if(0!=this.doMosaic){var r=this.gfx.mosaicRenderer.getMosaicYOffset(e);t-=this.BGdmx*r,i-=this.BGdmy*r}for(var a=0;a<240;++a,t+=this.BGdx,i+=this.BGdy)this.scratchBuffer[this.offset+a]=this.priorityFlag|this.bg3MatrixRenderer.fetchPixel(t>>8,i>>8);0!=this.doMosaic&&this.gfx.mosaicRenderer.renderMosaicHorizontal(this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.renderScanLine2F=function(e){var t=this.pb,i=this.pd;if(0!=this.doMosaic){var r=this.gfx.mosaicRenderer.getMosaicYOffset(e);t-=this.BGdmx*r,i-=this.BGdmy*r}for(var a=0;a<240;++a,t+=this.BGdx,i+=this.BGdy)this.scratchBuffer[this.offset+a]=this.priorityFlag|this.bg2FrameBufferRenderer.fetchPixel(t>>8,i>>8);0!=this.doMosaic&&this.gfx.mosaicRenderer.renderMosaicHorizontal(this.offset)},GameBoyAdvanceAffineBGRenderer.prototype.offsetReferenceCounters=function(){var e=0|this.gfx.lastUnrenderedLine;this.pb=((0|this.pb)+(0|this.BGdmx))*(0|e)|0,this.pd=((0|this.pd)+(0|this.BGdmy))*(0|e)|0}),GameBoyAdvanceAffineBGRenderer.prototype.incrementReferenceCounters=function(){this.pb=(0|this.pb)+(0|this.BGdmx)|0,this.pd=(0|this.pd)+(0|this.BGdmy)|0},GameBoyAdvanceAffineBGRenderer.prototype.resetReferenceCounters=function(){this.pb=0|this.BGReferenceX,this.pd=0|this.BGReferenceY},GameBoyAdvanceAffineBGRenderer.prototype.setMosaicEnable=function(e){e|=0,this.doMosaic=0|e},GameBoyAdvanceAffineBGRenderer.prototype.priorityPreprocess=function(e){e|=0,this.priorityFlag=e<<23|1<<(16|this.BGLayer)},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPA8_0=function(e){e|=0,this.BGdx=4294967040&this.BGdx|e},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPA8_1=function(e){e=(e|=0)<<24>>16,this.BGdx=e|255&this.BGdx},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPA16=function(e){e|=0,this.BGdx=e<<16>>16},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPB8_0=function(e){e|=0,this.BGdmx=4294967040&this.BGdmx|e},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPB8_1=function(e){e=(e|=0)<<24>>16,this.BGdmx=e|255&this.BGdmx},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPB16=function(e){e|=0,this.BGdmx=e<<16>>16},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPAB32=function(e){e|=0,this.BGdx=e<<16>>16,this.BGdmx=e>>16},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPC8_0=function(e){e|=0,this.BGdy=4294967040&this.BGdy|e},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPC8_1=function(e){e=(e|=0)<<24>>16,this.BGdy=e|255&this.BGdy},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPC16=function(e){e|=0,this.BGdy=e<<16>>16},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPD8_0=function(e){e|=0,this.BGdmy=4294967040&this.BGdmy|e},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPD8_1=function(e){e=(e|=0)<<24>>16,this.BGdmy=e|255&this.BGdmy},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPD16=function(e){e|=0,this.BGdmy=e<<16>>16},GameBoyAdvanceAffineBGRenderer.prototype.writeBGPCD32=function(e){e|=0,this.BGdy=e<<16>>16,this.BGdmy=e>>16},GameBoyAdvanceAffineBGRenderer.prototype.writeBGX8_0=function(e){e|=0,this.BGReferenceX=4294967040&this.BGReferenceX|e},GameBoyAdvanceAffineBGRenderer.prototype.writeBGX8_1=function(e){e|=0,this.BGReferenceX=e<<8|4294902015&this.BGReferenceX},GameBoyAdvanceAffineBGRenderer.prototype.writeBGX8_2=function(e){e|=0,this.BGReferenceX=e<<16|4278255615&this.BGReferenceX},GameBoyAdvanceAffineBGRenderer.prototype.writeBGX8_3=function(e){e=(e|=0)<<28>>4,this.BGReferenceX=e|16777215&this.BGReferenceX},GameBoyAdvanceAffineBGRenderer.prototype.writeBGX16_0=function(e){e|=0,this.BGReferenceX=4294901760&this.BGReferenceX|e},GameBoyAdvanceAffineBGRenderer.prototype.writeBGX16_1=function(e){e=(e|=0)<<20>>4,this.BGReferenceX=65535&this.BGReferenceX|e},GameBoyAdvanceAffineBGRenderer.prototype.writeBGX32=function(e){e|=0,this.BGReferenceX=e<<4>>4},GameBoyAdvanceAffineBGRenderer.prototype.writeBGY8_0=function(e){e|=0,this.BGReferenceY=4294967040&this.BGReferenceY|e,this.resetReferenceCounters()},GameBoyAdvanceAffineBGRenderer.prototype.writeBGY8_1=function(e){e|=0,this.BGReferenceY=e<<8|4294902015&this.BGReferenceY,this.resetReferenceCounters()},GameBoyAdvanceAffineBGRenderer.prototype.writeBGY8_2=function(e){e|=0,this.BGReferenceY=e<<16|4278255615&this.BGReferenceY,this.resetReferenceCounters()},GameBoyAdvanceAffineBGRenderer.prototype.writeBGY8_3=function(e){e=(e|=0)<<28>>4,this.BGReferenceY=e|16777215&this.BGReferenceY,this.resetReferenceCounters()},GameBoyAdvanceAffineBGRenderer.prototype.writeBGY16_0=function(e){e|=0,this.BGReferenceY=4294901760&this.BGReferenceY|e,this.resetReferenceCounters()},GameBoyAdvanceAffineBGRenderer.prototype.writeBGY16_1=function(e){e=(e|=0)<<20>>4,this.BGReferenceY=65535&this.BGReferenceY|e,this.resetReferenceCounters()},GameBoyAdvanceAffineBGRenderer.prototype.writeBGY32=function(e){e|=0,this.BGReferenceY=e<<4>>4,this.resetReferenceCounters()},"object"==typeof SIMD&&"function"==typeof SIMD.Int32x4?(GameBoyAdvanceColorEffectsRenderer.prototype.initialize=function(e){this.alphaBlendAmountTarget1=SIMD.Int32x4.splat(0),this.alphaBlendAmountTarget2=SIMD.Int32x4.splat(0),this.brightnessEffectAmount=SIMD.Int32x4.splat(0),this.brightnessEffectAmountReverse=SIMD.Int32x4.splat(16),this.buffer=e},GameBoyAdvanceColorEffectsRenderer.prototype.pixelMask=SIMD.Int32x4.splat(31),GameBoyAdvanceColorEffectsRenderer.prototype.temporaryPixelBuffer=new Int32Array(4),GameBoyAdvanceColorEffectsRenderer.prototype.alphaBlend=function(e,t){e|=0,t|=0;var i=SIMD.Int32x4(e>>10,e>>5,e,0),r=SIMD.Int32x4(t>>10,t>>5,t,0);i=SIMD.Int32x4.and(i,this.pixelMask),r=SIMD.Int32x4.and(r,this.pixelMask),i=SIMD.Int32x4.mul(i,this.alphaBlendAmountTarget1),r=SIMD.Int32x4.mul(r,this.alphaBlendAmountTarget2);var a=SIMD.Int32x4.add(i,r);a=SIMD.Int32x4.shiftRightByScalar(a,4);var s=SIMD.Int32x4.lessThanOrEqual(a,this.pixelMask);return a=SIMD.Int32x4.select(s,a,this.pixelMask),SIMD.Int32x4.store(this.temporaryPixelBuffer,0,a),this.temporaryPixelBuffer[0]<<10|this.temporaryPixelBuffer[1]<<5|this.temporaryPixelBuffer[2]},GameBoyAdvanceColorEffectsRenderer.prototype.brightnessIncrease=function(e){e|=0;var t=SIMD.Int32x4(e>>10,e>>5,e,0);t=SIMD.Int32x4.and(t,this.pixelMask);var i=SIMD.Int32x4.sub(this.pixelMask,t);return i=SIMD.Int32x4.mul(i,this.brightnessEffectAmount),i=SIMD.Int32x4.shiftRightByScalar(i,4),t=SIMD.Int32x4.add(t,i),SIMD.Int32x4.store(this.temporaryPixelBuffer,0,t),this.temporaryPixelBuffer[0]<<10|this.temporaryPixelBuffer[1]<<5|this.temporaryPixelBuffer[2]},GameBoyAdvanceColorEffectsRenderer.prototype.brightnessDecrease=function(e){e|=0;var t=SIMD.Int32x4(e>>10,e>>5,e,0);return t=SIMD.Int32x4.and(t,this.pixelMask),t=SIMD.Int32x4.mul(t,this.brightnessEffectAmountReverse),t=SIMD.Int32x4.shiftRightByScalar(t,4),SIMD.Int32x4.store(this.temporaryPixelBuffer,0,t),this.temporaryPixelBuffer[0]<<10|this.temporaryPixelBuffer[1]<<5|this.temporaryPixelBuffer[2]},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDALPHA8_0=function(e){var t=31&(e|=0);this.alphaBlendAmountTarget1=SIMD.Int32x4.splat(0|Math.min(0|t,16))},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDALPHA8_1=function(e){var t=31&(e|=0);this.alphaBlendAmountTarget2=SIMD.Int32x4.splat(0|Math.min(0|t,16))},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDALPHA16=function(e){var t=31&(e|=0);this.alphaBlendAmountTarget1=SIMD.Int32x4.splat(0|Math.min(0|t,16));var i=e>>8&31;this.alphaBlendAmountTarget2=SIMD.Int32x4.splat(0|Math.min(0|i,16))},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDCNT32=function(e){e|=0,this.effectsTarget1=(63&e)<<16,this.colorEffectsType=e>>6&3,this.effectsTarget2=(16128&e)<<8;var t=e>>16&31;this.alphaBlendAmountTarget1=SIMD.Int32x4.splat(0|Math.min(0|t,16));var i=e>>24&31;this.alphaBlendAmountTarget2=SIMD.Int32x4.splat(0|Math.min(0|i,16))},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDY8=function(e){e|=0;e=0|Math.min(31&e,16);this.brightnessEffectAmount=SIMD.Int32x4.splat(0|e),this.brightnessEffectAmountReverse=SIMD.Int32x4.splat(16-(0|e)|0)},GameBoyAdvanceColorEffectsRenderer.prototype.processFullNormalEffectsNoSprites=function(){for(var e=0;(0|e)<240;e=4+(0|e)|0)this.buffer[0|e]=this.processPixelNormal(0|this.buffer[1792|e],0|this.buffer[2048|e]),this.buffer[1|e]=this.processPixelNormal(0|this.buffer[1793|e],0|this.buffer[2049|e]),this.buffer[2|e]=this.processPixelNormal(0|this.buffer[1794|e],0|this.buffer[2050|e]),this.buffer[3|e]=this.processPixelNormal(0|this.buffer[1795|e],0|this.buffer[2051|e])},GameBoyAdvanceColorEffectsRenderer.prototype.processWindowNormalEffectsNoSprites=function(e,t){for(e|=0,t|=0;(0|e)<(0|t);)this.buffer[0|e]=this.processPixelNormal(0|this.buffer[1792|e],0|this.buffer[2048|e]),e=1+(0|e)|0},GameBoyAdvanceColorEffectsRenderer.prototype.processFullNormalEffectsWithSprites=function(){for(var e=0;(0|e)<240;e=4+(0|e)|0)this.buffer[0|e]=this.processPixelTestFull(0|this.buffer[1792|e],0|this.buffer[2048|e]),this.buffer[1|e]=this.processPixelTestFull(0|this.buffer[1793|e],0|this.buffer[2049|e]),this.buffer[2|e]=this.processPixelTestFull(0|this.buffer[1794|e],0|this.buffer[2050|e]),this.buffer[3|e]=this.processPixelTestFull(0|this.buffer[1795|e],0|this.buffer[2051|e])},GameBoyAdvanceColorEffectsRenderer.prototype.processWindowNormalEffectsWithSprites=function(e,t){for(e|=0,t|=0;(0|e)<(0|t);)this.buffer[0|e]=this.processPixelTestFull(0|this.buffer[1792|e],0|this.buffer[2048|e]),e=1+(0|e)|0},GameBoyAdvanceColorEffectsRenderer.prototype.processFullNoEffectsWithSprites=function(){for(var e=0;(0|e)<240;e=4+(0|e)|0)this.buffer[0|e]=this.processPixelTestSprite(0|this.buffer[1792|e],0|this.buffer[2048|e]),this.buffer[1|e]=this.processPixelTestSprite(0|this.buffer[1793|e],0|this.buffer[2049|e]),this.buffer[2|e]=this.processPixelTestSprite(0|this.buffer[1794|e],0|this.buffer[2050|e]),this.buffer[3|e]=this.processPixelTestSprite(0|this.buffer[1795|e],0|this.buffer[2051|e])},GameBoyAdvanceColorEffectsRenderer.prototype.processWindowNoEffectsWithSprites=function(e,t){for(e|=0,t|=0;(0|e)<(0|t);)this.buffer[0|e]=this.processPixelTestSprite(0|this.buffer[1792|e],0|this.buffer[2048|e]),e=1+(0|e)|0},GameBoyAdvanceColorEffectsRenderer.prototype.processPixelTestFull=function(e,t){return e|=0,0==(4194304&(t|=0))?0|this.processPixelNormal(0|e,0|t):0|this.processPixelSprite(0|e,0|t)},GameBoyAdvanceColorEffectsRenderer.prototype.processPixelTestSprite=function(e,t){return e|=0,0==(4194304&(t|=0))?0|t:0|this.processPixelSprite(0|e,0|t)}):(GameBoyAdvanceColorEffectsRenderer.prototype.initialize=function(e){this.alphaBlendAmountTarget1=0,this.alphaBlendAmountTarget2=0,this.brightnessEffectAmount=0},"function"==typeof Math.imul?(GameBoyAdvanceColorEffectsRenderer.prototype.alphaBlend=function(e,t){var i=(e|=0)>>10&31,r=e>>5&31,a=31&e,s=(t|=0)>>10&31,o=t>>5&31,n=31&t;return i=0|Math.imul(0|i,0|this.alphaBlendAmountTarget1),r=0|Math.imul(0|r,0|this.alphaBlendAmountTarget1),a=0|Math.imul(0|a,0|this.alphaBlendAmountTarget1),s=0|Math.imul(0|s,0|this.alphaBlendAmountTarget2),o=0|Math.imul(0|o,0|this.alphaBlendAmountTarget2),n=0|Math.imul(0|n,0|this.alphaBlendAmountTarget2),(0|Math.min((0|i)+(0|s)>>4,31))<<10|(0|Math.min((0|r)+(0|o)>>4,31))<<5|(0|Math.min((0|a)+(0|n)>>4,31))},GameBoyAdvanceColorEffectsRenderer.prototype.brightnessIncrease=function(e){var t=(e|=0)>>10&31,i=e>>5&31,r=31&e;return(t=(0|t)+(Math.imul(31-(0|t)|0,0|this.brightnessEffectAmount)>>4)|0)<<10|(i=(0|i)+(Math.imul(31-(0|i)|0,0|this.brightnessEffectAmount)>>4)|0)<<5|(r=(0|r)+(Math.imul(31-(0|r)|0,0|this.brightnessEffectAmount)>>4)|0)},GameBoyAdvanceColorEffectsRenderer.prototype.brightnessDecrease=function(e){var t=(e|=0)>>10&31,i=e>>5&31,r=31&e,a=16-(0|this.brightnessEffectAmount)|0;return(t=Math.imul(0|t,0|a)>>4)<<10|(i=Math.imul(0|i,0|a)>>4)<<5|(r=Math.imul(0|r,0|a)>>4)}):(GameBoyAdvanceColorEffectsRenderer.prototype.alphaBlend=function(e,t){var i=(e|=0)>>10&31,r=e>>5&31,a=31&e,s=(t|=0)>>10&31,o=t>>5&31,n=31&t;return i*=this.alphaBlendAmountTarget1,r*=this.alphaBlendAmountTarget1,a*=this.alphaBlendAmountTarget1,s*=this.alphaBlendAmountTarget2,o*=this.alphaBlendAmountTarget2,n*=this.alphaBlendAmountTarget2,Math.min(i+s>>4,31)<<10|Math.min(r+o>>4,31)<<5|Math.min(a+n>>4,31)},GameBoyAdvanceColorEffectsRenderer.prototype.brightnessIncrease=function(e){var t=(e|=0)>>10&31,i=e>>5&31,r=31&e;return(t+=(31-t)*this.brightnessEffectAmount>>4)<<10|(i+=(31-i)*this.brightnessEffectAmount>>4)<<5|(r+=(31-r)*this.brightnessEffectAmount>>4)},GameBoyAdvanceColorEffectsRenderer.prototype.brightnessDecrease=function(e){var t=(e|=0)>>10&31,i=e>>5&31,r=31&e,a=16-this.brightnessEffectAmount;return(t=t*a>>4)<<10|(i=i*a>>4)<<5|(r=r*a>>4)}),GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDALPHA8_0=function(e){var t=31&(e|=0);this.alphaBlendAmountTarget1=0|Math.min(0|t,16)},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDALPHA8_1=function(e){var t=31&(e|=0);this.alphaBlendAmountTarget2=0|Math.min(0|t,16)},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDALPHA16=function(e){var t=31&(e|=0);this.alphaBlendAmountTarget1=0|Math.min(0|t,16);var i=e>>8&31;this.alphaBlendAmountTarget2=0|Math.min(0|i,16)},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDCNT32=function(e){e|=0,this.effectsTarget1=(63&e)<<16,this.colorEffectsType=e>>6&3,this.effectsTarget2=(16128&e)<<8;var t=e>>16&31;this.alphaBlendAmountTarget1=0|Math.min(0|t,16);var i=e>>24&31;this.alphaBlendAmountTarget2=0|Math.min(0|i,16)},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDY8=function(e){e|=0,this.brightnessEffectAmount=0|Math.min(31&e,16)}),GameBoyAdvanceColorEffectsRenderer.prototype.processPixelNormal=function(e,t){if(e|=0,0!=((0|(t|=0))&(0|this.effectsTarget1)))switch(0|this.colorEffectsType){case 1:if(0!=((0|e)&(0|this.effectsTarget2))&&(0|t)!=(0|e))return 0|this.alphaBlend(0|t,0|e);break;case 2:return 0|this.brightnessIncrease(0|t);case 3:return 0|this.brightnessDecrease(0|t)}return 0|t},GameBoyAdvanceColorEffectsRenderer.prototype.processPixelSprite=function(e,t){if(t|=0,0!=((0|(e|=0))&(0|this.effectsTarget2)))return 0|this.alphaBlend(0|t,0|e);if(0!=((0|t)&(0|this.effectsTarget1)))switch(0|this.colorEffectsType){case 2:return 0|this.brightnessIncrease(0|t);case 3:return 0|this.brightnessDecrease(0|t)}return 0|t},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDCNT8_0=function(e){e|=0,this.effectsTarget1=(63&e)<<16,this.colorEffectsType=e>>6},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDCNT8_1=function(e){e|=0,this.effectsTarget2=(63&e)<<16},GameBoyAdvanceColorEffectsRenderer.prototype.writeBLDCNT16=function(e){e|=0,this.effectsTarget1=(63&e)<<16,this.colorEffectsType=e>>6&3,this.effectsTarget2=(16128&e)<<8},GameBoyAdvanceMosaicRenderer.prototype.attachOBJBuffer=function(e){this.objBuffer=e},GameBoyAdvanceMosaicRenderer.prototype.renderMosaicHorizontal=function(e){e|=0;var t=0,i=1+(0|this.BGMosaicHSize)|0;if((0|i)>1)for(var r=0;(0|r)<240;r=1+(0|r)|0)0==((0|r)%(0|i)|0)?t=0|this.buffer[r|e]:this.buffer[r|e]=0|t},GameBoyAdvanceMosaicRenderer.prototype.renderOBJMosaicHorizontal=__VIEWS_SUPPORTED__?function(e,t){e|=0,t|=0;var i=58720256,r=1+(0|this.OBJMosaicHSize)|0;if((0|r)>1)for(var a=(0|e)%(0|r)|0;(0|a)<(0|t);a=1+(0|a)|0)0==((0|a)%(0|r)|0)&&(i=0|this.buffer[1536|a]),this.buffer[1536|a]=0|i}:function(e,t){e|=0,t|=0;var i=58720256,r=1+(0|this.OBJMosaicHSize)|0;if((0|r)>1)for(var a=(0|e)%(0|r)|0;(0|a)<(0|t);a=1+(0|a)|0)0==((0|a)%(0|r)|0)&&(i=0|this.objBuffer[0|a]),this.objBuffer[0|a]=0|i},GameBoyAdvanceMosaicRenderer.prototype.getMosaicYOffset=function(e){return(0|(e|=0))%(1+(0|this.BGMosaicVSize)|0)|0},GameBoyAdvanceMosaicRenderer.prototype.getOBJMosaicYOffset=function(e){return(0|(e|=0))%(1+(0|this.OBJMosaicVSize)|0)|0},GameBoyAdvanceMosaicRenderer.prototype.writeMOSAIC8_0=function(e){e|=0,this.BGMosaicHSize=15&e,this.BGMosaicVSize=e>>4},GameBoyAdvanceMosaicRenderer.prototype.writeMOSAIC8_1=function(e){e|=0,this.OBJMosaicHSize=15&e,this.OBJMosaicVSize=e>>4},GameBoyAdvanceMosaicRenderer.prototype.writeMOSAIC16=function(e){e|=0,this.BGMosaicHSize=15&e,this.BGMosaicVSize=e>>4&15,this.OBJMosaicHSize=e>>8&15,this.OBJMosaicVSize=e>>12},GameBoyAdvanceOBJRenderer.prototype.lookupXSize=[8,16,32,64,16,32,32,64,8,8,16,32],GameBoyAdvanceOBJRenderer.prototype.lookupYSize=[8,16,32,64,8,8,16,32,16,32,32,64],__VIEWS_SUPPORTED__?("function"==typeof getUint8Array(1).fill?(GameBoyAdvanceOBJRenderer.prototype.initialize=function(){this.paletteOBJ256=this.gfx.paletteOBJ256,this.paletteOBJ16=this.gfx.paletteOBJ16,this.VRAM=this.gfx.VRAM,this.cyclesToRender=1210,this.VRAM32=this.gfx.VRAM32,this.OAMRAM=getUint8Array(1024),this.OAMRAM16=getUint16View(this.OAMRAM),this.OAMRAM32=getInt32View(this.OAMRAM),this.scratchBuffer=getInt32ViewCustom(this.gfx.buffer,1280,1520),this.scratchWindowBuffer=getInt32Array(240),this.scratchOBJBuffer=getInt32ViewCustom(this.gfx.buffer,1536,1664),this.OBJMatrixParameters=getInt32Array(128),this.initializeOAMTable()},GameBoyAdvanceOBJRenderer.prototype.clearScratch=function(){this.scratchBuffer.fill(58720256),this.scratchWindowBuffer.fill(58720256)}):(GameBoyAdvanceOBJRenderer.prototype.initialize=function(){this.paletteOBJ256=this.gfx.paletteOBJ256,this.paletteOBJ16=this.gfx.paletteOBJ16,this.VRAM=this.gfx.VRAM,this.cyclesToRender=1210,this.VRAM32=this.gfx.VRAM32,this.OAMRAM=getUint8Array(1024),this.OAMRAM16=getUint16View(this.OAMRAM),this.OAMRAM32=getInt32View(this.OAMRAM),this.scratchBuffer=getInt32ViewCustom(this.gfx.buffer,1280,1520),this.scratchWindowBuffer=getInt32Array(240),this.scratchOBJBuffer=getInt32ViewCustom(this.gfx.buffer,1536,1664),this.clearingBuffer=getInt32Array(240),this.initializeClearingBuffer(),this.OBJMatrixParameters=getInt32Array(128),this.initializeOAMTable()},GameBoyAdvanceOBJRenderer.prototype.clearScratch=function(){this.scratchBuffer.set(this.clearingBuffer),this.scratchWindowBuffer.set(this.clearingBuffer)},GameBoyAdvanceOBJRenderer.prototype.initializeClearingBuffer=function(){for(var e=0;(0|e)<240;e=1+(0|e)|0)this.clearingBuffer[0|e]=58720256}),GameBoyAdvanceOBJRenderer.prototype.outputSpriteNormal=function(e,t,i){e|=0,t|=0,i|=0;for(var r=0;(0|e)<(0|t);e=1+(0|e)|0,r=1+(0|r)|0){var a=i|this.scratchOBJBuffer[0|r];(0|e)>-1&&(58720256&a)<(58720256&this.scratchBuffer[0|e])&&(this.scratchBuffer[0|e]=0|a)}},GameBoyAdvanceOBJRenderer.prototype.outputSpriteFlipped=function(e,t,i,r){e|=0,t|=0,i|=0;for(var a=(0|(r|=0))-1|0;(0|e)<(0|t);e=1+(0|e)|0,a=(0|a)-1|0){var s=i|this.scratchOBJBuffer[0|a];(0|e)>-1&&(58720256&s)<(58720256&this.scratchBuffer[0|e])&&(this.scratchBuffer[0|e]=0|s)}},GameBoyAdvanceOBJRenderer.prototype.outputSpriteNormalOBJWIN=function(e,t){e|=0,t|=0;for(var i=0;(0|e)<(0|t);e=1+(0|e)|0,i=1+(0|i)|0)(0|e)>-1&&0!=(0|this.scratchOBJBuffer[0|i])&&(this.scratchWindowBuffer[0|e]=0)},GameBoyAdvanceOBJRenderer.prototype.outputSpriteFlippedOBJWIN=function(e,t,i){e|=0,t|=0;for(var r=(0|(i|=0))-1|0;(0|e)<(0|t);e=1+(0|e)|0,r=(0|r)-1|0)(0|e)>-1&&0!=(0|this.scratchOBJBuffer[0|r])&&(this.scratchWindowBuffer[0|e]=0)}):(GameBoyAdvanceOBJRenderer.prototype.initialize=function(){this.paletteOBJ256=this.gfx.paletteOBJ256,this.paletteOBJ16=this.gfx.paletteOBJ16,this.VRAM=this.gfx.VRAM,this.cyclesToRender=1210,this.OAMRAM=getUint8Array(1024),this.offset=1280,this.scratchBuffer=this.gfx.buffer,this.scratchWindowBuffer=getInt32Array(240),this.scratchOBJBuffer=getInt32Array(128),this.gfx.mosaicRenderer.attachOBJBuffer(this.scratchOBJBuffer),this.OBJMatrixParameters=getInt32Array(128),this.initializeOAMTable()},GameBoyAdvanceOBJRenderer.prototype.clearScratch=function(){for(var e=0;e<240;++e)this.scratchBuffer[e|this.offset]=58720256,this.scratchWindowBuffer[e]=58720256},GameBoyAdvanceOBJRenderer.prototype.outputSpriteNormal=function(e,t,i){for(var r=0;e<t;++e,++r){var a=i|this.scratchOBJBuffer[r];(0|e)>-1&&(58720256&a)<(58720256&this.scratchBuffer[e|this.offset])&&(this.scratchBuffer[e|this.offset]=a)}},GameBoyAdvanceOBJRenderer.prototype.outputSpriteFlipped=function(e,t,i,r){for(var a=r-1;e<t;++e,--a){var s=i|this.scratchOBJBuffer[a];e>-1&&(58720256&s)<(58720256&this.scratchBuffer[e|this.offset])&&(this.scratchBuffer[e|this.offset]=s)}},GameBoyAdvanceOBJRenderer.prototype.outputSpriteNormalOBJWIN=function(e,t){for(var i=0;e<t;++e,++i)e>-1&&0!=this.scratchOBJBuffer[i]&&(this.scratchWindowBuffer[e]=0)},GameBoyAdvanceOBJRenderer.prototype.outputSpriteFlippedOBJWIN=function(e,t,i){for(var r=i-1;e<t;++e,--r)e>-1&&0!=this.scratchOBJBuffer[r]&&(this.scratchWindowBuffer[e]=0)});GameBoyAdvanceOBJRenderer.prototype.initializeOAMTable=function(){this.OAMTable=[];for(var e=0;(0|e)<128;e=1+(0|e)|0)this.OAMTable[0|e]=this.makeOAMAttributeTable()},"object"==typeof TypedObject&&"object"==typeof TypedObject.StructType?GameBoyAdvanceOBJRenderer.prototype.makeOAMAttributeTable=function(){return new TypedObject.StructType({ycoord:TypedObject.int32,matrix2D:TypedObject.int32,doubleSizeOrDisabled:TypedObject.int32,mode:TypedObject.int32,mosaic:TypedObject.int32,monolithicPalette:TypedObject.int32,shape:TypedObject.int32,xcoord:TypedObject.int32,matrixParameters:TypedObject.int32,horizontalFlip:TypedObject.int32,verticalFlip:TypedObject.int32,size:TypedObject.int32,tileNumber:TypedObject.int32,priority:TypedObject.int32,paletteNumber:TypedObject.int32})}:GameBoyAdvanceOBJRenderer.prototype.makeOAMAttributeTable=function(){return{ycoord:0,matrix2D:0,doubleSizeOrDisabled:0,mode:0,mosaic:0,monolithicPalette:0,shape:0,xcoord:0,matrixParameters:0,horizontalFlip:0,verticalFlip:0,size:0,tileNumber:0,priority:0,paletteNumber:0}},GameBoyAdvanceOBJRenderer.prototype.renderScanLine=function(e){e|=0,this.performRenderLoop(0|e)},GameBoyAdvanceOBJRenderer.prototype.performRenderLoop=function(e){e|=0,this.clearScratch();for(var t=0|this.cyclesToRender,i=0;(0|i)<128;i=1+(0|i)|0)t=0|this.renderSprite(0|e,this.OAMTable[0|i],0|t)},GameBoyAdvanceOBJRenderer.prototype.renderSprite=function(e,t,i){if(e|=0,i|=0,this.isDrawable(t)){0!=(0|t.mosaic)&&(e=(0|e)-(0|this.gfx.mosaicRenderer.getOBJMosaicYOffset(0|e))|0);var r=this.lookupXSize[t.shape<<2|t.size]<<(0|t.doubleSizeOrDisabled),a=this.lookupYSize[t.shape<<2|t.size]<<(0|t.doubleSizeOrDisabled),s=0|t.ycoord,o=(0|e)-(0|s)|0;if(((0|o)<0||((0|s)+(0|a)|0)>256)&&(o=256+(0|o)|0),(o&(a=(0|a)-1|0))==(0|o)&&(0|(i=0|this.computeCycles(0|i,0|t.matrix2D,0|r)))>=0)switch(0|t.mode){case 0:this.renderRegularSprite(t,0|r,0|a,0|o);break;case 1:this.renderSemiTransparentSprite(t,0|r,0|a,0|o);break;case 2:this.renderOBJWINSprite(t,0|r,0|a,0|o)}}return 0|i},GameBoyAdvanceOBJRenderer.prototype.computeCycles=function(e,t,i){return e|=0,i|=0,0|(e=0!=(0|(t|=0))?(0|e)-(0|(i=10+(0|(i<<=1))|0))|0:(0|e)-(0|i)|0)},GameBoyAdvanceOBJRenderer.prototype.renderRegularSprite=function(e,t,i,r){t|=0,i|=0,r|=0,0!=(0|e.matrix2D)?this.renderMatrixSprite(e,0|t,1+(0|i)|0,0|r):this.renderNormalSprite(e,0|t,0|i,0|r),this.outputSpriteToScratch(e,0|t)},GameBoyAdvanceOBJRenderer.prototype.renderSemiTransparentSprite=function(e,t,i,r){t|=0,i|=0,r|=0,0!=(0|e.matrix2D)?this.renderMatrixSprite(e,0|t,1+(0|i)|0,0|r):this.renderNormalSprite(e,0|t,0|i,0|r),this.outputSemiTransparentSpriteToScratch(e,0|t)},GameBoyAdvanceOBJRenderer.prototype.renderOBJWINSprite=function(e,t,i,r){t|=0,i|=0,r|=0,0!=(0|e.matrix2D)?this.renderMatrixSpriteOBJWIN(e,0|t,1+(0|i)|0,0|r):this.renderNormalSpriteOBJWIN(e,0|t,0|i,0|r),this.outputSpriteToOBJWINScratch(e,0|t)},"function"==typeof Math.imul?(GameBoyAdvanceOBJRenderer.prototype.renderMatrixSprite=function(e,t,i,r){var a=0|-((t|=0)>>1),s=(0|(r|=0))-((i|=0)>>1)|0,o=t>>(0|e.doubleSizeOrDisabled),n=o<<8,h=i>>(0|e.doubleSizeOrDisabled)<<8,c=0|this.OBJMatrixParameters[0|e.matrixParameters],d=0|this.OBJMatrixParameters[1|e.matrixParameters],u=0|this.OBJMatrixParameters[2|e.matrixParameters],p=0|this.OBJMatrixParameters[3|e.matrixParameters],l=(0|(0|Math.imul(0|c,0|a)))+(0|(0|Math.imul(0|d,0|s)))|0;l=(0|l)+(n>>1)|0;var f=(0|(0|Math.imul(0|u,0|a)))+(0|(0|Math.imul(0|p,0|s)))|0;f=(0|f)+(h>>1)|0;for(var m=0;(0|m)<(0|t);m=m+1|0,l=(0|l)+(0|c)|0,f=(0|f)+(0|u)|0)this.scratchOBJBuffer[0|m]=(0|l)>=0&&(0|f)>=0&&(0|l)<(0|n)&&(0|f)<(0|h)?0|this.fetchMatrixPixel(e,l>>8,f>>8,0|o):58720256},GameBoyAdvanceOBJRenderer.prototype.renderMatrixSpriteOBJWIN=function(e,t,i,r){var a=0|-((t|=0)>>1),s=(0|(r|=0))-((i|=0)>>1)|0,o=t>>(0|e.doubleSizeOrDisabled),n=o<<8,h=i>>(0|e.doubleSizeOrDisabled)<<8,c=0|this.OBJMatrixParameters[0|e.matrixParameters],d=0|this.OBJMatrixParameters[1|e.matrixParameters],u=0|this.OBJMatrixParameters[2|e.matrixParameters],p=0|this.OBJMatrixParameters[3|e.matrixParameters],l=(0|(0|Math.imul(0|c,0|a)))+(0|(0|Math.imul(0|d,0|s)))|0;l=(0|l)+(n>>1)|0;var f=(0|(0|Math.imul(0|u,0|a)))+(0|(0|Math.imul(0|p,0|s)))|0;f=(0|f)+(h>>1)|0;for(var m=0;(0|m)<(0|t);m=m+1|0,l=(0|l)+(0|c)|0,f=(0|f)+(0|u)|0)this.scratchOBJBuffer[0|m]=(0|l)>=0&&(0|f)>=0&&(0|l)<(0|n)&&(0|f)<(0|h)?0|this.fetchMatrixPixelOBJWIN(e,l>>8,f>>8,0|o):0}):(GameBoyAdvanceOBJRenderer.prototype.renderMatrixSprite=function(e,t,i,r){for(var a=-(t>>1),s=r-(i>>1),o=t>>e.doubleSizeOrDisabled,n=o<<8,h=i>>e.doubleSizeOrDisabled<<8,c=this.OBJMatrixParameters[e.matrixParameters],d=this.OBJMatrixParameters[1|e.matrixParameters],u=this.OBJMatrixParameters[2|e.matrixParameters],p=c*a+d*s+(n>>1),l=u*a+this.OBJMatrixParameters[3|e.matrixParameters]*s+(h>>1),f=0;f<t;++f,p+=c,l+=u)this.scratchOBJBuffer[f]=p>=0&&l>=0&&p<n&&l<h?this.fetchMatrixPixel(e,p>>8,l>>8,o):58720256},GameBoyAdvanceOBJRenderer.prototype.renderMatrixSpriteOBJWIN=function(e,t,i,r){for(var a=-(t>>1),s=r-(i>>1),o=t>>e.doubleSizeOrDisabled,n=o<<8,h=i>>e.doubleSizeOrDisabled<<8,c=this.OBJMatrixParameters[e.matrixParameters],d=this.OBJMatrixParameters[1|e.matrixParameters],u=this.OBJMatrixParameters[2|e.matrixParameters],p=c*a+d*s+(n>>1),l=u*a+this.OBJMatrixParameters[3|e.matrixParameters]*s+(h>>1),f=0;f<t;++f,p+=c,l+=u)this.scratchOBJBuffer[f]=p>=0&&l>=0&&p<n&&l<h?this.fetchMatrixPixelOBJWIN(e,p>>8,l>>8,o):0}),GameBoyAdvanceOBJRenderer.prototype.fetchMatrixPixel=function(e,t,i,r){var a;return t|=0,i|=0,r|=0,0!=(0|e.monolithicPalette)?(a=(0|(a=0|this.tileNumberToAddress256(0|e.tileNumber,0|r,0|i)))+(0|this.tileRelativeAddressOffset(0|t,0|i))|0,0|this.paletteOBJ256[0|this.VRAM[0|a]]):(a=(0|(a=0|this.tileNumberToAddress16(0|e.tileNumber,0|r,0|i)))+(this.tileRelativeAddressOffset(0|t,0|i)>>1|0)|0,0==(1&t)?0|this.paletteOBJ16[e.paletteNumber|15&this.VRAM[0|a]]:0|this.paletteOBJ16[e.paletteNumber|this.VRAM[0|a]>>4])},GameBoyAdvanceOBJRenderer.prototype.fetchMatrixPixelOBJWIN=function(e,t,i,r){var a;return t|=0,i|=0,r|=0,0!=(0|e.monolithicPalette)?(a=(0|(a=0|this.tileNumberToAddress256(0|e.tileNumber,0|r,0|i)))+(0|this.tileRelativeAddressOffset(0|t,0|i))|0,0|this.VRAM[0|a]):(a=(0|(a=0|this.tileNumberToAddress16(0|e.tileNumber,0|r,0|i)))+(this.tileRelativeAddressOffset(0|t,0|i)>>1|0)|0,0==(1&t)?15&this.VRAM[0|a]:this.VRAM[0|a]>>4)},GameBoyAdvanceOBJRenderer.prototype.tileRelativeAddressOffset=function(e,t){return((7&(t|=0))+(-8&(e|=0))<<3)+(7&e)|0},GameBoyAdvanceOBJRenderer.prototype.renderNormalSprite=function(e,t,i,r){var a;(t|=0,i|=0,r|=0,0!=(0|e.verticalFlip)&&(r=(0|i)-(0|r)|0),0!=(0|e.monolithicPalette))?(a=(0|(a=0|this.tileNumberToAddress256(0|e.tileNumber,0|t,0|r)))+((7&r)<<3)|0,this.render256ColorPaletteSprite(0|a,0|t)):(a=(0|(a=0|this.tileNumberToAddress16(0|e.tileNumber,0|t,0|r)))+((7&r)<<2)|0,this.render16ColorPaletteSprite(0|a,0|t,0|e.paletteNumber))},GameBoyAdvanceOBJRenderer.prototype.renderNormalSpriteOBJWIN=function(e,t,i,r){var a;(t|=0,i|=0,r|=0,0!=(0|e.verticalFlip)&&(r=(0|i)-(0|r)|0),0!=(0|e.monolithicPalette))?(a=(0|(a=0|this.tileNumberToAddress256(0|e.tileNumber,0|t,0|r)))+((7&r)<<3)|0,this.render256ColorPaletteSpriteOBJWIN(0|a,0|t)):(a=(0|(a=0|this.tileNumberToAddress16(0|e.tileNumber,0|t,0|r)))+((7&r)<<2)|0,this.render16ColorPaletteSpriteOBJWIN(0|a,0|t))},__LITTLE_ENDIAN__?(GameBoyAdvanceOBJRenderer.prototype.render256ColorPaletteSprite=function(e,t){e>>=2,t|=0;for(var i=0,r=0;(0|r)<(0|t);r=8+(0|r)|0)i=0|this.VRAM32[0|e],this.scratchOBJBuffer[0|r]=0|this.paletteOBJ256[255&i],this.scratchOBJBuffer[1|r]=0|this.paletteOBJ256[i>>8&255],this.scratchOBJBuffer[2|r]=0|this.paletteOBJ256[i>>16&255],this.scratchOBJBuffer[3|r]=0|this.paletteOBJ256[i>>>24],i=0|this.VRAM32[1|e],this.scratchOBJBuffer[4|r]=0|this.paletteOBJ256[255&i],this.scratchOBJBuffer[5|r]=0|this.paletteOBJ256[i>>8&255],this.scratchOBJBuffer[6|r]=0|this.paletteOBJ256[i>>16&255],this.scratchOBJBuffer[7|r]=0|this.paletteOBJ256[i>>>24],e=16+(0|e)|0},GameBoyAdvanceOBJRenderer.prototype.render256ColorPaletteSpriteOBJWIN=function(e,t){e>>=2,t|=0;for(var i=0,r=0;(0|r)<(0|t);r=8+(0|r)|0)i=0|this.VRAM32[0|e],this.scratchOBJBuffer[0|r]=255&i,this.scratchOBJBuffer[1|r]=i>>8&255,this.scratchOBJBuffer[2|r]=i>>16&255,this.scratchOBJBuffer[3|r]=i>>>24,i=0|this.VRAM32[1|e],this.scratchOBJBuffer[4|r]=255&i,this.scratchOBJBuffer[5|r]=i>>8&255,this.scratchOBJBuffer[6|r]=i>>16&255,this.scratchOBJBuffer[7|r]=i>>>24,e=16+(0|e)|0},GameBoyAdvanceOBJRenderer.prototype.render16ColorPaletteSprite=function(e,t,i){e>>=2,t|=0,i|=0;for(var r=0,a=0;(0|a)<(0|t);a=8+(0|a)|0)r=0|this.VRAM32[0|e],this.scratchOBJBuffer[0|a]=0|this.paletteOBJ16[i|15&r],this.scratchOBJBuffer[1|a]=0|this.paletteOBJ16[i|r>>4&15],this.scratchOBJBuffer[2|a]=0|this.paletteOBJ16[i|r>>8&15],this.scratchOBJBuffer[3|a]=0|this.paletteOBJ16[i|r>>12&15],this.scratchOBJBuffer[4|a]=0|this.paletteOBJ16[i|r>>16&15],this.scratchOBJBuffer[5|a]=0|this.paletteOBJ16[i|r>>20&15],this.scratchOBJBuffer[6|a]=0|this.paletteOBJ16[i|r>>24&15],this.scratchOBJBuffer[7|a]=0|this.paletteOBJ16[i|r>>>28],e=8+(0|e)|0},GameBoyAdvanceOBJRenderer.prototype.render16ColorPaletteSpriteOBJWIN=function(e,t){e>>=2,t|=0;for(var i=0,r=0;(0|r)<(0|t);r=8+(0|r)|0)i=0|this.VRAM32[0|e],this.scratchOBJBuffer[0|r]=15&i,this.scratchOBJBuffer[1|r]=i>>4&15,this.scratchOBJBuffer[2|r]=i>>8&15,this.scratchOBJBuffer[3|r]=i>>12&15,this.scratchOBJBuffer[4|r]=i>>16&15,this.scratchOBJBuffer[5|r]=i>>20&15,this.scratchOBJBuffer[6|r]=i>>24&15,this.scratchOBJBuffer[7|r]=i>>>28,e=8+(0|e)|0}):(GameBoyAdvanceOBJRenderer.prototype.render256ColorPaletteSprite=function(e,t){for(var i=0;i<t;)this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e++]],this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e++]],this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e++]],this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e++]],this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e++]],this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e++]],this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e++]],this.scratchOBJBuffer[i++]=this.paletteOBJ256[this.VRAM[e]],e+=57},GameBoyAdvanceOBJRenderer.prototype.render256ColorPaletteSpriteOBJWIN=function(e,t){for(var i=0;i<t;)this.scratchOBJBuffer[i++]=this.VRAM[e++],this.scratchOBJBuffer[i++]=this.VRAM[e++],this.scratchOBJBuffer[i++]=this.VRAM[e++],this.scratchOBJBuffer[i++]=this.VRAM[e++],this.scratchOBJBuffer[i++]=this.VRAM[e++],this.scratchOBJBuffer[i++]=this.VRAM[e++],this.scratchOBJBuffer[i++]=this.VRAM[e++],this.scratchOBJBuffer[i++]=this.VRAM[e],e+=57},GameBoyAdvanceOBJRenderer.prototype.render16ColorPaletteSprite=function(e,t,i){for(var r=0,a=0;a<t;)r=this.VRAM[e++],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|15&r],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|r>>4],r=this.VRAM[e++],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|15&r],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|r>>4],r=this.VRAM[e++],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|15&r],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|r>>4],r=this.VRAM[e],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|15&r],this.scratchOBJBuffer[a++]=this.paletteOBJ16[i|r>>4],e+=29},GameBoyAdvanceOBJRenderer.prototype.render16ColorPaletteSpriteOBJWIN=function(e,t){for(var i=0,r=0;r<t;)i=this.VRAM[e++],this.scratchOBJBuffer[r++]=15&i,this.scratchOBJBuffer[r++]=i>>4,i=this.VRAM[e++],this.scratchOBJBuffer[r++]=15&i,this.scratchOBJBuffer[r++]=i>>4,i=this.VRAM[e++],this.scratchOBJBuffer[r++]=15&i,this.scratchOBJBuffer[r++]=i>>4,i=this.VRAM[e],this.scratchOBJBuffer[r++]=15&i,this.scratchOBJBuffer[r++]=i>>4,e+=29}),"function"==typeof Math.imul?(GameBoyAdvanceOBJRenderer.prototype.tileNumberToAddress256=function(e,t,i){return e|=0,t|=0,i|=0,65536+((e=0==(64&this.gfx.displayControl)?(-2&e)+(0|Math.imul(i>>3,32))|0:(0|e)+(0|Math.imul(i>>3,t>>2))|0)<<5)|0},GameBoyAdvanceOBJRenderer.prototype.tileNumberToAddress16=function(e,t,i){return e|=0,t|=0,i|=0,65536+((e=0==(64&this.gfx.displayControl)?(0|e)+(0|Math.imul(i>>3,32))|0:(0|e)+(0|Math.imul(i>>3,t>>3))|0)<<5)|0}):(GameBoyAdvanceOBJRenderer.prototype.tileNumberToAddress256=function(e,t,i){return 0==(64&this.gfx.displayControl)?(e&=-2,e+=32*(i>>3)):e+=(i>>3)*(t>>2),65536+(e<<5)},GameBoyAdvanceOBJRenderer.prototype.tileNumberToAddress16=function(e,t,i){return 0==(64&this.gfx.displayControl)?e+=32*(i>>3):e+=(i>>3)*(t>>3),65536+(e<<5)}),GameBoyAdvanceOBJRenderer.prototype.outputSpriteToScratch=function(e,t){t|=0;var i=0|e.xcoord;(0|i)>(512-(0|t)|0)&&(i=(0|i)-512|0),0!=(0|e.mosaic)&&this.gfx.mosaicRenderer.renderOBJMosaicHorizontal(0|i,0|t);var r=0|Math.min((0|i)+(0|t)|0,240),a=e.priority<<23|1048576;0==(0|e.horizontalFlip)||0!=(0|e.matrix2D)?this.outputSpriteNormal(0|i,0|r,0|a):this.outputSpriteFlipped(0|i,0|r,0|a,0|t)},GameBoyAdvanceOBJRenderer.prototype.outputSemiTransparentSpriteToScratch=function(e,t){t|=0;var i=0|e.xcoord;(0|i)>(512-(0|t)|0)&&(i=(0|i)-512|0),0!=(0|e.mosaic)&&this.gfx.mosaicRenderer.renderOBJMosaicHorizontal(0|i,0|t);var r=0|Math.min((0|i)+(0|t)|0,240),a=e.priority<<23|5242880;0==(0|e.horizontalFlip)||0!=(0|e.matrix2D)?this.outputSpriteNormal(0|i,0|r,0|a):this.outputSpriteFlipped(0|i,0|r,0|a,0|t)},GameBoyAdvanceOBJRenderer.prototype.outputSpriteToOBJWINScratch=function(e,t){t|=0;var i=0|e.xcoord;(0|i)>(512-(0|t)|0)&&(i=(0|i)-512|0),0!=(0|e.mosaic)&&this.gfx.mosaicRenderer.renderOBJMosaicHorizontal(0|i,0|t);var r=0|Math.min((0|i)+(0|t)|0,240);0==(0|e.horizontalFlip)||0!=(0|e.matrix2D)?this.outputSpriteNormalOBJWIN(0|i,0|r):this.outputSpriteFlippedOBJWIN(0|i,0|r,0|t)},GameBoyAdvanceOBJRenderer.prototype.isDrawable=function(e){return(0|e.mode)<=2&&(0==(0|e.doubleSizeOrDisabled)||0!=(0|e.matrix2D))&&(0|e.shape)<3&&((7&this.gfx.displayControl)<3||(0|e.tileNumber)>=512)},GameBoyAdvanceOBJRenderer.prototype.setHBlankIntervalFreeStatus=function(e){e|=0,this.cyclesToRender=0!=(0|e)?954:1210},GameBoyAdvanceOBJRenderer.prototype.readOAM=function(e){return 0|this.OAMRAM[1023&e]},__LITTLE_ENDIAN__?(GameBoyAdvanceOBJRenderer.prototype.writeOAM16=function(e,t){e|=0,t|=0;var i=this.OAMTable[e>>2];switch(3&e){case 0:i.ycoord=255&t,i.matrix2D=256&t,i.doubleSizeOrDisabled=(512&t)>>9,i.mode=t>>10&3,i.mosaic=4096&t,i.monolithicPalette=8192&t,i.shape=t>>14;break;case 1:i.xcoord=511&t,i.matrixParameters=t>>7&124,i.horizontalFlip=4096&t,i.verticalFlip=8192&t,i.size=t>>14;break;case 2:i.tileNumber=1023&t,i.priority=t>>10&3,i.paletteNumber=t>>8&240;break;default:this.OBJMatrixParameters[e>>2]=t<<16>>16}this.OAMRAM16[0|e]=65535&t},GameBoyAdvanceOBJRenderer.prototype.writeOAM32=function(e,t){e|=0,t|=0;var i=this.OAMTable[e>>1];0==(1&e)?(i.ycoord=255&t,i.matrix2D=256&t,i.doubleSizeOrDisabled=(512&t)>>9,i.mode=t>>10&3,i.mosaic=4096&t,i.monolithicPalette=8192&t,i.shape=t>>14&3,i.xcoord=t>>16&511,i.matrixParameters=t>>23&124,i.horizontalFlip=268435456&t,i.verticalFlip=536870912&t,i.size=t>>>30):(i.tileNumber=1023&t,i.priority=t>>10&3,i.paletteNumber=t>>8&240,this.OBJMatrixParameters[e>>1]=t>>16),this.OAMRAM32[0|e]=0|t},GameBoyAdvanceOBJRenderer.prototype.readOAM16=function(e){return e|=0,0|this.OAMRAM16[511&e]},GameBoyAdvanceOBJRenderer.prototype.readOAM32=function(e){return e|=0,0|this.OAMRAM32[255&e]}):(GameBoyAdvanceOBJRenderer.prototype.writeOAM16=function(e,t){e|=0,t|=0,e&=511;var i=this.OAMTable[e>>2];switch(3&e){case 0:i.ycoord=255&t,i.matrix2D=256&t,i.doubleSizeOrDisabled=(512&t)>>9,i.mode=t>>10&3,i.mosaic=4096&t,i.monolithicPalette=8192&t,i.shape=t>>14;break;case 1:i.xcoord=511&t,i.matrixParameters=t>>7&124,i.horizontalFlip=4096&t,i.verticalFlip=8192&t,i.size=t>>14;break;case 2:i.tileNumber=1023&t,i.priority=t>>10&3,i.paletteNumber=t>>8&240;break;default:this.OBJMatrixParameters[e>>2]=t<<16>>16}e<<=1,this.OAMRAM[0|e]=255&t,this.OAMRAM[1|e]=t>>8},GameBoyAdvanceOBJRenderer.prototype.writeOAM32=function(e,t){e|=0,t|=0,e&=255;var i=this.OAMTable[e>>1];0==(1&e)?(i.ycoord=255&t,i.matrix2D=256&t,i.doubleSizeOrDisabled=(512&t)>>9,i.mode=t>>10&3,i.mosaic=4096&t,i.monolithicPalette=8192&t,i.shape=t>>14&3,i.xcoord=t>>16&511,i.matrixParameters=t>>23&124,i.horizontalFlip=268435456&t,i.verticalFlip=536870912&t,i.size=t>>>30):(i.tileNumber=1023&t,i.priority=t>>10&3,i.paletteNumber=t>>8&240,this.OBJMatrixParameters[e>>1]=t>>16),e<<=2,this.OAMRAM[0|e]=255&t,this.OAMRAM[1|e]=t>>8&255,this.OAMRAM[2|e]=t>>16&255,this.OAMRAM[3|e]=t>>>24},GameBoyAdvanceOBJRenderer.prototype.readOAM16=function(e){return e&=511,e<<=1,this.OAMRAM[e]|this.OAMRAM[1|e]<<8},GameBoyAdvanceOBJRenderer.prototype.readOAM32=function(e){return e&=255,e<<=2,this.OAMRAM[e]|this.OAMRAM[1|e]<<8|this.OAMRAM[2|e]<<16|this.OAMRAM[3|e]<<24}),GameBoyAdvanceOBJWindowRenderer.prototype.initialize=function(){this.compositor.initialize(),this.WINOBJOutside=0,this.preprocess()},GameBoyAdvanceOBJWindowRenderer.prototype.renderScanLine=function(e,t){t|=0,t&=this.WINOBJOutside,this.compositor.renderScanLine(0|t)},GameBoyAdvanceOBJWindowRenderer.prototype.writeWINOBJIN8=function(e){e|=0,this.WINOBJOutside=0|e,this.preprocess()},GameBoyAdvanceOBJWindowRenderer.prototype.preprocess=function(){this.compositor.preprocess(32&this.WINOBJOutside)},GameBoyAdvanceWindowRenderer.prototype.initialize=function(){this.compositor.initialize(),this.WINXCoordRight=0,this.WINXCoordLeft=0,this.WINYCoordBottom=0,this.WINYCoordTop=0,this.windowDisplayControl=0,this.preprocess()},GameBoyAdvanceWindowRenderer.prototype.renderScanLine=function(e,t){if(e|=0,t|=0,t&=this.windowDisplayControl,this.checkYRange(0|e)){var i=0|this.WINXCoordRight,r=0|this.WINXCoordLeft;(0|r)<=(0|i)?(r=0|Math.min(0|r,240),i=0|Math.min(0|i,240),this.compositor.renderScanLine(0|r,0|i,0|t)):(r=0|Math.min(0|r,240),i=0|Math.min(0|i,240),this.compositor.renderScanLine(0,0|i,0|t),this.compositor.renderScanLine(0|r,240,0|t))}},GameBoyAdvanceWindowRenderer.prototype.checkYRange=function(e){e|=0;var t=0|this.WINYCoordBottom,i=0|this.WINYCoordTop;return(0|i)<=(0|t)?(0|e)>=(0|i)&&(0|e)<(0|t):(0|e)<(0|i)||(0|e)>=(0|t)},GameBoyAdvanceWindowRenderer.prototype.preprocess=function(){this.compositor.preprocess(32&this.windowDisplayControl)},GameBoyAdvanceWindowRenderer.prototype.writeWINXCOORDRight8=function(e){e|=0,this.WINXCoordRight=0|e},GameBoyAdvanceWindowRenderer.prototype.writeWINXCOORDLeft8=function(e){e|=0,this.WINXCoordLeft=0|e},GameBoyAdvanceWindowRenderer.prototype.writeWINYCOORDBottom8=function(e){e|=0,this.WINYCoordBottom=0|e},GameBoyAdvanceWindowRenderer.prototype.writeWINYCOORDTop8=function(e){e|=0,this.WINYCoordTop=0|e},GameBoyAdvanceWindowRenderer.prototype.writeWINXCOORD16=function(e){e|=0,this.WINXCoordRight=255&e,this.WINXCoordLeft=e>>8},GameBoyAdvanceWindowRenderer.prototype.writeWINYCOORD16=function(e){e|=0,this.WINYCoordBottom=255&e,this.WINYCoordTop=e>>8},GameBoyAdvanceWindowRenderer.prototype.writeWININ8=function(e){e|=0,this.windowDisplayControl=0|e,this.preprocess()},GameBoyAdvanceCompositor.prototype.initialize=GameBoyAdvanceWindowCompositor.prototype.initialize=function(){this.buffer=this.gfx.buffer,this.colorEffectsRenderer=this.gfx.colorEffectsRenderer},GameBoyAdvanceOBJWindowCompositor.prototype.initialize=function(){this.buffer=this.gfx.buffer,this.colorEffectsRenderer=this.gfx.colorEffectsRenderer,this.OBJWindowBuffer=this.gfx.objRenderer.scratchWindowBuffer},GameBoyAdvanceCompositor.prototype.preprocess=GameBoyAdvanceWindowCompositor.prototype.preprocess=GameBoyAdvanceOBJWindowCompositor.prototype.preprocess=function(e){e|=0,this.doEffects=0|e},GameBoyAdvanceOBJWindowCompositor.prototype.renderScanLine=GameBoyAdvanceCompositor.prototype.renderScanLine=function(e){e|=0,0==(0|this.doEffects)?this.renderNormalScanLine(0|e):this.renderScanLineWithEffects(0|e)},GameBoyAdvanceWindowCompositor.prototype.renderScanLine=function(e,t,i){e|=0,t|=0,i|=0,0==(0|this.doEffects)?this.renderNormalScanLine(0|e,0|t,0|i):this.renderScanLineWithEffects(0|e,0|t,0|i)},"object"==typeof SIMD&&"function"==typeof SIMD.Int32x4&&(GameBoyAdvanceCompositor.prototype.mask0=SIMD.Int32x4.splat(0),GameBoyAdvanceCompositor.prototype.mask1=SIMD.Int32x4.splat(33554432),GameBoyAdvanceCompositor.prototype.mask2=SIMD.Int32x4.splat(58720256),GameBoyAdvanceCompositor.prototype.mask3=SIMD.Int32x4.splat(25165824),GameBoyAdvanceCompositor.prototype.mask4=SIMD.Bool32x4.splat(!0)),generateIodineGBAGFXCompositors(),GameBoyAdvanceDMA0.prototype.DMA_ENABLE_TYPE=[1,2,4,64],GameBoyAdvanceDMA0.prototype.initialize=function(){this.enabled=0,this.pending=0,this.source=0,this.sourceShadow=0,this.destination=0,this.destinationShadow=0,this.wordCount=0,this.wordCountShadow=0,this.irqFlagging=0,this.dmaType=0,this.is32Bit=0,this.repeat=0,this.sourceControl=0,this.destinationControl=0,this.DMACore=this.IOCore.dma,this.memory=this.IOCore.memory,this.gfxState=this.IOCore.gfxState,this.irq=this.IOCore.irq},GameBoyAdvanceDMA0.prototype.validateDMASource=function(e){(0|(e|=0))>=33554432&&((0|e)<=134217727||(0|e)>=234881024)&&(this.source=0|e)},GameBoyAdvanceDMA0.prototype.validateDMADestination=function(e){(0|(e|=0))<=134217727&&(this.destination=0|e)},GameBoyAdvanceDMA0.prototype.writeDMASource8_0=function(e){e|=0;var t=268435200&this.source;t|=e&=255,this.validateDMASource(0|t)},GameBoyAdvanceDMA0.prototype.writeDMASource8_1=function(e){e|=0;var t=268370175&this.source;t|=(e&=255)<<8,this.validateDMASource(0|t)},GameBoyAdvanceDMA0.prototype.writeDMASource8_2=function(e){e|=0;var t=251723775&this.source;t|=(e&=255)<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA0.prototype.writeDMASource8_3=function(e){e|=0;var t=16777215&this.source;t|=(e&=15)<<24,this.validateDMASource(0|t)},GameBoyAdvanceDMA0.prototype.writeDMASource16_0=function(e){e|=0;var t=268369920&this.source;t|=e&=65535,this.validateDMASource(0|t)},GameBoyAdvanceDMA0.prototype.writeDMASource16_1=function(e){e|=0;var t=65535&this.source;t|=(e&=4095)<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA0.prototype.writeDMASource32=function(e){var t=268435455&(e|=0);this.validateDMASource(0|t)},GameBoyAdvanceDMA0.prototype.writeDMADestination8_0=function(e){e|=0;var t=268435200&this.destination;t|=e&=255,this.validateDMADestination(0|t)},GameBoyAdvanceDMA0.prototype.writeDMADestination8_1=function(e){e|=0;var t=268370175&this.destination;t|=(e&=255)<<8,this.validateDMADestination(0|t)},GameBoyAdvanceDMA0.prototype.writeDMADestination8_2=function(e){e|=0;var t=251723775&this.destination;t|=(e&=255)<<16,this.validateDMADestination(0|t)},GameBoyAdvanceDMA0.prototype.writeDMADestination8_3=function(e){e|=0;var t=16777215&this.destination;t|=(e&=15)<<24,this.validateDMADestination(0|t)},GameBoyAdvanceDMA0.prototype.writeDMADestination16_0=function(e){e|=0;var t=268369920&this.destination;t|=e&=65535,this.validateDMADestination(0|t)},GameBoyAdvanceDMA0.prototype.writeDMADestination16_1=function(e){e|=0;var t=65535&this.destination;t|=(e&=4095)<<16,this.validateDMADestination(0|t)},GameBoyAdvanceDMA0.prototype.writeDMADestination32=function(e){var t=268435455&(e|=0);this.validateDMADestination(0|t)},GameBoyAdvanceDMA0.prototype.writeDMAWordCount8_0=function(e){e|=0,this.wordCount=16128&this.wordCount,e&=255,this.wordCount=this.wordCount|e},GameBoyAdvanceDMA0.prototype.writeDMAWordCount8_1=function(e){e|=0,this.wordCount=255&this.wordCount,e&=63,this.wordCount=this.wordCount|e<<8},GameBoyAdvanceDMA0.prototype.writeDMAWordCount16=function(e){e|=0,this.wordCount=16383&e},GameBoyAdvanceDMA0.prototype.writeDMAControl8_0=function(e){e|=0,this.destinationControl=e>>5&3,this.sourceControl=2&this.sourceControl,this.sourceControl=this.sourceControl|e>>7&1},GameBoyAdvanceDMA0.prototype.writeDMAControl8_1=function(e){e|=0,this.IOCore.updateCoreClocking(),this.sourceControl=1&this.sourceControl|(1&e)<<1,this.repeat=2&e,this.is32Bit=4&e,this.dmaType=e>>4&3,this.irqFlagging=64&e,this.enableDMAChannel(128&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA0.prototype.writeDMAControl16=function(e){e|=0,this.IOCore.updateCoreClocking(),this.destinationControl=e>>5&3,this.sourceControl=e>>7&3,this.repeat=e>>8&2,this.is32Bit=e>>8&4,this.dmaType=e>>12&3,this.irqFlagging=e>>8&64,this.enableDMAChannel(32768&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA0.prototype.writeDMAControl32=function(e){e|=0,this.writeDMAWordCount16(0|e),this.writeDMAControl16(e>>16)},GameBoyAdvanceDMA0.prototype.readDMAControl8_0=function(){var e=this.destinationControl<<5;return 0|(e|=(1&this.sourceControl)<<7)},GameBoyAdvanceDMA0.prototype.readDMAControl8_1=function(){var e=this.sourceControl>>1;return e|=this.repeat,e|=this.is32Bit,e|=this.dmaType<<4,e|=this.irqFlagging,0!=(0|this.enabled)&&(e|=128),0|e},GameBoyAdvanceDMA0.prototype.readDMAControl16=function(){var e=this.destinationControl<<5;return e|=this.sourceControl<<7,e|=this.repeat<<8,e|=this.is32Bit<<8,e|=this.dmaType<<12,e|=this.irqFlagging<<8,0!=(0|this.enabled)&&(e|=32768),0|e},GameBoyAdvanceDMA0.prototype.getMatchStatus=function(){return this.enabled&this.pending},GameBoyAdvanceDMA0.prototype.requestDMA=function(e){e|=0,0!=(this.enabled&e)&&(this.pending=0|e,this.DMACore.update())},GameBoyAdvanceDMA0.prototype.enableDMAChannel=function(e){0!=(0|(e|=0))?(0==(0|this.enabled)&&(this.pending=1,this.wordCountShadow=0|this.wordCount,this.sourceShadow=0|this.source,this.destinationShadow=0|this.destination),this.enabled=0|this.DMA_ENABLE_TYPE[0|this.dmaType],this.pending=this.pending&this.enabled):this.enabled=0,this.DMACore.update()},GameBoyAdvanceDMA0.prototype.handleDMACopy=function(){var e=0|this.sourceShadow,t=0|this.destinationShadow;4==(0|this.is32Bit)?this.copy32(0|e,0|t):this.copy16(0|e,0|t)},GameBoyAdvanceDMA0.prototype.copy16=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMA16(0|e);this.memory.memoryWriteDMA16(0|t,0|i),this.decrementWordCount(0|e,0|t,2),this.DMACore.updateFetch(i|i<<16)},GameBoyAdvanceDMA0.prototype.copy32=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMA32(0|e);this.memory.memoryWriteDMA32(0|t,0|i),this.decrementWordCount(0|e,0|t,4),this.DMACore.updateFetch(0|i)},GameBoyAdvanceDMA0.prototype.decrementWordCount=function(e,t,i){e|=0,t|=0,i|=0;var r=(0|this.wordCountShadow)-1&16383;0==(0|r)?r=0|this.finalizeDMA(0|e,0|t,0|i):this.incrementDMAAddresses(0|e,0|t,0|i),this.wordCountShadow=0|r},GameBoyAdvanceDMA0.prototype.finalizeDMA=function(e,t,i){e|=0,t|=0,i|=0;var r=0;return this.pending=0,0==(0|this.repeat)||1==(0|this.enabled)?this.enabled=0:r=0|this.wordCount,this.DMACore.update(),this.checkIRQTrigger(),this.finalDMAAddresses(0|e,0|t,0|i),0|r},GameBoyAdvanceDMA0.prototype.checkIRQTrigger=function(){0!=(0|this.irqFlagging)&&this.irq.requestIRQ(256)},GameBoyAdvanceDMA0.prototype.finalDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0;break;case 3:this.destinationShadow=0|this.destination}},GameBoyAdvanceDMA0.prototype.incrementDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:case 3:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0}},GameBoyAdvanceDMA0.prototype.nextEventTime=function(){var e=2147483647;switch(0|this.enabled){case 2:e=0|this.gfxState.nextVBlankEventTime();break;case 4:e=0|this.gfxState.nextHBlankDMAEventTime()}return 0|e},GameBoyAdvanceDMA1.prototype.DMA_ENABLE_TYPE=[1,2,4,8],GameBoyAdvanceDMA1.prototype.initialize=function(){this.enabled=0,this.pending=0,this.source=0,this.sourceShadow=0,this.destination=0,this.destinationShadow=0,this.wordCount=0,this.wordCountShadow=0,this.irqFlagging=0,this.dmaType=0,this.is32Bit=0,this.repeat=0,this.sourceControl=0,this.destinationControl=0,this.DMACore=this.IOCore.dma,this.memory=this.IOCore.memory,this.gfxState=this.IOCore.gfxState,this.irq=this.IOCore.irq,this.sound=this.IOCore.sound,this.wait=this.IOCore.wait},GameBoyAdvanceDMA1.prototype.validateDMASource=function(e){(0|(e|=0))>=33554432&&(this.source=0|e)},GameBoyAdvanceDMA1.prototype.validateDMADestination=function(e){(0|(e|=0))<=134217727&&(this.destination=0|e)},GameBoyAdvanceDMA1.prototype.writeDMASource8_0=function(e){e|=0;var t=268435200&this.source;t|=e&=255,this.validateDMASource(0|t)},GameBoyAdvanceDMA1.prototype.writeDMASource8_1=function(e){e|=0;var t=268370175&this.source;t|=(e&=255)<<8,this.validateDMASource(0|t)},GameBoyAdvanceDMA1.prototype.writeDMASource8_2=function(e){e|=0;var t=this.source;e&=255,t=ource|e<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA1.prototype.writeDMASource8_3=function(e){e|=0;var t=16777215&this.source;t|=(e&=15)<<24,this.validateDMASource(0|t)},GameBoyAdvanceDMA1.prototype.writeDMASource16_0=function(e){e|=0;var t=268369920&this.source;t|=e&=65535,this.validateDMASource(0|t)},GameBoyAdvanceDMA1.prototype.writeDMASource16_1=function(e){e|=0;var t=65535&this.source;t|=(e&=4095)<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA1.prototype.writeDMASource32=function(e){var t=268435455&(e|=0);this.validateDMASource(0|t)},GameBoyAdvanceDMA1.prototype.writeDMADestination8_0=function(e){e|=0;var t=268435200&this.destination;t|=e&=255,this.validateDMADestination(0|t)},GameBoyAdvanceDMA1.prototype.writeDMADestination8_1=function(e){e|=0;var t=268370175&this.destination;t|=(e&=255)<<8,this.validateDMADestination(0|t)},GameBoyAdvanceDMA1.prototype.writeDMADestination8_2=function(e){e|=0;var t=251723775&this.destination;t|=(e&=255)<<16,this.validateDMADestination(0|t)},GameBoyAdvanceDMA1.prototype.writeDMADestination8_3=function(e){e|=0;var t=16777215&this.destination;t|=(e&=15)<<24,this.validateDMADestination(0|t)},GameBoyAdvanceDMA1.prototype.writeDMADestination16_0=function(e){e|=0;var t=268369920&this.destination;t|=e&=65535,this.validateDMADestination(0|t)},GameBoyAdvanceDMA1.prototype.writeDMADestination16_1=function(e){e|=0;var t=65535&this.destination;t|=(e&=4095)<<16,this.validateDMADestination(0|t)},GameBoyAdvanceDMA1.prototype.writeDMADestination32=function(e){var t=268435455&(e|=0);this.validateDMADestination(0|t)},GameBoyAdvanceDMA1.prototype.writeDMAWordCount8_0=function(e){e|=0,this.wordCount=16128&this.wordCount,e&=255,this.wordCount=this.wordCount|e},GameBoyAdvanceDMA1.prototype.writeDMAWordCount8_1=function(e){e|=0,this.wordCount=255&this.wordCount,e&=63,this.wordCount=this.wordCount|e<<8},GameBoyAdvanceDMA1.prototype.writeDMAWordCount16=function(e){e|=0,this.wordCount=16383&e},GameBoyAdvanceDMA1.prototype.writeDMAControl8_0=function(e){e|=0,this.destinationControl=e>>5&3,this.sourceControl=2&this.sourceControl,this.sourceControl=this.sourceControl|e>>7&1},GameBoyAdvanceDMA1.prototype.writeDMAControl8_1=function(e){e|=0,this.IOCore.updateCoreClocking(),this.sourceControl=1&this.sourceControl|(1&e)<<1,this.repeat=2&e,this.is32Bit=4&e,this.dmaType=e>>4&3,this.irqFlagging=64&e,this.enableDMAChannel(128&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA1.prototype.writeDMAControl16=function(e){e|=0,this.IOCore.updateCoreClocking(),this.destinationControl=e>>5&3,this.sourceControl=e>>7&3,this.repeat=e>>8&2,this.is32Bit=e>>8&4,this.dmaType=e>>12&3,this.irqFlagging=e>>8&64,this.enableDMAChannel(32768&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA1.prototype.writeDMAControl32=function(e){e|=0,this.writeDMAWordCount16(0|e),this.writeDMAControl16(e>>16)},GameBoyAdvanceDMA1.prototype.readDMAControl8_0=function(){var e=this.destinationControl<<5;return 0|(e|=(1&this.sourceControl)<<7)},GameBoyAdvanceDMA1.prototype.readDMAControl8_1=function(){var e=this.sourceControl>>1;return e|=this.repeat,e|=this.is32Bit,e|=this.dmaType<<4,e|=this.irqFlagging,0!=(0|this.enabled)&&(e|=128),0|e},GameBoyAdvanceDMA1.prototype.readDMAControl16=function(){var e=this.destinationControl<<5;return e|=this.sourceControl<<7,e|=this.repeat<<8,e|=this.is32Bit<<8,e|=this.dmaType<<12,e|=this.irqFlagging<<8,0!=(0|this.enabled)&&(e|=32768),0|e},GameBoyAdvanceDMA1.prototype.getMatchStatus=function(){return this.enabled&this.pending},GameBoyAdvanceDMA1.prototype.soundFIFOARequest=function(){this.requestDMA(8)},GameBoyAdvanceDMA1.prototype.requestDMA=function(e){e|=0,0!=(this.enabled&e)&&(this.pending=0|e,this.DMACore.update())},GameBoyAdvanceDMA1.prototype.enableDMAChannel=function(e){if(0!=(0|(e|=0))){if(0==(0|this.enabled)){switch(0|this.dmaType){case 3:this.wordCountShadow=4;break;case 0:this.pending=1;default:this.wordCountShadow=0|this.wordCount}this.sourceShadow=0|this.source,this.destinationShadow=0|this.destination}this.enabled=0|this.DMA_ENABLE_TYPE[0|this.dmaType],this.pending=this.pending&this.enabled,this.sound.checkFIFOAPendingSignal()}else this.enabled=0;this.DMACore.update()},GameBoyAdvanceDMA1.prototype.handleDMACopy=function(){var e=0|this.sourceShadow;if(8==(0|this.enabled))this.copySound(0|e);else{var t=0|this.destinationShadow;4==(0|this.is32Bit)?this.copy32(0|e,0|t):this.copy16(0|e,0|t)}},GameBoyAdvanceDMA1.prototype.copy16=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMAFull16(0|e);this.memory.memoryWriteDMA16(0|t,0|i),this.decrementWordCount(0|e,0|t,2),this.DMACore.updateFetch(i|i<<16)},GameBoyAdvanceDMA1.prototype.copy32=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMAFull32(0|e);this.memory.memoryWriteDMA32(0|t,0|i),this.decrementWordCount(0|e,0|t,4),this.DMACore.updateFetch(0|i)},GameBoyAdvanceDMA1.prototype.copySound=function(e){e|=0;var t=0|this.memory.memoryReadDMAFull32(0|e);this.wait.singleClock(),this.IOCore.updateTimerClocking(),this.sound.writeFIFOA32(0|t),this.soundDMAUpdate(0|e),this.DMACore.updateFetch(0|t)},GameBoyAdvanceDMA1.prototype.decrementWordCount=function(e,t,i){e|=0,t|=0,i|=0;var r=(0|this.wordCountShadow)-1&16383;0==(0|r)?r=0|this.finalizeDMA(0|e,0|t,0|i):this.incrementDMAAddresses(0|e,0|t,0|i),this.wordCountShadow=0|r},GameBoyAdvanceDMA1.prototype.soundDMAUpdate=function(e){switch(e|=0,this.wordCountShadow=(0|this.wordCountShadow)-1&16383,0==(0|this.wordCountShadow)&&(this.pending=0,0==(0|this.repeat)?this.enabled=0:this.wordCountShadow=4,this.sound.checkFIFOAPendingSignal(),this.DMACore.update(),this.checkIRQTrigger()),0|this.sourceControl){case 0:case 3:this.sourceShadow=4+(0|e)|0;break;case 1:this.sourceShadow=(0|e)-4|0}},GameBoyAdvanceDMA1.prototype.finalizeDMA=function(e,t,i){e|=0,t|=0,i|=0;var r=0;return this.pending=0,0==(0|this.repeat)||1==(0|this.enabled)?this.enabled=0:r=0|this.wordCount,this.sound.checkFIFOAPendingSignal(),this.DMACore.update(),this.checkIRQTrigger(),this.finalDMAAddresses(0|e,0|t,0|i),0|r},GameBoyAdvanceDMA1.prototype.checkIRQTrigger=function(){0!=(0|this.irqFlagging)&&this.irq.requestIRQ(512)},GameBoyAdvanceDMA1.prototype.finalDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0;break;case 3:this.destinationShadow=0|this.destination}},GameBoyAdvanceDMA1.prototype.incrementDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:case 3:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0}},GameBoyAdvanceDMA1.prototype.nextEventTime=function(){var e=2147483647;switch(0|this.enabled){case 2:e=0|this.gfxState.nextVBlankEventTime();break;case 4:e=0|this.gfxState.nextHBlankDMAEventTime();break;case 8:e=0|this.sound.nextFIFOAEventTime()}return 0|e},GameBoyAdvanceDMA2.prototype.DMA_ENABLE_TYPE=[1,2,4,16],GameBoyAdvanceDMA2.prototype.initialize=function(){this.enabled=0,this.pending=0,this.source=0,this.sourceShadow=0,this.destination=0,this.destinationShadow=0,this.wordCount=0,this.wordCountShadow=0,this.irqFlagging=0,this.dmaType=0,this.is32Bit=0,this.repeat=0,this.sourceControl=0,this.destinationControl=0,this.DMACore=this.IOCore.dma,this.memory=this.IOCore.memory,this.gfxState=this.IOCore.gfxState,this.irq=this.IOCore.irq,this.sound=this.IOCore.sound,this.wait=this.IOCore.wait},GameBoyAdvanceDMA2.prototype.validateDMASource=function(e){(0|(e|=0))>=33554432&&(this.source=0|e)},GameBoyAdvanceDMA2.prototype.validateDMADestination=function(e){(0|(e|=0))<=134217727&&(this.destination=0|e)},GameBoyAdvanceDMA2.prototype.writeDMASource8_0=function(e){e|=0;var t=268435200&this.source;t|=e&=255,this.validateDMASource(0|t)},GameBoyAdvanceDMA2.prototype.writeDMASource8_1=function(e){e|=0;var t=268370175&this.source;t|=(e&=255)<<8,this.validateDMASource(0|t)},GameBoyAdvanceDMA2.prototype.writeDMASource8_2=function(e){e|=0;var t=this.source;e&=255,t=ource|e<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA2.prototype.writeDMASource8_3=function(e){e|=0;var t=16777215&this.source;t|=(e&=15)<<24,this.validateDMASource(0|t)},GameBoyAdvanceDMA2.prototype.writeDMASource16_0=function(e){e|=0;var t=268369920&this.source;t|=e&=65535,this.validateDMASource(0|t)},GameBoyAdvanceDMA2.prototype.writeDMASource16_1=function(e){e|=0;var t=65535&this.source;t|=(e&=4095)<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA2.prototype.writeDMASource32=function(e){var t=268435455&(e|=0);this.validateDMASource(0|t)},GameBoyAdvanceDMA2.prototype.writeDMADestination8_0=function(e){e|=0;var t=268435200&this.destination;t|=e&=255,this.validateDMADestination(0|t)},GameBoyAdvanceDMA2.prototype.writeDMADestination8_1=function(e){e|=0;var t=268370175&this.destination;t|=(e&=255)<<8,this.validateDMADestination(0|t)},GameBoyAdvanceDMA2.prototype.writeDMADestination8_2=function(e){e|=0;var t=251723775&this.destination;t|=(e&=255)<<16,this.validateDMADestination(0|t)},GameBoyAdvanceDMA2.prototype.writeDMADestination8_3=function(e){e|=0;var t=16777215&this.destination;t|=(e&=15)<<24,this.validateDMADestination(0|t)},GameBoyAdvanceDMA2.prototype.writeDMADestination16_0=function(e){e|=0;var t=268369920&this.destination;t|=e&=65535,this.validateDMADestination(0|t)},GameBoyAdvanceDMA2.prototype.writeDMADestination16_1=function(e){e|=0;var t=65535&this.destination;t|=(e&=4095)<<16,this.validateDMADestination(0|t)},GameBoyAdvanceDMA2.prototype.writeDMADestination32=function(e){var t=268435455&(e|=0);this.validateDMADestination(0|t)},GameBoyAdvanceDMA2.prototype.writeDMAWordCount8_0=function(e){e|=0,this.wordCount=16128&this.wordCount,e&=255,this.wordCount=this.wordCount|e},GameBoyAdvanceDMA2.prototype.writeDMAWordCount8_1=function(e){e|=0,this.wordCount=255&this.wordCount,e&=63,this.wordCount=this.wordCount|e<<8},GameBoyAdvanceDMA2.prototype.writeDMAWordCount16=function(e){e|=0,this.wordCount=16383&e},GameBoyAdvanceDMA2.prototype.writeDMAControl8_0=function(e){e|=0,this.destinationControl=e>>5&3,this.sourceControl=2&this.sourceControl,this.sourceControl=this.sourceControl|e>>7&1},GameBoyAdvanceDMA2.prototype.writeDMAControl8_1=function(e){e|=0,this.IOCore.updateCoreClocking(),this.sourceControl=1&this.sourceControl|(1&e)<<1,this.repeat=2&e,this.is32Bit=4&e,this.dmaType=e>>4&3,this.irqFlagging=64&e,this.enableDMAChannel(128&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA2.prototype.writeDMAControl16=function(e){e|=0,this.IOCore.updateCoreClocking(),this.destinationControl=e>>5&3,this.sourceControl=e>>7&3,this.repeat=e>>8&2,this.is32Bit=e>>8&4,this.dmaType=e>>12&3,this.irqFlagging=e>>8&64,this.enableDMAChannel(32768&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA2.prototype.writeDMAControl32=function(e){e|=0,this.writeDMAWordCount16(0|e),this.writeDMAControl16(e>>16)},GameBoyAdvanceDMA2.prototype.readDMAControl8_0=function(){var e=this.destinationControl<<5;return 0|(e|=(1&this.sourceControl)<<7)},GameBoyAdvanceDMA2.prototype.readDMAControl8_1=function(){var e=this.sourceControl>>1;return e|=this.repeat,e|=this.is32Bit,e|=this.dmaType<<4,e|=this.irqFlagging,0!=(0|this.enabled)&&(e|=128),0|e},GameBoyAdvanceDMA2.prototype.readDMAControl16=function(){var e=this.destinationControl<<5;return e|=this.sourceControl<<7,e|=this.repeat<<8,e|=this.is32Bit<<8,e|=this.dmaType<<12,e|=this.irqFlagging<<8,0!=(0|this.enabled)&&(e|=32768),0|e},GameBoyAdvanceDMA2.prototype.getMatchStatus=function(){return this.enabled&this.pending},GameBoyAdvanceDMA2.prototype.soundFIFOBRequest=function(){this.requestDMA(16)},GameBoyAdvanceDMA2.prototype.requestDMA=function(e){e|=0,0!=(this.enabled&e)&&(this.pending=0|e,this.DMACore.update())},GameBoyAdvanceDMA2.prototype.enableDMAChannel=function(e){if(0!=(0|(e|=0))){if(0==(0|this.enabled)){switch(0|this.dmaType){case 3:this.wordCountShadow=4;break;case 0:this.pending=1;default:this.wordCountShadow=0|this.wordCount}this.sourceShadow=0|this.source,this.destinationShadow=0|this.destination}this.enabled=0|this.DMA_ENABLE_TYPE[0|this.dmaType],this.sound.checkFIFOBPendingSignal()}else this.enabled=0;this.DMACore.update()},GameBoyAdvanceDMA2.prototype.handleDMACopy=function(){var e=0|this.sourceShadow;if(16==(0|this.enabled))this.copySound(0|e);else{var t=0|this.destinationShadow;4==(0|this.is32Bit)?this.copy32(0|e,0|t):this.copy16(0|e,0|t)}},GameBoyAdvanceDMA2.prototype.copy16=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMAFull16(0|e);this.memory.memoryWriteDMA16(0|t,0|i),this.decrementWordCount(0|e,0|t,2),this.DMACore.updateFetch(i|i<<16)},GameBoyAdvanceDMA2.prototype.copy32=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMAFull32(0|e);this.memory.memoryWriteDMA32(0|t,0|i),this.decrementWordCount(0|e,0|t,4),this.DMACore.updateFetch(0|i)},GameBoyAdvanceDMA2.prototype.copySound=function(e){e|=0;var t=0|this.memory.memoryReadDMAFull32(0|e);this.wait.singleClock(),this.IOCore.updateTimerClocking(),this.sound.writeFIFOB32(0|t),this.soundDMAUpdate(0|e),this.DMACore.updateFetch(0|t)},GameBoyAdvanceDMA2.prototype.decrementWordCount=function(e,t,i){e|=0,t|=0,i|=0;var r=(0|this.wordCountShadow)-1&16383;0==(0|r)?r=0|this.finalizeDMA(0|e,0|t,0|i):this.incrementDMAAddresses(0|e,0|t,0|i),this.wordCountShadow=0|r},GameBoyAdvanceDMA2.prototype.soundDMAUpdate=function(e){switch(e|=0,this.wordCountShadow=(0|this.wordCountShadow)-1&16383,0==(0|this.wordCountShadow)&&(this.pending=0,0==(0|this.repeat)?this.enabled=0:this.wordCountShadow=4,this.sound.checkFIFOBPendingSignal(),this.DMACore.update(),this.checkIRQTrigger()),0|this.sourceControl){case 0:case 3:this.sourceShadow=4+(0|e)|0;break;case 1:this.sourceShadow=(0|e)-4|0}},GameBoyAdvanceDMA2.prototype.finalizeDMA=function(e,t,i){e|=0,t|=0,i|=0;var r=0;return this.pending=0,0==(0|this.repeat)||1==(0|this.enabled)?this.enabled=0:r=0|this.wordCount,this.sound.checkFIFOBPendingSignal(),this.DMACore.update(),this.checkIRQTrigger(),this.finalDMAAddresses(0|e,0|t,0|i),0|r},GameBoyAdvanceDMA2.prototype.checkIRQTrigger=function(){0!=(0|this.irqFlagging)&&this.irq.requestIRQ(1024)},GameBoyAdvanceDMA2.prototype.finalDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0;break;case 3:this.destinationShadow=0|this.destination}},GameBoyAdvanceDMA2.prototype.incrementDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:case 3:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0}},GameBoyAdvanceDMA2.prototype.nextEventTime=function(){var e=2147483647;switch(0|this.enabled){case 2:e=0|this.gfxState.nextVBlankEventTime();break;case 4:e=0|this.gfxState.nextHBlankDMAEventTime();break;case 16:e=0|this.sound.nextFIFOBEventTime()}return 0|e},GameBoyAdvanceDMA3.prototype.DMA_ENABLE_TYPE=[1,2,4,32],GameBoyAdvanceDMA3.prototype.initialize=function(){this.enabled=0,this.pending=0,this.source=0,this.sourceShadow=0,this.destination=0,this.destinationShadow=0,this.wordCount=0,this.wordCountShadow=0,this.irqFlagging=0,this.dmaType=0,this.is32Bit=0,this.repeat=0,this.sourceControl=0,this.destinationControl=0,this.gamePakDMA=0,this.displaySyncEnableDelay=0,this.DMACore=this.IOCore.dma,this.memory=this.IOCore.memory,this.gfxState=this.IOCore.gfxState,this.irq=this.IOCore.irq},GameBoyAdvanceDMA3.prototype.validateDMASource=function(e){(0|(e|=0))>=33554432&&(this.source=0|e)},GameBoyAdvanceDMA3.prototype.writeDMASource8_0=function(e){e|=0;var t=268435200&this.source;t|=e&=255,this.validateDMASource(0|t)},GameBoyAdvanceDMA3.prototype.writeDMASource8_1=function(e){e|=0;var t=268370175&this.source;t|=(e&=255)<<8,this.validateDMASource(0|t)},GameBoyAdvanceDMA3.prototype.writeDMASource8_2=function(e){e|=0;var t=251723775&this.source;t|=(e&=255)<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA3.prototype.writeDMASource8_3=function(e){e|=0;var t=16777215&this.source;t|=(e&=15)<<24,this.validateDMASource(0|t)},GameBoyAdvanceDMA3.prototype.writeDMASource16_0=function(e){e|=0;var t=268369920&this.source;t|=e&=65535,this.validateDMASource(0|t)},GameBoyAdvanceDMA3.prototype.writeDMASource16_1=function(e){e|=0;var t=65535&this.source;t|=(e&=4095)<<16,this.validateDMASource(0|t)},GameBoyAdvanceDMA3.prototype.writeDMASource32=function(e){var t=268435455&(e|=0);this.validateDMASource(0|t)},GameBoyAdvanceDMA3.prototype.writeDMADestination8_0=function(e){e|=0,this.destination=268435200&this.destination,e&=255,this.destination=this.destination|e},GameBoyAdvanceDMA3.prototype.writeDMADestination8_1=function(e){e|=0,this.destination=268370175&this.destination,e&=255,this.destination=this.destination|e<<8},GameBoyAdvanceDMA3.prototype.writeDMADestination8_2=function(e){e|=0,this.destination=251723775&this.destination,e&=255,this.destination=this.destination|e<<16},GameBoyAdvanceDMA3.prototype.writeDMADestination8_3=function(e){e|=0,this.destination=16777215&this.destination,e&=15,this.destination=this.destination|e<<24},GameBoyAdvanceDMA3.prototype.writeDMADestination16_0=function(e){e|=0,this.destination=268369920&this.destination,e&=65535,this.destination=this.destination|e},GameBoyAdvanceDMA3.prototype.writeDMADestination16_1=function(e){e|=0,this.destination=65535&this.destination,e&=4095,this.destination=this.destination|e<<16},GameBoyAdvanceDMA3.prototype.writeDMADestination32=function(e){e|=0,this.destination=268435455&e},GameBoyAdvanceDMA3.prototype.writeDMAWordCount8_0=function(e){e|=0,this.wordCount=65280&this.wordCount,e&=255,this.wordCount=this.wordCount|e},GameBoyAdvanceDMA3.prototype.writeDMAWordCount8_1=function(e){e|=0,this.wordCount=255&this.wordCount,e&=255,this.wordCount=this.wordCount|e<<8},GameBoyAdvanceDMA3.prototype.writeDMAWordCount16=function(e){e|=0,this.wordCount=65535&e},GameBoyAdvanceDMA3.prototype.writeDMAControl8_0=function(e){e|=0,this.destinationControl=e>>5&3,this.sourceControl=2&this.sourceControl,this.sourceControl=this.sourceControl|e>>7&1},GameBoyAdvanceDMA3.prototype.writeDMAControl8_1=function(e){e|=0,this.IOCore.updateCoreClocking(),this.sourceControl=1&this.sourceControl|(1&e)<<1,this.repeat=2&e,this.is32Bit=4&e,this.gamePakDMA=8&e,this.dmaType=e>>4&3,this.irqFlagging=64&e,this.enableDMAChannel(128&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA3.prototype.writeDMAControl16=function(e){e|=0,this.IOCore.updateCoreClocking(),this.destinationControl=e>>5&3,this.sourceControl=e>>7&3,this.repeat=e>>8&2,this.is32Bit=e>>8&4,this.gamePakDMA=e>>8&8,this.dmaType=e>>12&3,this.irqFlagging=e>>8&64,this.enableDMAChannel(32768&e),this.IOCore.updateCoreEventTime()},GameBoyAdvanceDMA3.prototype.writeDMAControl32=function(e){e|=0,this.writeDMAWordCount16(0|e),this.writeDMAControl16(e>>16)},GameBoyAdvanceDMA3.prototype.readDMAControl8_0=function(){var e=this.destinationControl<<5;return 0|(e|=(1&this.sourceControl)<<7)},GameBoyAdvanceDMA3.prototype.readDMAControl8_1=function(){var e=this.sourceControl>>1;return e|=this.repeat,e|=this.is32Bit,e|=this.gamePakDMA,e|=this.dmaType<<4,e|=this.irqFlagging,0!=(0|this.enabled)&&(e|=128),0|e},GameBoyAdvanceDMA3.prototype.readDMAControl16=function(){var e=this.destinationControl<<5;return e|=this.sourceControl<<7,e|=this.repeat<<8,e|=this.is32Bit<<8,e|=this.gamePakDMA<<8,e|=this.dmaType<<12,e|=this.irqFlagging<<8,0!=(0|this.enabled)&&(e|=32768),0|e},GameBoyAdvanceDMA3.prototype.getMatchStatus=function(){return this.enabled&this.pending},GameBoyAdvanceDMA3.prototype.gfxDisplaySyncRequest=function(){this.requestDMA(32^this.displaySyncEnableDelay)},GameBoyAdvanceDMA3.prototype.gfxDisplaySyncEnableCheck=function(){32==(0|this.enabled)&&(32==(0|this.displaySyncEnableDelay)?this.displaySyncEnableDelay=0:(this.enabled=0,this.DMACore.update()))},GameBoyAdvanceDMA3.prototype.requestDMA=function(e){e|=0,0!=(this.enabled&e)&&(this.pending=0|e,this.DMACore.update())},GameBoyAdvanceDMA3.prototype.enableDMAChannel=function(e){if(0!=(0|(e|=0))){if(0==(0|this.enabled)){switch(0|this.dmaType){case 0:this.pending=1;break;case 3:this.displaySyncEnableDelay=32}this.wordCountShadow=0|this.wordCount,this.sourceShadow=0|this.source,this.destinationShadow=0|this.destination}this.enabled=0|this.DMA_ENABLE_TYPE[0|this.dmaType],this.pending=this.pending&this.enabled}else this.enabled=0;this.DMACore.update()},GameBoyAdvanceDMA3.prototype.handleDMACopy=function(){var e=0|this.sourceShadow,t=0|this.destinationShadow;4==(0|this.is32Bit)?this.copy32(0|e,0|t):this.copy16(0|e,0|t)},GameBoyAdvanceDMA3.prototype.copy16=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMAFull16(0|e);this.memory.memoryWriteDMAFull16(0|t,0|i),this.decrementWordCount(0|e,0|t,2),this.DMACore.updateFetch(i|i<<16)},GameBoyAdvanceDMA3.prototype.copy32=function(e,t){e|=0,t|=0;var i=0|this.memory.memoryReadDMAFull32(0|e);this.memory.memoryWriteDMAFull32(0|t,0|i),this.decrementWordCount(0|e,0|t,4),this.DMACore.updateFetch(0|i)},GameBoyAdvanceDMA3.prototype.decrementWordCount=function(e,t,i){e|=0,t|=0,i|=0;var r=(0|this.wordCountShadow)-1&65535;0==(0|r)?r=0|this.finalizeDMA(0|e,0|t,0|i):this.incrementDMAAddresses(0|e,0|t,0|i),this.wordCountShadow=0|r},GameBoyAdvanceDMA3.prototype.finalizeDMA=function(e,t,i){e|=0,t|=0,i|=0;var r=0;return this.pending=0,0==(0|this.repeat)||1==(0|this.enabled)?this.enabled=0:r=0|this.wordCount,this.DMACore.update(),this.checkIRQTrigger(),this.finalDMAAddresses(0|e,0|t,0|i),0|r},GameBoyAdvanceDMA3.prototype.checkIRQTrigger=function(){0!=(0|this.irqFlagging)&&this.irq.requestIRQ(2048)},GameBoyAdvanceDMA3.prototype.finalDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0;break;case 3:this.destinationShadow=0|this.destination}},GameBoyAdvanceDMA3.prototype.incrementDMAAddresses=function(e,t,i){switch(e|=0,t|=0,i|=0,0|this.sourceControl){case 0:case 3:this.sourceShadow=(0|e)+(0|i)|0;break;case 1:this.sourceShadow=(0|e)-(0|i)|0}switch(0|this.destinationControl){case 0:case 3:this.destinationShadow=(0|t)+(0|i)|0;break;case 1:this.destinationShadow=(0|t)-(0|i)|0}},GameBoyAdvanceDMA3.prototype.nextEventTime=function(){var e=2147483647;switch(0|this.enabled){case 2:e=0|this.gfxState.nextVBlankEventTime();break;case 4:e=0|this.gfxState.nextHBlankDMAEventTime();break;case 32:e=0|this.gfxState.nextDisplaySyncEventTime(0|this.displaySyncEnableDelay)}return 0|e},GameBoyAdvanceSaveDeterminer.prototype.flags={SRAM:1,FLASH:2,EEPROM:4},GameBoyAdvanceSaveDeterminer.prototype.initialize=function(){},GameBoyAdvanceSaveDeterminer.prototype.load=function(e){switch(this.saves=e,0|(0|e.length)){case 512:case 8192:this.possible=0|this.flags.EEPROM;break;case 32768:this.possible=0|this.flags.SRAM;break;case 65536:case 131072:this.possible=0|this.flags.FLASH}this.checkDetermination()},GameBoyAdvanceSaveDeterminer.prototype.checkDetermination=function(){switch(this.possible){case 1:this.saveCore.referenceSave(1);break;case 2:this.saveCore.referenceSave(2);break;case 4:this.saveCore.referenceSave(3)}},GameBoyAdvanceSaveDeterminer.prototype.readSRAM=function(e){e|=0;var t=0;return this.possible&=~this.flags.EEPROM,null!=this.saves&&((this.possible&this.flags.FLASH)!=(0|this.flags.FLASH)&&(this.possible&this.flags.SRAM)!=(0|this.flags.SRAM)||(t=0|this.saves[(0|e)%(0|this.saves.length)])),0|t},GameBoyAdvanceSaveDeterminer.prototype.writeGPIO8=function(e,t){},GameBoyAdvanceSaveDeterminer.prototype.writeGPIO16=function(e,t){},GameBoyAdvanceSaveDeterminer.prototype.writeGPIO32=function(e,t){},GameBoyAdvanceSaveDeterminer.prototype.writeEEPROM16=function(e,t){e|=0,t|=0,(this.possible&this.flags.EEPROM)==(0|this.flags.EEPROM)&&(this.possible=0|this.flags.EEPROM,this.checkDetermination(),this.saveCore.writeEEPROM16(0|e,0|t))},GameBoyAdvanceSaveDeterminer.prototype.readEEPROM8=function(e){e|=0;if((this.possible&this.flags.EEPROM)==(0|this.flags.EEPROM))return this.possible=0|this.flags.EEPROM,this.checkDetermination(),0|this.saveCore.readEEPROM8(0|e)},GameBoyAdvanceSaveDeterminer.prototype.readEEPROM16=function(e){e|=0;if((this.possible&this.flags.EEPROM)==(0|this.flags.EEPROM))return this.possible=0|this.flags.EEPROM,this.checkDetermination(),0|this.saveCore.readEEPROM16(0|e)},GameBoyAdvanceSaveDeterminer.prototype.readEEPROM32=function(e){e|=0;if((this.possible&this.flags.EEPROM)==(0|this.flags.EEPROM))return this.possible=0|this.flags.EEPROM,this.checkDetermination(),0|this.saveCore.readEEPROM32(0|e)},GameBoyAdvanceSaveDeterminer.prototype.writeSRAM=function(e,t){e|=0,t|=0,this.possible&=~this.flags.EEPROM,(this.possible&this.flags.FLASH)==(0|this.flags.FLASH)?(this.possible&this.flags.SRAM)==(0|this.flags.SRAM)?21845==(0|e)&&(this.possible=170==(0|t)?0|this.flags.FLASH:0|this.flags.SRAM):21845==(0|e)&&(170==(0|t)?this.possible=0|this.flags.FLASH:this.possible&=~this.flags.FLASH):(this.possible&this.flags.SRAM)==(0|this.flags.SRAM)&&(this.possible=0|this.flags.SRAM),this.checkDetermination(),this.saveCore.writeSRAMIfDefined(0|e,0|t)},GameBoyAdvanceSRAMChip.prototype.initialize=function(){null!=this.saves&&32768==(0|this.saves.length)||(this.saves=getUint8Array(32768))},GameBoyAdvanceSRAMChip.prototype.load=function(e){32768==(0|e.length)&&(this.saves=e)},GameBoyAdvanceSRAMChip.prototype.read=function(e){var t=0;if((0|(e|=0))<32768||3!=(0|this.TILTChipUnlocked))t=0|this.saves[32767&e];else switch(0|e){case 33280:t=0|this.TILTChip.readXLow();break;case 33536:t=0|this.TILTChip.readXHigh();break;case 33792:t=0|this.TILTChip.readYLow();break;case 34048:t=0|this.TILTChip.readYHigh();break;default:t=0|this.saves[32767&e]}return 0|t},GameBoyAdvanceSRAMChip.prototype.write=function(e,t){if(t|=0,(0|(e|=0))<32768||(0|this.TILTChipUnlocked)>=4)this.saves[32767&e]=0|t;else switch(0|e){case 32768:this.TILTChipUnlocked|=85==(0|t)?1:4;break;case 33024:this.TILTChipUnlocked|=170==(0|t)?2:4;break;default:0==(0|this.TILTChipUnlocked)&&(this.saves[32767&e]=0|t,this.TILTChipUnlocked|=4)}},GameBoyAdvanceFLASHChip.prototype.initialize=function(){this.allocate()},GameBoyAdvanceFLASHChip.prototype.allocate=function(){if(null==this.saves||(0|this.saves.length)<(0|this.largestSizePossible)){for(var e=getUint8Array(0|this.largestSizePossible),t=0;(0|t)<(0|this.largestSizePossible);t=1+(0|t)|0)e[0|t]=255;if(null!=this.saves)for(t=0;(0|t)<(0|this.saves.length);t=1+(0|t)|0)e[0|t]=0|this.saves[0|t];this.saves=e}},GameBoyAdvanceFLASHChip.prototype.load=function(e){65536!=(0|e.length)&&131072!=(0|e.length)||(this.saves=e,131072==(0|e.length)&&(this.notATMEL=!0))},GameBoyAdvanceFLASHChip.prototype.read=function(e){e|=0;return 0|(2!=(0|this.flashCommand)||(0|e)>1?0|this.saves[e|this.BANKOffset]:0==(0|e)?this.notATMEL?131072==(0|this.largestSizePossible)?98:191:31:this.notATMEL?131072==(0|this.largestSizePossible)?19:212:61)},GameBoyAdvanceFLASHChip.prototype.write=function(e,t){switch(e|=0,t|=0,0|this.writeBytesLeft){case 0:this.writeControlBits(0|e,0|t);break;case 128:for(var i=65408&e|this.BANKOffset,r=0;(0|r)<128;r=1+(0|r)|0)this.saves[i|r]=255;default:this.writeByte(0|e,0|t)}},GameBoyAdvanceFLASHChip.prototype.writeControlBits=function(e,t){switch(t|=0,0|(e|=0)){case 0:this.sectorEraseOrBankSwitch(0|e,0|t);break;case 21845:this.controlWriteStage2(0|t);break;case 10922:this.controlWriteStageIncrement(0|t);break;default:this.sectorErase(0|e,0|t)}},GameBoyAdvanceFLASHChip.prototype.writeByte=function(e,t){e|=0,t|=0,this.saves[e|this.BANKOffset]=0|t,this.writeBytesLeft=(0|this.writeBytesLeft)-1|0},GameBoyAdvanceFLASHChip.prototype.selectBank=function(e){e|=0,this.BANKOffset=(1&e)<<16,this.largestSizePossible=0|Math.max(65536+(0|this.BANKOffset)|0,0|this.largestSizePossible),this.notATMEL=!0,this.allocate()},GameBoyAdvanceFLASHChip.prototype.controlWriteStage2=function(e){if(170==(0|(e|=0)))this.flashCommandUnlockStage=1;else if(2==(0|this.flashCommandUnlockStage)){switch(0|e){case 16:if(1==(0|this.flashCommand))for(var t=0;(0|t)<(0|this.largestSizePossible);t=1+(0|t)|0)this.saves[0|t]=255;this.flashCommand=0;break;case 128:this.flashCommand=1;break;case 144:this.flashCommand=2;break;case 160:this.writeCommandTrigger();break;case 176:this.flashCommand=3;break;default:this.flashCommand=0}this.flashCommandUnlockStage=0}else 240==(0|e)&&(this.flashCommand=0,this.flashCommandUnlockStage=0,this.notATMEL=!0)},GameBoyAdvanceFLASHChip.prototype.writeCommandTrigger=function(){2==(0|this.flashCommandUnlockStage)&&(this.notATMEL?this.writeBytesLeft=1:this.writeBytesLeft=128)},GameBoyAdvanceFLASHChip.prototype.sectorErase=function(e,t){if(e=e<<12>>12,t|=0,1==(0|this.flashCommand)&&2==(0|this.flashCommandUnlockStage)&&48==(0|t)){for(var i=4096+(e|this.BANKOffset)|0,r=e|this.BANKOffset;(0|r)<(0|i);r=1+(0|r)|0)this.saves[0|r]=255;this.notATMEL=!0}this.flashCommand=0,this.flashCommandUnlockStage=0},GameBoyAdvanceFLASHChip.prototype.sectorEraseOrBankSwitch=function(e,t){e|=0,t|=0,2==(0|this.flashCommandUnlockStage)?this.sectorErase(0|e,0|t):3==(0|this.flashCommand)&&0==(0|this.flashCommandUnlockStage)&&this.selectBank(1&t),this.flashCommand=0,this.flashCommandUnlockStage=0},GameBoyAdvanceFLASHChip.prototype.controlWriteStageIncrement=function(e){85==(0|e)&&1==(0|this.flashCommandUnlockStage)?this.flashCommandUnlockStage=1+(0|this.flashCommandUnlockStage)|0:this.flashCommandUnlockStage=0},GameBoyAdvanceEEPROMChip.prototype.initialize=function(){this.allocate()},GameBoyAdvanceEEPROMChip.prototype.allocate=function(){if(null==this.saves||(0|this.saves.length)<(0|this.largestSizePossible)){for(var e=getUint8Array(0|this.largestSizePossible),t=0;(0|t)<(0|this.largestSizePossible);t=1+(0|t)|0)e[0|t]=255;if(null!=this.saves)for(t=0;(0|t)<(0|this.saves.length);t=1+(0|t)|0)e[0|t]=0|this.saves[0|t];this.saves=e}},GameBoyAdvanceEEPROMChip.prototype.load=function(e){512!=(0|e.length)&&8192!=(0|e.length)||(this.saves=e)},GameBoyAdvanceEEPROMChip.prototype.read8=function(){return 1},GameBoyAdvanceEEPROMChip.prototype.read16=function(){var e=1;switch(0|this.mode){case 7:e=0,(0|this.bitsProcessed)<3?this.bitsProcessed=1+(0|this.bitsProcessed)|0:(this.bitsProcessed=0,this.mode=8);break;case 8:var t=(this.bitsProcessed>>3)+(0|this.address)|0;e=this.saves[0|t]>>(7-(7&this.bitsProcessed)|0)&1,(0|this.bitsProcessed)<63?this.bitsProcessed=1+(0|this.bitsProcessed)|0:this.resetMode()}return 0|e},GameBoyAdvanceEEPROMChip.prototype.read32=function(){return 65537},GameBoyAdvanceEEPROMChip.prototype.write16=function(e){switch(e|=0,e&=1,0|this.mode){case 0:this.mode=0|e;break;case 1:this.selectMode(0|e);break;case 2:case 3:this.addressMode(0|e);break;case 4:this.writeMode(0|e);break;case 5:case 6:this.endAddressing();break;default:this.resetMode()}},GameBoyAdvanceEEPROMChip.prototype.selectMode=function(e){e|=0,this.address=0,this.bitsProcessed=0,this.mode=2|e},GameBoyAdvanceEEPROMChip.prototype.addressMode=function(e){switch(e|=0,this.address=this.address<<1|e,this.bitsProcessed=1+(0|this.bitsProcessed)|0,0|this.bitsProcessed){case 6:if((0|this.IOCore.dmaChannel3.wordCountShadow)>=(2==(0|this.mode)?74:10)){this.largestSizePossible=8192,this.allocate();break}case 14:this.changeModeToActive()}},GameBoyAdvanceEEPROMChip.prototype.changeModeToActive=function(){this.address&=1023,this.address<<=3,this.bitsProcessed=0,this.mode=2+(0|this.mode)|0},GameBoyAdvanceEEPROMChip.prototype.writeMode=function(e){e|=0,this.pushBuffer(0|e),64==(0|this.bitsProcessed)&&(this.copyBuffer(),this.mode=6)},GameBoyAdvanceEEPROMChip.prototype.pushBuffer=function(e){e|=0;var t=this.bitsProcessed>>3;this.buffer[7&t]=this.buffer[7&t]<<1&254|e,this.bitsProcessed=1+(0|this.bitsProcessed)|0},GameBoyAdvanceEEPROMChip.prototype.copyBuffer=function(){for(var e=0;(0|e)<8;e=1+(0|e)|0)this.saves[this.address|e]=255&this.buffer[7&e]},GameBoyAdvanceEEPROMChip.prototype.endAddressing=function(){this.mode=2+(0|this.mode)|0},GameBoyAdvanceEEPROMChip.prototype.resetMode=function(){this.mode=0},GameBoyAdvanceGPIOChip.prototype.getType=function(){return 0|this.type},GameBoyAdvanceGPIOChip.prototype.setType=function(e){e|=0,this.type=0|e},GameBoyAdvanceGPIOChip.prototype.read=function(e){e|=0;var t=0;if(0|this.readWrite)switch(15&e){case 4:this.readTick(),t=0|this.data;break;case 6:t=0|this.direction;break;case 8:t=0|this.readWrite}return 0|t},GameBoyAdvanceGPIOChip.prototype.write=function(e,t){switch(t|=0,15&(e|=0)){case 4:this.data=15&t,this.writeTick(0|t);break;case 6:this.direction=15&t;break;case 8:this.readWrite=1&t}},GlueCodeMixer.prototype.sampleRate=44100,GlueCodeMixer.prototype.bufferAmount=44100,GlueCodeMixer.prototype.channelCount=2,GlueCodeMixer.prototype.initializeBuffer=function(){this.buffer=new AudioSimpleBuffer(this.channelCount,this.bufferAmount)},GlueCodeMixer.prototype.appendInput=function(e){if(this.audio){for(var t=0;t<this.outputUnits.length&&this.outputUnits[t];t++);this.outputUnits[t]=e,this.outputUnitsValid.push(e),e.registerStackPosition(t)}else"function"==typeof e.errorCallback&&e.errorCallback()},GlueCodeMixer.prototype.unregister=function(e){this.outputUnits[e]=null,this.outputUnitsValid=[];for(var t=0,i=this.outputUnits.length;t<i;++t)this.outputUnits[t]&&this.outputUnitsValid.push(this.outputUnits)},GlueCodeMixer.prototype.checkHeartbeats=function(){for(var e=this.outputUnitsValid.length,t=0;t<e;++t)this.outputUnitsValid[t].heartBeatCallback()},GlueCodeMixer.prototype.checkPostHeartbeats=function(){for(var e=this.outputUnitsValid.length,t=0;t<e;++t)this.outputUnitsValid[t].postHeartBeatCallback()},GlueCodeMixer.prototype.checkAudio=function(){if(this.audio){for(var e=this.outputUnitsValid.length,t=0,i=0;t<e;++t)this.outputUnitsValid[t].prepareShift();for(var r=0,a=this.findLowestBufferCount();r<a;++r){for(t=0,i=0;t<e;++t)i+=this.outputUnitsValid[t].shift();this.buffer.push(i)}var s=this.buffer.count();this.audio.writeAudioNoCallback(this.buffer.buffer,s),this.buffer.reset()}},GlueCodeMixer.prototype.findLowestBufferCount=function(){for(var e=0,t=0,i=this.outputUnitsValid.length;t<i;++t){var r=this.outputUnitsValid[t].buffer.resampledSamplesLeft();r>0&&(e=e>0?Math.min(e,r):r)}return Math.min(e,this.channelCount*this.bufferAmount)},GlueCodeMixer.prototype.disableAudio=function(){this.audio=null},GlueCodeMixerInput.prototype.initialize=function(e,t,i,r,a,s){this.channelCount=e,this.sampleRate=t,this.bufferAmount=i,this.heartBeatCallback=r,this.postHeartBeatCallback=a,this.errorCallback=s;var o=this.buffer;this.buffer=new AudioBufferWrapper(this.channelCount,this.mixer.channelCount,this.bufferAmount,this.sampleRate,this.mixer.sampleRate),o&&this.buffer.copyOld(o)},GlueCodeMixerInput.prototype.register=function(){this.mixer.appendInput(this)},GlueCodeMixerInput.prototype.setVolume=function(e){this.volume=Math.min(Math.max(e,0),1)},GlueCodeMixerInput.prototype.prepareShift=function(){this.buffer.resampleRefill()},GlueCodeMixerInput.prototype.shift=function(){return this.buffer.shift()*this.volume},GlueCodeMixerInput.prototype.push=function(e,t,i){this.buffer.push(e,t,i),this.mixer.checkAudio()},GlueCodeMixerInput.prototype.pushDeferred=function(e,t,i){this.buffer.push(e,t,i)},GlueCodeMixerInput.prototype.flush=function(){this.mixer.checkAudio()},GlueCodeMixerInput.prototype.remainingBuffer=function(){return this.buffer.remainingBuffer()+Math.floor(this.mixer.audio.remainingBuffer()*this.sampleRate/this.mixer.sampleRate/this.mixer.channelCount)*this.mixer.channelCount},GlueCodeMixerInput.prototype.registerStackPosition=function(e){this.stackPosition=e},GlueCodeMixerInput.prototype.unregister=function(){this.mixer.unregister(this.stackPosition)},GlueCodeMixerInput.prototype.setBufferSpace=function(e){this.buffer.setBufferSpace(e)},AudioBufferWrapper.prototype.initialize=function(){this.inBufferSize=this.bufferAmount*this.mixerChannelCount,this.inBuffer=getFloat32Array(this.inBufferSize),this.resampler=new Resampler(this.sampleRate,this.mixerSampleRate,this.mixerChannelCount,this.inBuffer),this.outBufferSize=this.resampler.outputBuffer.length,this.outBuffer=getFloat32Array(this.outBufferSize),this.inputOffset=0,this.resampleBufferStart=0,this.resampleBufferEnd=0},AudioBufferWrapper.prototype.copyOld=function(e){for(this.resampleRefill();e.resampleBufferStart!=e.resampleBufferEnd;)this.outBuffer[this.resampleBufferEnd++]=e.outBuffer[e.resampleBufferStart++],this.resampleBufferEnd==this.outBufferSize&&(this.resampleBufferEnd=0),this.resampleBufferStart==this.resampleBufferEnd&&(this.resampleBufferStart+=this.mixerChannelCount,this.resampleBufferStart==this.outBufferSize&&(this.resampleBufferStart=0)),e.resampleBufferStart==e.outBufferSize&&(e.resampleBufferStart=0)},AudioBufferWrapper.prototype.push=function(e,t,i){var r=Math.min(e.length,i);if(this.channelCount<this.mixerChannelCount)for(;t<r&&this.inputOffset<this.inBufferSize;){for(var a=this.channelCount;a<this.mixerChannelCount;++a)this.inBuffer[this.inputOffset++]=e[t];for(a=0;a<this.channelCount&&t<r;++a)this.inBuffer[this.inputOffset++]=e[t++]}else if(this.channelCount==this.mixerChannelCount)for(;t<r&&this.inputOffset<this.inBufferSize;)this.inBuffer[this.inputOffset++]=e[t++];else for(;t<r&&this.inputOffset<this.inBufferSize;){for(a=0;a<this.mixerChannelCount&&t<r;++a)this.inBuffer[this.inputOffset++]=e[t++];t+=this.channelCount-this.mixerChannelCount}},AudioBufferWrapper.prototype.shift=function(){var e=0;return this.resampleBufferStart!=this.resampleBufferEnd&&(e=this.outBuffer[this.resampleBufferStart++],this.resampleBufferStart==this.outBufferSize&&(this.resampleBufferStart=0)),e},AudioBufferWrapper.prototype.resampleRefill=function(){if(this.inputOffset>0){for(var e=this.resampler.resampler(this.inputOffset),t=this.resampler.outputBuffer,i=0;i<e;)this.outBuffer[this.resampleBufferEnd++]=t[i++],this.resampleBufferEnd==this.outBufferSize&&(this.resampleBufferEnd=0),this.resampleBufferStart==this.resampleBufferEnd&&(this.resampleBufferStart+=this.mixerChannelCount,this.resampleBufferStart==this.outBufferSize&&(this.resampleBufferStart=0));this.inputOffset=0}},AudioBufferWrapper.prototype.setBufferSpace=function(e){for(;this.inputOffset<e&&this.inputOffset<this.inBufferSize;)this.inBuffer[this.inputOffset++]=0},AudioBufferWrapper.prototype.remainingBuffer=function(){return Math.floor(this.resampledSamplesLeft()*this.resampler.ratioWeight/this.mixerChannelCount)*this.mixerChannelCount+this.inputOffset},AudioBufferWrapper.prototype.resampledSamplesLeft=function(){return(this.resampleBufferStart<=this.resampleBufferEnd?0:this.outBufferSize)+this.resampleBufferEnd-this.resampleBufferStart},AudioSimpleBuffer.prototype.push=function(e){this.stackLength<this.outBufferSize&&(this.buffer[this.stackLength++]=e)},AudioSimpleBuffer.prototype.count=function(){return this.stackLength},AudioSimpleBuffer.prototype.reset=function(){this.stackLength=0};var toBase64=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/","="],fromBase64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function base64(e){try{var t=window.btoa(e)}catch(o){t="";var i=e.length;if(i>0){for(var r=[0,0,0],a=0,s=i%3;e.length%3>0;)e[e.length]=" ";for(;a<i;)r=[255&e.charCodeAt(a++),255&e.charCodeAt(a++),255&e.charCodeAt(a++)],t+=toBase64[r[0]>>2]+toBase64[(3&r[0])<<4|r[1]>>4]+toBase64[(15&r[1])<<2|r[2]>>6]+toBase64[63&r[2]];s>0&&(t[t.length-1]="=",2==s?(t[t.length-2]="=",t[t.length-3]=toBase64[(3&r[0])<<4]):t[t.length-2]=toBase64[(15&r[1])<<2])}}return t}function base64_decode(e){try{var t=window.atob(e)}catch(s){t="";var i=e.length;if(i>3&&i%4==0){for(var r=[0,0,0,0],a=0;a<i;)r=[fromBase64.indexOf(e.charAt(a++)),fromBase64.indexOf(e.charAt(a++)),fromBase64.indexOf(e.charAt(a++)),fromBase64.indexOf(e.charAt(a++))],t+=String.fromCharCode(r[0]<<2|r[1]>>4)+String.fromCharCode((15&r[1])<<4|r[2]>>2)+String.fromCharCode((3&r[2])<<6|r[3]);r[3]>=64&&(t.length-=1,r[2]>=64&&(t.length-=1))}}return t}function arrayToBase64(e){for(var t="",i=e.length,r=0;r<i;++r)"number"==typeof e[r]&&(t+=String.fromCharCode(e[r]));return base64(t)}function base64ToArray(e){for(var t=base64_decode(e),i=[],r=t.length,a=0;a<r;)i.push(255&t.charCodeAt(a++));return i}var IodineGUI={Iodine:null,Blitter:null,coreTimerID:null,GUITimerID:null,toMap:null,toMapIndice:0,suspended:!1,isPlaying:!1,startTime:+(new Date).getTime(),mixerInput:null,currentSpeed:[!1,0],defaults:{timerRate:8,sound:!0,volume:1,skipBoot:!1,toggleSmoothScaling:!0,toggleDynamicSpeed:!1,toggleOffthreadGraphics:!0,toggleOffthreadCPU:-1==navigator.userAgent.indexOf("AppleWebKit")||-1!=navigator.userAgent.indexOf("Windows NT 10.0")&&-1==navigator.userAgent.indexOf("Trident"),keyZonesGBA:[88,90,16,13,39,37,38,40,83,65],keyZonesControl:[55,56,52,51,53,54,80,82]}};function registerIodineHandler(){try{if("function"!=typeof SharedArrayBuffer||"object"!=typeof Atomics)throw null;if(!IodineGUI.defaults.toggleOffthreadCPU&&IodineGUI.defaults.toggleOffthreadGraphics)IodineGUI.Iodine=new IodineGBAWorkerGfxShim;else{if(!IodineGUI.defaults.toggleOffthreadGraphics)throw null;IodineGUI.Iodine=new IodineGBAWorkerShim,addEvent("beforeunload",window,registerBeforeUnloadHandler)}}catch(e){IodineGUI.Iodine=new GameBoyAdvanceEmulator}}function registerBeforeUnloadHandler(e){return IodineGUI.Iodine.pause(),e.preventDefault&&e.preventDefault(),"IodineGBA needs to process your save data, leaving now may result in not saving current data."}function initTimer(){IodineGUI.Iodine.setIntervalRate(+IodineGUI.defaults.timerRate),IodineGUI.coreTimerID=setInterval((function(){IodineGUI.Iodine.timerCallback(+(new Date).getTime()-+IodineGUI.startTime>>>0)}),0|IodineGUI.defaults.timerRate)}function calculateTiming(){IodineGUI.Iodine.setIntervalRate(+IodineGUI.defaults.timerRate)}function startTimer(){IodineGUI.coreTimerID=setInterval((function(){IodineGUI.Iodine.timerCallback(+(new Date).getTime()-+IodineGUI.startTime>>>0)}),0|IodineGUI.defaults.timerRate)}function updateTimer(e){(0|(e|=0))!=(0|IodineGUI.defaults.timerRate)&&(IodineGUI.defaults.timerRate=0|e,IodineGUI.Iodine.setIntervalRate(+IodineGUI.defaults.timerRate),IodineGUI.isPlaying&&(IodineGUI.coreTimerID&&clearInterval(IodineGUI.coreTimerID),initTimer()))}function registerBlitterHandler(){IodineGUI.Blitter=new GfxGlueCode(240,160),IodineGUI.Blitter.attachCanvas(document.getElementById("emulator_target")),IodineGUI.Iodine.attachGraphicsFrameHandler(IodineGUI.Blitter),IodineGUI.Blitter.attachGfxPostCallback((function(){IodineGUI.currentSpeed[0]&&(document.getElementById("speed").textContent="Speed: "+IodineGUI.currentSpeed[1]+"%")}))}function registerAudioHandler(){var e=new GlueCodeMixer(document.getElementById("play"));IodineGUI.mixerInput=new GlueCodeMixerInput(e),IodineGUI.Iodine.attachAudioHandler(IodineGUI.mixerInput)}function GfxGlueCode(e,t){this.graphicsFound=!1,this.gfxCallback=null,this.doSmoothing=!0,this.offscreenWidth=e,this.offscreenHeight=t,this.offscreenRGBCount=this.offscreenWidth*this.offscreenHeight*3,this.offscreenRGBACount=this.offscreenWidth*this.offscreenHeight*4,this.initializeVSync(),this.initializeBuffers()}function registerGUIEvents(){IodineGUI.Iodine.attachPlayStatusHandler(updatePlayButton),addEvent("keydown",document,keyDown),addEvent("keyup",document,keyUpPreprocess),addEvent("change",document.getElementById("rom_load"),fileLoadROM),addEvent("change",document.getElementById("bios_load"),fileLoadBIOS),addEvent("click",document.getElementById("play"),(function(e){IodineGUI.Iodine.play()})),addEvent("click",document.getElementById("pause"),(function(e){IodineGUI.Iodine.pause()})),addEvent("click",document.getElementById("restart"),(function(e){IodineGUI.Iodine.restart()})),addEvent("click",document.getElementById("sound"),(function(){setValue("sound",!!this.checked),this.checked?IodineGUI.Iodine.enableAudio():IodineGUI.Iodine.disableAudio()})),addEvent("click",document.getElementById("skip_boot"),(function(){setValue("skipBoot",!!this.checked),IodineGUI.Iodine.toggleSkipBootROM(this.checked)})),addEvent("click",document.getElementById("toggleSmoothScaling"),(function(){setValue("toggleSmoothScaling",!!this.checked),IodineGUI.Blitter&&IodineGUI.Blitter.setSmoothScaling(this.checked)})),addEvent("click",document.getElementById("toggleDynamicSpeed"),(function(){setValue("toggleDynamicSpeed",!!this.checked),IodineGUI.Iodine.toggleDynamicSpeed(this.checked)})),addEvent("click",document.getElementById("offthread-gpu"),(function(){setValue("toggleOffthreadGraphics",!!this.checked),IodineGUI.Iodine.toggleOffthreadGraphics(this.checked)})),addEvent("click",document.getElementById("offthread-cpu"),(function(){setValue("toggleOffthreadCPU",!!this.checked)})),addEvent("change",document.getElementById("speedset"),speedChangeFunc),addEvent("input",document.getElementById("speedset"),speedChangeFunc),addEvent("click",document.getElementById("fullscreen"),toggleFullScreen),addEvent("click",document.getElementById("key_a"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=0})),addEvent("mousedown",document.getElementById("touch-a"),(function(){IodineGUI.Iodine.keyDown(0)})),addEvent("mouseup",document.getElementById("touch-a"),(function(){IodineGUI.Iodine.keyUp(0)})),addEvent("click",document.getElementById("key_b"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=1})),addEvent("mousedown",document.getElementById("touch-b"),(function(){IodineGUI.Iodine.keyDown(1)})),addEvent("mouseup",document.getElementById("touch-b"),(function(){IodineGUI.Iodine.keyUp(1)})),addEvent("click",document.getElementById("key_select"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=2})),addEvent("mousedown",document.getElementById("touch-select"),(function(){IodineGUI.Iodine.keyDown(2)})),addEvent("mouseup",document.getElementById("touch-select"),(function(){IodineGUI.Iodine.keyUp(2)})),addEvent("click",document.getElementById("key_start"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=3})),addEvent("mousedown",document.getElementById("touch-start"),(function(){IodineGUI.Iodine.keyDown(3)})),addEvent("mouseup",document.getElementById("touch-start"),(function(){IodineGUI.Iodine.keyUp(3)})),addEvent("click",document.getElementById("key_right"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=4})),addEvent("mousedown",document.getElementById("touch-right"),(function(){IodineGUI.Iodine.keyDown(4)})),addEvent("mouseup",document.getElementById("touch-right"),(function(){IodineGUI.Iodine.keyUp(4)})),addEvent("click",document.getElementById("key_left"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=5})),addEvent("mousedown",document.getElementById("touch-left"),(function(){IodineGUI.Iodine.keyDown(5)})),addEvent("mouseup",document.getElementById("touch-left"),(function(){IodineGUI.Iodine.keyUp(5)})),addEvent("click",document.getElementById("key_up"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=6})),addEvent("mousedown",document.getElementById("touch-up"),(function(){IodineGUI.Iodine.keyDown(6)})),addEvent("mouseup",document.getElementById("touch-up"),(function(){IodineGUI.Iodine.keyUp(6)})),addEvent("click",document.getElementById("key_down"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=7})),addEvent("mousedown",document.getElementById("touch-down"),(function(){IodineGUI.Iodine.keyDown(7)})),addEvent("mouseup",document.getElementById("touch-down"),(function(){IodineGUI.Iodine.keyUp(7)})),addEvent("click",document.getElementById("key_r"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=8})),addEvent("mousedown",document.getElementById("touch-r"),(function(){IodineGUI.Iodine.keyDown(8)})),addEvent("mouseup",document.getElementById("touch-r"),(function(){IodineGUI.Iodine.keyUp(8)})),addEvent("click",document.getElementById("key_l"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesGBA,IodineGUI.toMapIndice=9})),addEvent("mousedown",document.getElementById("touch-l"),(function(){IodineGUI.Iodine.keyDown(9)})),addEvent("mouseup",document.getElementById("touch-l"),(function(){IodineGUI.Iodine.keyUp(9)})),addEvent("click",document.getElementById("key_volumedown"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=0})),addEvent("click",document.getElementById("key_volumeup"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=1})),addEvent("click",document.getElementById("key_speedup"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=2})),addEvent("click",document.getElementById("key_slowdown"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=3})),addEvent("click",document.getElementById("key_speedreset"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=4})),addEvent("click",document.getElementById("key_fullscreen"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=5})),addEvent("click",document.getElementById("key_playpause"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=6})),addEvent("click",document.getElementById("key_restart"),(function(){IodineGUI.toMap=IodineGUI.defaults.keyZonesControl,IodineGUI.toMapIndice=7})),addEvent("change",document.getElementById("import"),(function(e){if(void 0!==this.files)try{if(this.files.length>=1){writeRedTemporaryText('Reading the local file "'+this.files[0].name+'" for importing.');try{var t=new FileReader;t.onload=function(){if(2==this.readyState){writeRedTemporaryText("file imported.");try{import_save(this.result)}catch(e){writeRedTemporaryText(e.message+" file: "+e.fileName+" line: "+e.lineNumber)}}else writeRedTemporaryText("importing file, please wait...")},t.readAsBinaryString(this.files[this.files.length-1])}catch(e){var i=this.files[this.files.length-1].getAsBinary();try{import_save(i)}catch(e){writeRedTemporaryText(e.message+" file: "+e.fileName+" line: "+e.lineNumber)}}}else writeRedTemporaryText("Incorrect number of files selected for local loading.")}catch(e){writeRedTemporaryText("Could not load in a locally stored ROM file.")}else writeRedTemporaryText("could not find the handle on the file to open.");e.preventDefault&&e.preventDefault()})),addEvent("click",document.getElementById("export"),refreshStorageListing),addEvent("unload",window,ExportSave),IodineGUI.Iodine.attachSpeedHandler((function(e){(e=e.toFixed(2))!=IodineGUI.currentSpeed[1]&&(IodineGUI.currentSpeed[1]=e,IodineGUI.currentSpeed[0]=!0)})),addEvent("change",document.getElementById("volume"),volChangeFunc),addEvent("input",document.getElementById("volume"),volChangeFunc),addEvent("resize",window,resizeCanvasFunc),addEvent("mouseover",document.getElementById("saves_menu"),rebuildSavesMenu),void 0!==document.hidden?addEvent("visibilitychange",document,visibilityChangeHandle):void 0!==document.mozHidden?addEvent("mozvisibilitychange",document,mozVisibilityChangeHandle):void 0!==document.msHidden?addEvent("msvisibilitychange",document,msVisibilityChangeHandle):void 0!==document.webkitHidden&&addEvent("webkitvisibilitychange",document,webkitVisibilityChangeHandle),resizeCanvasFunc()}function registerDefaultSettings(){null===findValue("sound")?setValue("sound",!!IodineGUI.defaults.sound):IodineGUI.defaults.sound=!!findValue("sound"),null===findValue("volume")?setValue("volume",+IodineGUI.defaults.volume):IodineGUI.defaults.volume=+findValue("volume"),document.getElementById("volume").value=Math.round(100*IodineGUI.defaults.volume),document.getElementById("speedset").value=50,null===findValue("skipBoot")?setValue("skipBoot",!!IodineGUI.defaults.skipBoot):IodineGUI.defaults.skipBoot=!!findValue("skipBoot"),null===findValue("toggleSmoothScaling")?setValue("toggleSmoothScaling",!!IodineGUI.defaults.toggleSmoothScaling):IodineGUI.defaults.toggleSmoothScaling=!!findValue("toggleSmoothScaling"),null===findValue("toggleDynamicSpeed")?setValue("toggleDynamicSpeed",!!IodineGUI.defaults.toggleDynamicSpeed):IodineGUI.defaults.toggleDynamicSpeed=!!findValue("toggleDynamicSpeed"),null===findValue("toggleOffthreadGraphics")?setValue("toggleOffthreadGraphics",!!IodineGUI.defaults.toggleOffthreadGraphics):IodineGUI.defaults.toggleOffthreadGraphics=!!findValue("toggleOffthreadGraphics"),null===findValue("toggleOffthreadCPU")?setValue("toggleOffthreadCPU",!!IodineGUI.defaults.toggleOffthreadCPU):IodineGUI.defaults.toggleOffthreadCPU=!!findValue("toggleOffthreadCPU"),null===findValue("key_a")?setValue("key_a",0|IodineGUI.defaults.keyZonesGBA[0]):IodineGUI.defaults.keyZonesGBA[0]=findValue("key_a"),null===findValue("key_b")?setValue("key_b",0|IodineGUI.defaults.keyZonesGBA[1]):IodineGUI.defaults.keyZonesGBA[1]=findValue("key_b"),null===findValue("key_select")?setValue("key_select",0|IodineGUI.defaults.keyZonesGBA[2]):IodineGUI.defaults.keyZonesGBA[2]=findValue("key_select"),null===findValue("key_start")?setValue("key_start",0|IodineGUI.defaults.keyZonesGBA[3]):IodineGUI.defaults.keyZonesGBA[3]=findValue("key_start"),null===findValue("key_right")?setValue("key_right",0|IodineGUI.defaults.keyZonesGBA[4]):IodineGUI.defaults.keyZonesGBA[4]=findValue("key_right"),null===findValue("key_left")?setValue("key_left",0|IodineGUI.defaults.keyZonesGBA[5]):IodineGUI.defaults.keyZonesGBA[5]=findValue("key_left"),null===findValue("key_up")?setValue("key_up",0|IodineGUI.defaults.keyZonesGBA[6]):IodineGUI.defaults.keyZonesGBA[6]=findValue("key_up"),null===findValue("key_down")?setValue("key_down",0|IodineGUI.defaults.keyZonesGBA[7]):IodineGUI.defaults.keyZonesGBA[7]=findValue("key_down"),null===findValue("key_r")?setValue("key_r",0|IodineGUI.defaults.keyZonesGBA[8]):IodineGUI.defaults.keyZonesGBA[8]=findValue("key_r"),null===findValue("key_l")?setValue("key_l",0|IodineGUI.defaults.keyZonesGBA[9]):IodineGUI.defaults.keyZonesGBA[9]=findValue("key_l"),null===findValue("key_volumedown")?setValue("key_volumedown",0|IodineGUI.defaults.keyZonesControl[0]):IodineGUI.defaults.keyZonesControl[0]=findValue("key_volumedown"),null===findValue("key_volumeup")?setValue("key_volumeup",0|IodineGUI.defaults.keyZonesControl[1]):IodineGUI.defaults.keyZonesControl[1]=findValue("key_volumeup"),null===findValue("key_speedup")?setValue("key_speedup",0|IodineGUI.defaults.keyZonesControl[2]):IodineGUI.defaults.keyZonesControl[2]=findValue("key_speedup"),null===findValue("key_slowdown")?setValue("key_slowdown",0|IodineGUI.defaults.keyZonesControl[3]):IodineGUI.defaults.keyZonesControl[3]=findValue("key_slowdown"),null===findValue("key_speedreset")?setValue("key_speedreset",0|IodineGUI.defaults.keyZonesControl[4]):IodineGUI.defaults.keyZonesControl[4]=findValue("key_speedreset"),null===findValue("key_fullscreen")?setValue("key_fullscreen",0|IodineGUI.defaults.keyZonesControl[5]):IodineGUI.defaults.keyZonesControl[5]=findValue("key_fullscreen"),null===findValue("key_playpause")?setValue("key_playpause",0|IodineGUI.defaults.keyZonesControl[6]):IodineGUI.defaults.keyZonesControl[6]=findValue("key_playpause"),null===findValue("key_restart")?setValue("key_restart",0|IodineGUI.defaults.keyZonesControl[7]):IodineGUI.defaults.keyZonesControl[7]=findValue("key_restart")}function saveKeyBindings(){setValue("key_a",0|IodineGUI.defaults.keyZonesGBA[0]),setValue("key_b",0|IodineGUI.defaults.keyZonesGBA[1]),setValue("key_select",0|IodineGUI.defaults.keyZonesGBA[2]),setValue("key_start",0|IodineGUI.defaults.keyZonesGBA[3]),setValue("key_right",0|IodineGUI.defaults.keyZonesGBA[4]),setValue("key_left",0|IodineGUI.defaults.keyZonesGBA[5]),setValue("key_up",0|IodineGUI.defaults.keyZonesGBA[6]),setValue("key_down",0|IodineGUI.defaults.keyZonesGBA[7]),setValue("key_r",0|IodineGUI.defaults.keyZonesGBA[8]),setValue("key_l",0|IodineGUI.defaults.keyZonesGBA[9]),setValue("key_volumedown",0|IodineGUI.defaults.keyZonesControl[0]),setValue("key_volumeup",0|IodineGUI.defaults.keyZonesControl[1]),setValue("key_speedup",0|IodineGUI.defaults.keyZonesControl[2]),setValue("key_slowdown",0|IodineGUI.defaults.keyZonesControl[3]),setValue("key_speedreset",0|IodineGUI.defaults.keyZonesControl[4]),setValue("key_fullscreen",0|IodineGUI.defaults.keyZonesControl[5]),setValue("key_playpause",0|IodineGUI.defaults.keyZonesControl[6]),setValue("key_restart",0|IodineGUI.defaults.keyZonesControl[7])}function registerGUISettings(){document.getElementById("sound").checked=IodineGUI.defaults.sound,IodineGUI.defaults.sound&&IodineGUI.Iodine.enableAudio();try{var e=document.getElementById("volume");e.min=0,e.max=100,e.step=1,e.value=100*IodineGUI.defaults.volume}catch(e){}IodineGUI.mixerInput.setVolume(IodineGUI.defaults.volume),document.getElementById("skip_boot").checked=IodineGUI.defaults.skipBoot,IodineGUI.Iodine.toggleSkipBootROM(IodineGUI.defaults.skipBoot),document.getElementById("toggleSmoothScaling").checked=IodineGUI.defaults.toggleSmoothScaling,IodineGUI.Blitter.setSmoothScaling(IodineGUI.defaults.toggleSmoothScaling),document.getElementById("toggleDynamicSpeed").checked=IodineGUI.defaults.toggleDynamicSpeed,IodineGUI.Iodine.toggleDynamicSpeed(IodineGUI.defaults.toggleDynamicSpeed),document.getElementById("offthread-gpu").checked=IodineGUI.defaults.toggleOffthreadGraphics,IodineGUI.Iodine.toggleOffthreadGraphics(IodineGUI.defaults.toggleOffthreadGraphics),document.getElementById("offthread-cpu").checked=IodineGUI.defaults.toggleOffthreadCPU,"function"==typeof SharedArrayBuffer&&"object"==typeof Atomics||(document.getElementById("offthread-gpu").disabled=!0,document.getElementById("offthread-cpu").disabled=!0)}function updatePlayButton(e){1==(0|(e|=0))?(document.getElementById("play").className="hide",document.getElementById("pause").className="show",document.getElementById("menu").className="playing",IodineGUI.coreTimerID||startTimer(),IodineGUI.isPlaying=!0):(document.getElementById("pause").className="hide",document.getElementById("play").className="show",document.getElementById("menu").className="paused",IodineGUI.coreTimerID&&(clearInterval(IodineGUI.coreTimerID),IodineGUI.coreTimerID=null),IodineGUI.isPlaying=!1)}function visibilityChangeHandle(){processVisibilityChange(document.hidden)}function mozVisibilityChangeHandle(){processVisibilityChange(document.mozHidden)}function msVisibilityChangeHandle(){processVisibilityChange(document.msHidden)}function webkitVisibilityChangeHandle(){processVisibilityChange(document.webkitHidden)}function processVisibilityChange(e){e?"hide"==document.getElementById("play").className&&(IodineGUI.Iodine.pause(),IodineGUI.suspended=!0):IodineGUI.suspended&&(IodineGUI.suspended=!1,IodineGUI.Iodine.play())}function stepVolume(e){var t=document.getElementById("volume").value/100;t=Math.min(Math.max(t+e,0),1),IodineGUI.mixerInput.setVolume(t),document.getElementById("volume").value=Math.round(100*t)}function volChangeFunc(){var e=.01*Math.min(Math.max(parseInt(this.value),0),100);setValue("volume",+e),IodineGUI.mixerInput.setVolume(+e)}function speedChangeFunc(){var e=Math.min(Math.max(parseInt(this.value),0),100)/50;e*=e,IodineGUI.Iodine.setSpeed(+e)}function writeRedTemporaryText(e){IodineGUI.GUITimerID&&clearTimeout(IodineGUI.GUITimerID),document.getElementById("tempMessage").style.display="block",document.getElementById("tempMessage").textContent=e,IodineGUI.GUITimerID=setTimeout(clearTempString,5e3)}function clearTempString(){document.getElementById("tempMessage").style.display="none"}function resizeCanvasFunc(){}function rebuildSavesMenu(e){didNotEnter(document.getElementById("saves_menu_container"),e)&&(ExportSave(),rebuildExistingSaves(),e.preventDefault&&e.preventDefault())}function rebuildExistingSaves(){var e=document.getElementById("existing_saves_list");ExportSave(),removeChildNodes(e);for(var t=getSavesKeys();t.length>0;)addExistingSaveItem(e,t.shift())}function addExistingSaveItem(e,t){var i=document.createElement("li");i.className="nowrap";var r=document.createElement("span");r.textContent=decodeKeyType(t),i.appendChild(r);var a=document.createElement("ul"),s=document.createElement("li");s.className="nowrap",addEvent("click",s,(function(){deleteValue(t),rebuildExistingSaves()}));var o=document.createElement("span");o.textContent="Delete",s.appendChild(o),a.appendChild(s);var n=document.createElement("li");n.className="nowrap";var h=document.createElement("a");h.href="data:application/octet-stream;base64,"+base64(generateBlob(t,findValue(t))),h.download=t+"_"+(new Date).getTime()+".export",h.textContent="Download as import compatible",n.appendChild(h),a.appendChild(n);var c=document.createElement("li");c.className="nowrap";var d=document.createElement("a");d.href="data:application/octet-stream;base64,"+findValue(t),d.download=t+"_"+(new Date).getTime()+".sav",d.textContent="Download as raw binary",c.appendChild(d),a.appendChild(c),i.appendChild(a),e.appendChild(i)}function decodeKeyType(e){return"SAVE_TYPE_GUID_"==e.substring(0,15)?'Game "'+e.substring(15)+'" Type Code':"SAVE_GUID_"==e.substring(0,10)?'Game "'+e.substring(10)+'" Cartridge Data':"SAVE_RTC_GUID_"==e.substring(0,15)?'Game "'+e.substring(15)+'" RTC Data':e}function removeChildNodes(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function didNotEnter(e,t){for(var i=void 0!==t.target?t.target:t.srcElement;i;){if(isSameNode(i,e))return!1;i=i.parentElement}return!0}function isSameNode(e,t){return"function"==typeof e.isSameNode?e.isSameNode(t):e===t}function addEvent(e,t,i){try{t.addEventListener(e,i,!1)}catch(r){t.attachEvent("on"+e,i)}}function removeEvent(e,t,i){try{t.removeEventListener(e,i,!1)}catch(r){t.detachEvent("on"+e,i)}}function keyDown(e){for(var t=0|e.keyCode,i=0;(0|i)<10;i=1+(0|i)|0)if((0|IodineGUI.defaults.keyZonesGBA[0|i])==(0|t))return IodineGUI.Iodine.keyDown(0|i),void(e.preventDefault&&e.preventDefault())}function keyUpGBA(e){e|=0;for(var t=0;(0|t)<10;t=1+(0|t)|0)if((0|IodineGUI.defaults.keyZonesGBA[0|t])==(0|e))return void IodineGUI.Iodine.keyUp(0|t)}function keyUp(e){e|=0;for(var t=0;(0|t)<8;t=1+(0|t)|0)if((0|IodineGUI.defaults.keyZonesControl[0|t])==(0|e))return keyboardEmulatorControl(0|t),!0;return!1}function keyUpPreprocess(e){var t=0|e.keyCode;IodineGUI.toMap?(IodineGUI.toMap[0|IodineGUI.toMapIndice]=0|t,IodineGUI.toMap=null,saveKeyBindings()):keyUp(0|t)||keyUpGBA(t)}function keyboardEmulatorControl(e){switch(0|(e|=0)){case 0:stepVolume(-.04);break;case 1:stepVolume(.04);break;case 2:IodineGUI.Iodine.incrementSpeed(.05);break;case 3:IodineGUI.Iodine.incrementSpeed(-.05);break;case 4:IodineGUI.Iodine.setSpeed(1);break;case 5:toggleFullScreen();break;case 6:togglePlayState();break;case 7:IodineGUI.Iodine.restart()}}function toggleFullScreen(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}function togglePlayState(){IodineGUI.isPlaying?IodineGUI.Iodine.pause():IodineGUI.Iodine.play()}function attachBIOS(e){try{IodineGUI.Iodine.attachBIOS(new Uint8Array(e))}catch(t){IodineGUI.Iodine.attachBIOS(e)}}function attachROM(e){try{IodineGUI.Iodine.attachROM(new Uint8Array(e))}catch(t){IodineGUI.Iodine.attachROM(e)}}function fileLoadShimCode(e,t){if(void 0!==e&&e.length>=1)try{var i=new FileReader;i.onloadend=function(){t(this.result)},i.readAsArrayBuffer(e[e.length-1])}catch(i){try{for(var r=e[e.length-1].getAsBinary(),a=[],s=0;s<r.length;++s)a[s]=255&r.charCodeAt(s);t(a)}catch(e){alert("Could not load the processed ROM file!")}}}function fileLoadBIOS(){fileLoadShimCode(this.files,attachBIOS)}function fileLoadROM(){fileLoadShimCode(this.files,attachROM)}function downloadFile(e,t){var i=new XMLHttpRequest;i.onload=t,i.open("GET","./"+e,!0),i.responseType="arraybuffer",i.overrideMimeType("text/plain; charset=x-user-defined"),i.send(null)}function processDownload(e,t){try{t(new Uint8Array(e.response))}catch(o){for(var i=e.responseText,r=i.length,a=[],s=0;s<r;s++)a[s]=255&i.charCodeAt(s);t(a)}}function ImportSaveCallback(e,t,i){try{var r=findValue("SAVE_"+e);if(null!=r)return writeRedTemporaryText("Loaded save."),void t(base64ToArray(r))}catch(e){writeRedTemporaryText("Could not read save: "+e.message)}i()}function ExportSave(){IodineGUI.Iodine.exportSave()}function ExportSaveCallback(e,t){if(""!=e)try{setValue("SAVE_"+e,arrayToBase64(t))}catch(e){writeRedTemporaryText("Could not store save: "+e.message)}}function registerSaveHandlers(){IodineGUI.Iodine.attachSaveExportHandler(ExportSaveCallback),IodineGUI.Iodine.attachSaveImportHandler(ImportSaveCallback)}function import_save(e){if((e=decodeBlob(e))&&e.blobs)if(e.blobs.length>0)for(var t=0;t<e.blobs.length;++t){var i=e.blobs[t].blobID,r=e.blobs[t].blobContent;writeRedTemporaryText('Importing blob "'+i+'"'),r?setValue(i,r):writeRedTemporaryText(i?'Save file imported had blob "'+i+'" with no blob data interpretable.':"Blob chunk information missing completely.")}else writeRedTemporaryText("Could not decode the imported file.");else writeRedTemporaryText("Could not decode the imported file.")}function generateBlob(e,t){var i="EMULATOR_DATA",r="GameBoyAdvance";return i+=to_little_endian_word(i.length+4+(1+r.length)+(1+e.length+(4+t.length))),i+=to_byte(r.length),i+=r,i+=to_byte(e.length),i+=e,i+=to_little_endian_word(t.length),i+=t}function generateMultiBlob(e){var t="GameBoyAdvance",i=18+t.length,r=to_byte(t.length);r+=t;for(var a="",s="",o=0;o<e.length;++o)a=e[o][0],s=e[o][1],r+=to_byte(a.length),r+=a,r+=to_little_endian_word(s.length),r+=s,i+=1+a.length+4+s.length;return r="EMULATOR_DATA"+to_little_endian_word(i)+r}function decodeBlob(e){var t=e.length,i={consoleID:null},r=-1;if(i.blobs=[],t>17&&"EMULATOR_DATA"==e.substring(0,13)){t=Math.min((255&e.charCodeAt(16))<<24|(255&e.charCodeAt(15))<<16|(255&e.charCodeAt(14))<<8|255&e.charCodeAt(13),t);var a=255&e.charCodeAt(17);if(t>17+a){i.consoleID=e.substring(18,18+a);for(var s=0,o=0,n=18+a;n<t;){if(s=255&e.charCodeAt(n++),!(n+s<t)){writeRedTemporaryText("Blob was incomplete, bailing out.");break}if(i.blobs[++r]={},i.blobs[r].blobID=e.substring(n,n+s),!((n+=s)+4<t)){writeRedTemporaryText("Blob was incomplete, bailing out.");break}if(o=(255&e.charCodeAt(n+3))<<24|(255&e.charCodeAt(n+2))<<16|(255&e.charCodeAt(n+1))<<8|255&e.charCodeAt(n),!((n+=4)+o<=t)){writeRedTemporaryText("Blob length check failed, blob determined to be incomplete.");break}i.blobs[r].blobContent=e.substring(n,n+o),n+=o}}}return i}function refreshStorageListing(){for(var e=getSavesKeys(),t=[],i=0;i<e.length;++i)t[i]=[e[i],findValue(e[i])];this.href="data:application/octet-stream;base64,"+base64(generateMultiBlob(t)),this.download="gameboy_advance_saves_"+(new Date).getTime()+".export"}function checkStorageLength(){try{if(window.localStorage)return window.localStorage.length}catch(e){if(window.globalStorage&&location.hostname)return window.globalStorage[location.hostname].length}return 0}function getSavesKeys(){for(var e=checkStorageLength(),t=[],i=0,r=null;i<e&&null!==(r=findKey(i++))&&r.length>0;)"IodineGBA_SAVE_"==r.substring(0,15)&&t.push(r.substring(10));return t}function findKey(e){try{if(window.localStorage)return window.localStorage.key(e)}catch(t){if(window.globalStorage&&location.hostname)return window.globalStorage[location.hostname].key(e)}return null}function to_little_endian_word(e){return to_little_endian_hword(e)+to_little_endian_hword(e>>16)}function to_little_endian_hword(e){return to_byte(e)+to_byte(e>>8)}function to_byte(e){return String.fromCharCode(255&e)}function findValue(e){e="IodineGBA_"+e;try{if(window.localStorage&&null!=window.localStorage.getItem(e))return JSON.parse(window.localStorage.getItem(e))}catch(t){if(window.globalStorage&&location.hostname&&null!=window.globalStorage[location.hostname].getItem(e))return JSON.parse(window.globalStorage[location.hostname].getItem(e))}return null}function setValue(e,t){e="IodineGBA_"+e;try{window.localStorage&&window.localStorage.setItem(e,JSON.stringify(t))}catch(i){window.globalStorage&&location.hostname&&window.globalStorage[location.hostname].setItem(e,JSON.stringify(t))}}function deleteValue(e){e="IodineGBA_"+e;try{window.localStorage&&window.localStorage.removeItem(e)}catch(t){window.globalStorage&&location.hostname&&window.globalStorage[location.hostname].removeItem(e)}}window.onload=function(){registerDefaultSettings(),registerIodineHandler(),calculateTiming(),registerBlitterHandler(),registerAudioHandler(),registerSaveHandlers(),registerGUIEvents(),registerGUISettings()},GfxGlueCode.prototype.initializeVSync=function(){window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var e=this;window.requestAnimationFrame?window.requestAnimationFrame((function(){e.vsync(),e.rAFKeepAlive()})):setInterval((function(){e.vsync()}),16)},GfxGlueCode.prototype.rAFKeepAlive=function(){var e=this;window.requestAnimationFrame((function(){e.vsync(),e.rAFKeepAlive()}))},GfxGlueCode.prototype.attachCanvas=function(e){this.canvas=e,this.graphicsFound=this.initializeCanvasTarget()},GfxGlueCode.prototype.detachCanvas=function(){this.canvas=null},GfxGlueCode.prototype.attachGfxCallback=function(e){"function"==typeof e&&(this.gfxCallback=e)},GfxGlueCode.prototype.attachGfxPostCallback=function(e){"function"==typeof e&&(this.gfxPostCallback=e)},GfxGlueCode.prototype.vsync=function(){this.graphicsFound&&("function"==typeof this.gfxCallback&&this.gfxCallback(),this.requestDraw())},GfxGlueCode.prototype.initializeBuffers=function(){this.swizzledFrameFree=[getUint8Array(this.offscreenRGBCount),getUint8Array(this.offscreenRGBCount)],this.swizzledFrameReady=[]},GfxGlueCode.prototype.recomputeDimension=function(){this.canvasLastWidth=this.canvas.clientWidth,this.canvasLastHeight=this.canvas.clientHeight,-1!=navigator.userAgent.toLowerCase().indexOf("gecko")&&-1==navigator.userAgent.toLowerCase().indexOf("like gecko")?(this.onscreenWidth=this.canvas.width=this.offscreenWidth,this.onscreenHeight=this.canvas.height=this.offscreenHeight):(this.onscreenWidth=this.canvas.width=this.canvas.clientWidth,this.onscreenHeight=this.canvas.height=this.canvas.clientHeight)},GfxGlueCode.prototype.initializeCanvasTarget=function(){try{return this.recomputeDimension(),this.canvasOffscreen=document.createElement("canvas"),this.canvasOffscreen.width=this.offscreenWidth,this.canvasOffscreen.height=this.offscreenHeight,this.drawContextOffscreen=this.canvasOffscreen.getContext("2d"),this.drawContextOnscreen=this.canvas.getContext("2d"),this.initializeCanvasBuffer(),!0}catch(e){return!1}},GfxGlueCode.prototype.initializeCanvasBuffer=function(){this.canvasBuffer=this.getBuffer(this.drawContextOffscreen,this.offscreenWidth,this.offscreenHeight),this.initializeAlpha(this.canvasBuffer.data)},GfxGlueCode.prototype.initializeAlpha=function(e){for(var t=e.length,i=3;i<t;i+=4)e[i]=255},GfxGlueCode.prototype.getBuffer=function(e,t,i){var r=null;try{r=this.drawContextOffscreen.createImageData(t,i)}catch(e){r=this.drawContextOffscreen.getImageData(0,0,t,i)}return r},GfxGlueCode.prototype.copyBuffer=__VIEWS_SUPPORTED__?function(e){if(this.graphicsFound){0==this.swizzledFrameFree.length&&this.swizzledFrameFree.push(this.swizzledFrameReady.shift());var t=this.swizzledFrameFree.shift();t.set(e),this.swizzledFrameReady.push(t)}}:function(e){if(this.graphicsFound){0==this.swizzledFrameFree.length&&this.swizzledFrameFree.push(this.swizzledFrameReady.shift());for(var t=this.swizzledFrameFree.shift(),i=0;i<this.offscreenRGBCount;i++)t[i]=e[i];this.swizzledFrameReady.push(t)}},GfxGlueCode.prototype.requestDraw=function(){if(this.swizzledFrameReady.length>0){for(var e=this.canvasBuffer.data,t=this.swizzledFrameReady.shift(),i=0,r=0;i<this.offscreenRGBACount;++i)e[i++]=t[r++],e[i++]=t[r++],e[i++]=t[r++];this.swizzledFrameFree.push(t),this.graphicsBlit(),"function"==typeof this.gfxPostCallback&&this.gfxPostCallback()}},GfxGlueCode.prototype.graphicsBlit=function(){this.canvasLastWidth==this.canvas.clientWidth&&this.canvasLastHeight==this.canvas.clientHeight||(this.recomputeDimension(),this.processSmoothing()),this.offscreenWidth==this.onscreenWidth&&this.offscreenHeight==this.onscreenHeight?this.drawContextOnscreen.putImageData(this.canvasBuffer,0,0):(this.drawContextOffscreen.putImageData(this.canvasBuffer,0,0),this.drawContextOnscreen.drawImage(this.canvasOffscreen,0,0,this.onscreenWidth,this.onscreenHeight))},GfxGlueCode.prototype.setSmoothScaling=function(e){this.doSmoothing=!!e,this.processSmoothing()},GfxGlueCode.prototype.processSmoothing=function(){this.graphicsFound&&(this.canvas.className=this.doSmoothing?"textureSmooth":"texturePixelated",this.drawContextOnscreen.mozImageSmoothingEnabled=this.doSmoothing,this.drawContextOnscreen.webkitImageSmoothingEnabled=this.doSmoothing,this.drawContextOnscreen.imageSmoothingEnabled=this.doSmoothing)};var gfxBuffers=null,gfxCounters=null;function IodineGBAWorkerGfxShim(){this.gfx=null,gfxBuffers=[getSharedUint8Array(115200),getSharedUint8Array(115200)],gfxCounters=getSharedInt32Array(3),this.Iodine=new GameBoyAdvanceEmulator}function IodineGBAWorkerShim(){this.playStatus=null,this.gfx=null,this.audio=null,this.speed=null,this.saveExport=null,this.saveImport=null,this.worker=null,this.gfxBuffers=null,this.gfxCounters=null,this.audioBuffer=null,this.audioCounters=null,this.audioSamplesRemaining=null,this.audioBufferSize=0,this.audioBufferSizeMask=0,this.audioInitialized=!1,this.timestamp=null,this.initialize()}IodineGBAWorkerGfxShim.prototype.play=function(){this.Iodine.play()},IodineGBAWorkerGfxShim.prototype.pause=function(){this.Iodine.pause()},IodineGBAWorkerGfxShim.prototype.restart=function(){this.Iodine.restart()},IodineGBAWorkerGfxShim.prototype.setIntervalRate=function(e){e=+e,this.Iodine.setIntervalRate(+e)},IodineGBAWorkerGfxShim.prototype.timerCallback=function(e){e>>>=0,this.Iodine.timerCallback(e)},IodineGBAWorkerGfxShim.prototype.attachGraphicsFrameHandler=function(e){this.gfx=e;var t=this;this.gfx.attachGfxCallback((function(){t.graphicsHeartBeat()})),this.Iodine.attachGraphicsFrameHandler(e)},IodineGBAWorkerGfxShim.prototype.attachAudioHandler=function(e){this.Iodine.attachAudioHandler(e)},IodineGBAWorkerGfxShim.prototype.enableAudio=function(){this.Iodine.enableAudio()},IodineGBAWorkerGfxShim.prototype.disableAudio=function(){this.Iodine.disableAudio()},IodineGBAWorkerGfxShim.prototype.toggleSkipBootROM=function(e){e|=0,this.Iodine.toggleSkipBootROM(0|e)},IodineGBAWorkerGfxShim.prototype.toggleDynamicSpeed=function(e){e|=0,this.Iodine.toggleDynamicSpeed(0|e)},IodineGBAWorkerGfxShim.prototype.toggleOffthreadGraphics=function(e){e|=0,this.Iodine.toggleOffthreadGraphics(0|e)},IodineGBAWorkerGfxShim.prototype.attachSpeedHandler=function(e){this.Iodine.attachSpeedHandler(e)},IodineGBAWorkerGfxShim.prototype.attachPlayStatusHandler=function(e){this.Iodine.attachPlayStatusHandler(e)},IodineGBAWorkerGfxShim.prototype.keyDown=function(e){e|=0,this.Iodine.keyDown(0|e)},IodineGBAWorkerGfxShim.prototype.keyUp=function(e){e|=0,this.Iodine.keyUp(0|e)},IodineGBAWorkerGfxShim.prototype.incrementSpeed=function(e){e=+e,this.Iodine.incrementSpeed(+e)},IodineGBAWorkerGfxShim.prototype.setSpeed=function(e){e=+e,this.Iodine.setSpeed(+e)},IodineGBAWorkerGfxShim.prototype.attachBIOS=function(e){this.Iodine.attachBIOS(e)},IodineGBAWorkerGfxShim.prototype.attachROM=function(e){this.Iodine.attachROM(e)},IodineGBAWorkerGfxShim.prototype.exportSave=function(){this.Iodine.exportSave()},IodineGBAWorkerGfxShim.prototype.attachSaveExportHandler=function(e){this.Iodine.attachSaveExportHandler(e)},IodineGBAWorkerGfxShim.prototype.attachSaveImportHandler=function(e){this.Iodine.attachSaveImportHandler(e)},IodineGBAWorkerGfxShim.prototype.graphicsHeartBeat=function(){this.gfx&&gfxCounters&&(this.consumeGraphicsBuffer(),Atomics.notify(gfxCounters,2,1))},IodineGBAWorkerGfxShim.prototype.consumeGraphicsBuffer=function(){var e=0|gfxCounters[0],t=0|Atomics.load(gfxCounters,1);if((0|t)!=(0|e)){do{this.gfx.copyBuffer(gfxBuffers[1&e]),e=1+(0|e)|0}while((0|e)!=(0|t));gfxCounters[0]=0|t}};var tempvar=document.getElementsByTagName("script");IodineGBAWorkerShim.prototype.filepath=tempvar[tempvar.length-1].src,IodineGBAWorkerShim.prototype.initialize=function(){var e=this,t=this.filepath.split("/");t=t.slice(0,t.length-2).join("/"),t+="/IodineGBA/core/Worker.js",this.worker=new Worker(t),this.worker.onmessage=function(t){e.decodeMessage(t.data)}},IodineGBAWorkerShim.prototype.sendMessageSingle=function(e){e|=0,this.worker.postMessage({messageID:e})},IodineGBAWorkerShim.prototype.sendMessageDouble=function(e,t){e|=0,this.worker.postMessage({messageID:e,payload:t})},IodineGBAWorkerShim.prototype.play=function(){this.sendMessageSingle(0)},IodineGBAWorkerShim.prototype.pause=function(){this.sendMessageSingle(1)},IodineGBAWorkerShim.prototype.restart=function(){this.sendMessageSingle(2)},IodineGBAWorkerShim.prototype.setIntervalRate=function(e){e=+e,this.sendMessageDouble(3,+e)},IodineGBAWorkerShim.prototype.timerCallback=function(e){e>>>=0,this.timestamp&&Atomics.store(this.timestamp,0,e>>>0)},IodineGBAWorkerShim.prototype.attachPlayStatusHandler=function(e){this.playStatus=e,this.sendMessageSingle(23)},IodineGBAWorkerShim.prototype.issuePlayStatus=function(e){e|=0,this.playStatus&&this.playStatus(0|e)},IodineGBAWorkerShim.prototype.attachGraphicsFrameHandler=function(e){this.gfx=e;var t=this;this.gfx.attachGfxCallback((function(){t.graphicsHeartBeat()})),this.sendMessageSingle(4)},IodineGBAWorkerShim.prototype.attachAudioHandler=function(e){this.audio=e,this.sendMessageSingle(5)},IodineGBAWorkerShim.prototype.enableAudio=function(){this.audio&&this.sendMessageSingle(6)},IodineGBAWorkerShim.prototype.disableAudio=function(){this.audio&&this.sendMessageSingle(7)},IodineGBAWorkerShim.prototype.toggleSkipBootROM=function(e){e|=0,this.sendMessageDouble(8,0|e)},IodineGBAWorkerShim.prototype.toggleDynamicSpeed=function(e){e|=0,this.sendMessageDouble(9,0|e)},IodineGBAWorkerShim.prototype.toggleOffthreadGraphics=function(e){e|=0,this.sendMessageDouble(22,0|e)},IodineGBAWorkerShim.prototype.attachSpeedHandler=function(e){this.speed=e,this.sendMessageSingle(10)},IodineGBAWorkerShim.prototype.keyDown=function(e){e|=0,this.sendMessageDouble(11,0|e)},IodineGBAWorkerShim.prototype.keyUp=function(e){e|=0,this.sendMessageDouble(12,0|e)},IodineGBAWorkerShim.prototype.incrementSpeed=function(e){e=+e,this.sendMessageDouble(13,+e)},IodineGBAWorkerShim.prototype.setSpeed=function(e){e=+e,this.sendMessageDouble(14,+e)},IodineGBAWorkerShim.prototype.attachBIOS=function(e){this.sendMessageDouble(15,e)},IodineGBAWorkerShim.prototype.attachROM=function(e){this.sendMessageDouble(16,e)},IodineGBAWorkerShim.prototype.exportSave=function(){this.sendMessageSingle(17)},IodineGBAWorkerShim.prototype.attachSaveExportHandler=function(e){this.saveExport=e,this.sendMessageSingle(18)},IodineGBAWorkerShim.prototype.attachSaveImportHandler=function(e){this.saveImport=e,this.sendMessageSingle(19)},IodineGBAWorkerShim.prototype.decodeMessage=function(e){switch(0|e.messageID){case 0:this.buffersInitialize(e.gfxBuffer1,e.gfxBuffer2,e.gfxCounters,e.audioSamplesRemaining,e.timestamp);break;case 1:this.audioInitialize(0|e.channels,+e.sampleRate,0|e.bufferLimit,e.audioBuffer,e.audioCounters);break;case 2:this.audioRegister();break;case 3:this.audioUnregister();break;case 4:this.audioSetBufferSpace(0|e.audioBufferContainAmount);break;case 5:this.saveImportRequest(e.saveID);break;case 6:this.saveExportRequest(e.saveID,e.saveData);break;case 7:this.speedPush(+e.speed);break;default:this.issuePlayStatus(0|e.playing)}},IodineGBAWorkerShim.prototype.audioInitialize=function(e,t,i,r,a){e|=0,t=+t,i|=0;var s=this;this.audio&&(this.audio.initialize(0|e,+t,0|i,(function(){s.audioHeartBeat()}),(function(){s.audioPostHeartBeat()}),(function(){s.disableAudio()})),this.audioInitialized=!0),this.audioBuffer=r,this.audioCounters=a,this.audioBufferSize=0|r.length,this.audioBufferSizeMask=(0|this.audioBufferSize)-1|0},IodineGBAWorkerShim.prototype.audioHeartBeat=function(){this.audioInitialized&&this.consumeAudioBuffer()},IodineGBAWorkerShim.prototype.consumeAudioBuffer=function(){var e=0|this.audioCounters[0],t=0|Atomics.load(this.audioCounters,1);(0|t)!=(0|e)&&(this.copyAudioBuffer(0|e,0|t),this.audioPostHeartBeat(),Atomics.store(this.audioCounters,0,0|t),this.audio.flush())},IodineGBAWorkerShim.prototype.copyAudioBuffer=function(e,t){t|=0;var i=(0|(e|=0))&(0|this.audioBufferSizeMask)|0,r=(0|t)&(0|this.audioBufferSizeMask)|0;(0|i)>=(0|r)?(this.audio.pushDeferred(this.audioBuffer,0|i,0|this.audioBufferSize),this.audio.pushDeferred(this.audioBuffer,0,0|r)):this.audio.pushDeferred(this.audioBuffer,0|i,0|r)},IodineGBAWorkerShim.prototype.audioPostHeartBeat=function(){this.audioSamplesRemaining[0]=0|this.audio.remainingBuffer()},IodineGBAWorkerShim.prototype.graphicsHeartBeat=function(){this.gfx&&this.gfxCounters&&(this.consumeGraphicsBuffer(),Atomics.notify(this.gfxCounters,2,1))},IodineGBAWorkerShim.prototype.consumeGraphicsBuffer=function(){var e=0|this.gfxCounters[0],t=0|Atomics.load(this.gfxCounters,1);if((0|t)!=(0|e)){do{this.gfx.copyBuffer(this.gfxBuffers[1&e]),e=1+(0|e)|0}while((0|e)!=(0|t));this.gfxCounters[0]=0|t}},IodineGBAWorkerShim.prototype.audioRegister=function(){this.audio&&this.audio.register()},IodineGBAWorkerShim.prototype.audioUnregister=function(){this.audio&&(this.audioHeartBeat(),this.audio.unregister())},IodineGBAWorkerShim.prototype.audioSetBufferSpace=function(e){e|=0,this.audio&&this.audio.setBufferSpace(0|e)},IodineGBAWorkerShim.prototype.buffersInitialize=function(e,t,i,r,a){this.gfxBuffers=[e,t],this.gfxCounters=i,this.audioSamplesRemaining=r,this.timestamp=a},IodineGBAWorkerShim.prototype.speedPush=function(e){e=+e,this.speed&&this.speed(+e)},IodineGBAWorkerShim.prototype.saveImportRequest=function(e){if(this.saveImport){var t=this;this.saveImport(e,(function(e){t.sendMessageDouble(20,e)}),(function(){t.sendMessageSingle(21)}))}},IodineGBAWorkerShim.prototype.saveExportRequest=function(e,t){this.saveExport&&this.saveExport(e,t)};var swfobject=function(){var e,t,i,r,a,s,o="undefined",n="object",h="Shockwave Flash",c="application/x-shockwave-flash",d="SWFObjectExprInst",u="onreadystatechange",p=window,l=document,f=navigator,m=!1,y=[function(){m?function(){var e=l.getElementsByTagName("body")[0],t=E(n);t.setAttribute("type",c);var i=e.appendChild(t);if(i){var r=0;!function(){if(typeof i.GetVariable!=o){var a=i.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),g.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,M()}()}else M()}():M()}],A=[],B=[],S=[],C=!1,R=!1,G=!0,g=function(){var e=typeof l.getElementById!=o&&typeof l.getElementsByTagName!=o&&typeof l.createElement!=o,t=f.userAgent.toLowerCase(),i=f.platform.toLowerCase(),r=/win/.test(i||t),a=/mac/.test(i||t),s=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),d=!1,u=[0,0,0],y=null;if(typeof f.plugins!=o&&typeof f.plugins[h]==n)!(y=f.plugins[h].description)||typeof f.mimeTypes!=o&&f.mimeTypes[c]&&!f.mimeTypes[c].enabledPlugin||(m=!0,d=!1,y=y.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),u[0]=parseInt(y.replace(/^(.*)\..*$/,"$1"),10),u[1]=parseInt(y.replace(/^.*\.(.*)\s.*$/,"$1"),10),u[2]=/[a-zA-Z]/.test(y)?parseInt(y.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof p.ActiveXObject!=o)try{var A=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");A&&(y=A.GetVariable("$version"))&&(d=!0,y=y.split(" ")[1].split(","),u=[parseInt(y[0],10),parseInt(y[1],10),parseInt(y[2],10)])}catch(e){}return{w3:e,pv:u,wk:s,ie:d,win:r,mac:a}}();g.w3&&((typeof l.readyState!=o&&"complete"==l.readyState||typeof l.readyState==o&&(l.getElementsByTagName("body")[0]||l.body))&&I(),C||(typeof l.addEventListener!=o&&l.addEventListener("DOMContentLoaded",I,!1),g.ie&&g.win&&(l.attachEvent(u,(function(){"complete"==l.readyState&&(l.detachEvent(u,arguments.callee),I())})),p==top&&function(){if(!C){try{l.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}I()}}()),g.wk&&function(){C||(/loaded|complete/.test(l.readyState)?I():setTimeout(arguments.callee,0))}(),O(I)));function I(){if(!C){try{var e=l.getElementsByTagName("body")[0].appendChild(E("span"));e.parentNode.removeChild(e)}catch(e){return}C=!0;for(var t=y.length,i=0;i<t;i++)y[i]()}}function v(e){C?e():y[y.length]=e}function O(e){if(typeof p.addEventListener!=o)p.addEventListener("load",e,!1);else if(typeof l.addEventListener!=o)l.addEventListener("load",e,!1);else if(typeof p.attachEvent!=o)!function(e,t,i){e.attachEvent(t,i),S[S.length]=[e,t,i]}(p,"onload",e);else if("function"==typeof p.onload){var t=p.onload;p.onload=function(){t(),e()}}else p.onload=e}function M(){var e=A.length;if(e>0)for(var t=0;t<e;t++){var i=A[t].id,r=A[t].callbackFn,a={success:!1,id:i};if(g.pv[0]>0){var s=_(i);if(s)if(!F(A[t].swfVersion)||g.wk&&g.wk<312)if(A[t].expressInstall&&D()){var n={};n.data=A[t].expressInstall,n.width=s.getAttribute("width")||"0",n.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(n.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(n.align=s.getAttribute("align"));for(var h={},c=s.getElementsByTagName("param"),d=c.length,u=0;u<d;u++)"movie"!=c[u].getAttribute("name").toLowerCase()&&(h[c[u].getAttribute("name")]=c[u].getAttribute("value"));T(n,h,i,r)}else P(s),r&&r(a);else W(i,!0),r&&(a.success=!0,a.ref=w(i),r(a))}else if(W(i,!0),r){var p=w(i);p&&typeof p.SetVariable!=o&&(a.success=!0,a.ref=p),r(a)}}}function w(e){var t=null,i=_(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=o)t=i;else{var r=i.getElementsByTagName(n)[0];r&&(t=r)}return t}function D(){return!R&&F("6.0.65")&&(g.win||g.mac)&&!(g.wk&&g.wk<312)}function T(a,s,n,h){R=!0,i=h||null,r={success:!1,id:n};var c=_(n);if(c){"OBJECT"==c.nodeName?(e=b(c),t=null):(e=c,t=n),a.id=d,(typeof a.width==o||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==o||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),l.title=l.title.slice(0,47)+" - Flash Player Installation";var u=g.ie&&g.win?"ActiveX":"PlugIn",f="MMredirectURL="+p.location.toString().replace(/&/g,"%26")+"&MMplayerType="+u+"&MMdoctitle="+l.title;if(typeof s.flashvars!=o?s.flashvars+="&"+f:s.flashvars=f,g.ie&&g.win&&4!=c.readyState){var m=E("div");n+="SWFObjectNew",m.setAttribute("id",n),c.parentNode.insertBefore(m,c),c.style.display="none",function(){4==c.readyState?c.parentNode.removeChild(c):setTimeout(arguments.callee,10)}()}k(a,s,n)}}function P(e){if(g.ie&&g.win&&4!=e.readyState){var t=E("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(b(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(b(e),e)}function b(e){var t=E("div");if(g.win&&g.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(n)[0];if(i){var r=i.childNodes;if(r)for(var a=r.length,s=0;s<a;s++)1==r[s].nodeType&&"PARAM"==r[s].nodeName||8==r[s].nodeType||t.appendChild(r[s].cloneNode(!0))}}return t}function k(e,t,i){var r,a=_(i);if(g.wk&&g.wk<312)return r;if(a)if(typeof e.id==o&&(e.id=i),g.ie&&g.win){var s="";for(var h in e)e[h]!=Object.prototype[h]&&("data"==h.toLowerCase()?t.movie=e[h]:"styleclass"==h.toLowerCase()?s+=' class="'+e[h]+'"':"classid"!=h.toLowerCase()&&(s+=" "+h+'="'+e[h]+'"'));var d="";for(var u in t)t[u]!=Object.prototype[u]&&(d+='<param name="'+u+'" value="'+t[u]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+d+"</object>",B[B.length]=e.id,r=_(e.id)}else{var p=E(n);for(var l in p.setAttribute("type",c),e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?p.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&p.setAttribute(l,e[l]));for(var f in t)t[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&N(p,f,t[f]);a.parentNode.replaceChild(p,a),r=p}return r}function N(e,t,i){var r=E("param");r.setAttribute("name",t),r.setAttribute("value",i),e.appendChild(r)}function x(e){var t=_(e);t&&"OBJECT"==t.nodeName&&(g.ie&&g.win?(t.style.display="none",function(){4==t.readyState?U(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function U(e){var t=_(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function _(e){var t=null;try{t=l.getElementById(e)}catch(e){}return t}function E(e){return l.createElement(e)}function F(e){var t=g.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function L(e,t,i,r){if(!g.ie||!g.mac){var h=l.getElementsByTagName("head")[0];if(h){var c=i&&"string"==typeof i?i:"screen";if(r&&(a=null,s=null),!a||s!=c){var d=E("style");d.setAttribute("type","text/css"),d.setAttribute("media",c),a=h.appendChild(d),g.ie&&g.win&&typeof l.styleSheets!=o&&l.styleSheets.length>0&&(a=l.styleSheets[l.styleSheets.length-1]),s=c}g.ie&&g.win?a&&typeof a.addRule==n&&a.addRule(e,t):a&&typeof l.createTextNode!=o&&a.appendChild(l.createTextNode(e+" {"+t+"}"))}}}function W(e,t){if(G){var i=t?"visible":"hidden";C&&_(e)?_(e).style.visibility=i:L("#"+e,"visibility:"+i)}}function V(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=o?encodeURIComponent(e):e}g.ie&&g.win&&window.attachEvent("onunload",(function(){for(var e=S.length,t=0;t<e;t++)S[t][0].detachEvent(S[t][1],S[t][2]);for(var i=B.length,r=0;r<i;r++)x(B[r]);for(var a in g)g[a]=null;for(var s in g=null,swfobject)swfobject[s]=null;swfobject=null}));return{registerObject:function(e,t,i,r){if(g.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=i,a.callbackFn=r,A[A.length]=a,W(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(g.w3)return w(e)},embedSWF:function(e,t,i,r,a,s,h,c,d,u){var p={success:!1,id:t};g.w3&&!(g.wk&&g.wk<312)&&e&&t&&i&&r&&a?(W(t,!1),v((function(){i+="",r+="";var l={};if(d&&typeof d===n)for(var f in d)l[f]=d[f];l.data=e,l.width=i,l.height=r;var m={};if(c&&typeof c===n)for(var y in c)m[y]=c[y];if(h&&typeof h===n)for(var A in h)typeof m.flashvars!=o?m.flashvars+="&"+A+"="+h[A]:m.flashvars=A+"="+h[A];if(F(a)){var B=k(l,m,t);l.id==t&&W(t,!0),p.success=!0,p.ref=B}else{if(s&&D())return l.data=s,void T(l,m,t,u);W(t,!0)}u&&u(p)}))):u&&u(p)},switchOffAutoHideShow:function(){G=!1},ua:g,getFlashPlayerVersion:function(){return{major:g.pv[0],minor:g.pv[1],release:g.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(e,t,i){return g.w3?k(e,t,i):void 0},showExpressInstall:function(e,t,i,r){g.w3&&D()&&T(e,t,i,r)},removeSWF:function(e){g.w3&&x(e)},createCSS:function(e,t,i,r){g.w3&&L(e,t,i,r)},addDomLoadEvent:v,addLoadEvent:O,getQueryParamValue:function(e){var t=l.location.search||l.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return V(t);for(var i=t.split("&"),r=0;r<i.length;r++)if(i[r].substring(0,i[r].indexOf("="))==e)return V(i[r].substring(i[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(R){var a=_(d);a&&e&&(a.parentNode.replaceChild(e,a),t&&(W(t,!0),g.ie&&g.win&&(e.style.display="block")),i&&i(r)),R=!1}}}}();function Resampler(e,t,i,r){if(this.fromSampleRate=+e,this.toSampleRate=+t,this.channels=0|i,"object"!=typeof r)throw new Error("inputBuffer is not an object.");if(!(r instanceof Array||r instanceof Float32Array||r instanceof Float64Array))throw new Error("inputBuffer is not an array or a float32 or a float64 array.");this.inputBuffer=r,this.initialize()}Resampler.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error("Invalid settings specified for the resampler.");this.fromSampleRate==this.toSampleRate?(this.resampler=this.bypassResampler,this.ratioWeight=1,this.outputBuffer=this.inputBuffer):(this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0),this.initializeBuffers())},Resampler.prototype.compileLinearInterpolationFunction=function(){for(var e="var outputOffset = 0;    if (bufferLength > 0) {        var buffer = this.inputBuffer;        var weight = this.lastWeight;        var firstWeight = 0;        var secondWeight = 0;        var sourceOffset = 0;        var outputOffset = 0;        var outputBuffer = this.outputBuffer;        for (; weight < 1; weight += "+this.ratioWeight+") {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (this.lastOutput["+t+"] * firstWeight) + (buffer["+t+"] * secondWeight);";e+="}        weight -= 1;        for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; sourceOffset < bufferLength;) {            secondWeight = weight % 1;            firstWeight = 1 - secondWeight;";for(t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(t>0?" + "+t:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+t)+"] * secondWeight);";e+="weight += "+this.ratioWeight+";            sourceOffset = Math.floor(weight) * "+this.channels+";        }";for(t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = buffer[sourceOffset++];";e+="this.lastWeight = weight % 1;    }    return outputOffset;",this.resampler=Function("bufferLength",e)},Resampler.prototype.compileMultiTapFunction=function(){for(var e="var outputOffset = 0;    if (bufferLength > 0) {        var buffer = this.inputBuffer;        var weight = 0;",t=0;t<this.channels;++t)e+="var output"+t+" = 0;";for(e+="var actualPosition = 0;        var amountToNext = 0;        var alreadyProcessedTail = !this.tailExists;        this.tailExists = false;        var outputBuffer = this.outputBuffer;        var currentPosition = 0;        do {            if (alreadyProcessedTail) {                weight = "+this.ratioWeight+";",t=0;t<this.channels;++t)e+="output"+t+" = 0;";for(e+="}            else {                weight = this.lastWeight;",t=0;t<this.channels;++t)e+="output"+t+" = this.lastOutput["+t+"];";for(e+="alreadyProcessedTail = true;            }            while (weight > 0 && actualPosition < bufferLength) {                amountToNext = 1 + actualPosition - currentPosition;                if (weight >= amountToNext) {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition++] * amountToNext;";for(e+="currentPosition = actualPosition;                    weight -= amountToNext;                }                else {",t=0;t<this.channels;++t)e+="output"+t+" += buffer[actualPosition"+(t>0?" + "+t:"")+"] * weight;";for(e+="currentPosition += weight;                    weight = 0;                    break;                }            }            if (weight <= 0) {",t=0;t<this.channels;++t)e+="outputBuffer[outputOffset++] = output"+t+" / "+this.ratioWeight+";";for(e+="}            else {                this.lastWeight = weight;",t=0;t<this.channels;++t)e+="this.lastOutput["+t+"] = output"+t+";";e+="this.tailExists = true;                break;            }        } while (actualPosition < bufferLength);    }    return outputOffset;",this.resampler=Function("bufferLength",e)},Resampler.prototype.bypassResampler=function(e){return e},Resampler.prototype.initializeBuffers=function(){var e=Math.ceil(this.inputBuffer.length*this.toSampleRate/this.fromSampleRate/this.channels*1.0000004768371582)*this.channels+this.channels;try{this.outputBuffer=new Float32Array(e),this.lastOutput=new Float32Array(this.channels)}catch(e){this.outputBuffer=[],this.lastOutput=[]}};var XAudioJSscriptsHandle=document.getElementsByTagName("script"),XAudioJSsourceHandle=XAudioJSscriptsHandle[XAudioJSscriptsHandle.length-1].src;function XAudioServer(e,t,i,r,a,s,o,n,h,c){XAudioJSChannelsAllocated=Math.max(e,1),this.XAudioJSSampleRate=Math.abs(t),XAudioJSMinBufferSize=i>=XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated&&i<r?i&-XAudioJSChannelsAllocated:XAudioJSSamplesPerCallback*XAudioJSChannelsAllocated,XAudioJSMaxBufferSize=Math.floor(r)>XAudioJSMinBufferSize+XAudioJSChannelsAllocated?r&-XAudioJSChannelsAllocated:XAudioJSMinBufferSize*XAudioJSChannelsAllocated,this.underRunCallback="function"==typeof a?a:function(){},XAudioJSCallbackAPIEventNotificationCallback="function"==typeof s?s:null,XAudioJSCallbackAPIEventNotificationCallback2="function"==typeof o?o:null,XAudioJSVolume=n>=0&&n<=1?n:1,this.failureCallback="function"==typeof h?h:function(){throw new Error("XAudioJS has encountered a fatal error.")},this.userEventLatch="object"==typeof c?c:null,this.initializeAudio()}function XAudioJSFlashAudioEvent(){XAudioJSCallbackAPIEventNotificationCallbackCompatTimerClear(),XAudioJSCallbackAPIEventNotification(),XAudioJSResampleRefill();var e=XAudioJSFlashTransportEncoder();return XAudioJSCallbackAPIEventNotification2(),e}function XAudioJSGenerateFlashSurroundString(){var e=XAudioJSSamplesPerCallback<<1;XAudioJSBinaryString.length>e&&(XAudioJSBinaryString=[]),e=0;for(var t=0;t<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;++t)XAudioJSBinaryString[e++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSBinaryString[e++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),(XAudioJSResampleBufferStart+=XAudioJSChannelsAllocated-2)==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}function XAudioJSGenerateFlashStereoString(){var e=XAudioJSSamplesPerCallback<<1;XAudioJSBinaryString.length>e&&(XAudioJSBinaryString=[]);for(var t=0;t<e&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;)XAudioJSBinaryString[t++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSBinaryString[t++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}function XAudioJSGenerateFlashMonoString(){XAudioJSBinaryString.length>XAudioJSSamplesPerCallback&&(XAudioJSBinaryString=[]);for(var e=0;e<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;)XAudioJSBinaryString[e++]=String.fromCharCode(12288+(16383*Math.min(Math.max(XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]+1,0),2)|0)),XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);return XAudioJSBinaryString.join("")}XAudioServer.prototype.MOZWriteAudioNoCallback=function(e,t){for(var i=Math.min(e.length,t),r=0;r<i;){for(var a=Math.min(i-r,XAudioJSMaxBufferSize),s=0;s<a;++s)XAudioJSAudioContextSampleBuffer[s]=e[r++];var o=XAudioJSResampleControl.resampler(s);if(o>0){var n=XAudioJSGetArraySlice(XAudioJSResampleControl.outputBuffer,o);this.samplesAlreadyWritten+=this.audioHandleMoz.mozWriteAudio(n)}}},XAudioServer.prototype.callbackBasedWriteAudioNoCallback=function(e,t){for(var i=Math.min(e.length,t),r=0;r<i&&XAudioJSAudioBufferSize<XAudioJSMaxBufferSize;)XAudioJSAudioContextSampleBuffer[XAudioJSAudioBufferSize++]=e[r++]},XAudioServer.prototype.writeAudio=function(e,t){switch(this.audioType){case 0:this.MOZWriteAudioNoCallback(e,t),this.MOZExecuteCallback();break;case 2:this.checkFlashInit();case 1:this.callbackBasedWriteAudioNoCallback(e,t),this.callbackBasedExecuteCallback();break;default:this.failureCallback()}},XAudioServer.prototype.writeAudioNoCallback=function(e,t){switch(this.audioType){case 0:this.MOZWriteAudioNoCallback(e,t);break;case 2:this.checkFlashInit();case 1:this.callbackBasedWriteAudioNoCallback(e,t);break;default:this.failureCallback()}},XAudioServer.prototype.remainingBuffer=function(){switch(this.audioType){case 0:return Math.floor((this.samplesAlreadyWritten-this.audioHandleMoz.mozCurrentSampleOffset())*XAudioJSResampleControl.ratioWeight/XAudioJSChannelsAllocated)*XAudioJSChannelsAllocated;case 2:this.checkFlashInit();case 1:return Math.floor(XAudioJSResampledSamplesLeft()*XAudioJSResampleControl.ratioWeight/XAudioJSChannelsAllocated)*XAudioJSChannelsAllocated+XAudioJSAudioBufferSize;default:return this.failureCallback(),null}},XAudioServer.prototype.MOZExecuteCallback=function(){var e=XAudioJSMinBufferSize-this.remainingBuffer();if(e>0){var t=this.underRunCallback(e);this.MOZWriteAudioNoCallback(t,t.length)}},XAudioServer.prototype.callbackBasedExecuteCallback=function(){var e=XAudioJSMinBufferSize-this.remainingBuffer();if(e>0){var t=this.underRunCallback(e);this.callbackBasedWriteAudioNoCallback(t,t.length)}},XAudioServer.prototype.executeCallback=function(){switch(this.audioType){case 0:this.MOZExecuteCallback();break;case 2:this.checkFlashInit();case 1:this.callbackBasedExecuteCallback();break;default:this.failureCallback()}},XAudioServer.prototype.initializeAudio=function(){try{this.initializeMozAudio()}catch(e){try{this.initializeWebAudio()}catch(e){try{this.initializeFlashAudio()}catch(e){this.audioType=-1,this.failureCallback()}}}},XAudioServer.prototype.initializeMozAudio=function(){this.audioHandleMoz=new Audio,this.audioHandleMoz.mozSetup(XAudioJSChannelsAllocated,XAudioJSMozAudioSampleRate),this.audioHandleMoz.volume=XAudioJSVolume,this.samplesAlreadyWritten=0,this.audioType=0;var e=this.XAudioJSSampleRate*XAudioJSChannelsAllocated/10|0;e-=e%XAudioJSChannelsAllocated,this.samplesAlreadyWritten-=e,this.initializeResampler(XAudioJSMozAudioSampleRate)},XAudioServer.prototype.initializeWebAudio=function(){if("undefined"==typeof AudioContext||void 0===XAudioJSWebAudioContextHandle)throw null;if(this.userEventLatch){var e=this,t=0;this.userEventLatch.addEventListener("click",(function(){0==t&&(e.setupWebAudio(),t|=1)}),!1),this.userEventLatch.addEventListener("touchstart",(function(){t<2&&(e.setupWebAudio(),t|=2)}),!1),this.userEventLatch.addEventListener("touchend",(function(){t<4&&(e.setupWebAudio(),t|=4)}),!1),this.resetCallbackAPIAudioBuffer(44100)}else this.setupWebAudio();this.audioType=1},XAudioServer.prototype.setupWebAudio=function(){XAudioJSWebAudioLaunchedContext&&XAudioJSWebAudioContextHandle.close();try{XAudioJSWebAudioContextHandle=new AudioContext}catch(e){XAudioJSWebAudioContextHandle=new webkitAudioContext}XAudioJSWebAudioLaunchedContext=!0,XAudioJSWebAudioAudioNode&&(XAudioJSWebAudioAudioNode.disconnect(),XAudioJSWebAudioAudioNode.onaudioprocess=null,XAudioJSWebAudioAudioNode=null);try{XAudioJSWebAudioAudioNode=XAudioJSWebAudioContextHandle.createScriptProcessor(XAudioJSSamplesPerCallback,0,XAudioJSChannelsAllocated)}catch(e){XAudioJSWebAudioAudioNode=XAudioJSWebAudioContextHandle.createJavaScriptNode(XAudioJSSamplesPerCallback,0,XAudioJSChannelsAllocated)}if(XAudioJSWebAudioAudioNode.onaudioprocess=XAudioJSWebAudioEvent,XAudioJSWebAudioAudioNode.connect(XAudioJSWebAudioContextHandle.destination),this.resetCallbackAPIAudioBuffer(XAudioJSWebAudioContextHandle.sampleRate),XAudioJSWebAudioWatchDogLast=(new Date).getTime(),!XAudioJSWebAudioWatchDogTimer&&navigator.userAgent.indexOf("Gecko/")>-1){XAudioJSWebAudioWatchDogTimer&&clearInterval(XAudioJSWebAudioWatchDogTimer);var e=this;XAudioJSWebAudioWatchDogTimer=setInterval((function(){if(void 0!==XAudioJSWebAudioContextHandle.state)if("suspended"===XAudioJSWebAudioContextHandle.state){XAudioJSWebAudioWatchDogLast=(new Date).getTime();try{XAudioJSWebAudioContextHandle.resume()}catch(e){}}else{(new Date).getTime()-XAudioJSWebAudioWatchDogLast>500&&e.setupWebAudio()}}),500)}},XAudioServer.prototype.initializeFlashAudio=function(){var e=document.getElementById("XAudioJS");switch(this.flashInitialized=!1,this.resetCallbackAPIAudioBuffer(44100),XAudioJSChannelsAllocated){case 1:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashMonoString;break;case 2:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashStereoString;break;default:XAudioJSFlashTransportEncoder=XAudioJSGenerateFlashSurroundString}if(null==e){this.audioHandleFlash=null;var t=this,i=document.createElement("div");i.setAttribute("style","position: fixed; bottom: 0px; right: 0px; margin: 0px; padding: 0px; border: none; width: 8px; height: 8px; overflow: hidden; z-index: -1000; ");var r=document.createElement("div");r.setAttribute("style","position: static; border: none; width: 0px; height: 0px; visibility: hidden; margin: 8px; padding: 0px;"),r.setAttribute("id","XAudioJS"),i.appendChild(r),document.getElementsByTagName("body")[0].appendChild(i),swfobject.embedSWF(XAudioJSsourceHandle.substring(0,XAudioJSsourceHandle.length-9)+"JS.swf","XAudioJS","8","8","9.0.0","",{},{allowscriptaccess:"always"},{style:"position: static; visibility: hidden; margin: 8px; padding: 0px; border: none"},(function(e){e.success?(t.audioHandleFlash=e.ref,t.checkFlashInit()):(t.failureCallback(),t.audioType=-1)}))}else this.audioHandleFlash=e,this.checkFlashInit();this.audioType=2},XAudioServer.prototype.changeVolume=function(e){if(e>=0&&e<=1)switch(XAudioJSVolume=e,this.audioType){case 0:this.audioHandleMoz.volume=XAudioJSVolume;case 1:break;case 2:this.flashInitialized?this.audioHandleFlash.changeVolume(XAudioJSVolume):this.checkFlashInit();break;default:this.failureCallback()}},XAudioServer.prototype.checkFlashInit=function(){if(!this.flashInitialized)try{this.audioHandleFlash&&this.audioHandleFlash.initialize&&(this.flashInitialized=!0,this.audioHandleFlash.initialize(XAudioJSChannelsAllocated,XAudioJSVolume))}catch(e){this.flashInitialized=!1}},XAudioServer.prototype.resetCallbackAPIAudioBuffer=function(e){XAudioJSAudioBufferSize=XAudioJSResampleBufferEnd=XAudioJSResampleBufferStart=0,this.initializeResampler(e),XAudioJSResampledBuffer=this.getFloat32(XAudioJSResampleBufferSize)},XAudioServer.prototype.initializeResampler=function(e){XAudioJSAudioContextSampleBuffer=this.getFloat32(XAudioJSMaxBufferSize),XAudioJSResampleControl=new Resampler(this.XAudioJSSampleRate,e,XAudioJSChannelsAllocated,XAudioJSAudioContextSampleBuffer),XAudioJSResampleBufferSize=XAudioJSResampleControl.outputBuffer.length},XAudioServer.prototype.getFloat32=function(e){try{return new Float32Array(e)}catch(e){return[]}};var XAudioJSWebAudioContextHandle=null,XAudioJSWebAudioAudioNode=null,XAudioJSWebAudioWatchDogTimer=null,XAudioJSCallbackAPIEventNotificationCallback=null,XAudioJSCallbackAPIEventNotificationCallback2=null,XAudioJSCallbackAPIEventNotificationCallbackCompatTimer=setInterval(XAudioJSCallbackAPIEventNotificationDual,16),XAudioJSWebAudioWatchDogLast=!1,XAudioJSWebAudioLaunchedContext=!1,XAudioJSAudioContextSampleBuffer=[],XAudioJSResampledBuffer=[],XAudioJSMinBufferSize=15e3,XAudioJSMaxBufferSize=25e3,XAudioJSChannelsAllocated=1,XAudioJSVolume=1,XAudioJSResampleControl=null,XAudioJSAudioBufferSize=0,XAudioJSResampleBufferStart=0,XAudioJSResampleBufferEnd=0,XAudioJSResampleBufferSize=0,XAudioJSMozAudioSampleRate=44100,XAudioJSSamplesPerCallback=2048,XAudioJSFlashTransportEncoder=null,XAudioJSBinaryString=[];function XAudioJSWebAudioEvent(e){XAudioJSWebAudioWatchDogTimer&&(XAudioJSWebAudioWatchDogLast=(new Date).getTime());for(var t=0,i=[];t<XAudioJSChannelsAllocated;++t)i[t]=e.outputBuffer.getChannelData(t);XAudioJSCallbackAPIEventNotificationCallbackCompatTimerClear(),XAudioJSCallbackAPIEventNotification(),XAudioJSResampleRefill();for(var r=0;r<XAudioJSSamplesPerCallback&&XAudioJSResampleBufferStart!=XAudioJSResampleBufferEnd;++r){for(t=0;t<XAudioJSChannelsAllocated;++t)i[t][r]=XAudioJSResampledBuffer[XAudioJSResampleBufferStart++]*XAudioJSVolume;XAudioJSResampleBufferStart==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0)}for(;r<XAudioJSSamplesPerCallback;){for(t=0;t<XAudioJSChannelsAllocated;++t)i[t][r]=0;++r}XAudioJSCallbackAPIEventNotification2()}function XAudioJSResampleRefill(){if(XAudioJSAudioBufferSize>0){for(var e=XAudioJSResampleControl.resampler(XAudioJSAudioBufferSize),t=XAudioJSResampleControl.outputBuffer,i=0;i<e;)XAudioJSResampledBuffer[XAudioJSResampleBufferEnd++]=t[i++],XAudioJSResampleBufferEnd==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferEnd=0),XAudioJSResampleBufferStart==XAudioJSResampleBufferEnd&&(XAudioJSResampleBufferStart+=XAudioJSChannelsAllocated)==XAudioJSResampleBufferSize&&(XAudioJSResampleBufferStart=0);XAudioJSAudioBufferSize=0}}function XAudioJSCallbackAPIEventNotificationCallbackCompatTimerClear(){XAudioJSCallbackAPIEventNotificationCallbackCompatTimer&&clearInterval(XAudioJSCallbackAPIEventNotificationCallbackCompatTimer)}function XAudioJSCallbackAPIEventNotification(){"function"==typeof XAudioJSCallbackAPIEventNotificationCallback&&XAudioJSCallbackAPIEventNotificationCallback()}function XAudioJSCallbackAPIEventNotification2(){"function"==typeof XAudioJSCallbackAPIEventNotificationCallback2&&XAudioJSCallbackAPIEventNotificationCallback2()}function XAudioJSCallbackAPIEventNotificationDual(){XAudioJSCallbackAPIEventNotification(),XAudioJSCallbackAPIEventNotification2()}function XAudioJSResampledSamplesLeft(){return(XAudioJSResampleBufferStart<=XAudioJSResampleBufferEnd?0:XAudioJSResampleBufferSize)+XAudioJSResampleBufferEnd-XAudioJSResampleBufferStart}function XAudioJSGetArraySlice(e,t){try{return e.subarray(0,t)}catch(i){try{return e.length=t,e}catch(i){return e.slice(0,t)}}}