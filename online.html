<!DOCTYPE html>
<meta charset='utf-8'>
<title>TheZZAZZGlitch's Fools2022: Return to Glitchland</title>
<meta name="viewport" content="width=1200">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=PT+Sans&display=swap" rel="stylesheet">

<script src="bootstrap/jquery-3.1.0.min.js"></script>
<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
<script src="bootstrap/js/bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css">

<link rel='stylesheet' href='style.css' type='text/css'>
<script src='script.js'></script>

<script>
    function iodineSet() {
        localStorage['IodineGBA_key_a'] = 90;
        localStorage['IodineGBA_key_b'] = 83;
        localStorage['IodineGBA_key_select'] = 32;
        localStorage['IodineGBA_toggleSmoothScaling'] = 'false';
        localStorage['IodineGBA_skipBoot'] = 'true';
    }
    iodineSet();
    setInterval(iodineSet, 1000);
</script>

<script src='save.js'></script>
<script src='iodineGBA.min.js'></script>

<div id='loader'><img src='img/loading.svg'></div>

<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html"><noscript>Please enable JavaScript to play</noscript> Fools2022</a>
        </div>
        <div class="navbar-collapse collapse" id="navbar"></div>
    </div>
</nav>
<div class="navbar-spacing"></div>

<div id="content">
    <div class="f-container panel panel-default">
        <div class="f-category">
            Online client
        </div>
        <div class="f-inside-padded">
            <div id="client-before">
                <p>
                    This is an HTML5-based online client for the event. It requires no configuration and can be played directly in your modern Web browser. There is only one thing that you have to provide on your own, and that's the ROM image of Pokémon Emerald (U).
                </p>
                <p>
                    Once you select the proper ROM, a JavaScript-based GBA emulator will start and the event save file will be automatically loaded. All progress will be automatically synchronized with the server.
                </p>
                <p>
                    Controls: Z for the A button, S for the B button, Enter for the Start button, Space for the Select button, arrow keys as the D-Pad.<br>
                    There's also touch controls, in case you want to play on a mobile device.
                </p>
                <input type='file' id='rom_load'>
                <label class='f-save-file-input' id="rom_load_inp" for='rom_load'>Select ROM image</label>
                <br><br>
                <span style='font-size:12px;color:#800;'>Note - this online emulator is not the best way to play the game. In fact, it's far from it.<br>
                It's hard to find good JavaScript GBA emulators. Play <a href='offline.html'>locally</a> - the online emulator should be used as a last resort.</span>
            </div>
            <div id="client-running" style='display:none'>
                <div id="main">
                    <canvas class="canvas" id="emulator_target" width="240" height="160"></canvas>
                    <div id='buttons' style="user-select: none; position: relative; width: 450px; height: 150px; margin: 20px auto 10px auto;">
                        <button style='position: absolute; left: 70px; top: 0;' class="f-gb-button" data-btn='6'>▲</button>
                        <button style='position: absolute; left: 70px; top: 70px;' class="f-gb-button" data-btn='7'>▼</button>
                        <button style='position: absolute; left: 0; top: 35px;' class="f-gb-button" data-btn='5'>◀</button>
                        <button style='position: absolute; left: 140px; top: 35px;' class="f-gb-button" data-btn='4'>▶</button>
                        <button style='position: absolute; right: 0; top: 35px;' class="f-gb-button" data-btn='0'>A</button>
                        <button style='position: absolute; right: 70px; top: 35px;' class="f-gb-button" data-btn='1'>B</button>
                        <button style='position: absolute; right: 165px; top: 10px;' class="f-gb-button f-gb-button-small" data-btn='3'>St</button>
                        <button style='position: absolute; right: 165px; bottom: 30px;' class="f-gb-button f-gb-button-small" data-btn='2'>Se</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="container" style='display:none'>
    <!--
        iodineGBA is so glued to the GUI, the only way to customize the appearance was to take the original GUI and hide it behind my own ._. 
    
        or maybe I'm doing something wrong, idk
    -->
    <div id="menu" class="paused">
        <ul class="menu" id="menu_top">
            <li>
                File
                <ul>
                    <li><span>BIOS: </span> <input type="file" id="bios_load" class="files"></li>
                </ul>
            </li>
            <li id="play" class="show">Play</li>
            <li id="pause" class="hide">Pause</li>
            <li id="restart">Restart</li>
            <li>
                Settings
                <ul>
                    <li>
                        <input type="checkbox" id="skip_boot"> Skip Boot Intro
                    </li>
                    <li>
                        <input type="checkbox" id="toggleSmoothScaling" checked="checked"> Smooth Scaling
                    </li>
                    <li>
                        <input type="checkbox" id="toggleDynamicSpeed"> Dynamic Speed
                    </li>
                    <li>
                        <input type="checkbox" id="offthread-cpu" checked="checked"> CPU off-thread
                    </li>
                    <li>
                        <input type="checkbox" id="offthread-gpu" checked="checked"> GPU off-thread
                    </li>
                    <li>
                        <input type="checkbox" id="sound"> Sound
                    </li>
                    <li>
                        GBA Bindings
                        <ul>
                            <li id="key_a">
                                <span>A</span>
                            </li>
                            <li id="key_b">
                                <span>B</span>
                            </li>
                            <li id="key_l">
                                <span>L</span>
                            </li>
                            <li id="key_r">
                                <span>R</span>
                            </li>
                            <li id="key_start">
                                <span>Start</span>
                            </li>
                            <li id="key_select">
                                <span>Select</span>
                            </li>
                            <li id="key_up">
                                <span>↑</span>
                            </li>
                            <li id="key_down">
                                <span>↓</span>
                            </li>
                            <li id="key_left">
                                <span>←</span>
                            </li>
                            <li id="key_right">
                                <span>→</span>
                            </li>
                        </ul>
                    </li>
                    <li>
                        Emulator Bindings
                        <ul>
                            <li id="key_volumeup">
                                <span>Volume Up</span>
                            </li>
                            <li id="key_volumedown">
                                <span>Volume Down</span>
                            </li>
                            <li id="key_speedup">
                                <span>Speed Up</span>
                            </li>
                            <li id="key_slowdown">
                                <span>Slow Down</span>
                            </li>
                            <li id="key_speedreset">
                                <span>Speed Reset</span>
                            </li>
                            <li id="key_fullscreen">
                                <span>Fullscreen</span>
                            </li>
                            <li id="key_playpause">
                                <span>Play/Pause</span>
                            </li>
                            <li id="key_restart">
                                <span>Restart</span>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li>
                Volume
                <ul>
                    <li>
                        <input type="range" id="volume">
                    </li>
                </ul>
            </li>
            <li id="saves_menu">
                Saves
                <ul id="saves_menu_container">
                    <li>
                        <span>Import:</span><input type="file" id="import" class="files">
                    </li>
                    <li id="existing_saves">
                        <span>Existing Saves</span>
                        <ul id="existing_saves_list">

                        </ul>
                    </li>
                    <li>
                        <a href="./" id="export" target="_new">Export All Saves</a>
                    </li>
                </ul>
            </li>
            <li id="fullscreen">Fullscreen</li>
            <li>
                <span id="speed">Speed</span>
                <ul>
                    <li>
                        <input type="range" id="speedset">
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="touch-controls">
        <div class="touch-dpad">
            <button id="touch-up">↑</button><br>
            <button id="touch-left">←</button>
            <button id="touch-right">→</button><br>
            <button id="touch-down">↓</button>
        </div>
        <div class="touch-buttons">
            <button id="touch-select">SELECT</button> 
            <button id="touch-start">START</button>
        </div>
        <div class="touch-buttons">
            <button id="touch-a">A</button>
            <button id="touch-b">B</button><br>
            <button id="touch-l">L</button>
            <button id="touch-r">R</button>
        </div>
    </div>
    <span class="message" id="tempMessage"></span>
</div>

<script src='glue.min.js'></script>